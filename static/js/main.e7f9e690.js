/*! For license information please see main.e7f9e690.js.LICENSE.txt */
(()=>{var __webpack_modules__={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var R=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function L(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case m:return"StrictMode";case S:return"Suspense";case x:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case k:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}var I=Array.isArray,U=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},M=[],D=-1;function z(e){return{current:e}}function B(e){0>D||(e.current=M[D],M[D]=null,D--)}function $(e,t){D++,M[D]=e.current,e.current=t}var V=z(null),j=z(null),H=z(null),q=z(null);function W(e,t){switch($(H,t),$(j,e),$(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(V),$(V,e)}function K(){B(V),B(j),B(H)}function G(e){null!==e.memoizedState&&$(q,e);var t=V.current,n=sd(t,e.type);t!==n&&($(j,e),$(V,n))}function Q(e){j.current===e&&(B(V),B(j)),q.current===e&&(B(q),Gd._currentValue=F)}var Z=Object.prototype.hasOwnProperty,Y=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,X=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,de=null;function he(e){if("function"===typeof le&&ue(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var ye=256,me=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function we(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=be(r):0!==(o&=a)?i=be(o):n||0!==(n=a&~e)&&(i=be(n)):0!==(a=r&~s)?i=be(a):0!==o?i=be(o):n||0!==(n=r&~e)&&(i=be(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function ve(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ee(){var e=ye;return 0===(4194048&(ye<<=1))&&(ye=256),e}function Se(){var e=me;return 0===(62914560&(me<<=1))&&(me=4194304),e}function xe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ae(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Re(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ne(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var Pe=Math.random().toString(36).slice(2),Le="__reactFiber$"+Pe,Ie="__reactProps$"+Pe,Ue="__reactContainer$"+Pe,Oe="__reactEvents$"+Pe,Fe="__reactListeners$"+Pe,Me="__reactHandles$"+Pe,De="__reactResources$"+Pe,ze="__reactMarker$"+Pe;function Be(e){delete e[Le],delete e[Ie],delete e[Oe],delete e[Fe],delete e[Me]}function $e(e){var t=e[Le];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ue]||n[Le]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Le])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function Ve(e){if(e=e[Le]||e[Ue]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function He(e){var t=e[De];return t||(t=e[De]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[ze]=!0}var We=new Set,Ke={};function Ge(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ke[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Ze,Ye,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xe={},et={};function tt(e,t,n){if(i=t,Z.call(et,i)||!Z.call(Xe,i)&&(Je.test(i)?et[i]=!0:(Xe[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ze)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ze=t&&t[1]||"",Ye=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ze+e+Ye}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),u=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function yt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ut(t)):null!=n?bt(e,o,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ut(a):e.removeAttribute("name")}function mt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function bt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function vt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function kt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(I(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Et(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&xt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&xt(e,s,t[s])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var At=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return Rt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,It=null;function Ut(e){var t=Ve(e);if(t&&(e=t.stateNode)){var n=e[Ie]||null;e:switch(e=t.stateNode,t.type){case"input":if(yt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ie]||null;if(!i)throw Error(o(90));yt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":vt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Ft(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Lt||null!==It)&&($u(),Lt&&(t=Lt,e=It,It=Lt=null,Ut(t),e)))for(t=0;t<e.length;t++)Ut(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ie]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Dt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),zt=!1;if(Dt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Ih){zt=!1}var $t=null,Vt=null,jt=null;function Ht(){if(jt)return jt;var e,t,n=Vt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return jt=i.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Kt(){return!1}function Gt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Qt,Zt,Yt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xt=Gt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Gt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Qt=e.screenX-Yt.screenX,Zt=e.screenY-Yt.screenY):Zt=Qt=0,Yt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),rn=Gt(nn),sn=Gt(h({},nn,{dataTransfer:0})),on=Gt(h({},en,{relatedTarget:0})),an=Gt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Gt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Gt(h({},Jt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var gn=Gt(h({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Gt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mn=Gt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),bn=Gt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Gt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),vn=Gt(h({},Jt,{newState:0,oldState:0})),kn=[9,13,27,32],En=Dt&&"CompositionEvent"in window,Sn=null;Dt&&"documentMode"in document&&(Sn=document.documentMode);var xn=Dt&&"TextEvent"in window&&!Sn,_n=Dt&&(!En||Sn&&8<Sn&&11>=Sn),Cn=String.fromCharCode(32),An=!1;function Rn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Nn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function In(e,t,n,r){Lt?It?It.push(r):It=[r]:Lt=r,0<(t=Hc(t,"onChange")).length&&(n=new Xt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Un=null,On=null;function Fn(e){Fc(e,0)}function Mn(e){if(ht(je(e)))return e}function Dn(e,t){if("change"===e)return t}var zn=!1;if(Dt){var Bn;if(Dt){var $n="oninput"in document;if(!$n){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),$n="function"===typeof Vn.oninput}Bn=$n}else Bn=!1;zn=Bn&&(!document.documentMode||9<document.documentMode)}function jn(){Un&&(Un.detachEvent("onpropertychange",Hn),On=Un=null)}function Hn(e){if("value"===e.propertyName&&Mn(On)){var t=[];In(t,On,e,Pt(e)),Ft(Fn,t)}}function qn(e,t,n){"focusin"===e?(jn(),On=n,(Un=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&jn()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(On)}function Kn(e,t){if("click"===e)return Mn(t)}function Gn(e,t){if("input"===e||"change"===e)return Mn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Z.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Xn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Dt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Zn(sr,r)||(sr=r,0<(r=Hc(ir,"onSelect")).length&&(t=new Xt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},dr={};function hr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return cr[e]=n[t];return e}Dt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),gr=hr("animationstart"),yr=hr("transitionrun"),mr=hr("transitionstart"),br=hr("transitioncancel"),wr=hr("transitionend"),vr=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){vr.set(e,t),Ge(t,[e])}kr.push("scrollEnd");var Sr=new WeakMap;function xr(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var _r=[],Cr=0,Ar=0;function Rr(){for(var e=Cr,t=Ar=Cr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var i=_r[t];_r[t++]=null;var s=_r[t];if(_r[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Lr(n,i,s)}}function Tr(e,t,n,r){_r[Cr++]=e,_r[Cr++]=t,_r[Cr++]=n,_r[Cr++]=r,Ar|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Nr(e,t,n,r){return Tr(e,t,n,r),Ir(e)}function Pr(e,t){return Tr(e,null,null,t),Ir(e)}function Lr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Ir(e){if(50<Lu)throw Lu=0,Iu=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ur={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Or(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dr(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Mr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Fr(31,n,t,i)).elementType=A,e.lanes=s,e;case y:return $r(n.children,i,s,t);case m:a=8,i|=24;break;case b:return(e=Fr(12,n,t,2|i)).elementType=b,e.lanes=s,e;case S:return(e=Fr(13,n,t,i)).elementType=S,e.lanes=s,e;case x:return(e=Fr(19,n,t,i)).elementType=x,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:case k:a=10;break e;case v:a=9;break e;case E:a=11;break e;case _:a=14;break e;case C:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function $r(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function jr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],qr=0,Wr=null,Kr=0,Gr=[],Qr=0,Zr=null,Yr=1,Jr="";function Xr(e,t){Hr[qr++]=Kr,Hr[qr++]=Wr,Wr=e,Kr=t}function ei(e,t,n){Gr[Qr++]=Yr,Gr[Qr++]=Jr,Gr[Qr++]=Zr,Zr=e;var r=Yr;e=Jr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yr=1<<32-fe(t)+i|n<<i|r,Jr=s+e}else Yr=1<<s|n<<i|r,Jr=e}function ti(e){null!==e.return&&(Xr(e,1),ei(e,1,0))}function ni(e){for(;e===Wr;)Wr=Hr[--qr],Hr[qr]=null,Kr=Hr[--qr],Hr[qr]=null;for(;e===Zr;)Zr=Gr[--Qr],Gr[Qr]=null,Jr=Gr[--Qr],Gr[Qr]=null,Yr=Gr[--Qr],Gr[Qr]=null}var ri=null,ii=null,si=!1,oi=null,ai=!1,li=Error(o(519));function ui(e){throw gi(xr(Error(o(418,"")),e)),li}function ci(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Le]=e,t[Ie]=r,n){case"dialog":Mc("cancel",t),Mc("close",t);break;case"iframe":case"object":case"embed":Mc("load",t);break;case"video":case"audio":for(n=0;n<Uc.length;n++)Mc(Uc[n],t);break;case"source":Mc("error",t);break;case"img":case"image":case"link":Mc("error",t),Mc("load",t);break;case"details":Mc("toggle",t);break;case"input":Mc("invalid",t),mt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Mc("invalid",t);break;case"textarea":Mc("invalid",t),kt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Zc(t.textContent,n)?(null!=r.popover&&(Mc("beforetoggle",t),Mc("toggle",t)),null!=r.onScroll&&Mc("scroll",t),null!=r.onScrollEnd&&Mc("scrollend",t),null!=r.onClick&&(t.onclick=Yc),t=!0):t=!1,t||ui(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!si)return di(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ii&&ui(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=md(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fd(e.type)?(e=bd,bd=null,ii=e):ii=n):ii=ri?md(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=oi;return null!==e&&(null===wu?wu=e:wu.push.apply(wu,e),oi=null),e}function gi(e){null===oi?oi=[e]:oi.push(e)}var yi=z(null),mi=null,bi=null;function wi(e,t,n){$(yi,t._currentValue),t._currentValue=n}function vi(e){e._currentValue=yi.current,B(yi)}function ki(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ki(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),ki(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Si(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===q.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}i=i.return}null!==e&&Ei(t,e,n,r),t.flags|=262144}function xi(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _i(e){mi=e,bi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Ri(mi,e)}function Ai(e,t){return null===mi&&_i(e),Ri(e,t)}function Ri(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bi){if(null===e)throw Error(o(308));bi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bi=bi.next=t;return n}var Ti="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ni=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,Li={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ii(){return{controller:new Ti,data:new Map,refCount:0}}function Ui(e){e.refCount--,0===e.refCount&&Ni(Pi,(function(){e.controller.abort()}))}var Oi=null,Fi=0,Mi=0,Di=null;function zi(){if(0===--Fi&&null!==Oi){null!==Di&&(Di.status="fulfilled");var e=Oi;Oi=null,Mi=0,Di=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bi=U.S;U.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Oi){var n=Oi=[];Fi=0,Mi=Tc(),Di={status:"pending",value:void 0,then:function(e){n.push(e)}}}Fi++,t.then(zi,zi)}(0,t),null!==Bi&&Bi(e,t)};var $i=z(null);function Vi(){var e=$i.current;return null!==e?e:ru.pooledCache}function ji(e,t){$($i,null===t?$i.current:t.pool)}function Hi(){var e=Vi();return null===e?null:{parent:Li._currentValue,pool:e}}var qi=Error(o(460)),Wi=Error(o(474)),Ki=Error(o(542)),Gi={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Zi(){}function Yi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Zi,Zi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Zi,Zi);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Ji=t,qi}}var Ji=null;function Xi(){if(null===Ji)throw Error(o(459));var e=Ji;return Ji=null,e}function es(e){if(e===qi||e===Ki)throw Error(o(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Ir(e),Lr(e,null,n),t}return Tr(e,r,t,n),Ir(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function us(){if(ls){if(null!==Di)throw Di}}function cs(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,c=u=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(su&f)===f:(r&f)===f){0!==f&&f===Mi&&(ls=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var g=e,y=a;f=t;var m=n;switch(y.tag){case 1:if("function"===typeof(g=y.payload)){d=g.call(m,d,f);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=y.payload)?g.call(m,d,f):g)||void 0===f)break e;d=h({},d,f);break e;case 2:ts=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===s&&(i.shared.lanes=0),fu|=o,e.lanes=o,e.memoizedState=d}}function ds(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ds(n[e],t)}var fs=z(null),ps=z(0);function gs(e,t){$(ps,e=du),$(fs,t),du=e|t.baseLanes}function ys(){$(ps,du),$(fs,fs.current)}function ms(){du=ps.current,B(fs),B(ps)}var bs=0,ws=null,vs=null,ks=null,Es=!1,Ss=!1,xs=!1,_s=0,Cs=0,As=null,Rs=0;function Ts(){throw Error(o(321))}function Ns(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Ps(e,t,n,r,i,s){return bs=s,ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=null===e||null===e.memoizedState?Wo:Ko,xs=!1,s=n(r,i),xs=!1,Ss&&(s=Is(t,n,r,i)),Ls(e),s}function Ls(e){U.H=qo;var t=null!==vs&&null!==vs.next;if(bs=0,ks=vs=ws=null,Es=!1,Cs=0,As=null,t)throw Error(o(300));null===e||Aa||null!==(e=e.dependencies)&&xi(e)&&(Aa=!0)}function Is(e,t,n,r){ws=e;var i=0;do{if(Ss&&(As=null),Cs=0,Ss=!1,25<=i)throw Error(o(301));if(i+=1,ks=vs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}U.H=Go,s=t(n,r)}while(Ss);return s}function Us(){var e=U.H,t=e.useState()[0];return t="function"===typeof t.then?Bs(t):t,e=e.useState()[0],(null!==vs?vs.memoizedState:null)!==e&&(ws.flags|=1024),t}function Os(){var e=0!==_s;return _s=0,e}function Fs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ms(e){if(Es){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Es=!1}bs=0,ks=vs=ws=null,Ss=!1,Cs=_s=0,As=null}function Ds(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ks?ws.memoizedState=ks=e:ks=ks.next=e,ks}function zs(){if(null===vs){var e=ws.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===ks?ws.memoizedState:ks.next;if(null!==t)ks=t,vs=e;else{if(null===e){if(null===ws.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===ks?ws.memoizedState=ks=e:ks=ks.next=e}return ks}function Bs(e){var t=Cs;return Cs+=1,null===As&&(As=[]),e=Yi(As,e,t),t=ws,null===(null===ks?t.memoizedState:ks.next)&&(t=t.alternate,U.H=null===t||null===t.memoizedState?Wo:Ko),e}function $s(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Bs(e);if(e.$$typeof===k)return Ci(e)}throw Error(o(438,String(e)))}function Vs(e){var t=null,n=ws.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ws.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=R;return t.index++,n}function js(e,t){return"function"===typeof t?t(e):t}function Hs(e){return qs(zs(),vs,e)}function qs(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,u=null,c=t=i.next,d=!1;do{var h=-536870913&c.lane;if(h!==c.lane?(su&h)===h:(bs&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===Mi&&(d=!0);else{if((bs&f)===f){c=c.next,f===Mi&&(d=!0);continue}h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,a=s):u=u.next=h,ws.lanes|=f,fu|=f}h=c.action,xs&&n(s,h),s=c.hasEagerState?c.eagerState:n(s,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,a=s):u=u.next=f,ws.lanes|=h,fu|=h;c=c.next}while(null!==c&&c!==t);if(null===u?a=s:u.next=l,!Qn(s,e.memoizedState)&&(Aa=!0,d&&null!==(n=Di)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=u,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ws(e){var t=zs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Qn(s,t.memoizedState)||(Aa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ks(e,t,n){var r=ws,i=zs(),s=si;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Qn((vs||i).memoizedState,n);if(a&&(i.memoizedState=n,Aa=!0),i=i.queue,mo(2048,8,Zs.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==ks&&1&ks.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,i,n,t),null),null===ru)throw Error(o(349));s||0!==(124&bs)||Gs(r,t,n)}return n}function Gs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ws.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qs(e,t,n,r){t.value=n,t.getSnapshot=r,Ys(t)&&Js(e)}function Zs(e,t,n){return n((function(){Ys(t)&&Js(e)}))}function Ys(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Js(e){var t=Pr(e,2);null!==t&&Fu(t,e,2)}function Xs(e){var t=Ds();if("function"===typeof e){var n=e;if(e=n(),xs){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,qs(e,vs,"function"===typeof r?r:js)}function to(e,t,n,r,i){if(Vo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==U.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,no(t,s)):(s.next=n.next,t.pending=n.next=s)}}function no(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=U.T,o={};U.T=o;try{var a=n(i,r),l=U.S;null!==l&&l(o,a),ro(e,t,a)}catch(u){so(e,t,u)}finally{U.T=s}}else try{ro(e,t,s=n(i,r))}catch(c){so(e,t,c)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){io(e,t,n)}),(function(n){return so(e,t,n)})):io(e,t,n)}function io(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function so(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(si){var n=ru.formState;if(null!==n){e:{var r=ws;if(si){if(ii){t:{for(var i=ii,s=ai;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=md(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=md(i.nextSibling),r="F!"===i.data;break e}}ui(r)}r=!1}r&&(t=n[0])}}return(n=Ds()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=zo.bind(null,ws,r),r.dispatch=n,r=Xs(!1),s=$o.bind(null,ws,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Ds()).queue=i,n=to.bind(null,ws,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function uo(e){return co(zs(),vs,e)}function co(e,t,n){if(t=qs(e,t,ao)[0],e=Hs(js)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Bs(t)}catch(o){if(o===qi)throw Ki;throw o}else r=t;var i=(t=zs()).queue,s=i.dispatch;return n!==t.memoizedState&&(ws.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,i,n),null)),[r,s,e]}function ho(e,t){e.action=t}function fo(e){var t=zs(),n=vs;if(null!==n)return co(t,n,e);zs(),t=t.memoizedState;var r=(n=zs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function po(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ws.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return zs().memoizedState}function yo(e,t,n,r){var i=Ds();r=void 0===r?null:r,ws.flags|=e,i.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,r)}function mo(e,t,n,r){var i=zs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==vs&&null!==r&&Ns(r,vs.memoizedState.deps)?i.memoizedState=po(t,s,n,r):(ws.flags|=e,i.memoizedState=po(1|t,s,n,r))}function bo(e,t){yo(8390656,8,e,t)}function wo(e,t){mo(2048,8,e,t)}function vo(e,t){return mo(4,2,e,t)}function ko(e,t){return mo(4,4,e,t)}function Eo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function So(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,mo(4,4,Eo.bind(null,t,e),n)}function xo(){}function _o(e,t){var n=zs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ns(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=zs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ns(t,r[1]))return r[0];if(r=e(),xs){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ao(e,t,n){return void 0===n||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=n,e=Ou(),ws.lanes|=e,fu|=e,n)}function Ro(e,t,n,r){return Qn(n,t)?n:null!==fs.current?(e=Ao(e,n,r),Qn(e,t)||(Aa=!0),e):0===(42&bs)?(Aa=!0,e.memoizedState=n):(e=Ou(),ws.lanes|=e,fu|=e,t)}function To(e,t,n,r,i){var s=O.p;O.p=0!==s&&8>s?s:8;var o=U.T,a={};U.T=a,$o(e,!1,t,n);try{var l=i(),u=U.S;if(null!==u&&u(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Bo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Uu());else Bo(e,t,r,Uu())}catch(c){Bo(e,t,{then:function(){},status:"rejected",reason:c},Uu())}finally{O.p=s,U.T=o}}function No(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Lo(e).queue;To(e,i,t,F,null===n?No:function(){return Io(e),n(r)})}function Lo(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:F},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Io(e){Bo(e,Lo(e).next.queue,{},Uu())}function Uo(){return Ci(Gd)}function Oo(){return zs().memoizedState}function Fo(){return zs().memoizedState}function Mo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Uu(),r=ss(t,e=is(n),n);return null!==r&&(Fu(r,t,n),os(r,t,n)),t={cache:Ii()},void(e.payload=t)}t=t.return}}function Do(e,t,n){var r=Uu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Vo(e)?jo(t,n):null!==(n=Nr(e,t,n,r))&&(Fu(n,e,r),Ho(n,t,r))}function zo(e,t,n){Bo(e,t,n,Uu())}function Bo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vo(e))jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,o))return Tr(e,t,i,0),null===ru&&Rr(),!1}catch(l){}if(null!==(n=Nr(e,t,i,r)))return Fu(n,e,r),Ho(n,t,r),!0}return!1}function $o(e,t,n,r){if(r={lane:2,revertLane:Tc(),action:r,hasEagerState:!1,eagerState:null,next:null},Vo(e)){if(t)throw Error(o(479))}else null!==(t=Nr(e,n,r,2))&&Fu(t,e,2)}function Vo(e){var t=e.alternate;return e===ws||null!==t&&t===ws}function jo(e,t){Ss=Es=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ho(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ae(e,n)}}var qo={readContext:Ci,use:$s,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useLayoutEffect:Ts,useInsertionEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useSyncExternalStore:Ts,useId:Ts,useHostTransitionStatus:Ts,useFormState:Ts,useActionState:Ts,useOptimistic:Ts,useMemoCache:Ts,useCacheRefresh:Ts},Wo={readContext:Ci,use:$s,useCallback:function(e,t){return Ds().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:bo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4194308,4,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){yo(4,2,e,t)},useMemo:function(e,t){var n=Ds();t=void 0===t?null:t;var r=e();if(xs){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ds();if(void 0!==n){var i=n(t);if(xs){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Do.bind(null,ws,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ds().memoizedState=e},useState:function(e){var t=(e=Xs(e)).queue,n=zo.bind(null,ws,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:xo,useDeferredValue:function(e,t){return Ao(Ds(),e,t)},useTransition:function(){var e=Xs(!1);return e=To.bind(null,ws,e.queue,!0,!1),Ds().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ws,i=Ds();if(si){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===ru)throw Error(o(349));0!==(124&su)||Gs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,bo(Zs.bind(null,r,s,e),[e]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,s,n,t),null),n},useId:function(){var e=Ds(),t=ru.identifierPrefix;if(si){var n=Jr;t="\xab"+t+"R"+(n=(Yr&~(1<<32-fe(Yr)-1)).toString(32)+n),0<(n=_s++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Rs++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Uo,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Ds();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=$o.bind(null,ws,!0,n),n.dispatch=t,[e,t]},useMemoCache:Vs,useCacheRefresh:function(){return Ds().memoizedState=Mo.bind(null,ws)}},Ko={readContext:Ci,use:$s,useCallback:_o,useContext:Ci,useEffect:wo,useImperativeHandle:So,useInsertionEffect:vo,useLayoutEffect:ko,useMemo:Co,useReducer:Hs,useRef:go,useState:function(){return Hs(js)},useDebugValue:xo,useDeferredValue:function(e,t){return Ro(zs(),vs.memoizedState,e,t)},useTransition:function(){var e=Hs(js)[0],t=zs().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Ks,useId:Oo,useHostTransitionStatus:Uo,useFormState:uo,useActionState:uo,useOptimistic:function(e,t){return eo(zs(),0,e,t)},useMemoCache:Vs,useCacheRefresh:Fo},Go={readContext:Ci,use:$s,useCallback:_o,useContext:Ci,useEffect:wo,useImperativeHandle:So,useInsertionEffect:vo,useLayoutEffect:ko,useMemo:Co,useReducer:Ws,useRef:go,useState:function(){return Ws(js)},useDebugValue:xo,useDeferredValue:function(e,t){var n=zs();return null===vs?Ao(n,e,t):Ro(n,vs.memoizedState,e,t)},useTransition:function(){var e=Ws(js)[0],t=zs().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:Ks,useId:Oo,useHostTransitionStatus:Uo,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=zs();return null!==vs?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Vs,useCacheRefresh:Fo},Qo=null,Zo=0;function Yo(e){var t=Zo;return Zo+=1,null===Qo&&(Qo=[]),Yi(Qo,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xo(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Dr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&ea(s)===t.type)?(Jo(t=i(t,n.props),n),t.return=e,t):(Jo(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=$r(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Jo(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=jr(t,e.mode,n)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),n)}if(I(t)||N(t))return(t=$r(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Yo(t),n);if(t.$$typeof===k)return h(e,Ai(e,t),n);Xo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?u(e,t,n,r):null;case g:return n.key===i?c(e,t,n,r):null;case C:return f(e,t,n=(i=n._init)(n._payload),r)}if(I(n)||N(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Yo(n),r);if(n.$$typeof===k)return f(e,t,Ai(e,n),r);Xo(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return m(e,t,n,r=(0,r._init)(r._payload),i)}if(I(r)||N(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return m(e,t,n,Yo(r),i);if(r.$$typeof===k)return m(e,t,n,Ai(t,r),i);Xo(t,r)}return null}function b(l,u,c,d){if("object"===typeof c&&null!==c&&c.type===y&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case p:e:{for(var w=c.key;null!==u;){if(u.key===w){if((w=c.type)===y){if(7===u.tag){n(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===C&&ea(w)===u.type){n(l,u.sibling),Jo(d=i(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===y?((d=$r(c.props.children,l.mode,d,c.key)).return=l,l=d):(Jo(d=Br(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return a(l);case g:e:{for(w=c.key;null!==u;){if(u.key===w){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=jr(c,l.mode,d)).return=l,l=d}return a(l);case C:return b(l,u,c=(w=c._init)(c._payload),d)}if(I(c))return function(i,o,a,l){for(var u=null,c=null,d=o,p=o=0,g=null;null!==d&&p<a.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(i,d,a[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,p),null===c?u=y:c.sibling=y,c=y,d=g}if(p===a.length)return n(i,d),si&&Xr(i,p),u;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(o=s(d,o,p),null===c?u=d:c.sibling=d,c=d);return si&&Xr(i,p),u}for(d=r(d);p<a.length;p++)null!==(g=m(d,i,p,a[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),o=s(g,o,p),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(i,e)})),si&&Xr(i,p),u}(l,u,c,d);if(N(c)){if("function"!==typeof(w=N(c)))throw Error(o(150));return function(i,a,l,u){if(null==l)throw Error(o(151));for(var c=null,d=null,p=a,g=a=0,y=null,b=l.next();null!==p&&!b.done;g++,b=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var w=f(i,p,b.value,u);if(null===w){null===p&&(p=y);break}e&&p&&null===w.alternate&&t(i,p),a=s(w,a,g),null===d?c=w:d.sibling=w,d=w,p=y}if(b.done)return n(i,p),si&&Xr(i,g),c;if(null===p){for(;!b.done;g++,b=l.next())null!==(b=h(i,b.value,u))&&(a=s(b,a,g),null===d?c=b:d.sibling=b,d=b);return si&&Xr(i,g),c}for(p=r(p);!b.done;g++,b=l.next())null!==(b=m(p,i,g,b.value,u))&&(e&&null!==b.alternate&&p.delete(null===b.key?g:b.key),a=s(b,a,g),null===d?c=b:d.sibling=b,d=b);return e&&p.forEach((function(e){return t(i,e)})),si&&Xr(i,g),c}(l,u,c=w.call(c),d)}if("function"===typeof c.then)return b(l,u,Yo(c),d);if(c.$$typeof===k)return b(l,u,Ai(l,c),d);Xo(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=i(u,c)).return=l,l=d):(n(l,u),(d=Vr(c,l.mode,d)).return=l,l=d),a(l)):n(l,u)}return function(e,t,n,r){try{Zo=0;var i=b(e,t,n,r);return Qo=null,i}catch(o){if(o===qi||o===Ki)throw o;var s=Fr(29,o,null,e.mode);return s.lanes=r,s.return=e,s}}}var na=ta(!0),ra=ta(!1),ia=z(null),sa=null;function oa(e){var t=e.alternate;$(ca,1&ca.current),$(ia,e),null===sa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(sa=e)}function aa(e){if(22===e.tag){if($(ca,ca.current),$(ia,e),null===sa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sa=e)}}else la()}function la(){$(ca,ca.current),$(ia,ia.current)}function ua(e){B(ia),sa===e&&(sa=null),B(ca)}var ca=z(0);function da(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Uu(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Fu(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Uu(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Fu(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Uu(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Fu(t,e,n),os(t,e,n))}};function pa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(i,s))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ya(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ma="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ba(e){ma(e)}function wa(e){console.error(e)}function va(e){ma(e)}function ka(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Ea(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Sa(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){ka(e,t)},n}function xa(e){return(e=is(e)).tag=3,e}function _a(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Ea(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ea(t,n,r),"function"!==typeof i&&(null===xu?xu=new Set([this]):xu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),Aa=!1;function Ra(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Ta(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return _i(t),r=Ps(e,t,n,o,s,i),a=Os(),null===e||Aa?(si&&a&&ti(t),t.flags|=1,Ra(e,t,r,i),t.child):(Fs(e,t,i),Qa(e,t,i))}function Na(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,!Za(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(o,r)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,(e=Dr(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Zn(s,r)&&e.ref===t.ref){if(Aa=!1,t.pendingProps=r=s,!Za(e,i))return t.lanes=e.lanes,Qa(e,t,i);0!==(131072&e.flags)&&(Aa=!0)}}return Oa(e,t,n,r,i)}function La(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Ia(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ia(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&ji(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ys(),aa(t)}else null!==s?(ji(0,s.cachePool),gs(t,s),la(),t.memoizedState=null):(null!==e&&ji(0,null),ys(),la());return Ra(e,t,i,n),t.child}function Ia(e,t,n,r){var i=Vi();return i=null===i?null:{parent:Li._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&ji(0,null),ys(),aa(t),null!==e&&Si(e,t,r,!0),null}function Ua(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oa(e,t,n,r,i){return _i(t),n=Ps(e,t,n,r,void 0,i),r=Os(),null===e||Aa?(si&&r&&ti(t),t.flags|=1,Ra(e,t,n,i),t.child):(Fs(e,t,i),Qa(e,t,i))}function Fa(e,t,n,r,i,s){return _i(t),t.updateQueue=null,n=Is(t,r,n,i),Ls(e),r=Os(),null===e||Aa?(si&&r&&ti(t),t.flags|=1,Ra(e,t,n,s),t.child):(Fs(e,t,s),Qa(e,t,s))}function Ma(e,t,n,r,i){if(_i(t),null===t.stateNode){var s=Ur,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ci(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ci(o):Ur,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ha(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&fa.enqueueReplaceState(s,s.state,null),cs(t,r,s,i),us(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ya(n,a);s.props=l;var u=s.context,c=n.contextType;o=Ur,"object"===typeof c&&null!==c&&(o=Ci(c));var d=n.getDerivedStateFromProps;c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||u!==o)&&ga(t,s,r,o),ts=!1;var h=t.memoizedState;s.state=h,cs(t,r,s,i),us(),u=t.memoizedState,a||h!==u||ts?("function"===typeof d&&(ha(t,n,d,r),u=t.memoizedState),(l=ts||pa(t,n,l,r,h,u,o))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),c=ya(n,o=t.memoizedProps),s.props=c,d=t.pendingProps,h=s.context,u=n.contextType,l=Ur,"object"===typeof u&&null!==u&&(l=Ci(u)),(u="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ga(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,cs(t,r,s,i),us();var f=t.memoizedState;o!==d||h!==f||ts||null!==e&&null!==e.dependencies&&xi(e.dependencies)?("function"===typeof a&&(ha(t,n,a,r),f=t.memoizedState),(c=ts||pa(t,n,c,r,h,f,l)||null!==e&&null!==e.dependencies&&xi(e.dependencies))?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ua(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):Ra(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Qa(e,t,i),e}function Da(e,t,n,r){return fi(),t.flags|=256,Ra(e,t,n,r),t.child}var za={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ba(e){return{baseLanes:e,cachePool:Hi()}}function $a(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yu),e}function Va(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ca.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?oa(t):la(),si){var l,u=ii;if(l=u){e:{for(l=u,u=ai;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=md(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Zr?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Fr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ui(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return yd(u)?t.lanes=32:t.lanes=536870912,null;ua(t)}return u=i.children,i=i.fallback,s?(la(),u=Ha({mode:"hidden",children:u},s=t.mode),i=$r(i,s,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(s=t.child).memoizedState=Ba(n),s.childLanes=$a(e,r,n),t.memoizedState=za,i):(oa(t),ja(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=qa(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),s=i.fallback,u=t.mode,i=Ha({mode:"visible",children:i.children},u),(s=$r(s,u,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=Ba(n),i.childLanes=$a(e,r,n),t.memoizedState=za,t=s);else if(oa(t),yd(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(o(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=qa(e,t,n)}else if(Aa||Si(e,t,n,!1),r=0!==(n&e.childLanes),Aa||r){if(null!==(r=ru)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Re(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Fu(r,e,i),Ca;"$?"===u.data||Ku(),t=qa(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=md(u.nextSibling),ri=t,si=!0,oi=null,ai=!1,null!==e&&(Gr[Qr++]=Yr,Gr[Qr++]=Jr,Gr[Qr++]=Zr,Yr=e.id,Jr=e.overflow,Zr=t),(t=ja(t,i.children)).flags|=4096);return t}return s?(la(),s=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Dr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?s=Dr(c,s):(s=$r(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(u=e.child.memoizedState)?u=Ba(n):(null!==(l=u.cachePool)?(c=Li._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Hi(),u={baseLanes:u.baseLanes|n,cachePool:l}),s.memoizedState=u,s.childLanes=$a(e,r,n),t.memoizedState=za,i):(oa(t),e=(n=e.child).sibling,(n=Dr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function ja(e,t){return(t=Ha({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ha(e,t){return(e=Fr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qa(e,t,n){return na(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ki(e.return,t,n)}function Ka(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ga(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ra(e,t,r.children,n),0!==(2&(r=ca.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch($(ca,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===da(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ka(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===da(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ka(t,!0,n,null,s);break;case"together":Ka(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Si(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Za(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!xi(e))}function Ya(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Aa=!0;else{if(!Za(e,n)&&0===(128&t.flags))return Aa=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),wi(0,Li,e.memoizedState.cache),fi();break;case 27:case 5:G(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:wi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(oa(t),null!==(e=Qa(e,t,n))?e.sibling:null);oa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Si(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ga(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),$(ca,ca.current),r)break;return null;case 22:case 23:return t.lanes=0,La(e,t,n);case 24:wi(0,Li,e.memoizedState.cache)}return Qa(e,t,n)}(e,t,n);Aa=0!==(131072&e.flags)}else Aa=!1,si&&0!==(1048576&t.flags)&&ei(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===E){t.tag=11,t=Ta(null,t,r,e,n);break e}if(i===_){t.tag=14,t=Na(null,t,r,e,n);break e}}throw t=L(r)||r,Error(o(306,t,""))}Mr(r)?(e=ya(r,e),t.tag=1,t=Ma(null,t,r,e,n)):(t.tag=0,t=Oa(null,t,r,e,n))}return t;case 0:return Oa(e,t,t.type,t.pendingProps,n);case 1:return Ma(e,t,r=t.type,i=ya(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),cs(t,r,null,n);var a=t.memoizedState;if(r=a.cache,wi(0,Li,r),r!==s.cache&&Ei(t,[Li],n,!0),us(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Da(e,t,r,n);break e}if(r!==i){gi(i=xr(Error(o(424)),t)),t=Da(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=md(e.firstChild),ri=t,si=!0,oi=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Qa(e,t,n);break e}Ra(e,t,r,n)}t=t.child}return t;case 26:return Ua(e,t),null===e?(n=Rd(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[Le]=t,r[Ie]=e,ed(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Rd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return G(t),null===e&&si&&(r=t.stateNode=vd(t.type,t.pendingProps,H.current),ri=t,ai=!0,i=ii,fd(t.type)?(bd=i,ii=md(r.firstChild)):ii=i),Ra(e,t,t.pendingProps.children,n),Ua(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=md(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=md(r.firstChild),ai=!1,i=!0):i=!1),i||ui(t)),G(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,od(i,s)?r=null:null!==a&&od(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ps(e,t,Us,null,null,n),Gd._currentValue=i),Ua(e,t),Ra(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=md(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ui(t)),null;case 13:return Va(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):Ra(e,t,r,n),t.child;case 11:return Ta(e,t,t.type,t.pendingProps,n);case 7:return Ra(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ra(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wi(0,t.type,r.value),Ra(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,_i(t),r=r(i=Ci(i)),t.flags|=1,Ra(e,t,r,n),t.child;case 14:return Na(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Ga(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ha(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Dr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return La(e,t,n);case 24:return _i(t),r=Ci(Li),null===e?(null===(i=Vi())&&(i=ru,s=Ii(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),wi(0,Li,i)):(0!==(e.lanes&n)&&(rs(e,t),cs(t,null,null,n),us()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),wi(0,Li,r)):(r=s.cache,wi(0,Li,r),r!==i.cache&&Ei(t,[Li],n,!0))),Ra(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function Xa(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!$d(t)){if(null!==(t=ia.current)&&((4194048&su)===su?null!==sa:(62914560&su)!==su&&0===(536870912&su)||t!==sa))throw Ji=Gi,Wi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,mu|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),vi(Li),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),Xa(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),Xa(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=V.current,hi(t)?ci(t):(e=vd(i,r,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=V.current,hi(t))ci(t);else{switch(i=rd(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Le]=t,e[Ie]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=H.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Le]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Zc(e.nodeValue,n)))||ui(t)}else(e=rd(e).createTextNode(r))[Le]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Le]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ua(t),t):(ua(t),null)}if(ua(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return K(),null===e&&Bc(t.stateNode.containerInfo),nl(t),null;case 10:return vi(t.type),nl(t),null;case 19:if(B(ca),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==hu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=da(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return $(ca,1&ca.current|2),t.child}e=e.sibling}null!==i.tail&&te()>Eu&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=da(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>Eu&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ca.current,$(ca,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ua(t),ms(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B($i),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),vi(Li),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vi(Li),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(ca),null;case 4:return K(),null;case 10:return vi(t.type),null;case 22:case 23:return ua(t),ms(),null!==e&&B($i),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return vi(Li),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:vi(Li),K();break;case 26:case 27:case 5:Q(t);break;case 4:K();break;case 13:ua(t);break;case 19:B(ca);break;case 10:vi(t.type);break;case 22:case 23:ua(t),ms(),null!==e&&B($i);break;case 24:vi(Li)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){cc(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,u=a;try{u()}catch(c){cc(i,l,c)}}}r=r.next}while(r!==s)}}catch(c){cc(t,t.return,c)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(r){cc(e,e.return,r)}}}function ul(e,t,n){n.props=ya(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){cc(e,t,r)}}function cl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){cc(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){cc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){cc(e,t,s)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){cc(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,u=null,c=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:r.hasOwnProperty(p)||Jc(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&Jc(e,t,f,p,r,h)}}return void yt(e,a,l,u,c,d,s,i);case"select":for(s in p=a=l=f=null,n)if(u=n[s],n.hasOwnProperty(s)&&null!=u)switch(s){case"value":break;case"multiple":p=u;default:r.hasOwnProperty(s)||Jc(e,t,s,null,r,u)}for(i in r)if(s=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=s||null!=u))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&Jc(e,t,i,s,r,u)}return t=l,n=a,r=p,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Jc(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Jc(e,t,a,i,r,s)}return void vt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Jc(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))if("selected"===u)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Jc(e,t,u,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&Jc(e,t,y,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Jc(e,t,c,f,r,p)}return;default:if(Ct(t)){for(var m in n)f=n[m],n.hasOwnProperty(m)&&void 0!==f&&!r.hasOwnProperty(m)&&Xc(e,t,m,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Xc(e,t,d,f,r,p);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&null!=f&&!r.hasOwnProperty(b)&&Jc(e,t,b,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Jc(e,t,h,f,r,p)}(r,e.type,n,t),r[Ie]=t}catch(i){cc(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Yc));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[Le]=e,t[Ie]=n}catch(s){cc(e,e.return,s)}}var wl=!1,vl=!1,kl=!1,El="function"===typeof WeakSet?WeakSet:Set,Sl=null;function xl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ml(e,n),4&r&&ol(5,n);break;case 1:if(Ml(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){cc(n,n.return,o)}else{var i=ya(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){cc(n,n.return,a)}}64&r&&ll(n),512&r&&cl(n,n.return);break;case 3:if(Ml(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(o){cc(n,n.return,o)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Ml(e,n),null===t&&4&r&&hl(n),512&r&&cl(n,n.return);break;case 12:Ml(e,n);break;case 13:Ml(e,n),4&r&&Nl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||vl,i=wl;var s=vl;wl=r,(vl=t)&&!s?zl(e,n,0!==(8772&n.subtreeFlags)):Ml(e,n),wl=i,vl=s}break;case 30:break;default:Ml(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,Al=!1;function Rl(e,t,n){for(n=n.child;null!==n;)Tl(e,t,n),n=n.sibling}function Tl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(s){}switch(n.tag){case 26:vl||dl(n,t),Rl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:vl||dl(n,t);var r=Cl,i=Al;fd(n.type)&&(Cl=n.stateNode,Al=!1),Rl(e,t,n),kd(n.stateNode),Cl=r,Al=i;break;case 5:vl||dl(n,t);case 6:if(r=Cl,i=Al,Cl=null,Rl(e,t,n),Al=i,null!==(Cl=r))if(Al)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){cc(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){cc(n,t,o)}break;case 18:null!==Cl&&(Al?(pd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ah(e)):pd(Cl,n.stateNode));break;case 4:r=Cl,i=Al,Cl=n.stateNode.containerInfo,Al=!0,Rl(e,t,n),Cl=r,Al=i;break;case 0:case 11:case 14:case 15:vl||al(2,n,t),vl||al(4,n,t),Rl(e,t,n);break;case 1:vl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Rl(e,t,n);break;case 21:Rl(e,t,n);break;case 22:vl=(r=vl)||null!==n.memoizedState,Rl(e,t,n),vl=r;break;default:Rl(e,t,n)}}function Nl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ah(e)}catch(n){cc(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new El),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new El),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var r=gc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Ll(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Cl=l.stateNode,Al=!1;break e}break;case 5:Cl=l.stateNode,Al=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Tl(s,a,i),Cl=null,Al=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ul(t,e),t=t.sibling}var Il=null;function Ul(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ll(t,e),Ol(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Ll(t,e),Ol(e),512&r&&(vl||null===n||dl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Il;if(Ll(t,e),Ol(e),512&r&&(vl||null===n||dl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[ze]||s[Le]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),ed(s,r,n),s[Le]=e,qe(s),r=s;break e;case"link":var a=zd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=zd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Le]=e,qe(s),r=s}e.stateNode=r}else Bd(i,e.type,e.stateNode);else e.stateNode=Ud(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Bd(i,e.type,e.stateNode):Ud(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Ll(t,e),Ol(e),512&r&&(vl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Ll(t,e),Ol(e),512&r&&(vl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{Et(i,"")}catch(p){cc(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(kl=!0);break;case 6:if(Ll(t,e),Ol(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){cc(e,e.return,p)}}break;case 3:if(Dd=null,i=Il,Il=xd(t.containerInfo),Ll(t,e),Il=i,Ol(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ah(t.containerInfo)}catch(p){cc(e,e.return,p)}kl&&(kl=!1,Fl(e));break;case 4:r=Il,Il=xd(e.stateNode.containerInfo),Ll(t,e),Ol(e),Il=r;break;case 12:default:Ll(t,e),Ol(e);break;case 13:Ll(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(ku=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=wl,d=vl;if(wl=c||i,vl=d||u,Ll(t,e),vl=d,wl=c,Ol(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||wl||vl||Dl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(s=u.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=u.stateNode;var h=u.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){cc(u,u.return,p)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(p){cc(u,u.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Ll(t,e),Ol(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;ml(e,gl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(Et(s,""),n.flags&=-33),ml(e,gl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(o(161))}}catch(l){cc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ml(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)xl(e,t.alternate,t),t=t.sibling}function Dl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Dl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Dl(t);break;case 27:kd(t.stateNode);case 26:case 5:dl(t,t.return),Dl(t);break;case 22:null===t.memoizedState&&Dl(t);break;default:Dl(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:zl(i,s,n),ol(4,s);break;case 1:if(zl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){cc(r,r.return,u)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ds(l[i],a)}catch(u){cc(r,r.return,u)}}n&&64&o&&ll(s),cl(s,s.return);break;case 27:bl(s);case 26:case 5:zl(i,s,n),n&&null===r&&4&o&&hl(s),cl(s,s.return);break;case 12:zl(i,s,n);break;case 13:zl(i,s,n),n&&4&o&&Nl(i,s);break;case 22:null===s.memoizedState&&zl(i,s,n),cl(s,s.return);break;case 30:break;default:zl(i,s,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ui(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e))}function Vl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)jl(e,t,n,r),t=t.sibling}function jl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Vl(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:Vl(e,t,n,r);break;case 3:Vl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e)));break;case 12:if(2048&i){Vl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){cc(t,t.return,l)}}else Vl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?Vl(e,t,n,r):ql(e,t):2&s._visibility?Vl(e,t,n,r):(s._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Bl(o,t);break;case 24:Vl(e,t,n,r),2048&i&&$l(t.alternate,t)}}function Hl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,u=o.flags;switch(o.tag){case 0:case 11:case 15:Hl(s,o,a,l,i),ol(8,o);break;case 23:break;case 22:var c=o.stateNode;null!==o.memoizedState?2&c._visibility?Hl(s,o,a,l,i):ql(s,o):(c._visibility|=2,Hl(s,o,a,l,i)),i&&2048&u&&Bl(o.alternate,o);break;case 24:Hl(s,o,a,l,i),i&&2048&u&&$l(o.alternate,o);break;default:Hl(s,o,a,l,i)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:ql(n,r),2048&i&&Bl(r.alternate,r);break;case 24:ql(n,r),2048&i&&$l(r.alternate,r);break;default:ql(n,r)}t=t.sibling}}var Wl=8192;function Kl(e){if(e.subtreeFlags&Wl)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Kl(e),e.flags&Wl&&null!==e.memoizedState&&function(e,t,n){if(null===Vd)throw Error(o(475));var r=Vd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Td(n.href),s=e.querySelector(Nd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void qe(s);s=e.ownerDocument||e,n=Pd(n),(i=Ed.get(i))&&Fd(n,i),qe(s=s.createElement("link"));var a=s;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),ed(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Il,e.memoizedState,e.memoizedProps);break;case 5:default:Kl(e);break;case 3:case 4:var t=Il;Il=xd(e.stateNode.containerInfo),Kl(e),Il=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wl,Wl=16777216,Kl(e),Wl=t):Kl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Xl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 0:case 11:case 15:Zl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Zl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Zl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Xl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Xl(e,t){for(;null!==Sl;){var n=Sl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ui(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sl=r;else e:for(n=e;null!==Sl;){var i=(r=Sl).sibling,s=r.return;if(_l(r),r===n){Sl=null;break e}if(null!==i){i.return=s,Sl=i;break e}Sl=s}}}var eu={getCacheForType:function(e){var t=Ci(Li),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tu="function"===typeof WeakMap?WeakMap:Map,nu=0,ru=null,iu=null,su=0,ou=0,au=null,lu=!1,uu=!1,cu=!1,du=0,hu=0,fu=0,pu=0,gu=0,yu=0,mu=0,bu=null,wu=null,vu=!1,ku=0,Eu=1/0,Su=null,xu=null,_u=0,Cu=null,Au=null,Ru=0,Tu=0,Nu=null,Pu=null,Lu=0,Iu=null;function Uu(){if(0!==(2&nu)&&0!==su)return su&-su;if(null!==U.T){return 0!==Mi?Mi:Tc()}return Ne()}function Ou(){0===yu&&(yu=0===(536870912&su)||si?Ee():536870912);var e=ia.current;return null!==e&&(e.flags|=32),yu}function Fu(e,t,n){(e!==ru||2!==ou&&9!==ou)&&null===e.cancelPendingCommit||(ju(e,0),Bu(e,su,yu,!1)),_e(e,n),0!==(2&nu)&&e===ru||(e===ru&&(0===(2&nu)&&(pu|=n),4===hu&&Bu(e,su,yu,!1)),Ec(e))}function Mu(e,t,n){if(0!==(6&nu))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||ve(e,t),i=r?function(e,t){var n=nu;nu|=2;var r=qu(),i=Wu();ru!==e||su!==t?(Su=null,Eu=te()+500,ju(e,t)):uu=ve(e,t);e:for(;;)try{if(0!==ou&&null!==iu){t=iu;var s=au;t:switch(ou){case 1:ou=0,au=null,Xu(e,t,s,1);break;case 2:case 9:if(Qi(s)){ou=0,au=null,Ju(t);break}t=function(){2!==ou&&9!==ou||ru!==e||(ou=7),Ec(e)},s.then(t,t);break e;case 3:ou=7;break e;case 4:ou=5;break e;case 7:Qi(s)?(ou=0,au=null,Ju(t)):(ou=0,au=null,Xu(e,t,s,7));break;case 5:var a=null;switch(iu.tag){case 26:a=iu.memoizedState;case 5:case 27:var l=iu;if(!a||$d(a)){ou=0,au=null;var u=l.sibling;if(null!==u)iu=u;else{var c=l.return;null!==c?(iu=c,ec(c)):iu=null}break t}}ou=0,au=null,Xu(e,t,s,5);break;case 6:ou=0,au=null,Xu(e,t,s,6);break;case 8:Vu(),hu=6;break e;default:throw Error(o(462))}}Zu();break}catch(d){Hu(e,d)}return bi=mi=null,U.H=r,U.A=i,nu=n,null!==iu?0:(ru=null,su=0,Rr(),hu)}(e,t):Gu(e,t,!0),s=r;;){if(0===i){uu&&!r&&Bu(e,t,0,!1);break}if(n=e.current.alternate,!s||zu(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=bu;var u=l.current.memoizedState.isDehydrated;if(u&&(ju(l,a).flags|=256),2!==(a=Gu(l,a,!1))){if(cu&&!u){l.errorRecoveryDisabledLanes|=s,pu|=s,i=4;break e}s=wu,wu=i,null!==s&&(null===wu?wu=s:wu.push.apply(wu,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){ju(e,0),Bu(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Bu(r,t,yu,!lu);break e;case 2:wu=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=ku+300-te())){if(Bu(r,t,yu,!lu),0!==we(r,0,!0))break e;r.timeoutHandle=ld(Du.bind(null,r,n,wu,Su,vu,t,yu,pu,mu,lu,s,2,-0,0),i)}else Du(r,n,wu,Su,vu,t,yu,pu,mu,lu,s,0,-0,0)}break}i=Gu(e,t,!1),s=!1}Ec(e)}function Du(e,t,n,r,i,s,a,l,u,c,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Vd={stylesheets:null,count:0,unsuspend:jd},Gl(t),null!==(h=function(){if(null===Vd)throw Error(o(475));var e=Vd;return e.stylesheets&&0===e.count&&Wd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Wd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nc.bind(null,e,t,s,n,r,i,a,l,u,d,1,f,p)),void Bu(e,s,a,!c);nc(e,t,s,n,r,i,a,l,u)}function zu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bu(e,t,n,r){t&=~gu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Ce(e,n,t)}function $u(){return 0!==(6&nu)||(Sc(0,!1),!1)}function Vu(){if(null!==iu){if(0===ou)var e=iu.return;else bi=mi=null,Ms(e=iu),Qo=null,Zo=0,e=iu;for(;null!==e;)sl(e.alternate,e),e=e.return;iu=null}}function ju(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vu(),ru=e,iu=n=Dr(e.current,null),su=t,ou=0,au=null,lu=!1,uu=ve(e,t),cu=!1,mu=yu=gu=pu=fu=hu=0,wu=bu=null,vu=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return du=t,Rr(),n}function Hu(e,t){ws=null,U.H=qo,t===qi||t===Ki?(t=Xi(),ou=3):t===Wi?(t=Xi(),ou=4):ou=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,au=t,null===iu&&(hu=1,ka(e,xr(t,e.current)))}function qu(){var e=U.H;return U.H=qo,null===e?qo:e}function Wu(){var e=U.A;return U.A=eu,e}function Ku(){hu=4,lu||(4194048&su)!==su&&null!==ia.current||(uu=!0),0===(134217727&fu)&&0===(134217727&pu)||null===ru||Bu(ru,su,yu,!1)}function Gu(e,t,n){var r=nu;nu|=2;var i=qu(),s=Wu();ru===e&&su===t||(Su=null,ju(e,t)),t=!1;var o=hu;e:for(;;)try{if(0!==ou&&null!==iu){var a=iu,l=au;switch(ou){case 8:Vu(),o=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var u=ou;if(ou=0,au=null,Xu(e,a,l,u),n&&uu){o=0;break e}break;default:u=ou,ou=0,au=null,Xu(e,a,l,u)}}Qu(),o=hu;break}catch(c){Hu(e,c)}return t&&e.shellSuspendCounter++,bi=mi=null,nu=r,U.H=i,U.A=s,null===iu&&(ru=null,su=0,Rr()),o}function Qu(){for(;null!==iu;)Yu(iu)}function Zu(){for(;null!==iu&&!X();)Yu(iu)}function Yu(e){var t=Ya(e.alternate,e,du);e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Ju(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fa(n,t,t.pendingProps,t.type,void 0,su);break;case 11:t=Fa(n,t,t.pendingProps,t.type.render,t.ref,su);break;case 5:Ms(t);default:sl(n,t),t=Ya(n,t=iu=zr(t,du),du)}e.memoizedProps=e.pendingProps,null===t?ec(e):iu=t}function Xu(e,t,n,r){bi=mi=null,Ms(t),Qo=null,Zo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Si(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===sa?Ku():null===n.alternate&&0===hu&&(hu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),dc(e,r,i)),!1;case 22:return n.flags|=65536,r===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),dc(e,r,i)),!1}throw Error(o(435,n.tag))}return dc(e,r,i),Ku(),!1}if(si)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&gi(xr(e=Error(o(422),{cause:r}),n))):(r!==li&&gi(xr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=xr(r,n),as(e,i=Sa(e.stateNode,r,i)),4!==hu&&(hu=2)),!1;var s=Error(o(520),{cause:r});if(s=xr(s,n),null===bu?bu=[s]:bu.push(s),4!==hu&&(hu=2),null===t)return!0;r=xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,as(n,e=Sa(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===xu||!xu.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,_a(i=xa(i),e,n,r),as(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,su))return hu=1,ka(e,xr(n,e.current)),void(iu=null)}catch(s){if(null!==i)throw iu=i,s;return hu=1,ka(e,xr(n,e.current)),void(iu=null)}32768&t.flags?(si||1===r?e=!0:uu||0!==(536870912&su)?e=!1:(lu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(0!==(32768&t.flags))return void tc(t,lu);e=t.return;var n=rl(t.alternate,t,du);if(null!==n)return void(iu=n);if(null!==(t=t.sibling))return void(iu=t);iu=t=e}while(null!==t);0===hu&&(hu=5)}function tc(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(iu=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(iu=e);iu=e=n}while(null!==e);hu=6,iu=null}function nc(e,t,n,r,i,s,a,l,u){e.cancelPendingCommit=null;do{ac()}while(0!==_u);if(0!==(6&nu))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-fe(n),d=1<<c;a[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ce(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Ar,a,l,u),e===ru&&(iu=ru=null,su=0),Au=t,Cu=e,Ru=n,Tu=s,Nu=i,Pu=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Y(se,(function(){return lc(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=U.T,U.T=null,i=O.p,O.p=2,a=nu,nu|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(y){n=null;break e}var a=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(u=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=a),f===s&&++d===r&&(u=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(s=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var g=ya(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(g,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(m){cc(n,n.return,m)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{nu=a,O.p=i,U.T=r}}_u=1,rc(),ic(),sc()}}function rc(){if(1===_u){_u=0;var e=Cu,t=Au,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=U.T,U.T=null;var r=O.p;O.p=2;var i=nu;nu|=4;try{Ul(t,e);var s=nd,o=er(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&Xn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(c,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,g=Math.min(l.start,p),y=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>y&&(o=y,y=g,g=o);var m=Jn(a,g),b=Jn(a,y);if(m&&b&&(1!==f.rangeCount||f.anchorNode!==m.node||f.anchorOffset!==m.offset||f.focusNode!==b.node||f.focusOffset!==b.offset)){var w=d.createRange();w.setStart(m.node,m.offset),f.removeAllRanges(),g>y?(f.addRange(w),f.extend(b.node,b.offset)):(w.setEnd(b.node,b.offset),f.addRange(w))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var v=d[a];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}nh=!!td,nd=td=null}finally{nu=i,O.p=r,U.T=n}}e.current=t,_u=2}}function ic(){if(2===_u){_u=0;var e=Cu,t=Au,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=U.T,U.T=null;var r=O.p;O.p=2;var i=nu;nu|=4;try{xl(e,t.alternate,t)}finally{nu=i,O.p=r,U.T=n}}_u=3}}function sc(){if(4===_u||3===_u){_u=0,ee();var e=Cu,t=Au,n=Ru,r=Pu;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?_u=5:(_u=0,Au=Cu=null,oc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(xu=null),Te(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=U.T,i=O.p,O.p=2,U.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{U.T=t,O.p=i}}0!==(3&Ru)&&ac(),Ec(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Iu?Lu++:(Lu=0,Iu=e):Lu=0,Sc(0,!1)}}function oc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ui(t)))}function ac(e){return rc(),ic(),sc(),lc()}function lc(){if(5!==_u)return!1;var e=Cu,t=Tu;Tu=0;var n=Te(Ru),r=U.T,i=O.p;try{O.p=32>n?32:n,U.T=null,n=Nu,Nu=null;var s=Cu,a=Ru;if(_u=0,Au=Cu=null,Ru=0,0!==(6&nu))throw Error(o(331));var l=nu;if(nu|=4,Yl(s.current),jl(s,s.current,a,n),nu=l,Sc(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,s)}catch(u){}return!0}finally{O.p=i,U.T=r,oc(e,t)}}function uc(e,t,n){t=xr(n,t),null!==(e=ss(e,t=Sa(e.stateNode,t,2),2))&&(_e(e,2),Ec(e))}function cc(e,t,n){if(3===e.tag)uc(e,e,n);else for(;null!==t;){if(3===t.tag){uc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===xu||!xu.has(r))){e=xr(n,e),null!==(r=ss(t,n=xa(2),2))&&(_a(n,r,t,e),_e(r,2),Ec(r));break}}t=t.return}}function dc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(cu=!0,i.add(n),e=hc.bind(null,e,t,n),t.then(e,e))}function hc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ru===e&&(su&n)===n&&(4===hu||3===hu&&(62914560&su)===su&&300>te()-ku?0===(2&nu)&&ju(e,0):gu|=n,mu===su&&(mu=0)),Ec(e)}function fc(e,t){0===t&&(t=Se()),null!==(e=Pr(e,t))&&(_e(e,t),Ec(e))}function pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fc(e,n)}function gc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),fc(e,n)}var yc=null,mc=null,bc=!1,wc=!1,vc=!1,kc=0;function Ec(e){e!==mc&&null===e.next&&(null===mc?yc=mc=e:mc=mc.next=e),wc=!0,bc||(bc=!0,dd((function(){0!==(6&nu)?Y(re,xc):_c()})))}function Sc(e,t){if(!vc&&wc){vc=!0;do{for(var n=!1,r=yc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Rc(r,s))}else s=su,0===(3&(s=we(r,r===ru?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ve(r,s)||(n=!0,Rc(r,s));r=r.next}}while(n);vc=!1}}function xc(){_c()}function _c(){wc=bc=!1;var e=0;0!==kc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ad&&(ad=e,!0);return ad=null,!1}()&&(e=kc),kc=0);for(var t=te(),n=null,r=yc;null!==r;){var i=r.next,s=Cc(r,t);0===s?(r.next=null,null===n?yc=i:n.next=i,null===i&&(mc=n)):(n=r,(0!==e||0!==(3&s))&&(wc=!0)),r=i}Sc(e,!1)}function Cc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ke(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=su,n=we(e,e===(t=ru)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ou||9===ou)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ve(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Te(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=Ac.bind(null,e),n=Y(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Ac(e,t){if(0!==_u&&5!==_u)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ac()&&e.callbackNode!==n)return null;var r=su;return 0===(r=we(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mu(e,r,t),Cc(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ac.bind(null,e):null)}function Rc(e,t){if(ac())return null;Mu(e,t,!0)}function Tc(){return 0===kc&&(kc=Ee()),kc}function Nc(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function Pc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Lc=0;Lc<kr.length;Lc++){var Ic=kr[Lc];Er(Ic.toLowerCase(),"on"+(Ic[0].toUpperCase()+Ic.slice(1)))}Er(fr,"onAnimationEnd"),Er(pr,"onAnimationIteration"),Er(gr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(yr,"onTransitionRun"),Er(mr,"onTransitionStart"),Er(br,"onTransitionCancel"),Er(wr,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uc));function Fc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=u;try{s(i)}catch(c){ma(c)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=u;try{s(i)}catch(c){ma(c)}i.currentTarget=null,s=l}}}}function Mc(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||($c(t,e,2,!1),n.add(r))}function Dc(e,t,n){var r=0;t&&(r|=4),$c(n,e,r,t)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[zc]){e[zc]=!0,We.forEach((function(t){"selectionchange"!==t&&(Oc.has(t)||Dc(t,!1,e),Dc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zc]||(t[zc]=!0,Dc("selectionchange",!1,t))}}function $c(e,t,n,r){switch(uh(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=sh}n=i.bind(null,t,n,e),i=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vc(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=$e(a)))return;if(5===(u=o.tag)||6===u||26===u||27===u){r=s=o;continue e}a=a.parentNode}}r=r.return}Ft((function(){var r=s,i=Pt(n),o=[];e:{var a=vr.get(e);if(void 0!==a){var u=Xt,c=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":u=gn;break;case"focusin":c="focus",u=on;break;case"focusout":c="blur",u=on;break;case"beforeblur":case"afterblur":u=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=mn;break;case fr:case pr:case gr:u=an;break;case wr:u=bn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=wn;break;case"copy":case"cut":case"paste":u=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=yn;break;case"toggle":case"beforetoggle":u=vn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,g=r;null!==g;){var y=g;if(p=y.stateNode,5!==(y=y.tag)&&26!==y&&27!==y||null===p||null===f||null!=(y=Mt(g,f))&&d.push(jc(g,y,p)),h)break;g=g.return}0<d.length&&(a=new u(a,c,null,n,i),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Nt||!(c=n.relatedTarget||n.fromElement)||!$e(c)&&!c[Ue])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?$e(c):null)&&(h=l(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=rn,y="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,y="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==u?a:je(u),p=null==c?a:je(c),(a=new d(y,g+"leave",u,n,i)).target=h,a.relatedTarget=p,y=null,$e(i)===r&&((d=new d(f,g+"enter",c,n,i)).target=p,d.relatedTarget=h,y=d),h=y,u&&c)e:{for(f=c,g=0,p=d=u;p;p=qc(p))g++;for(p=0,y=f;y;y=qc(y))p++;for(;0<g-p;)d=qc(d),g--;for(;0<p-g;)f=qc(f),p--;for(;g--;){if(d===f||null!==f&&d===f.alternate)break e;d=qc(d),f=qc(f)}d=null}else d=null;null!==u&&Wc(o,a,u,d,!1),null!==c&&null!==h&&Wc(o,h,c,d,!0)}if("select"===(u=(a=r?je(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var m=Dn;else if(Ln(a))if(zn)m=Gn;else{m=Wn;var b=qn}else!(u=a.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Ct(r.elementType)&&(m=Dn):m=Kn;switch(m&&(m=m(e,r))?In(o,m,n,i):(b&&b(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&bt(a,"number",a.value)),b=r?je(r):window,e){case"focusin":(Ln(b)||"true"===b.contentEditable)&&(rr=b,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var w;if(En)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Nn?Rn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(_n&&"ko"!==n.locale&&(Nn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Nn&&(w=Ht()):(Vt="value"in($t=i)?$t.value:$t.textContent,Nn=!0)),0<(b=Hc(r,v)).length&&(v=new un(v,e,null,n,i),o.push({event:v,listeners:b}),w?v.data=w:null!==(w=Tn(n))&&(v.data=w))),(w=xn?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(An=!0,Cn);case"textInput":return(e=t.data)===Cn&&An?null:e;default:return null}}(e,n):function(e,t){if(Nn)return"compositionend"===e||!En&&Rn(e,t)?(e=Ht(),jt=Vt=$t=null,Nn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(v=Hc(r,"onBeforeInput")).length&&(b=new un("onBeforeInput","beforeinput",null,n,i),o.push({event:b,listeners:v}),b.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Nc((i[Ie]||null).action),o=r.submitter;o&&null!==(t=(t=o[Ie]||null)?Nc(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Xt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==kc){var e=o?Pc(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Pc(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Fc(o,t)}))}function jc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(jc(e,i,s)),null!=(i=Mt(e,t))&&r.push(jc(e,i,s))),3===e.tag)return r;e=e.return}return[]}function qc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wc(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===u||(l=u,i?null!=(u=Mt(n,s))&&o.unshift(jc(n,u,l)):i||null!=(u=Mt(n,s))&&o.push(jc(n,u,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kc=/\r\n?/g,Gc=/\u0000|\uFFFD/g;function Qc(e){return("string"===typeof e?e:""+e).replace(Kc,"\n").replace(Gc,"")}function Zc(e,t){return t=Qc(t),Qc(e)===t}function Yc(){}function Jc(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Et(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Et(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Jc(e,t,"name",i.name,i,null),Jc(e,t,"formEncType",i.formEncType,i,null),Jc(e,t,"formMethod",i.formMethod,i,null),Jc(e,t,"formTarget",i.formTarget,i,null)):(Jc(e,t,"encType",i.encType,i,null),Jc(e,t,"method",i.method,i,null),Jc(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Tt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Yc);break;case"onScroll":null!=r&&Mc("scroll",e);break;case"onScrollEnd":null!=r&&Mc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Tt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Mc("beforetoggle",e),Mc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=At.get(n)||n,r)}}function Xc(e,t,n,r,i,s){switch(n){case"style":_t(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Et(e,r):("number"===typeof r||"bigint"===typeof r)&&Et(e,""+r);break;case"onScroll":null!=r&&Mc("scroll",e);break;case"onScrollEnd":null!=r&&Mc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Yc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Ie]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mc("error",e),Mc("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Jc(e,t,r,a,n,null)}}return s&&Jc(e,t,"srcSet",n.srcSet,n,null),void(i&&Jc(e,t,"src",n.src,n,null));case"input":Mc("invalid",e);var l=r=a=s=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Jc(e,t,i,d,n,null)}}return mt(e,r,l,u,c,a,s,!1),void dt(e);case"select":for(s in Mc("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Jc(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?wt(e,!!i,t,!1):null!=n&&wt(e,!!i,n,!0));case"textarea":for(a in Mc("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Jc(e,t,a,l,n,null)}return kt(e,i,s,r),void dt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Jc(e,t,u,i,n,null);return;case"dialog":Mc("beforetoggle",e),Mc("toggle",e),Mc("cancel",e),Mc("close",e);break;case"iframe":case"object":Mc("load",e);break;case"video":case"audio":for(i=0;i<Uc.length;i++)Mc(Uc[i],e);break;case"image":Mc("error",e),Mc("load",e);break;case"details":Mc("toggle",e);break;case"embed":case"source":case"link":Mc("error",e),Mc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Jc(e,t,c,i,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Xc(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Jc(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ad=null;var ld="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,cd="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof cd?function(e){return cd.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout((function(){throw e}))}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&kd(o.documentElement),2&n&&kd(o.body),4&n)for(kd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[ze]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Ah(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Ah(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function md(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function vd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function kd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var Ed=new Map,Sd=new Set;function xd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _d=O.d;O.d={f:function(){var e=_d.f(),t=$u();return e||t},r:function(e){var t=Ve(e);null!==t&&5===t.tag&&"form"===t.type?Io(t):_d.r(e)},D:function(e){_d.D(e),Ad("dns-prefetch",e,null)},C:function(e,t){_d.C(e,t),Ad("preconnect",e,t)},L:function(e,t,n){_d.L(e,t,n);var r=Cd;if(r&&e&&t){var i='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+gt(n.imageSizes)+'"]')):i+='[href="'+gt(e)+'"]';var s=i;switch(t){case"style":s=Td(e);break;case"script":s=Ld(e)}Ed.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ed.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Nd(s))||"script"===t&&r.querySelector(Id(s))||(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){_d.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+gt(r)+'"][href="'+gt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ld(e)}if(!Ed.has(s)&&(e=h({rel:"modulepreload",href:e},t),Ed.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Id(s)))return}ed(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){_d.X(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,i=Ld(e),s=r.get(i);s||((s=n.querySelector(Id(i)))||(e=h({src:e,async:!0},t),(t=Ed.get(i))&&Md(e,t),qe(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){_d.S(e,t,n);var r=Cd;if(r&&e){var i=He(r).hoistableStyles,s=Td(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Nd(s)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ed.get(s))&&Fd(e,n);var l=o=r.createElement("link");qe(l),ed(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Od(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){_d.M(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,i=Ld(e),s=r.get(i);s||((s=n.querySelector(Id(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=Ed.get(i))&&Md(e,t),qe(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Cd="undefined"===typeof document?null:document;function Ad(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var i=gt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Sd.has(i)||(Sd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Rd(e,t,n,r){var i,s,a,l,u=(u=H.current)?xd(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Td(n.href),(r=(n=He(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Td(n.href);var c=He(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Nd(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Ed.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ed.set(e,n),c||(i=u,s=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),ed(s,"link",a),qe(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ld(n),(r=(n=He(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Td(e){return'href="'+gt(e)+'"'}function Nd(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Ld(e){return'[src="'+gt(e)+'"]'}function Id(e){return"script[async]"+e}function Ud(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Od(r,n.precedence,e),t.instance=r;case"stylesheet":i=Td(n.href);var s=e.querySelector(Nd(i));if(s)return t.state.loading|=4,t.instance=s,qe(s),s;r=Pd(n),(i=Ed.get(i))&&Fd(r,i),qe(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),ed(s,"link",r),t.state.loading|=4,Od(s,n.precedence,e),t.instance=s;case"script":return s=Ld(n.src),(i=e.querySelector(Id(s)))?(t.instance=i,qe(i),i):(r=n,(i=Ed.get(s))&&Md(r=h({},n),i),qe(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Od(r,n.precedence,e));return t.instance}function Od(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Dd=null;function zd(e,t,n){if(null===Dd){var r=new Map,i=Dd=new Map;i.set(n,r)}else(r=(i=Dd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[ze]||s[Le]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function $d(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Vd=null;function jd(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qd=null;function Wd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qd=new Map,t.forEach(Kd,e),qd=null,Hd.call(e))}function Kd(e,t){if(!(4&t.state.loading)){var n=qd.get(e);if(n)var r=n.get(null);else{n=new Map,qd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Hd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:k,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function Qd(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xe(0),this.hiddenUpdates=xe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Zd(e,t,n,r,i,s,o,a,l,u,c,d){return e=new Qd(e,t,n,o,a,l,u,d),t=1,!0===s&&(t|=24),s=Fr(3,null,null,t),e.current=s,s.stateNode=e,(t=Ii()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Yd(e){return e?e=Ur:Ur}function Jd(e,t,n,r,i,s){i=Yd(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Fu(n,0,t),os(n,e,t))}function Xd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Xd(e,t),(e=e.alternate)&&Xd(e,t)}function th(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Fu(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=U.T;U.T=null;var s=O.p;try{O.p=2,sh(e,t,n,r)}finally{O.p=s,U.T=i}}function ih(e,t,n,r){var i=U.T;U.T=null;var s=O.p;try{O.p=8,sh(e,t,n,r)}finally{O.p=s,U.T=i}}function sh(e,t,n,r){if(nh){var i=oh(r);if(null===i)Vc(e,t,r,ah,n),bh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=wh(dh,e,t,n,r,i),!0;case"dragenter":return hh=wh(hh,e,t,n,r,i),!0;case"mouseover":return fh=wh(fh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ph.set(s,wh(ph.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gh.set(s,wh(gh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<mh.indexOf(e)){for(;null!==i;){var s=Ve(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=be(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}Ec(s),0===(6&nu)&&(Eu=te()+500,Sc(0,!1))}}break;case 13:null!==(a=Pr(s,2))&&Fu(a,0,2),$u(),eh(s,2)}if(null===(s=oh(r))&&Vc(e,t,r,ah,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Vc(e,t,r,null,n)}}function oh(e){return lh(e=Pt(e))}var ah=null;function lh(e){if(ah=null,null!==(e=$e(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ah=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var ch=!1,dh=null,hh=null,fh=null,ph=new Map,gh=new Map,yh=[],mh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function wh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ve(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vh(e){var t=$e(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}(e.priority,(function(){if(13===n.tag){var e=Uu();e=Re(e);var t=Pr(n,e);null!==t&&Fu(t,0,e),eh(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function kh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Ve(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Nt=r,n.target.dispatchEvent(r),Nt=null,t.shift()}return!0}function Eh(e,t,n){kh(e)&&n.delete(t)}function Sh(){ch=!1,null!==dh&&kh(dh)&&(dh=null),null!==hh&&kh(hh)&&(hh=null),null!==fh&&kh(fh)&&(fh=null),ph.forEach(Eh),gh.forEach(Eh)}function xh(e,t){e.blockedOn===t&&(e.blockedOn=null,ch||(ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sh)))}var _h=null;function Ch(e){_h!==e&&(_h=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){_h===e&&(_h=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var s=Ve(n);null!==s&&(e.splice(t,3),t-=3,Po(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function Ah(e){function t(t){return xh(t,e)}null!==dh&&xh(dh,e),null!==hh&&xh(hh,e),null!==fh&&xh(fh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<yh.length;n++){var r=yh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yh.length&&null===(n=yh[0]).blockedOn;)vh(n),null===n.blockedOn&&yh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Ie]||null;if("function"===typeof s)o||Ch(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Ie]||null)a=o.formAction;else if(null!==lh(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ch(n)}}}function Rh(e){this._internalRoot=e}function Th(e){this._internalRoot=e}Th.prototype.render=Rh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jd(t.current,Uu(),e,t,null,null)},Th.prototype.unmount=Rh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),$u(),t[Ue]=null}},Th.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ne();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yh.length&&0!==t&&t<yh[n].priority;n++);yh.splice(n,0,e),0===n&&vh(e)}};var Nh=i.version;if("19.1.0"!==Nh)throw Error(o(527,Nh,"19.1.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return c(i),e;if(s===r)return c(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{ce=Lh.inject(Ph),de=Lh}catch(Uh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=ba,s=wa,l=va;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Zd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Ue]=t.current,Bc(e),new Rh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=ba,l=wa,u=va,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Zd(e,1,!0,t,0,r,i,s,l,u,0,c)).context=Yd(null),n=t.current,(i=is(r=Re(r=Uu()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,_e(t,n),Ec(t),e[Ue]=t.current,Bc(e),new Th(t)},t.version="19.1.0"},39:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._fast_remove_single=void 0,t._fast_remove_single=function(e,t){-1!==t&&(0===t?e.shift():t===e.length-1?e.length=e.length-1:e.splice(t,1))}},43:(e,t,n)=>{"use strict";e.exports=n(288)},86:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskCollection=void 0;var i=n(39),s=n(506);function o(e,t){var n,r=this.length;if(r>1)t?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){var i;if(1===r)(i=Array(1+arguments.length)).push(i),i.push.apply(i,arguments),this._tasks=i;else(i=Array(arguments.length)).push.apply(i,arguments),this._tasks=i;this.length+=arguments.length}else this._tasks=1===r?[this._tasks,e]:e,this.length++}function a(e,t){var n,r=this.length;if(r>1)t?((n=this._tasks).push.apply(n,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){var i;if(1===r)(i=Array(1+arguments.length)).push(i),i.push.apply(i,arguments),this._tasks=i;else(i=Array(arguments.length)).push.apply(i,arguments),this._tasks=i;this.length+=arguments.length}else this._tasks=1===r?[this._tasks,e]:e,this.length++;this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function l(e){0!==this.length&&(1===this.length?this._tasks===e&&(this.length=0):((0,i._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function u(e){if(0!==this.length){if(1===this.length)return this._tasks===e&&(this.length=0),this.firstEmitBuildStrategy?void(this.call=s.BAKED_EMPTY_FUNC):void this.rebuild();(0,i._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length,this.firstEmitBuildStrategy?this.call=p:this.rebuild()}}function c(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((t=this._tasks).splice.apply(t,r([e,0],n,!1)),this.length=this._tasks.length)}function d(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];0===this.length?(this._tasks=n,this.length=1):1===this.length?(n.unshift(this._tasks),this._tasks=n,this.length=this._tasks.length):((t=this._tasks).splice.apply(t,r([e,0],n,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function h(){0===this.length?this.call=s.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,s.bakeCollection)(this._tasks,this.argsNum)}function f(){0===this.length?this.call=s.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,s.bakeCollectionAwait)(this._tasks,this.argsNum)}function p(){this.rebuild(),this.call.apply(void 0,arguments)}var g=function(e,t,n,r){void 0===t&&(t=!0),void 0===n&&(n=null),void 0===r&&(r=!1),this.awaitTasks=r,this.call=s.BAKED_EMPTY_FUNC,this.argsNum=e,this.firstEmitBuildStrategy=!0,this.rebuild=r?f.bind(this):h.bind(this),this.setAutoRebuild(t),n?"function"===typeof n?(this._tasks=n,this.length=1):(this._tasks=n,this.length=n.length):(this._tasks=null,this.length=0),t&&this.rebuild()};t.TaskCollection=g,g.prototype.fastClear=function(){this._tasks=null,this.length=0,this.call=s.BAKED_EMPTY_FUNC},g.prototype.clear=function(){this._tasks=null,this.length=0,this.call=s.BAKED_EMPTY_FUNC},g.prototype.growArgsNum=function(e){this.argsNum<e&&(this.argsNum=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())},g.prototype.setAutoRebuild=function(e){e?(this.push=a.bind(this),this.insert=d.bind(this),this.removeLast=u.bind(this)):(this.push=o.bind(this),this.insert=c.bind(this),this.removeLast=l.bind(this))},g.prototype.tasksAsArray=function(){return 0===this.length?[]:1===this.length?[this._tasks]:this._tasks},g.prototype.setTasks=function(e){0===e.length?(this.length=0,this.call=s.BAKED_EMPTY_FUNC):1===e.length?(this.length=1,this.call=e[0],this._tasks=e[0]):(this.length=e.length,this._tasks=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}},199:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const r=n(452);class i{constructor(e){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:t=25,entryExpirationTimeInMS:n=null,onEntryEvicted:r,onEntryMarkedAsMostRecentlyUsed:i,cloneFn:s,clone:o}=null!==e&&void 0!==e?e:{};if(Number.isNaN(t)||t<=0)throw new Error("maxSize must be greater than 0.");if("number"===typeof n&&(n<=0||Number.isNaN(n)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=t,this.entryExpirationTimeInMS=n,this.onEntryEvicted=r,this.onEntryMarkedAsMostRecentlyUsed=i,this.clone=o,this.cloneFn=s}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(e){if(Number.isNaN(e)||e<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=e,this.enforceSizeLimit()}set(e,t,n){const i=this.lookupTable.get(e);i&&this.removeNodeFromListAndLookupTable(i);const s=new r.LRUCacheNode(e,t,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...n});return this.setNodeAsHead(s),this.lookupTable.set(e,s),this.enforceSizeLimit(),this}get(e){const t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):(this.setNodeAsHead(t),t.value):null}peek(e){const t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):t.value:null}delete(e){const t=this.lookupTable.get(e);return!!t&&this.removeNodeFromListAndLookupTable(t)}has(e){const t=this.lookupTable.get(e);return!!t&&(!t.isExpired||(this.removeNodeFromListAndLookupTable(t),!1))}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(e){let t=this.head;for(;t;){if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e;continue}const n=this.mapNodeToEntry(t);if(e(n))return this.setNodeAsHead(t),n;t=t.next}return null}forEach(e){let t=this.head,n=0;for(;t;)if(t.isExpired){const e=t.next;this.removeNodeFromListAndLookupTable(t),t=e}else e(t.value,t.key,n),t=t.next,n++}*values(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield e.value,e=e.next}*keys(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield e.key,e=e.next}*entries(){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield this.mapNodeToEntry(e),e=e.next}*[Symbol.iterator](){let e=this.head;for(;e;)if(e.isExpired){const t=e.next;this.removeNodeFromListAndLookupTable(e),e=t}else yield this.mapNodeToEntry(e),e=e.next}enforceSizeLimit(){let e=this.tail;for(;null!==e&&this.size>this.maxSizeInternal;){const t=e.prev;this.removeNodeFromListAndLookupTable(e),e=t}}mapNodeToEntry(e){let{key:t,value:n}=e;return{key:t,value:n}}setNodeAsHead(e){this.removeNodeFromList(e),this.head?(e.next=this.head,this.head.prev=e,this.head=e):(this.head=e,this.tail=e),e.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(e){null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.head===e&&(this.head=e.next),this.tail===e&&(this.tail=e.prev),e.next=null,e.prev=null}removeNodeFromListAndLookupTable(e){return e.invokeOnEvicted(),this.removeNodeFromList(e),this.lookupTable.delete(e.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const e=[];for(const t of this.lookupTable.values())t.isExpired&&e.push(t);e.forEach((e=>this.removeNodeFromListAndLookupTable(e)))}}t.LRUCache=i},237:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,s,o=null;function a(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(!a.enabled)return;const s=a,o=Number(new Date),l=o-(n||o);s.diff=l,s.prev=n,s.curr=o,n=o,r[0]=t.coerce(r[0]),"string"!==typeof r[0]&&r.unshift("%O");let u=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,((e,n)=>{if("%%"===e)return"%";u++;const i=t.formatters[n];if("function"===typeof i){const t=r[u];e=i.call(s,t),r.splice(u,1),u--}return e})),t.formatArgs.call(s,r);(s.log||t.log).apply(s,r)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"===typeof t.init&&t.init(a),a}function r(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function i(e,t){let n=0,r=0,i=-1,s=0;for(;n<e.length;)if(r<t.length&&(t[r]===e[n]||"*"===t[r]))"*"===t[r]?(i=r,s=n,r++):(n++,r++);else{if(-1===i)return!1;r=i+1,s++,n=s}for(;r<t.length&&"*"===t[r];)r++;return r===t.length}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names,...t.skips.map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"===typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean);for(const r of n)"-"===r[0]?t.skips.push(r.slice(1)):t.names.push(r)},t.enabled=function(e){for(const n of t.skips)if(i(e,n))return!1;for(const n of t.names)if(i(e,n))return!0;return!1},t.humanize=n(340),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},245:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(199),t)},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=m.prototype;var v=w.prototype=new b;v.constructor=w,g(v,m.prototype),v.isPureReactComponent=!0;var k=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function x(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(){}function T(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case h:return T((c=e._init)(e._payload),t,i,s,o)}}if(c)return o=o(e),c=""===s?"."+A(e,0):s,k(o)?(i="",null!=c&&(i=c.replace(C,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(_(o)&&(l=o,u=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+c,o=x(l.type,u,void 0,0,0,l.props)),t.push(o)),1;c=0;var d,p=""===s?".":s+":";if(k(e))for(var g=0;g<e.length;g++)c+=T(s=e[g],t,i,a=p+A(s,g),o);else if("function"===typeof(g=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=g.call(e),g=0;!(s=e.next()).done;)c+=T(s=s.value,t,i,a=p+A(s,g++),o);else if("object"===a){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(R,R):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function N(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function I(){}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return E.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return x(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return x(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,n={};E.T=n;try{var r=e(),i=E.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(I,L)}catch(s){L(s)}finally{E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,n){return E.H.useActionState(e,t,n)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=E.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,n){return E.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return E.H.useReducer(e,t,n)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return E.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return E.H.useTransition()},t.version="19.1.0"},340:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,s=7*i,o=365.25*i;function a(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,l){l=l||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*o;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*r;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===u&&isFinite(e))return l.long?function(e){var s=Math.abs(e);if(s>=i)return a(e,s,i,"day");if(s>=r)return a(e,s,r,"hour");if(s>=n)return a(e,s,n,"minute");if(s>=t)return a(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=i)return Math.round(e/i)+"d";if(s>=r)return Math.round(e/r)+"h";if(s>=n)return Math.round(e/n)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},452:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCacheNode=void 0;t.LRUCacheNode=class{constructor(e,t,n){const{entryExpirationTimeInMS:r=null,next:i=null,prev:s=null,onEntryEvicted:o,onEntryMarkedAsMostRecentlyUsed:a,clone:l,cloneFn:u}=null!==n&&void 0!==n?n:{};if("number"===typeof r&&(r<=0||Number.isNaN(r)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=null!==l&&void 0!==l&&l,this.cloneFn=null!==u&&void 0!==u?u:this.defaultClone,this.key=e,this.internalValue=this.clone?this.cloneFn(t):t,this.created=Date.now(),this.entryExpirationTimeInMS=r,this.next=i,this.prev=s,this.onEntryEvicted=o,this.onEntryMarkedAsMostRecentlyUsed=a}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return"number"===typeof this.entryExpirationTimeInMS&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:e,value:t,isExpired:n}=this;this.onEntryEvicted({key:e,value:t,isExpired:n})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:e,value:t}=this;this.onEntryMarkedAsMostRecentlyUsed({key:e,value:t})}}defaultClone(e){return"boolean"===typeof e||"string"===typeof e||"number"===typeof e?e:JSON.parse(JSON.stringify(e))}}},470:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(86),t)},506:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(e){var t="";if(0===e)return t;for(var n=0;n<e-1;++n)t+="arg"+String(n)+", ";return t+="arg"+String(e-1)}function generateBodyPartsCode(e,t){for(var n="",r="",i=0;i<t;++i)n+="var f".concat(i," = collection[").concat(i,"];\n"),r+="f".concat(i,"(").concat(e,")\n");return{funcDefCode:n,funcCallCode:r}}function generateBodyPartsVariadicCode(e){for(var t="",n="",r=0;r<e;++r)t+="var f".concat(r," = collection[").concat(r,"];\n"),n+="f".concat(r,".apply(undefined, arguments)\n");return{funcDefCode:t,funcCallCode:n}}function bakeCollection(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                ").concat(funcCallCode,"\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=collection.length%10===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 10) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                        collection[i+4](").concat(argsDefCode,");\n                        collection[i+5](").concat(argsDefCode,");\n                        collection[i+6](").concat(argsDefCode,");\n                        collection[i+7](").concat(argsDefCode,");\n                        collection[i+8](").concat(argsDefCode,");\n                        collection[i+9](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%4===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 4) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%3===0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 3) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                    }\n                });\n            })"):"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; ++i) {\n                        collection[i](").concat(argsDefCode,");\n                    }\n                });\n            })")}var bakeCollection_1=void 0,fixedArgsNum_1=void 0,bakeCollectionVariadic_1=void 0,bakeCollectionAwait_1=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionAwait(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                return Promise.all([ ").concat(funcCallCode," ]);\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode="(function(collection) {\n            return (function(".concat(argsDefCode,") {\n                var promises = Array(collection.length);\n                for (var i = 0; i < collection.length; ++i) {\n                    promises[i] = collection[i](").concat(argsDefCode,");\n                }\n                return Promise.all(promises);\n            });\n        })")}var bakeCollection_2=void 0,fixedArgsNum_2=void 0,bakeCollectionVariadic_2=void 0,bakeCollectionAwait_2=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionVariadic(collection){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function() {\n                ").concat(funcCallCode,"\n            });\n        })")}else funcFactoryCode="(function(collection) {\n            return (function() {\n                for (var i = 0; i < collection.length; ++i) {\n                    collection[i].apply(undefined, arguments);\n                }\n            });\n        })";var bakeCollection_3=void 0,fixedArgsNum=void 0,bakeCollectionVariadic_3=void 0,bakeCollectionAwait_3=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}exports.bakeCollection=bakeCollection,exports.bakeCollectionAwait=bakeCollectionAwait,exports.bakeCollectionVariadic=bakeCollectionVariadic},522:(e,t,n)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(n){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"/sync-nostr-relay",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(237)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},558:(e,t,n)=>{const{bech32:r,hex:i,utf8:s}=n(777),o={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},a={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},l={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},u={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},d=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],h={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},f=BigInt("2100000000000000000"),p=BigInt(1e11),g={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},y={};for(let k=0,E=Object.keys(g);k<E.length;k++){const e=E[k],t=g[E[k]].toString();y[t]=e}const m={1:e=>i.encode(r.fromWordsUnsafe(e)),16:e=>i.encode(r.fromWordsUnsafe(e)),13:e=>s.encode(r.fromWordsUnsafe(e)),19:e=>i.encode(r.fromWordsUnsafe(e)),23:e=>i.encode(r.fromWordsUnsafe(e)),27:e=>i.encode(r.fromWordsUnsafe(e)),6:w,24:w,3:function(e){const t=[];let n,s,o,a,l,u=r.fromWordsUnsafe(e);for(;u.length>0;)n=i.encode(u.slice(0,33)),s=i.encode(u.slice(33,41)),o=parseInt(i.encode(u.slice(41,45)),16),a=parseInt(i.encode(u.slice(45,49)),16),l=parseInt(i.encode(u.slice(49,51)),16),u=u.slice(51),t.push({pubkey:n,short_channel_id:s,fee_base_msat:o,fee_proportional_millionths:a,cltv_expiry_delta:l});return t},5:function(e){const t=e.slice().reverse().map((e=>[!!(1&e),!!(2&e),!!(4&e),!!(8&e),!!(16&e)])).reduce(((e,t)=>e.concat(t)),[]);for(;t.length<2*d.length;)t.push(!1);const n={};d.forEach(((e,r)=>{let i;i=t[2*r]?"required":t[2*r+1]?"supported":"unsupported",n[e]=i}));const r=t.slice(2*d.length);return n.extra_bits={start_bit:2*d.length,bits:r,has_required:r.reduce(((e,t,n)=>n%2!==0?e||!1:e||t),!1)},n}};function b(e){return t=>({tagCode:parseInt(e),words:r.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function w(e){return e.reverse().reduce(((e,t,n)=>e+t*Math.pow(32,n)),0)}function v(e,t){let n,r;if(e.slice(-1).match(/^[munp]$/))n=e.slice(-1),r=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");r=e}if(!r.match(/^\d+$/))throw new Error("Not a valid human readable amount");const i=BigInt(r),s=n?i*p/h[n]:i*p;if("p"===n&&i%BigInt(10)!==BigInt(0)||s>f)throw new Error("Amount is outside of valid range");return t?s.toString():s}e.exports={decode:function(e,t){if("string"!==typeof e)throw new Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw new Error("Not a proper lightning payment request");const n=[],s=r.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();const d=s.prefix;let h=s.words,f=e.slice(d.length+1),p=h.slice(-104);h=h.slice(0,-104);let k=d.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(k&&!k[2]&&(k=d.match(/^ln(\S+)$/)),!k)throw new Error("Not a proper lightning payment request");n.push({name:"lightning_network",letters:"ln"});const E=k[1];let S;if(t){if(void 0===t.bech32||void 0===t.pubKeyHash||void 0===t.scriptHash||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");S=t}else switch(E){case o.bech32:S=o;break;case a.bech32:S=a;break;case l.bech32:S=l;break;case u.bech32:S=u;break;case c.bech32:S=c}if(!S||S.bech32!==E)throw new Error("Unknown coin bech32 prefix");n.push({name:"coin_network",letters:E,value:S});const x=k[2];let _;if(x){_=v(x+k[3],!0),n.push({name:"amount",letters:k[2]+k[3],value:_})}else _=null;n.push({name:"separator",letters:"1"});const C=w(h.slice(0,7));let A,R,T,N;for(h=h.slice(7),n.push({name:"timestamp",letters:f.slice(0,7),value:C}),f=f.slice(7);h.length>0;){const e=h[0].toString();A=y[e]||"unknown_tag",R=m[e]||b(e),h=h.slice(1),T=w(h.slice(0,2)),h=h.slice(2),N=h.slice(0,T),h=h.slice(T),n.push({name:A,tag:f[0],letters:f.slice(0,3+T),value:R(N)}),f=f.slice(3+T)}n.push({name:"signature",letters:f.slice(0,104),value:i.encode(r.fromWordsUnsafe(p))}),f=f.slice(104),n.push({name:"checksum",letters:f});let P={paymentRequest:e,sections:n,get expiry(){let e=n.find((e=>"expiry"===e.name));if(e)return L("timestamp")+e.value},get route_hints(){return n.filter((e=>"route_hint"===e.name)).map((e=>e.value))}};for(let r in g)"route_hint"!==r&&Object.defineProperty(P,r,{get:()=>L(r)});return P;function L(e){let t=n.find((t=>t.name===e));return t?t.value:void 0}},hrpToMillisat:v}},579:(e,t,n)=>{"use strict";e.exports=n(799)},580:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},624:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nullObj=void 0,t.nullObj=function(){var e={__proto__:null};return e}},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},731:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var i=n(470),s=n(39),o=n(624);function a(e,t,n,r,i,s){var o=this.events[e];if(o){if(0===o.length)return!1;if(o.argsNum<6)o.call(t,n,r,i,s);else{for(var a=new Array(o.argsNum),l=0,u=a.length;l<u;++l)a[l]=arguments[l+1];o.call.apply(void 0,a)}return!0}return!1}function l(e,t,n,r,i,s){var o,a=this.events[e];if(void 0!==a){if(0===a.length)return!1;if(a.argsNum<6)a.call(t,n,r,i,s);else{for(var l=0,u=(o=new Array(a.argsNum)).length;l<u;++l)o[l]=arguments[l+1];a.call.apply(void 0,o)}}var c=this.onceEvents[e];if(c){if("function"===typeof c)if(this.onceEvents[e]=void 0,arguments.length<6)c(t,n,r,i,s);else{if(void 0===o)for(l=0,u=(o=new Array(arguments.length-1)).length;l<u;++l)o[l]=arguments[l+1];c.apply(void 0,o)}else{var d=c;if(this.onceEvents[e]=void 0,arguments.length<6)for(l=0;l<d.length;++l)d[l](t,n,r,i,s);else{if(void 0===o)for(l=0,u=(o=new Array(arguments.length-1)).length;l<u;++l)o[l]=arguments[l+1];for(l=0;l<d.length;++l)d[l].apply(void 0,o)}}return!0}return void 0!==a}var u=function(){function e(){this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(e.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),e}();function c(e,t,n){if(void 0===n&&(n=t.length),"function"!==typeof t)throw new TypeError("The listener must be a function");var r=this.events[e];return r?(r.push(t),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(this.events[e]=new i.TaskCollection(n,!0,t,!1),"symbol"===typeof e&&this._symbolKeys.add(e)),this}function d(e,t){var n=this.events[e];n&&n.removeLast(t);var r=this.onceEvents[e];return r&&("function"===typeof r?this.onceEvents[e]=void 0:"object"===typeof r&&(1===r.length&&r[0]===t?this.onceEvents[e]=void 0:(0,s._fast_remove_single)(r,r.lastIndexOf(t)))),this}t.EventEmitter=u,u.prototype.emit=a,u.prototype.on=c,u.prototype.once=function(e,t){switch(this.emit===a&&(this.emit=l),typeof this.onceEvents[e]){case"undefined":this.onceEvents[e]=t,"symbol"===typeof e&&this._symbolKeys.add(e);break;case"function":this.onceEvents[e]=[this.onceEvents[e],t];break;case"object":this.onceEvents[e].push(t)}return this},u.prototype.addListener=c,u.prototype.removeListener=d,u.prototype.addListenerBound=function(e,t,n,r){void 0===n&&(n=this),void 0===r&&(r=t.length),this.boundFuncs||(this.boundFuncs=new Map);var i=t.bind(n);return this.boundFuncs.set(t,i),this.addListener(e,i,r)},u.prototype.removeListenerBound=function(e,t){var n,r,i=null===(n=this.boundFuncs)||void 0===n?void 0:n.get(t);return null===(r=this.boundFuncs)||void 0===r||r.delete(t),this.removeListener(e,i)},u.prototype.hasListeners=function(e){return this.events[e]&&!!this.events[e].length},u.prototype.prependListener=function(e,t,n){if(void 0===n&&(n=t.length),"function"!==typeof t)throw new TypeError("The listener must be a function");var r=this.events[e];return r&&r instanceof i.TaskCollection?(r.insert(0,t),r.growArgsNum(n),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(r=this.events[e]=new i.TaskCollection(n,!0,t,!1),"symbol"===typeof e&&this._symbolKeys.add(e)),this},u.prototype.prependOnceListener=function(e,t){this.emit===a&&(this.emit=l);var n=this.onceEvents[e];return n?"object"!==typeof n?(this.onceEvents[e]=[t,n],"symbol"===typeof e&&this._symbolKeys.add(e)):(n.unshift(t),this.maxListeners!==1/0&&this.maxListeners<=n.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" once event!'))):(this.onceEvents[e]=[t],"symbol"===typeof e&&this._symbolKeys.add(e)),this},u.prototype.off=d,u.prototype.removeAllListeners=function(e){return void 0===e?(this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set):(this.events[e]=void 0,this.onceEvents[e]=void 0,"symbol"===typeof e&&this._symbolKeys.delete(e)),this},u.prototype.setMaxListeners=function(e){return this.maxListeners=e,this},u.prototype.getMaxListeners=function(){return this.maxListeners},u.prototype.listeners=function(e){return this.emit===a?this.events[e]?this.events[e].tasksAsArray().slice():[]:this.events[e]&&this.onceEvents[e]?r(r([],this.events[e].tasksAsArray(),!0),"function"===typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e],!0):this.events[e]?this.events[e].tasksAsArray():this.onceEvents[e]?"function"===typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e]:[]},u.prototype.eventNames=function(){var e=this;if(this.emit===a){var t=Object.keys(this.events);return r(r([],t,!0),Array.from(this._symbolKeys),!0).filter((function(t){return t in e.events&&e.events[t]&&e.events[t].length}))}t=Object.keys(this.events).filter((function(t){return e.events[t]&&e.events[t].length}));var n=Object.keys(this.onceEvents).filter((function(t){return e.onceEvents[t]&&e.onceEvents[t].length}));return r(r(r([],t,!0),n,!0),Array.from(this._symbolKeys).filter((function(t){return t in e.events&&e.events[t]&&e.events[t].length||t in e.onceEvents&&e.onceEvents[t]&&e.onceEvents[t].length})),!0)},u.prototype.listenerCount=function(e){return this.emit===a?this.events[e]&&this.events[e].length||0:(this.events[e]&&this.events[e].length||0)+(this.onceEvents[e]&&this.onceEvents[e].length||0)}},777:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function r(){const e=(e,t)=>n=>e(t(n));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{encode:Array.from(n).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),decode:n.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0)}}function i(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(n(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(n(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function a(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const s=[],o=Array.from(e);for(o.forEach((e=>{if(n(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,n=!0;for(let s=i;s<o.length;s++){const a=o[s],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!==t*e)throw new Error("convertRadix: carry overflow");if(e=l%r,o[s]=Math.floor(l/r),!Number.isSafeInteger(o[s])||o[s]*r+e!==l)throw new Error("convertRadix: carry overflow");n&&(o[s]?n=!1:i=s)}if(s.push(e),n)break}for(let n=0;n<e.length-1&&0===e[n];n++)s.push(0);return s.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=n;const u=(e,t)=>t?u(t,e%t):e,c=(e,t)=>e+(t-u(e,t));function d(e,t,r,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(c(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${c(t,r)}`);let s=0,o=0;const a=2**r-1,l=[];for(const u of e){if(n(u),u>=2**t)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(s=s<<t|u,o+t>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)l.push((s>>o-r&a)>>>0);s&=2**o-1}if(s=s<<r-o&a,!i&&o>=t)throw new Error("Excess padding");if(!i&&s)throw new Error(`Non-zero padding: ${s}`);return i&&o>0&&l.push(s>>>0),l}function h(e){return n(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(l(t,e,256))}}}function f(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(c(8,e)>32||c(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(d(n,e,8,t))}}}function p(e){if("function"!==typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch(i){}}}function g(e,t){if(n(e),"function"!==typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!(n instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),s=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==s[t])throw new Error("Invalid checksum");return r}}}t.utils={alphabet:i,chain:r,checksum:g,radix:h,radix2:f,join:s,padding:o},t.base16=r(f(4),i("0123456789ABCDEF"),s("")),t.base32=r(f(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o(5),s("")),t.base32hex=r(f(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o(5),s("")),t.base32crockford=r(f(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),a((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),t.base64=r(f(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o(6),s("")),t.base64url=r(f(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(6),s(""));const y=e=>r(h(58),i(e),s(""));t.base58=y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const m=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let n="";for(let r=0;r<e.length;r+=8){const i=e.subarray(r,r+8);n+=t.base58.encode(i).padStart(m[i.length],"1")}return n},decode(e){let n=[];for(let r=0;r<e.length;r+=11){const i=e.slice(r,r+11),s=m.indexOf(i.length),o=t.base58.decode(i);for(let e=0;e<o.length-s;e++)if(0!==o[e])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(o.slice(o.length-s)))}return Uint8Array.from(n)}};t.base58check=e=>r(g(4,(t=>e(e(t)))),t.base58);const b=r(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),w=[996825010,642813549,513874426,1027748829,705979059];function v(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<w.length;r++)1===(t>>r&1)&&(n^=w[r]);return n}function k(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let i=1;for(let s=0;s<r;s++){const t=e.charCodeAt(s);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);i=v(i)^t>>5}i=v(i);for(let s=0;s<r;s++)i=v(i)^31&e.charCodeAt(s);for(let s of t)i=v(i)^s;for(let s=0;s<6;s++)i=v(i);return i^=n,b.encode(d([i%2**30],30,5,!1))}function E(e){const t="bech32"===e?1:734539939,n=f(5),r=n.decode,i=n.encode,s=p(r);function o(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!==typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=e.slice(0,i),o=e.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const a=b.decode(o).slice(0,-6),l=k(s,a,t);if(!o.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:s,words:a}}return{encode:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!==typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${b.encode(n)}${k(e,n,t)}`},decode:o,decodeToBytes:function(e){const{prefix:t,words:n}=o(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:p(o),fromWords:r,fromWordsUnsafe:s,toWords:i}}t.bech32=E("bech32"),t.bech32m=E("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},t.hex=r(f(4),i("0123456789abcdef"),s(""),a((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const S={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},x=`Invalid encoding type. Available types: ${Object.keys(S).join(", ")}`;t.bytesToString=(e,t)=>{if("string"!==typeof e||!S.hasOwnProperty(e))throw new TypeError(x);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return S[e].encode(t)},t.str=t.bytesToString;t.stringToBytes=(e,t)=>{if(!S.hasOwnProperty(e))throw new TypeError(x);if("string"!==typeof t)throw new TypeError("stringToBytes() expects string");return S[e].decode(t)},t.bytes=t.stringToBytes},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element");function r(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r,t.jsxs=r},821:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(580),t),i(n(731),t)},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,g=!1,y=!1,m=!1,b="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function E(e){if(y=!1,k(e),!g)if(null!==r(u))g=!0,x||(x=!0,S());else{var t=r(c);null!==t&&L(E,t.startTime-e)}}var S,x=!1,_=-1,C=5,A=-1;function R(){return!!m||!(t.unstable_now()-A<C)}function T(){if(m=!1,x){var e=t.unstable_now();A=e;var n=!0;try{e:{g=!1,y&&(y=!1,w(_),_=-1),p=!0;var s=f;try{t:{for(k(e),h=r(u);null!==h&&!(h.expirationTime>e&&R());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,k(e),n=!0;break t}h===r(u)&&i(u),k(e)}else i(u);h=r(u)}if(null!==h)n=!0;else{var l=r(c);null!==l&&L(E,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?S():x=!1}}}if("function"===typeof v)S=function(){v(T)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=T,S=function(){P.postMessage(null)}}else S=function(){b(T,0)};function L(e,n){_=b((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){m=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(y?(w(_),_=-1):y=!0,L(E,s-o))):(e.sortIndex=a,n(u,e),g||p||(g=!0,x||(x=!0,S()))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{OG:()=>F,My:()=>A,Ph:()=>N,lX:()=>P,Id:()=>O,fg:()=>z,qj:()=>U,aT:()=>T,lq:()=>L,z:()=>I,Q5:()=>$});var t=__webpack_require__(43),n=__webpack_require__(391);function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}function s(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function o(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){i(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const l="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u=e=>e instanceof Uint8Array,c=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),d=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function h(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!u(e))throw new Error("expected Uint8Array, got "+typeof e);return e}class f{clone(){return this._cloneInto()}}function p(e){const t=t=>e().update(h(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(l&&"function"===typeof l.getRandomValues)return l.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class y extends f{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=c(this.buffer)}update(e){o(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=h(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=c(e);for(;r<=i-s;s+=r)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){o(this),a(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let o=s;o<r;o++)t[o]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,u=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const l=c(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=u/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let o=0;o<d;o++)l.setUint32(4*o,h[o],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=s,r%t&&e.buffer.set(n),e}}const m=(e,t,n)=>e&t^e&n^t&n,b=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),w=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),v=new Uint32Array(64);class k extends y{constructor(){super(64,32,8,!1),this.A=0|w[0],this.B=0|w[1],this.C=0|w[2],this.D=0|w[3],this.E=0|w[4],this.F=0|w[5],this.G=0|w[6],this.H=0|w[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[e,t,n,r,i,s,o,a]}set(e,t,n,r,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let d=0;d<16;d++,t+=4)v[d]=e.getUint32(t,!1);for(let h=16;h<64;h++){const e=v[h-15],t=v[h-2],n=d(e,7)^d(e,18)^e>>>3,r=d(t,17)^d(t,19)^t>>>10;v[h]=r+v[h-7]+n+v[h-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:l,H:u}=this;for(let h=0;h<64;h++){const e=u+(d(o,6)^d(o,11)^d(o,25))+((c=o)&a^~c&l)+b[h]+v[h]|0,t=(d(n,2)^d(n,13)^d(n,22))+m(n,r,i)|0;u=l,l=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+t|0}var c;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,l,u)}roundClean(){v.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const E=p((()=>new k)),S=(BigInt(0),BigInt(1)),x=BigInt(2),_=e=>e instanceof Uint8Array,C=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function A(e){if(!_(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=C[e[n]];return t}function R(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function T(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,i=e.slice(t,t+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function N(e){return R(A(e))}function P(e){if(!_(e))throw new Error("Uint8Array expected");return R(A(Uint8Array.from(e).reverse()))}function L(e,t){return T(e.toString(16).padStart(2*t,"0"))}function I(e,t){return L(e,t).reverse()}function U(e,t,n){let r;if("string"===typeof t)try{r=T(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else{if(!_(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"===typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!_(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length})),r}const F=e=>(x<<BigInt(e-1))-S,M=e=>new Uint8Array(e),D=e=>Uint8Array.from(e);function z(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=M(e),i=M(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n(i,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M();i=a(D([0]),e),r=a(),0!==e.length&&(i=a(D([1]),e),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return O(...n)};return(e,t)=>{let n;for(o(),l(e);!(n=t(u()));)l();return o(),n}}const B={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function $(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const i=B[n];if("function"!==typeof i)throw new Error(`Invalid validator "${n}", expected function`);const s=e[t];if((!r||void 0!==s)&&!i(s,e))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${n}`)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const V=BigInt(0),j=BigInt(1),H=BigInt(2),q=BigInt(3),W=BigInt(4),K=BigInt(5),G=BigInt(8);BigInt(9),BigInt(16);function Q(e,t){const n=e%t;return n>=V?n:t+n}function Z(e,t,n){if(n<=V||t<V)throw new Error("Expected power/modulo > 0");if(n===j)return V;let r=j;for(;t>V;)t&j&&(r=r*e%n),e=e*e%n,t>>=j;return r}function Y(e,t,n){let r=e;for(;t-- >V;)r*=r,r%=n;return r}function J(e,t){if(e===V||t<=V)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Q(e,t),r=t,i=V,s=j,o=j,a=V;for(;n!==V;){const e=r/n,t=r%n,l=i-o*e,u=s-a*e;r=n,n=t,i=o,s=a,o=l,a=u}if(r!==j)throw new Error("invert: does not exist");return Q(i,t)}function X(e){if(e%W===q){const t=(e+j)/W;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%G===K){const t=(e-K)/G;return function(e,n){const r=e.mul(n,H),i=e.pow(r,t),s=e.mul(n,i),o=e.mul(e.mul(s,H),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-j)/H;let n,r,i;for(n=e-j,r=0;n%H===V;n/=H,r++);for(i=H;i<e&&Z(i,t,e)!==e-j;i++);if(1===r){const t=(e+j)/W;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+j)/H;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),n),u=e.pow(o,s),c=e.pow(o,n);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,j<<BigInt(a-t-1));l=e.sqr(n),u=e.mul(u,n),c=e.mul(c,l),a=t}return u}}(e)}const ee=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function te(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ne(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function re(e){const t=ne(e);return t+Math.ceil(t/2)}class ie extends f{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,s(e);const n=h(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return o(this),this.iHash.update(e),this}digestInto(e){o(this),i(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const se=(e,t,n)=>new ie(e,t).update(n).digest();se.create=(e,t)=>new ie(e,t);const oe=BigInt(0),ae=BigInt(1);function le(e){return $(e.Fp,ee.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),$(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...te(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{Ph:ue,aT:ce}=e,de={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:t}=de;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:ue(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=de,n="string"===typeof e?ce(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=de._parseInt(n.subarray(2)),{d:o,l:a}=de._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},he=BigInt(0),fe=BigInt(1),pe=(BigInt(2),BigInt(3));BigInt(4);function ge(e){const t=function(e){const t=le(e);$(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return O(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function s(e){const{a:r,b:i}=t,s=n.sqr(e),o=n.mul(s,e);return n.add(n.add(o,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"===typeof e&&he<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=t;if(n&&"bigint"!==typeof e){if(e instanceof Uint8Array&&(e=A(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let o;try{o="bigint"===typeof e?e:N(U("private key",e,r))}catch(l){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(o=Q(o,s)),a(o),o}const u=new Map;function c(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?d.ZERO:new d(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(i(U("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),o=s(e);if(!n.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:r,pz:i}=this,{px:s,py:o,pz:a}=e,l=n.eql(n.mul(t,a),n.mul(s,i)),u=n.eql(n.mul(r,a),n.mul(o,i));return l&&u}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,pe),{px:s,py:o,pz:a}=this;let l=n.ZERO,u=n.ZERO,c=n.ZERO,h=n.mul(s,s),f=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),c=n.mul(s,a),c=n.add(c,c),l=n.mul(e,c),u=n.mul(i,p),u=n.add(l,u),l=n.sub(f,u),u=n.add(f,u),u=n.mul(l,u),l=n.mul(g,l),c=n.mul(i,c),p=n.mul(e,p),g=n.sub(h,p),g=n.mul(e,g),g=n.add(g,c),c=n.add(h,h),h=n.add(c,h),h=n.add(h,p),h=n.mul(h,g),u=n.add(u,h),p=n.mul(o,a),p=n.add(p,p),h=n.mul(p,g),l=n.sub(l,h),c=n.mul(p,f),c=n.add(c,c),c=n.add(c,c),new d(l,u,c)}add(e){c(e);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:l}=e;let u=n.ZERO,h=n.ZERO,f=n.ZERO;const p=t.a,g=n.mul(t.b,pe);let y=n.mul(r,o),m=n.mul(i,a),b=n.mul(s,l),w=n.add(r,i),v=n.add(o,a);w=n.mul(w,v),v=n.add(y,m),w=n.sub(w,v),v=n.add(r,s);let k=n.add(o,l);return v=n.mul(v,k),k=n.add(y,b),v=n.sub(v,k),k=n.add(i,s),u=n.add(a,l),k=n.mul(k,u),u=n.add(m,b),k=n.sub(k,u),f=n.mul(p,v),u=n.mul(g,b),f=n.add(u,f),u=n.sub(m,f),f=n.add(m,f),h=n.mul(u,f),m=n.add(y,y),m=n.add(m,y),b=n.mul(p,b),v=n.mul(g,v),m=n.add(m,b),b=n.sub(y,b),b=n.mul(p,b),v=n.add(v,b),y=n.mul(m,v),h=n.add(h,y),y=n.mul(k,v),u=n.mul(w,u),u=n.sub(u,y),y=n.mul(w,m),f=n.mul(k,f),f=n.add(f,y),new d(u,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,u,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}))}multiplyUnsafe(e){const r=d.ZERO;if(e===he)return r;if(a(e),e===fe)return this;const{endo:i}=t;if(!i)return f.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:l,k2:u}=i.splitScalar(e),c=r,h=r,p=this;for(;o>he||u>he;)o&fe&&(c=c.add(p)),u&fe&&(h=h.add(p)),p=p.double(),o>>=fe,u>>=fe;return s&&(c=c.negate()),l&&(h=h.negate()),h=new d(n.mul(h.px,i.beta),h.py,h.pz),c.add(h)}multiply(e){a(e);let r,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:l}=o.splitScalar(s);let{p:u,f:c}=this.wNAF(t),{p:h,f:p}=this.wNAF(l);u=f.constTimeNegate(e,u),h=f.constTimeNegate(a,h),h=new d(n.mul(h.px,o.beta),h.py,h.pz),r=u.add(h),i=c.add(p)}else{const{p:e,f:t}=this.wNAF(s);r=e,i=t}return d.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=d.BASE,i=(e,t)=>t!==he&&t!==fe&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,n));return s.is0()?void 0:s}toAffine(e){const{px:t,py:r,pz:i}=this,s=this.is0();null==e&&(e=s?n.ONE:n.inv(i));const o=n.mul(t,e),a=n.mul(r,e),l=n.mul(i,e);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===fe)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===fe?this:n?n(d,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),r(d,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return A(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>oe;)n&ae&&(r=r.add(i)),i=i.double(),n>>=ae;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),s=[];let o=e,a=o;for(let r=0;r<n;r++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:o,windowSize:a}=r(t);let l=e.ZERO,u=e.BASE;const c=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let r=Number(s&c);s>>=h,r>a&&(r-=d,s+=ae);const o=t,f=t+Math.abs(r)-1,p=e%2!==0,g=r<0;0===r?u=u.add(n(p,i[o])):l=l.add(n(g,i[f]))}return{p:l,f:u}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,r(s))),this.wNAF(i,s,n)}}}(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function ye(e){const t=function(e){const t=le(e);return $(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(e){return Q(e,r)}function a(e){return J(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:d}=ge({...t,toBytes(e,t,r){const i=t.toAffine(),s=n.toBytes(i.x),o=O;return r?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===s&&4===r){return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const e=N(o);if(!function(e){return he<e&&e<n.ORDER}(e))throw new Error("Point is not on curve");const t=c(e);let i=n.sqrt(t);return 1===(1&r)!==((i&fe)===fe)&&(i=n.neg(i)),{x:e,y:i}}}}),h=e=>A(L(e,t.nByteLength));function f(e){return e>r>>fe}const p=(e,t,n)=>N(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=U("compactSignature",e,2*n),new g(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=de.toSig(U("DER",e));return new g(t,n)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:s}=this,u=w(U("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const c=2===s||3===s?r+t.n:r;if(c>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0===(1&s)?"02":"03",f=l.fromHex(d+h(c)),p=a(c),g=o(-u*p),y=o(i*p),m=l.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return T(this.toDERHex())}toDERHex(){return de.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return T(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(e){try{return u(e),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=re(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.length,i=ne(t),s=re(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=Q(n?N(e):P(e),t-j)+j;return n?I(o,i):L(o,i)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function m(e){const t=e instanceof Uint8Array,n="string"===typeof e,r=(t||n)&&e.length;return t?r===i||r===s:n?r===2*i||r===2*s:e instanceof l}const b=t.bits2int||function(e){const n=N(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},w=t.bits2int_modN||function(e){return o(b(e))},v=F(t.nBitLength);function k(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(he<=e&&e<v))throw new Error(`bigint expected < 2^${t.nBitLength}`);return L(e,t.nByteLength)}function E(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:c}=t;let{lowS:h,prehash:p,extraEntropy:y}=i;null==h&&(h=!0),e=U("msgHash",e),p&&(e=U("prehashed msgHash",s(e)));const m=w(e),v=u(r),E=[k(v),k(m)];if(null!=y){const e=!0===y?c(n.BYTES):y;E.push(U("extraEntropy",e))}const x=O(...E),_=m;return{seed:x,k2sig:function(e){const t=b(e);if(!d(t))return;const n=a(t),r=l.BASE.multiply(t).toAffine(),i=o(r.x);if(i===he)return;const s=o(n*o(_+i*v));if(s===he)return;let u=(r.x===i?0:2)|Number(r.y&fe),c=s;return h&&f(s)&&(c=function(e){return f(e)?o(-e):e}(s),u^=1),new g(i,c,u)}}}const S={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(m(e))throw new Error("first arg must be private key");if(!m(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;const{seed:i,k2sig:s}=E(e,n,r),o=t;return z(o.hash.outputLen,o.nByteLength,o.hmac)(i,s)},verify:function(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;const s=e;if(n=U("msgHash",n),r=U("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:c}=i;let d,h;try{if("string"===typeof s||s instanceof Uint8Array)try{d=g.fromDER(s)}catch(E){if(!(E instanceof de.Err))throw E;d=g.fromCompact(s)}else{if("object"!==typeof s||"bigint"!==typeof s.r||"bigint"!==typeof s.s)throw new Error("PARSE");{const{r:e,s:t}=s;d=new g(e,t)}}h=l.fromHex(r)}catch(S){if("PARSE"===S.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&d.hasHighS())return!1;c&&(n=t.hash(n));const{r:f,s:p}=d,y=w(n),m=a(p),b=o(y*m),v=o(f*m),k=l.BASE.multiplyAndAddUnsafe(h,b,v)?.toAffine();return!!k&&o(k.x)===f},ProjectivePoint:l,Signature:g,utils:y}}function me(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return se(e,t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!u(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length})),r}(...r))},randomBytes:g}}const be=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),we=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ve=BigInt(1),ke=BigInt(2),Ee=(e,t)=>(e+t/ke)/t;function Se(e){const t=be,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,c=u*u*e%t,d=Y(c,n,t)*c%t,h=Y(d,n,t)*c%t,f=Y(h,ke,t)*u%t,p=Y(f,i,t)*f%t,g=Y(p,s,t)*p%t,y=Y(g,a,t)*g%t,m=Y(y,l,t)*y%t,b=Y(m,a,t)*g%t,w=Y(b,n,t)*c%t,v=Y(w,o,t)*p%t,k=Y(v,r,t)*u%t,E=Y(k,ke,t);if(!xe.eql(xe.sqr(E),e))throw new Error("Cannot find square root");return E}const xe=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=V)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=te(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=X(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:F(i),ZERO:V,ONE:j,create:t=>Q(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return V<=t&&t<e},is0:e=>e===V,isOdd:e=>(e&j)===j,neg:t=>Q(-t,e),eql:(e,t)=>e===t,sqr:t=>Q(t*t,e),add:(t,n)=>Q(t+n,e),sub:(t,n)=>Q(t-n,e),mul:(t,n)=>Q(t*n,e),pow:(e,t)=>function(e,t,n){if(n<V)throw new Error("Expected power > 0");if(n===V)return e.ONE;if(n===j)return t;let r=e.ONE,i=t;for(;n>V;)n&j&&(r=e.mul(r,i)),i=e.sqr(i),n>>=j;return r}(a,e,t),div:(t,n)=>Q(t*J(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>J(t,e),sqrt:r.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?I(e,s):L(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return n?P(e):N(e)}});return Object.freeze(a)}(be,void 0,void 0,{sqrt:Se}),_e=function(e,t){const n=t=>ye({...e,...me(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:xe,n:we,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=we,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ve*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Ee(s*e,t),l=Ee(-r*e,t);let u=Q(e-a*n-l*i,t),c=Q(-a*r-l*s,t);const d=u>o,h=c>o;if(d&&(u=t-u),h&&(c=t-c),u>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:c}}}},E),Ce=BigInt(0),Ae=e=>"bigint"===typeof e&&Ce<e&&e<be,Re={};function Te(e){let t=Re[e];if(void 0===t){const n=E(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=O(n,n),Re[e]=t}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return E(O(t,...r))}const Ne=e=>e.toRawBytes(!0).slice(1),Pe=e=>L(e,32),Le=e=>Q(e,be),Ie=e=>Q(e,we),Ue=_e.ProjectivePoint;function Oe(e){let t=_e.utils.normPrivateKeyToScalar(e),n=Ue.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Ie(-t),bytes:Ne(n)}}function Fe(e){if(!Ae(e))throw new Error("bad x: need 0 < x < p");const t=Le(e*e);let n=Se(Le(t*e+BigInt(7)));n%ke!==Ce&&(n=Le(-n));const r=new Ue(e,n,ve);return r.assertValidity(),r}function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ie(N(Te("BIP0340/challenge",...t)))}function De(e){return Oe(e).bytes}function ze(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g(32);const r=U("message",e),{bytes:i,scalar:s}=Oe(t),o=U("auxRand",n,32),a=Pe(s^N(Te("BIP0340/aux",o))),l=Te("BIP0340/nonce",a,i,r),u=Ie(N(l));if(u===Ce)throw new Error("sign failed: k is zero");const{bytes:c,scalar:d}=Oe(u),h=Me(c,i,r),f=new Uint8Array(64);if(f.set(c,0),f.set(Pe(Ie(d+h*s)),32),!Be(f,r,i))throw new Error("sign: Invalid signature produced");return f}function Be(e,t,n){const r=U("signature",e,64),i=U("message",t),s=U("publicKey",n,32);try{const e=Fe(N(s)),t=N(r.subarray(0,32));if(!Ae(t))return!1;const n=N(r.subarray(32,64));if(!("bigint"===typeof(u=n)&&Ce<u&&u<we))return!1;const c=Me(Pe(t),Ne(e),i),d=(o=e,a=n,l=Ie(-c),Ue.BASE.multiplyAndAddUnsafe(o,a,l));return!(!d||!d.hasEvenY()||d.toAffine().x!==t)}catch(c){return!1}var o,a,l,u}const $e=(()=>({getPublicKey:De,sign:ze,verify:Be,utils:{randomPrivateKey:_e.utils.randomPrivateKey,lift_x:Fe,pointToBytes:Ne,numberToBytesBE:L,bytesToNumberBE:N,taggedHash:Te,mod:Q}}))(),Ve="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,je=e=>e instanceof Uint8Array,He=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),qe=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const We=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ke(e){if(!je(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=We[e[n]];return t}function Ge(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,i=e.slice(t,t+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function Qe(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!je(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function Ze(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce(((e,t)=>e+t.length),0));let i=0;return t.forEach((e=>{if(!je(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length})),r}class Ye{clone(){return this._cloneInto()}}function Je(e){const t=t=>e().update(Qe(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Ve&&"function"===typeof Ve.getRandomValues)return Ve.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function et(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function tt(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${e.length}`)}const nt={number:et,bool:function(e){if("boolean"!==typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:tt,hash:function(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");et(e.outputLen),et(e.blockLen)},exists:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){tt(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},rt=nt;class it extends Ye{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=He(this.buffer)}update(e){rt.exists(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=Qe(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=He(e);for(;r<=i-s;s+=r)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){rt.exists(this),rt.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let c=s;c<r;c++)t[c]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,u=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=He(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)o.setUint32(4*c,u[c],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=s,r%t&&e.buffer.set(n),e}}const st=(e,t,n)=>e&t^e&n^t&n,ot=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),at=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lt=new Uint32Array(64);class ut extends it{constructor(){super(64,32,8,!1),this.A=0|at[0],this.B=0|at[1],this.C=0|at[2],this.D=0|at[3],this.E=0|at[4],this.F=0|at[5],this.G=0|at[6],this.H=0|at[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[e,t,n,r,i,s,o,a]}set(e,t,n,r,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let d=0;d<16;d++,t+=4)lt[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const e=lt[d-15],t=lt[d-2],n=qe(e,7)^qe(e,18)^e>>>3,r=qe(t,17)^qe(t,19)^t>>>10;lt[d]=r+lt[d-7]+n+lt[d-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:l,H:u}=this;for(let d=0;d<64;d++){const e=u+(qe(o,6)^qe(o,11)^qe(o,25))+((c=o)&a^~c&l)+ot[d]+lt[d]|0,t=(qe(n,2)^qe(n,13)^qe(n,22))+st(n,r,i)|0;u=l,l=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+t|0}var c;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,l,u)}roundClean(){lt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class ct extends ut{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const dt=Je((()=>new ut));Je((()=>new ct));function ht(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function ft(){const e=(e,t)=>n=>e(t(n));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=Array.from(n).reverse().reduce(((t,n)=>t?e(t,n.encode):n.encode),void 0),s=n.reduce(((t,n)=>t?e(t,n.decode):n.decode),void 0);return{encode:i,decode:s}}function pt(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(ht(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function yt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(ht(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!==typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!==typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function mt(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function bt(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],s=Array.from(e);for(s.forEach((e=>{if(ht(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,o=!0;for(let i=r;i<s.length;i++){const a=s[i],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!==t*e)throw new Error("convertRadix: carry overflow");if(e=l%n,s[i]=Math.floor(l/n),!Number.isSafeInteger(s[i])||s[i]*n+e!==l)throw new Error("convertRadix: carry overflow");o&&(s[i]?o=!1:r=i)}if(i.push(e),o)break}for(let o=0;o<e.length-1&&0===e[o];o++)i.push(0);return i.reverse()}const wt=(e,t)=>t?wt(t,e%t):e,vt=(e,t)=>e+(t-wt(e,t));function kt(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(vt(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${vt(t,n)}`);let i=0,s=0;const o=2**n-1,a=[];for(const l of e){if(ht(l),l>=2**t)throw new Error(`convertRadix2: invalid data word=${l} from=${t}`);if(i=i<<t|l,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)a.push((i>>s-n&o)>>>0);i&=2**s-1}if(i=i<<n-s&o,!r&&s>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&a.push(i>>>0),a}function Et(e){return ht(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return bt(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(bt(t,e,256))}}}function St(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ht(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(vt(8,e)>32||vt(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return kt(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(kt(n,e,8,t))}}}function xt(e){if("function"!==typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch(i){}}}const _t=ft(St(4),pt("0123456789ABCDEF"),gt("")),Ct=ft(St(5),pt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),yt(5),gt("")),At=(ft(St(5),pt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),yt(5),gt("")),ft(St(5),pt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),gt(""),mt((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),ft(St(6),pt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),yt(6),gt(""))),Rt=ft(St(6),pt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),yt(6),gt("")),Tt=e=>ft(Et(58),pt(e),gt("")),Nt=Tt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Pt=(Tt("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Tt("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),[0,2,3,5,6,7,9,10,11]),Lt={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Nt.encode(r).padStart(Pt[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=Pt.indexOf(r.length),s=Nt.decode(r);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},It=ft(pt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),gt("")),Ut=[996825010,642813549,513874426,1027748829,705979059];function Ot(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<Ut.length;r++)1===(t>>r&1)&&(n^=Ut[r]);return n}function Ft(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let i=1;for(let s=0;s<r;s++){const t=e.charCodeAt(s);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);i=Ot(i)^t>>5}i=Ot(i);for(let s=0;s<r;s++)i=Ot(i)^31&e.charCodeAt(s);for(let s of t)i=Ot(i)^s;for(let s=0;s<6;s++)i=Ot(i);return i^=n,It.encode(kt([i%2**30],30,5,!1))}function Mt(e){const t="bech32"===e?1:734539939,n=St(5),r=n.decode,i=n.encode,s=xt(r);function o(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!==typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=e.slice(0,i),o=e.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const a=It.decode(o).slice(0,-6),l=Ft(s,a,t);if(!o.endsWith(l))throw new Error(`Invalid checksum in ${e}: expected "${l}"`);return{prefix:s,words:a}}return{encode:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!==typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!==typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${It.encode(n)}${Ft(e,n,t)}`},decode:o,decodeToBytes:function(e){const{prefix:t,words:n}=o(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:xt(o),fromWords:r,fromWordsUnsafe:s,toWords:i}}const Dt=Mt("bech32"),zt=(Mt("bech32m"),{encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)});ft(St(4),pt("0123456789abcdef"),gt(""),mt((e=>{if("string"!==typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));function Bt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function $t(e){if("boolean"!==typeof e)throw new Error(`boolean expected, not ${e}`)}function Vt(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function jt(e){if(!Vt(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Uint8Array expected of length ${n}, not of length=${e.length}`)}function Ht(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function qt(e,t){jt(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Wt=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),Kt=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Gt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Qt(e){if("string"===typeof e)e=function(e){if("string"!==typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!Vt(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e}function Zt(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}const Yt=(e,t)=>(Object.assign(t,e),t);function Jt(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,u=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+u,a,r)}const Xt=16,en=new Uint8Array(16),tn=Kt(en),nn=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;class rn{constructor(e,t){this.blockLen=Xt,this.outputLen=Xt,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,jt(e=Qt(e),16);const n=Gt(e);let r=n.getUint32(0,!1),i=n.getUint32(4,!1),s=n.getUint32(8,!1),o=n.getUint32(12,!1);const a=[];for(let y=0;y<128;y++)a.push({s0:nn(r),s1:nn(i),s2:nn(s),s3:nn(o)}),({s0:r,s1:i,s2:s,s3:o}={s3:(c=s)<<31|(d=o)>>>1,s2:(u=i)<<31|c>>>1,s1:(l=r)<<31|u>>>1,s0:l>>>1^225<<24&-(1&d)});var l,u,c,d;const h=(e=>e>65536?8:e>1024?4:2)(t||1024);if(![1,2,4,8].includes(h))throw new Error(`ghash: wrong window size=${h}, should be 2, 4 or 8`);this.W=h;const f=128/h,p=this.windowSize=2**h,g=[];for(let y=0;y<f;y++)for(let e=0;e<p;e++){let t=0,n=0,r=0,i=0;for(let s=0;s<h;s++){if(!(e>>>h-s-1&1))continue;const{s0:o,s1:l,s2:u,s3:c}=a[h*y+s];t^=o,n^=l,r^=u,i^=c}g.push({s0:t,s1:n,s2:r,s3:i})}this.t=g}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;const{W:i,t:s,windowSize:o}=this;let a=0,l=0,u=0,c=0;const d=(1<<i)-1;let h=0;for(const f of[e,t,n,r])for(let e=0;e<4;e++){const t=f>>>8*e&255;for(let e=8/i-1;e>=0;e--){const n=t>>>i*e&d,{s0:r,s1:f,s2:p,s3:g}=s[h*o+n];a^=r,l^=f,u^=p,c^=g,h+=1}}this.s0=a,this.s1=l,this.s2=u,this.s3=c}update(e){e=Qt(e),Ht(this);const t=Kt(e),n=Math.floor(e.length/Xt),r=e.length%Xt;for(let i=0;i<n;i++)this._updateBlock(t[4*i+0],t[4*i+1],t[4*i+2],t[4*i+3]);return r&&(en.set(e.subarray(n*Xt)),this._updateBlock(tn[0],tn[1],tn[2],tn[3]),tn.fill(0)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){Ht(this),qt(e,this),this.finished=!0;const{s0:t,s1:n,s2:r,s3:i}=this,s=Kt(e);return s[0]=t,s[1]=n,s[2]=r,s[3]=i,e}digest(){const e=new Uint8Array(Xt);return this.digestInto(e),this.destroy(),e}}class sn extends rn{constructor(e,t){const n=function(e){e.reverse();const t=1&e[15];let n=0;for(let r=0;r<e.length;r++){const t=e[r];e[r]=t>>>1|n,n=(1&t)<<7}return e[0]^=225&-t,e}((e=Qt(e)).slice());super(n,t),n.fill(0)}update(e){e=Qt(e),Ht(this);const t=Kt(e),n=e.length%Xt,r=Math.floor(e.length/Xt);for(let i=0;i<r;i++)this._updateBlock(nn(t[4*i+3]),nn(t[4*i+2]),nn(t[4*i+1]),nn(t[4*i+0]));return n&&(en.set(e.subarray(r*Xt)),this._updateBlock(nn(tn[3]),nn(tn[2]),nn(tn[1]),nn(tn[0])),tn.fill(0)),this}digestInto(e){Ht(this),qt(e,this),this.finished=!0;const{s0:t,s1:n,s2:r,s3:i}=this,s=Kt(e);return s[0]=t,s[1]=n,s[2]=r,s[3]=i,e.reverse()}}function on(e){const t=(t,n)=>e(n,t.length).update(Qt(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}const an=on(((e,t)=>new rn(e,t))),ln=on(((e,t)=>new sn(e,t))),un=16,cn=new Uint8Array(un);function dn(e){return e<<1^283&-(e>>7)}function hn(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=dn(e);return n}const fn=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=dn(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return t})(),pn=fn.map(((e,t)=>fn.indexOf(t))),gn=e=>e<<8|e>>>24;function yn(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((n,r)=>t(e[r]))),r=n.map(gn),i=r.map(gn),s=i.map(gn),o=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let u=0;u<256;u++)for(let t=0;t<256;t++){const c=256*u+t;o[c]=n[u]^r[t],a[c]=i[u]^s[t],l[c]=e[u]<<8|e[t]}return{sbox:e,sbox2:l,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const mn=yn(fn,(e=>hn(e,3)<<24|e<<16|e<<8|hn(e,2))),bn=yn(pn,(e=>hn(e,11)<<24|hn(e,13)<<16|hn(e,9)<<8|hn(e,14))),wn=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=dn(n))e[t]=n;return e})();function vn(e){jt(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=mn,r=Kt(e),i=r.length,s=e=>Sn(n,e,e,e,e),o=new Uint32Array(t+28);o.set(r);for(let l=i;l<o.length;l++){let e=o[l-1];l%i===0?e=s((a=e)<<24|a>>>8)^wn[l/i-1]:i>6&&l%i===4&&(e=s(e)),o[l]=o[l-i]^e}var a;return o}function kn(e){const t=vn(e),n=t.slice(),r=t.length,{sbox2:i}=mn,{T0:s,T1:o,T2:a,T3:l}=bn;for(let u=0;u<r;u+=4)for(let e=0;e<4;e++)n[u+e]=t[r-u-4+e];t.fill(0);for(let u=4;u<r-4;u++){const e=n[u],t=Sn(i,e,e,e,e);n[u]=s[255&t]^o[t>>>8&255]^a[t>>>16&255]^l[t>>>24]}return n}function En(e,t,n,r,i,s){return e[n<<8&65280|r>>>8&255]^t[i>>>8&65280|s>>>24&255]}function Sn(e,t,n,r,i){return e[255&t|65280&n]|e[r>>>16&255|i>>>16&65280]<<16}function xn(e,t,n,r,i){const{sbox2:s,T01:o,T23:a}=mn;let l=0;t^=e[l++],n^=e[l++],r^=e[l++],i^=e[l++];const u=e.length/4-2;for(let c=0;c<u;c++){const s=e[l++]^En(o,a,t,n,r,i),u=e[l++]^En(o,a,n,r,i,t),c=e[l++]^En(o,a,r,i,t,n),d=e[l++]^En(o,a,i,t,n,r);t=s,n=u,r=c,i=d}return{s0:e[l++]^Sn(s,t,n,r,i),s1:e[l++]^Sn(s,n,r,i,t),s2:e[l++]^Sn(s,r,i,t,n),s3:e[l++]^Sn(s,i,t,n,r)}}function _n(e,t,n,r,i){const{sbox2:s,T01:o,T23:a}=bn;let l=0;t^=e[l++],n^=e[l++],r^=e[l++],i^=e[l++];const u=e.length/4-2;for(let c=0;c<u;c++){const s=e[l++]^En(o,a,t,i,r,n),u=e[l++]^En(o,a,n,t,i,r),c=e[l++]^En(o,a,r,n,t,i),d=e[l++]^En(o,a,i,r,n,t);t=s,n=u,r=c,i=d}return{s0:e[l++]^Sn(s,t,i,r,n),s1:e[l++]^Sn(s,n,t,i,r),s2:e[l++]^Sn(s,r,n,t,i),s3:e[l++]^Sn(s,i,r,n,t)}}function Cn(e,t){if(!t)return new Uint8Array(e);if(jt(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function An(e,t,n,r){jt(t,un),jt(n);const i=n.length;r=Cn(i,r);const s=t,o=Kt(s);let{s0:a,s1:l,s2:u,s3:c}=xn(e,o[0],o[1],o[2],o[3]);const d=Kt(n),h=Kt(r);for(let p=0;p+4<=d.length;p+=4){h[p+0]=d[p+0]^a,h[p+1]=d[p+1]^l,h[p+2]=d[p+2]^u,h[p+3]=d[p+3]^c;let t=1;for(let e=s.length-1;e>=0;e--)t=t+(255&s[e])|0,s[e]=255&t,t>>>=8;({s0:a,s1:l,s2:u,s3:c}=xn(e,o[0],o[1],o[2],o[3]))}const f=un*Math.floor(d.length/4);if(f<i){const e=new Uint32Array([a,l,u,c]),t=Wt(e);for(let s=f,o=0;s<i;s++,o++)r[s]=n[s]^t[o]}return r}function Rn(e,t,n,r,i){jt(n,un),jt(r),i=Cn(r.length,i);const s=n,o=Kt(s),a=Gt(s),l=Kt(r),u=Kt(i),c=t?0:12,d=r.length;let h=a.getUint32(c,t),{s0:f,s1:p,s2:g,s3:y}=xn(e,o[0],o[1],o[2],o[3]);for(let b=0;b+4<=l.length;b+=4)u[b+0]=l[b+0]^f,u[b+1]=l[b+1]^p,u[b+2]=l[b+2]^g,u[b+3]=l[b+3]^y,h=h+1>>>0,a.setUint32(c,h,t),({s0:f,s1:p,s2:g,s3:y}=xn(e,o[0],o[1],o[2],o[3]));const m=un*Math.floor(l.length/4);if(m<d){const e=new Uint32Array([f,p,g,y]),t=Wt(e);for(let n=m,s=0;n<d;n++,s++)i[n]=r[n]^t[s]}return i}Yt({blockSize:16,nonceLength:16},(function(e,t){function n(n,r){const i=vn(e),s=t.slice(),o=An(i,s,n,r);return i.fill(0),s.fill(0),o}return jt(e),jt(t,un),{encrypt:(e,t)=>n(e,t),decrypt:(e,t)=>n(e,t)}}));function Tn(e){if(jt(e),e.length%un!==0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function Nn(e,t,n){let r=e.length;const i=r%un;if(!t&&0!==i)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const s=Kt(e);if(t){let e=un-i;e||(e=un),r+=e}const o=Cn(r,n);return{b:s,o:Kt(o),out:o}}function Pn(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const i=e.subarray(0,-r);for(let s=0;s<r;s++)if(e[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function Ln(e){const t=new Uint8Array(16),n=Kt(t);t.set(e);const r=un-e.length;for(let i=un-r;i<un;i++)t[i]=r;return n}Yt({blockSize:16},(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jt(e);const n=!t.disablePadding;return{encrypt:(t,r)=>{jt(t);const{b:i,o:s,out:o}=Nn(t,n,r),a=vn(e);let l=0;for(;l+4<=i.length;){const{s0:e,s1:t,s2:n,s3:r}=xn(a,i[l+0],i[l+1],i[l+2],i[l+3]);s[l++]=e,s[l++]=t,s[l++]=n,s[l++]=r}if(n){const e=Ln(t.subarray(4*l)),{s0:n,s1:r,s2:i,s3:o}=xn(a,e[0],e[1],e[2],e[3]);s[l++]=n,s[l++]=r,s[l++]=i,s[l++]=o}return a.fill(0),o},decrypt:(t,r)=>{Tn(t);const i=kn(e),s=Cn(t.length,r),o=Kt(t),a=Kt(s);for(let e=0;e+4<=o.length;){const{s0:t,s1:n,s2:r,s3:s}=_n(i,o[e+0],o[e+1],o[e+2],o[e+3]);a[e++]=t,a[e++]=n,a[e++]=r,a[e++]=s}return i.fill(0),Pn(s,n)}}}));const In=Yt({blockSize:16,nonceLength:16},(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jt(e),jt(t,16);const r=!n.disablePadding;return{encrypt:(n,i)=>{const s=vn(e),{b:o,o:a,out:l}=Nn(n,r,i),u=Kt(t);let c=u[0],d=u[1],h=u[2],f=u[3],p=0;for(;p+4<=o.length;)c^=o[p+0],d^=o[p+1],h^=o[p+2],f^=o[p+3],({s0:c,s1:d,s2:h,s3:f}=xn(s,c,d,h,f)),a[p++]=c,a[p++]=d,a[p++]=h,a[p++]=f;if(r){const e=Ln(n.subarray(4*p));c^=e[0],d^=e[1],h^=e[2],f^=e[3],({s0:c,s1:d,s2:h,s3:f}=xn(s,c,d,h,f)),a[p++]=c,a[p++]=d,a[p++]=h,a[p++]=f}return s.fill(0),l},decrypt:(n,i)=>{Tn(n);const s=kn(e),o=Kt(t),a=Cn(n.length,i),l=Kt(n),u=Kt(a);let c=o[0],d=o[1],h=o[2],f=o[3];for(let e=0;e+4<=l.length;){const t=c,n=d,r=h,i=f;c=l[e+0],d=l[e+1],h=l[e+2],f=l[e+3];const{s0:o,s1:a,s2:p,s3:g}=_n(s,c,d,h,f);u[e++]=o^t,u[e++]=a^n,u[e++]=p^r,u[e++]=g^i}return s.fill(0),Pn(a,r)}}}));Yt({blockSize:16,nonceLength:16},(function(e,t){function n(n,r,i){const s=vn(e),o=n.length;i=Cn(o,i);const a=Kt(n),l=Kt(i),u=r?l:a,c=Kt(t);let d=c[0],h=c[1],f=c[2],p=c[3];for(let e=0;e+4<=a.length;){const{s0:t,s1:n,s2:r,s3:i}=xn(s,d,h,f,p);l[e+0]=a[e+0]^t,l[e+1]=a[e+1]^n,l[e+2]=a[e+2]^r,l[e+3]=a[e+3]^i,d=u[e++],h=u[e++],f=u[e++],p=u[e++]}const g=un*Math.floor(a.length/4);if(g<o){({s0:d,s1:h,s2:f,s3:p}=xn(s,d,h,f,p));const e=Wt(new Uint32Array([d,h,f,p]));for(let t=g,r=0;t<o;t++,r++)i[t]=n[t]^e[r];e.fill(0)}return s.fill(0),i}return jt(e),jt(t,16),{encrypt:(e,t)=>n(e,!0,t),decrypt:(e,t)=>n(e,!1,t)}}));function Un(e,t,n,r,i){const s=e.create(n,r.length+(i?.length||0));i&&s.update(i),s.update(r);const o=new Uint8Array(16),a=Gt(o);return i&&Jt(a,0,BigInt(8*i.length),t),Jt(a,8,BigInt(8*r.length),t),s.update(o),s.digest()}Yt({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,n){if(jt(t),0===t.length)throw new Error("aes/gcm: empty nonce");const r=16;function i(e,t,r){const i=Un(an,!1,e,r,n);for(let n=0;n<t.length;n++)i[n]^=t[n];return i}function s(){const n=vn(e),r=cn.slice(),i=cn.slice();if(Rn(n,!1,i,i,r),12===t.length)i.set(t);else{const e=cn.slice();Jt(Gt(e),8,BigInt(8*t.length),!1),an.create(r).update(t).update(e).digestInto(i)}return{xk:n,authKey:r,counter:i,tagMask:Rn(n,!1,i,cn)}}return{encrypt:e=>{jt(e);const{xk:t,authKey:n,counter:o,tagMask:a}=s(),l=new Uint8Array(e.length+r);Rn(t,!1,o,e,l);const u=i(n,a,l.subarray(0,l.length-r));return l.set(u,e.length),t.fill(0),l},decrypt:e=>{if(jt(e),e.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:t,authKey:n,counter:o,tagMask:a}=s(),l=e.subarray(0,-16),u=e.subarray(-16);if(!Zt(i(n,a,l),u))throw new Error("aes/gcm: invalid ghash tag");const c=Rn(t,!1,o,l);return n.fill(0),a.fill(0),t.fill(0),c}}}));const On=(e,t,n)=>r=>{if(!Number.isSafeInteger(r)||t>r||r>n)throw new Error(`${e}: invalid value=${r}, must be [${t}..${n}]`)};Yt({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,n){const r=On("AAD",0,2**36),i=On("plaintext",0,2**36),s=On("nonce",12,12),o=On("ciphertext",16,2**36+16);function a(){const n=e.length;if(16!==n&&24!==n&&32!==n)throw new Error(`key length must be 16, 24 or 32 bytes, got: ${n} bytes`);const r=vn(e),i=new Uint8Array(n),s=new Uint8Array(16),o=Kt(t);let a=0,l=o[0],u=o[1],c=o[2],d=0;for(const e of[s,i].map(Kt)){const t=Kt(e);for(let e=0;e<t.length;e+=2){const{s0:n,s1:i}=xn(r,a,l,u,c);t[e+0]=n,t[e+1]=i,a=++d}}return r.fill(0),{authKey:s,encKey:vn(i)}}function l(e,r,i){const s=Un(ln,!0,r,i,n);for(let n=0;n<12;n++)s[n]^=t[n];s[15]&=127;const o=Kt(s);let a=o[0],l=o[1],u=o[2],c=o[3];return({s0:a,s1:l,s2:u,s3:c}=xn(e,a,l,u,c)),o[0]=a,o[1]=l,o[2]=u,o[3]=c,s}function u(e,t,n){let r=t.slice();return r[15]|=128,Rn(e,!0,r,n)}return jt(t),s(t.length),n&&(jt(n),r(n.length)),{encrypt:e=>{jt(e),i(e.length);const{encKey:t,authKey:n}=a(),r=l(t,n,e),s=new Uint8Array(e.length+16);return s.set(r,e.length),s.set(u(t,r,e)),t.fill(0),n.fill(0),s},decrypt:e=>{jt(e),o(e.length);const t=e.subarray(-16),{encKey:n,authKey:r}=a(),i=u(n,t,e.subarray(0,-16)),s=l(n,r,i);if(n.fill(0),r.fill(0),!Zt(t,s))throw new Error("invalid polyval tag");return i}}}));const Fn=(e,t)=>255&e[t++]|(255&e[t++])<<8;class Mn{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,jt(e=Qt(e),32);const t=Fn(e,0),n=Fn(e,2),r=Fn(e,4),i=Fn(e,6),s=Fn(e,8),o=Fn(e,10),a=Fn(e,12),l=Fn(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|l<<8),this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Fn(e,16+2*u)}process(e,t){const n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?0:2048,{h:r,r:i}=this,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],d=i[6],h=i[7],f=i[8],p=i[9],g=Fn(e,t+0),y=Fn(e,t+2),m=Fn(e,t+4),b=Fn(e,t+6),w=Fn(e,t+8),v=Fn(e,t+10),k=Fn(e,t+12),E=Fn(e,t+14);let S=r[0]+(8191&g),x=r[1]+(8191&(g>>>13|y<<3)),_=r[2]+(8191&(y>>>10|m<<6)),C=r[3]+(8191&(m>>>7|b<<9)),A=r[4]+(8191&(b>>>4|w<<12)),R=r[5]+(w>>>1&8191),T=r[6]+(8191&(w>>>14|v<<2)),N=r[7]+(8191&(v>>>11|k<<5)),P=r[8]+(8191&(k>>>8|E<<8)),L=r[9]+(E>>>5|n),I=0,U=I+S*s+x*(5*p)+_*(5*f)+C*(5*h)+A*(5*d);I=U>>>13,U&=8191,U+=R*(5*c)+T*(5*u)+N*(5*l)+P*(5*a)+L*(5*o),I+=U>>>13,U&=8191;let O=I+S*o+x*s+_*(5*p)+C*(5*f)+A*(5*h);I=O>>>13,O&=8191,O+=R*(5*d)+T*(5*c)+N*(5*u)+P*(5*l)+L*(5*a),I+=O>>>13,O&=8191;let F=I+S*a+x*o+_*s+C*(5*p)+A*(5*f);I=F>>>13,F&=8191,F+=R*(5*h)+T*(5*d)+N*(5*c)+P*(5*u)+L*(5*l),I+=F>>>13,F&=8191;let M=I+S*l+x*a+_*o+C*s+A*(5*p);I=M>>>13,M&=8191,M+=R*(5*f)+T*(5*h)+N*(5*d)+P*(5*c)+L*(5*u),I+=M>>>13,M&=8191;let D=I+S*u+x*l+_*a+C*o+A*s;I=D>>>13,D&=8191,D+=R*(5*p)+T*(5*f)+N*(5*h)+P*(5*d)+L*(5*c),I+=D>>>13,D&=8191;let z=I+S*c+x*u+_*l+C*a+A*o;I=z>>>13,z&=8191,z+=R*s+T*(5*p)+N*(5*f)+P*(5*h)+L*(5*d),I+=z>>>13,z&=8191;let B=I+S*d+x*c+_*u+C*l+A*a;I=B>>>13,B&=8191,B+=R*o+T*s+N*(5*p)+P*(5*f)+L*(5*h),I+=B>>>13,B&=8191;let $=I+S*h+x*d+_*c+C*u+A*l;I=$>>>13,$&=8191,$+=R*a+T*o+N*s+P*(5*p)+L*(5*f),I+=$>>>13,$&=8191;let V=I+S*f+x*h+_*d+C*c+A*u;I=V>>>13,V&=8191,V+=R*l+T*a+N*o+P*s+L*(5*p),I+=V>>>13,V&=8191;let j=I+S*p+x*f+_*h+C*d+A*c;I=j>>>13,j&=8191,j+=R*u+T*l+N*a+P*o+L*s,I+=j>>>13,j&=8191,I=(I<<2)+I|0,I=I+U|0,U=8191&I,I>>>=13,O+=I,r[0]=U,r[1]=O,r[2]=F,r[3]=M,r[4]=D,r[5]=z,r[6]=B,r[7]=$,r[8]=V,r[9]=j}finalize(){const{h:e,pad:t}=this,n=new Uint16Array(10);let r=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=r,r=e[o]>>>13,e[o]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(let o=1;o<10;o++)n[o]=e[o]+r,r=n[o]>>>13,n[o]&=8191;n[9]-=8192;let i=(1^r)-1;for(let o=0;o<10;o++)n[o]&=i;i=~i;for(let o=0;o<10;o++)e[o]=e[o]&i|n[o];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+t[0];e[0]=65535&s;for(let o=1;o<8;o++)s=(e[o]+t[o]|0)+(s>>>16)|0,e[o]=65535&s}update(e){Ht(this);const{buffer:t,blockLen:n}=this,r=(e=Qt(e)).length;for(let i=0;i<r;){const s=Math.min(n-this.pos,r-i);if(s!==n)t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(e,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Ht(this),qt(e,this),this.finished=!0;const{buffer:t,h:n}=this;let{pos:r}=this;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)e[i++]=n[s]>>>0,e[i++]=n[s]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}}const Dn=function(e){const t=(t,n)=>e(n).update(Qt(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}((e=>new Mn(e))),zn=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),Bn=zn("expand 16-byte k"),$n=zn("expand 32-byte k"),Vn=Kt(Bn),jn=Kt($n);jn.slice();function Hn(e,t){return e<<t|e>>>32-t}function qn(e){return e.byteOffset%4===0}const Wn=2**32-1,Kn=new Uint32Array;function Gn(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!==typeof t)throw new Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!==typeof e)throw new Error("core must be a function");return Bt(i),Bt(o),$t(s),$t(n),function(t,a,l,u){let c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;jt(t),jt(a),jt(l);const d=l.length;if(u||(u=new Uint8Array(d)),jt(u),Bt(c),c<0||c>=Wn)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const h=[];let f,p,g=t.length;if(32===g)f=t.slice(),h.push(f),p=jn;else{if(16!==g||!n)throw new Error(`arx: invalid 32-byte key, got length=${g}`);f=new Uint8Array(32),f.set(t),f.set(t,16),p=Vn,h.push(f)}qn(a)||(a=a.slice(),h.push(a));const y=Kt(f);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,y,Kt(a.subarray(0,16)),y),a=a.subarray(16)}const m=16-i;if(m!==a.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(12!==m){const e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,h.push(a)}const b=Kt(a);for(!function(e,t,n,r,i,s,o,a){const l=i.length,u=new Uint8Array(64),c=Kt(u),d=qn(i)&&qn(s),h=d?Kt(i):Kn,f=d?Kt(s):Kn;for(let p=0;p<l;o++){if(e(t,n,r,c,o,a),o>=Wn)throw new Error("arx: counter overflow");const g=Math.min(64,l-p);if(d&&64===g){const e=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let t,n=0;n<16;n++)t=e+n,f[t]=h[t]^c[n];p+=64}else{for(let e,t=0;t<g;t++)e=p+t,s[e]=i[e]^u[t];p+=g}}}(e,p,y,b,l,u,c,o);h.length>0;)h.pop().fill(0);return u}}function Qn(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,o=e[0],a=e[1],l=e[2],u=e[3],c=t[0],d=t[1],h=t[2],f=t[3],p=t[4],g=t[5],y=t[6],m=t[7],b=i,w=n[0],v=n[1],k=n[2],E=o,S=a,x=l,_=u,C=c,A=d,R=h,T=f,N=p,P=g,L=y,I=m,U=b,O=w,F=v,M=k;for(let z=0;z<s;z+=2)E=E+C|0,U=Hn(U^E,16),N=N+U|0,C=Hn(C^N,12),E=E+C|0,U=Hn(U^E,8),N=N+U|0,C=Hn(C^N,7),S=S+A|0,O=Hn(O^S,16),P=P+O|0,A=Hn(A^P,12),S=S+A|0,O=Hn(O^S,8),P=P+O|0,A=Hn(A^P,7),x=x+R|0,F=Hn(F^x,16),L=L+F|0,R=Hn(R^L,12),x=x+R|0,F=Hn(F^x,8),L=L+F|0,R=Hn(R^L,7),_=_+T|0,M=Hn(M^_,16),I=I+M|0,T=Hn(T^I,12),_=_+T|0,M=Hn(M^_,8),I=I+M|0,T=Hn(T^I,7),E=E+A|0,M=Hn(M^E,16),L=L+M|0,A=Hn(A^L,12),E=E+A|0,M=Hn(M^E,8),L=L+M|0,A=Hn(A^L,7),S=S+R|0,U=Hn(U^S,16),I=I+U|0,R=Hn(R^I,12),S=S+R|0,U=Hn(U^S,8),I=I+U|0,R=Hn(R^I,7),x=x+T|0,O=Hn(O^x,16),N=N+O|0,T=Hn(T^N,12),x=x+T|0,O=Hn(O^x,8),N=N+O|0,T=Hn(T^N,7),_=_+C|0,F=Hn(F^_,16),P=P+F|0,C=Hn(C^P,12),_=_+C|0,F=Hn(F^_,8),P=P+F|0,C=Hn(C^P,7);let D=0;r[D++]=o+E|0,r[D++]=a+S|0,r[D++]=l+x|0,r[D++]=u+_|0,r[D++]=c+C|0,r[D++]=d+A|0,r[D++]=h+R|0,r[D++]=f+T|0,r[D++]=p+N|0,r[D++]=g+P|0,r[D++]=y+L|0,r[D++]=m+I|0,r[D++]=b+U|0,r[D++]=w+O|0,r[D++]=v+F|0,r[D++]=k+M|0}const Zn=Gn(Qn,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Yn=Gn(Qn,{counterRight:!1,counterLength:8,extendNonceFn:function(e,t,n,r){let i=e[0],s=e[1],o=e[2],a=e[3],l=t[0],u=t[1],c=t[2],d=t[3],h=t[4],f=t[5],p=t[6],g=t[7],y=n[0],m=n[1],b=n[2],w=n[3];for(let k=0;k<20;k+=2)i=i+l|0,y=Hn(y^i,16),h=h+y|0,l=Hn(l^h,12),i=i+l|0,y=Hn(y^i,8),h=h+y|0,l=Hn(l^h,7),s=s+u|0,m=Hn(m^s,16),f=f+m|0,u=Hn(u^f,12),s=s+u|0,m=Hn(m^s,8),f=f+m|0,u=Hn(u^f,7),o=o+c|0,b=Hn(b^o,16),p=p+b|0,c=Hn(c^p,12),o=o+c|0,b=Hn(b^o,8),p=p+b|0,c=Hn(c^p,7),a=a+d|0,w=Hn(w^a,16),g=g+w|0,d=Hn(d^g,12),a=a+d|0,w=Hn(w^a,8),g=g+w|0,d=Hn(d^g,7),i=i+u|0,w=Hn(w^i,16),p=p+w|0,u=Hn(u^p,12),i=i+u|0,w=Hn(w^i,8),p=p+w|0,u=Hn(u^p,7),s=s+c|0,y=Hn(y^s,16),g=g+y|0,c=Hn(c^g,12),s=s+c|0,y=Hn(y^s,8),g=g+y|0,c=Hn(c^g,7),o=o+d|0,m=Hn(m^o,16),h=h+m|0,d=Hn(d^h,12),o=o+d|0,m=Hn(m^o,8),h=h+m|0,d=Hn(d^h,7),a=a+l|0,b=Hn(b^a,16),f=f+b|0,l=Hn(l^f,12),a=a+l|0,b=Hn(b^a,8),f=f+b|0,l=Hn(l^f,7);let v=0;r[v++]=i,r[v++]=s,r[v++]=o,r[v++]=a,r[v++]=y,r[v++]=m,r[v++]=b,r[v++]=w},allowShortKeys:!1}),Jn=new Uint8Array(16),Xn=(e,t)=>{e.update(t);const n=t.length%16;n&&e.update(Jn.subarray(n))},er=new Uint8Array(32);function tr(e,t,n,r,i){const s=e(t,n,er),o=Dn.create(s);i&&Xn(o,i),Xn(o,r);const a=new Uint8Array(16),l=Gt(a);Jt(l,0,BigInt(i?i.length:0),!0),Jt(l,8,BigInt(r.length),!0),o.update(a);const u=o.digest();return s.fill(0),u}const nr=e=>(t,n,r)=>{const i=16;return jt(t,32),jt(n),{encrypt:(s,o)=>{const a=s.length,l=a+i;o?jt(o,l):o=new Uint8Array(l),e(t,n,s,o,1);const u=tr(e,t,n,o.subarray(0,-16),r);return o.set(u,a),o},decrypt:(s,o)=>{const a=s.length,l=a-i;if(a<i)throw new Error("encrypted data must be at least 16 bytes");o?jt(o,l):o=new Uint8Array(l);const u=s.subarray(0,-16);if(!Zt(s.subarray(-16),tr(e,t,n,u,r)))throw new Error("invalid tag");return e(t,n,u,o,1),o}}};nr(Zn),nr(Yn);class rr extends Ye{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,rt.hash(e);const n=Qe(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return rt.exists(this),this.iHash.update(e),this}digestInto(e){rt.exists(this),rt.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ir=(e,t,n)=>new rr(e,t).update(n).digest();function sr(e,t,n){return rt.hash(e),void 0===n&&(n=new Uint8Array(e.outputLen)),ir(e,Qe(n),Qe(t))}ir.create=(e,t)=>new rr(e,t);const or=new Uint8Array([0]),ar=new Uint8Array;function lr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;if(rt.hash(e),rt.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/e.outputLen);void 0===n&&(n=ar);const s=new Uint8Array(i*e.outputLen),o=ir.create(e,t),a=o._cloneInto(),l=new Uint8Array(o.outputLen);for(let u=0;u<i;u++)or[0]=u+1,a.update(0===u?ar:l).update(n).update(or).digestInto(l),s.set(l,e.outputLen*u),o._cloneInto(a);return o.destroy(),a.destroy(),l.fill(0),or.fill(0),s.slice(0,r)}var ur=Object.defineProperty,cr=(e,t)=>{for(var n in t)ur(e,n,{get:t[n],enumerable:!0})},dr=Symbol("verified");function hr(e){if(!(e instanceof Object))return!1;if("number"!==typeof e.kind)return!1;if("string"!==typeof e.content)return!1;if("number"!==typeof e.created_at)return!1;if("string"!==typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"===typeof n[e])return!1}return!0}cr({},{Queue:()=>vr,QueueNode:()=>wr,binarySearch:()=>br,insertEventIntoAscendingList:()=>mr,insertEventIntoDescendingList:()=>yr,normalizeURL:()=>gr,utf8Decoder:()=>fr,utf8Encoder:()=>pr});var fr=new TextDecoder("utf-8"),pr=new TextEncoder;function gr(e){-1===e.indexOf("://")&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function yr(e,t){const[n,r]=br(e,(e=>t.id===e.id?0:t.created_at===e.created_at?-1:e.created_at-t.created_at));return r||e.splice(n,0,t),e}function mr(e,t){const[n,r]=br(e,(e=>t.id===e.id?0:t.created_at===e.created_at?-1:t.created_at-e.created_at));return r||e.splice(n,0,t),e}function br(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),s=t(e[i]);if(0===s)return[i,!0];s<0?r=i-1:n=i+1}return[n,!1]}var wr=class{value;next=null;prev=null;constructor(e){this.value=e}},vr=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){const t=new wr(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const e=this.first;return this.first=null,this.last=null,e.value}const e=this.first;return this.first=e.next,e.value}};function kr(e){return Ke(dt(pr.encode(function(e){if(!hr(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e))))}var Er=new class{generateSecretKey(){return $e.utils.randomPrivateKey()}getPublicKey(e){return Ke($e.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=Ke($e.getPublicKey(t)),n.id=kr(n),n.sig=Ke($e.sign(kr(n),t)),n[dr]=!0,n}verifyEvent(e){if("boolean"===typeof e[dr])return e[dr];const t=kr(e);if(t!==e.id)return e[dr]=!1,!1;try{const n=$e.verify(e.sig,t,e.pubkey);return e[dr]=n,n}catch(n){return e[dr]=!1,!1}}},Sr=Er.generateSecretKey,xr=Er.getPublicKey,_r=Er.finalizeEvent,Cr=Er.verifyEvent;function Ar(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function Rr(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function Tr(e){return 2e4<=e&&e<3e4}function Nr(e){return 3e4<=e&&e<4e4}cr({},{Application:()=>qi,BadgeAward:()=>Vr,BadgeDefinition:()=>Di,BlockedRelaysList:()=>wi,BookmarkList:()=>yi,Bookmarksets:()=>Oi,Calendar:()=>Ji,CalendarEventRSVP:()=>Xi,ChannelCreation:()=>Wr,ChannelHideMessage:()=>Qr,ChannelMessage:()=>Gr,ChannelMetadata:()=>Kr,ChannelMuteUser:()=>Zr,ClassifiedListing:()=>Gi,ClientAuth:()=>Ai,CommunitiesList:()=>mi,CommunityDefinition:()=>ns,CommunityPostApproval:()=>si,Contacts:()=>Mr,CreateOrUpdateProduct:()=>$i,CreateOrUpdateStall:()=>Bi,Curationsets:()=>Fi,Date:()=>Zi,DirectMessageRelaysList:()=>Si,DraftClassifiedListing:()=>Qi,DraftLong:()=>ji,Emojisets:()=>Hi,EncryptedDirectMessage:()=>Dr,EventDeletion:()=>zr,FileMetadata:()=>Xr,FileServerPreference:()=>xi,Followsets:()=>Li,GenericRepost:()=>qr,Genericlists:()=>Ii,GiftWrap:()=>Jr,HTTPAuth:()=>Pi,Handlerinformation:()=>ts,Handlerrecommendation:()=>es,Highlights:()=>hi,InterestsList:()=>ki,Interestsets:()=>zi,JobFeedback:()=>li,JobRequest:()=>oi,JobResult:()=>ai,Label:()=>ii,LightningPubRPC:()=>Ci,LiveChatMessage:()=>ei,LiveEvent:()=>Wi,LongFormArticle:()=>Vi,Metadata:()=>Ur,Mutelist:()=>fi,NWCWalletInfo:()=>_i,NWCWalletRequest:()=>Ri,NWCWalletResponse:()=>Ti,NostrConnect:()=>Ni,OpenTimestamps:()=>Yr,Pinlist:()=>pi,PrivateDirectMessage:()=>Hr,ProblemTracker:()=>ti,ProfileBadges:()=>Mi,PublicChatsList:()=>bi,Reaction:()=>$r,RecommendRelay:()=>Fr,RelayList:()=>gi,Relaysets:()=>Ui,Report:()=>ni,Reporting:()=>ri,Repost:()=>Br,Seal:()=>jr,SearchRelaysList:()=>vi,ShortTextNote:()=>Or,Time:()=>Yi,UserEmojiList:()=>Ei,UserStatuses:()=>Ki,Zap:()=>di,ZapGoal:()=>ui,ZapRequest:()=>ci,classifyKind:()=>Lr,isAddressableKind:()=>Nr,isEphemeralKind:()=>Tr,isKind:()=>Ir,isParameterizedReplaceableKind:()=>Pr,isRegularKind:()=>Ar,isReplaceableKind:()=>Rr});var Pr=Nr;function Lr(e){return Ar(e)?"regular":Rr(e)?"replaceable":Tr(e)?"ephemeral":Nr(e)?"parameterized":"unknown"}function Ir(e,t){const n=t instanceof Array?t:[t];return hr(e)&&n.includes(e.kind)||!1}var Ur=0,Or=1,Fr=2,Mr=3,Dr=4,zr=5,Br=6,$r=7,Vr=8,jr=13,Hr=14,qr=16,Wr=40,Kr=41,Gr=42,Qr=43,Zr=44,Yr=1040,Jr=1059,Xr=1063,ei=1311,ti=1971,ni=1984,ri=1984,ii=1985,si=4550,oi=5999,ai=6999,li=7e3,ui=9041,ci=9734,di=9735,hi=9802,fi=1e4,pi=10001,gi=10002,yi=10003,mi=10004,bi=10005,wi=10006,vi=10007,ki=10015,Ei=10030,Si=10050,xi=10096,_i=13194,Ci=21e3,Ai=22242,Ri=23194,Ti=23195,Ni=24133,Pi=27235,Li=3e4,Ii=30001,Ui=30002,Oi=30003,Fi=30004,Mi=30008,Di=30009,zi=30015,Bi=30017,$i=30018,Vi=30023,ji=30024,Hi=30030,qi=30078,Wi=30311,Ki=30315,Gi=30402,Qi=30403,Zi=31922,Yi=31923,Ji=31924,Xi=31925,es=31989,ts=31990,ns=34550;function rs(e,t){if(e.ids&&-1===e.ids.indexOf(t.id))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((e=>{let[t,i]=e;return t===n.slice(1)&&-1!==r.indexOf(i)})))return!1}return!(e.since&&t.created_at<e.since)&&!(e.until&&t.created_at>e.until)}function is(e,t){for(let n=0;n<e.length;n++)if(rs(e[n],t))return!0;return!1}function ss(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function os(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function as(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(-1===i)return null;let s=r+1+i;return e.slice(r+1,s)}function ls(e,t){return t===ss(e,"id")}function us(e,t){return t===ss(e,"pubkey")}function cs(e,t){return t===os(e,"kind")}cr({},{getHex64:()=>ss,getInt:()=>os,getSubscriptionId:()=>as,matchEventId:()=>ls,matchEventKind:()=>cs,matchEventPubkey:()=>us});function ds(e,t){return{kind:Ai,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}cr({},{makeAuthEvent:()=>ds});try{WebSocket}catch{}try{WebSocket}catch{}var hs={};cr(hs,{BECH32_REGEX:()=>gs,Bech32MaxSize:()=>ps,NostrTypeGuard:()=>fs,decode:()=>ms,decodeNostrURI:()=>ys,encodeBytes:()=>Ss,naddrEncode:()=>Cs,neventEncode:()=>_s,noteEncode:()=>ks,nprofileEncode:()=>xs,npubEncode:()=>vs,nsecEncode:()=>ws});var fs={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},ps=5e3,gs=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function ys(e){try{return e.startsWith("nostr:")&&(e=e.substring(6)),ms(e)}catch(t){return{type:"invalid",data:null}}}function ms(e){let{prefix:t,words:n}=Dt.decode(e,ps),r=new Uint8Array(Dt.fromWords(n));switch(t){case"nprofile":{let e=bs(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Ke(e[0][0]),relays:e[1]?e[1].map((e=>fr.decode(e))):[]}}}case"nevent":{let e=bs(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Ke(e[0][0]),relays:e[1]?e[1].map((e=>fr.decode(e))):[],author:e[2]?.[0]?Ke(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(Ke(e[3][0]),16):void 0}}}case"naddr":{let e=bs(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:fr.decode(e[0][0]),pubkey:Ke(e[2][0]),kind:parseInt(Ke(e[3][0]),16),relays:e[1]?e[1].map((e=>fr.decode(e))):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:Ke(r)};default:throw new Error(`unknown prefix ${t}`)}}function bs(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1],i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function ws(e){return Ss("nsec",e)}function vs(e){return Ss("npub",Ge(e))}function ks(e){return Ss("note",Ge(e))}function Es(e,t){let n=Dt.toWords(t);return Dt.encode(e,n,ps)}function Ss(e,t){return Es(e,t)}function xs(e){return Es("nprofile",As({0:[Ge(e.pubkey)],1:(e.relays||[]).map((e=>pr.encode(e)))}))}function _s(e){let t;return void 0!==e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind)),Es("nevent",As({0:[Ge(e.id)],1:(e.relays||[]).map((e=>pr.encode(e))),2:e.author?[Ge(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function Cs(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),Es("naddr",As({0:[pr.encode(e.identifier)],1:(e.relays||[]).map((e=>pr.encode(e))),2:[Ge(e.pubkey)],3:[new Uint8Array(t)]}))}function As(e){let t=[];return Object.entries(e).reverse().forEach((e=>{let[n,r]=e;r.forEach((e=>{let r=new Uint8Array(e.length+2);r.set([parseInt(n)],0),r.set([e.length],1),r.set(e,2),t.push(r)}))})),Ze(...t)}var Rs={};function Ts(e,t,n){const r=e instanceof Uint8Array?Ke(e):e,i=Ps(_e.getSharedSecret(r,"02"+t));let s=Uint8Array.from(Xe(16)),o=pr.encode(n),a=In(i,s).encrypt(o);return`${At.encode(new Uint8Array(a))}?iv=${At.encode(new Uint8Array(s.buffer))}`}function Ns(e,t,n){const r=e instanceof Uint8Array?Ke(e):e;let[i,s]=n.split("?iv="),o=Ps(_e.getSharedSecret(r,"02"+t)),a=At.decode(s),l=At.decode(i),u=In(o,a).decrypt(l);return fr.decode(u)}function Ps(e){return e.slice(1,33)}cr(Rs,{decrypt:()=>Ns,encrypt:()=>Ts});cr({},{NIP05_REGEX:()=>Is,isNip05:()=>Us,isValid:()=>Ds,queryProfile:()=>Ms,searchDomain:()=>Fs,useFetchImplementation:()=>Os});var Ls,Is=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Us=e=>Is.test(e||"");try{Ls=fetch}catch($h){}function Os(e){Ls=e}async function Fs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const n=`https://${e}/.well-known/nostr.json?name=${t}`,r=await Ls(n,{redirect:"manual"});if(200!==r.status)throw Error("Wrong response code");return(await r.json()).names}catch($h){return{}}}async function Ms(e){const t=e.match(Is);if(!t)return null;const[,n="_",r]=t;try{const e=`https://${r}/.well-known/nostr.json?name=${n}`,t=await Ls(e,{redirect:"manual"});if(200!==t.status)throw Error("Wrong response code");const i=await t.json(),s=i.names[n];return s?{pubkey:s,relays:i.relays?.[s]}:null}catch(i){return null}}async function Ds(e,t){const n=await Ms(t);return!!n&&n.pubkey===e}function zs(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let n,r;for(let i=e.tags.length-1;i>=0;i--){const s=e.tags[i];if("e"===s[0]&&s[1]){const[e,i,o,a,l]=s,u={id:i,relays:o?[o]:[],author:l};if("root"===a){t.root=u;continue}if("reply"===a){t.reply=u;continue}if("mention"===a){t.mentions.push(u);continue}n?r=u:n=u,t.mentions.push(u)}else{if("q"===s[0]&&s[1]){const[e,n,r]=s;t.quotes.push({id:n,relays:r?[r]:[]})}"p"===s[0]&&s[1]&&t.profiles.push({pubkey:s[1],relays:s[2]?[s[2]]:[]})}}return t.root||(t.root=r||n||t.reply),t.reply||(t.reply=n||t.root),[t.reply,t.root].forEach((e=>{if(!e)return;let n=t.mentions.indexOf(e);if(-1!==n&&t.mentions.splice(n,1),e.author){let n=t.profiles.find((t=>t.pubkey===e.author));n&&n.relays&&(e.relays||(e.relays=[]),n.relays.forEach((t=>{-1===e.relays?.indexOf(t)&&e.relays.push(t)})),n.relays=e.relays)}})),t.mentions.forEach((e=>{if(e.author){let n=t.profiles.find((t=>t.pubkey===e.author));n&&n.relays&&(e.relays||(e.relays=[]),n.relays.forEach((t=>{-1===e.relays.indexOf(t)&&e.relays.push(t)})),n.relays=e.relays)}})),t}cr({},{parse:()=>zs});cr({},{fetchRelayInformation:()=>$s,useFetchImplementation:()=>Bs});try{fetch}catch{}function Bs(e){0}async function $s(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}function Vs(e){let t=0;for(let n=0;n<64;n+=8){const r=parseInt(e.substring(n,n+8),16);if(0!==r){t+=Math.clz32(r);break}t+=32}return t}function js(e,t){let n=0;const r=e,i=["nonce",n.toString(),t.toString()];for(r.tags.push(i);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),i[1]=(++n).toString(),r.id=Hs(r),Vs(r.id)>=t)break}return r}function Hs(e){return Ke(dt(pr.encode(JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]))))}cr({},{fastEventHash:()=>Hs,getPow:()=>Vs,minePow:()=>js});cr({},{unwrapEvent:()=>mo,unwrapManyEvents:()=>bo,wrapEvent:()=>go,wrapManyEvents:()=>yo});cr({},{createRumor:()=>ao,createSeal:()=>lo,createWrap:()=>uo,unwrapEvent:()=>fo,unwrapManyEvents:()=>po,wrapEvent:()=>co,wrapManyEvents:()=>ho});var qs={};cr(qs,{decrypt:()=>eo,encrypt:()=>Xs,getConversationKey:()=>Gs,v2:()=>to});var Ws=1,Ks=65535;function Gs(e,t){const n=_e.getSharedSecret(e,"02"+t).subarray(1,33);return sr(dt,n,"nip44-v2")}function Qs(e,t){const n=lr(dt,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function Zs(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}function Ys(e){const t=pr.encode(e),n=t.length,r=function(e){if(!Number.isSafeInteger(e)||e<Ws||e>Ks)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}(n);return Ze(r,t,new Uint8Array(Zs(n)-n))}function Js(e,t,n){if(32!==n.length)throw new Error("AAD associated data must be 32 bytes");const r=Ze(n,t);return ir(dt,e,r)}function Xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xe(32);const{chacha_key:r,chacha_nonce:i,hmac_key:s}=Qs(t,n),o=Ys(e),a=Zn(r,i,o),l=Js(s,a,n);return At.encode(Ze(new Uint8Array([2]),n,a,l))}function eo(e,t){const{nonce:n,ciphertext:r,mac:i}=function(e){if("string"!==typeof e)throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if("#"===e[0])throw new Error("unknown encryption version");let n;try{n=At.decode(e)}catch(s){throw new Error("invalid base64: "+s.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(2!==i)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}(e),{chacha_key:s,chacha_nonce:o,hmac_key:a}=Qs(t,n);if(!Zt(Js(a,r,n),i))throw new Error("invalid MAC");return function(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<Ws||t>Ks||n.length!==t||e.length!==2+Zs(t))throw new Error("invalid padding");return fr.decode(n)}(Zn(s,o,r))}var to={utils:{getConversationKey:Gs,calcPaddedLen:Zs},encrypt:Xs,decrypt:eo},no=()=>Math.round(Date.now()/1e3),ro=()=>Math.round(no()-172800*Math.random()),io=(e,t)=>Gs(e,t),so=(e,t,n)=>Xs(JSON.stringify(e),io(t,n)),oo=(e,t)=>JSON.parse(eo(e.content,io(t,e.pubkey)));function ao(e,t){const n={created_at:no(),content:"",tags:[],...e,pubkey:xr(t)};return n.id=kr(n),n}function lo(e,t,n){return _r({kind:jr,content:so(e,t,n),created_at:ro(),tags:[]},t)}function uo(e,t){const n=Sr();return _r({kind:Jr,content:so(e,n,t),created_at:ro(),tags:[["p",t]]},n)}function co(e,t,n){return uo(lo(ao(e,t),t,n),n)}function ho(e,t,n){if(!n||0===n.length)throw new Error("At least one recipient is required.");const r=xr(t),i=[co(e,t,r)];return n.forEach((n=>{i.push(co(e,t,n))})),i}function fo(e,t){const n=oo(e,t);return oo(n,t)}function po(e,t){let n=[];return e.forEach((e=>{n.push(fo(e,t))})),n.sort(((e,t)=>e.created_at-t.created_at)),n}function go(e,t,n,r,i){const s=function(e,t,n,r){const i={created_at:Math.ceil(Date.now()/1e3),kind:Hr,tags:[],content:t};return(Array.isArray(e)?e:[e]).forEach((e=>{let{publicKey:t,relayUrl:n}=e;i.tags.push(n?["p",t,n]:["p",t])})),r&&i.tags.push(["e",r.eventId,r.relayUrl||"","reply"]),n&&i.tags.push(["subject",n]),i}(t,n,r,i);return co(s,e,t.publicKey)}function yo(e,t,n,r,i){if(!t||0===t.length)throw new Error("At least one recipient is required.");return[{publicKey:xr(e)},...t].map((t=>go(e,t,n,r,i)))}var mo=fo,bo=po;function wo(e,t,n,r){let i;const s=[...e.tags??[],["e",t.id,n],["p",t.pubkey]];return t.kind===Or?i=Br:(i=qr,s.push(["k",String(t.kind)])),_r({kind:i,tags:s,content:""===e.content||t.tags?.find((e=>"-"===e[0]))?"":JSON.stringify(t),created_at:e.created_at},r)}function vo(e){if(![Br,qr].includes(e.kind))return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"===typeof e)),author:n?.[1]}:void 0}function ko(e){let{skipVerification:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=vo(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(i){return}return r.id===n.id&&(t||Cr(r))?r:void 0}cr({},{finishRepostEvent:()=>wo,getRepostedEvent:()=>ko,getRepostedEventPointer:()=>vo});cr({},{NOSTR_URI_REGEX:()=>Eo,parse:()=>xo,test:()=>So});var Eo=new RegExp(`nostr:(${gs.source})`);function So(e){return"string"===typeof e&&new RegExp(`^${Eo.source}$`).test(e)}function xo(e){const t=e.match(new RegExp(`^${Eo.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:ms(t[1])}}function _o(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return _r({...e,kind:$r,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function Co(e){if(e.kind!==$r)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}cr({},{finishReactionEvent:()=>_o,getReactedEventPointer:()=>Co});cr({},{parse:()=>To});var Ao=/\W/m,Ro=/\W |\W$|$|,| /m;function*To(e){const t=e.length;let n=0,r=0;for(;r<t;){let s=e.indexOf(":",r);if(-1===s)break;if("nostr"===e.substring(s-5,s)){const o=e.substring(s+60).match(Ao),a=o?s+60+o.index:t;try{let t,{data:i,type:o}=ms(e.substring(s+1,a));switch(o){case"npub":t={pubkey:i};break;case"nsec":case"note":r=a+1;continue;default:t=i}n!==s-5&&(yield{type:"text",text:e.substring(n,s-5)}),yield{type:"reference",pointer:t},r=a,n=r;continue}catch(i){r=s+1;continue}}else if("https"===e.substring(s-5,s)||"http"===e.substring(s-4,s)){const o=e.substring(s+4).match(Ro),a=o?s+4+o.index:t,l="s"===e[s-1]?5:4;try{let t=new URL(e.substring(s-l,a));if(-1===t.hostname.indexOf("."))throw new Error("invalid url");if(n!==s-l&&(yield{type:"text",text:e.substring(n,s-l)}),t.pathname.endsWith(".png")||t.pathname.endsWith(".jpg")||t.pathname.endsWith(".jpeg")||t.pathname.endsWith(".gif")||t.pathname.endsWith(".webp")){yield{type:"image",url:t.toString()},r=a,n=r;continue}if(t.pathname.endsWith(".mp4")||t.pathname.endsWith(".avi")||t.pathname.endsWith(".webm")||t.pathname.endsWith(".mkv")){yield{type:"video",url:t.toString()},r=a,n=r;continue}if(t.pathname.endsWith(".mp3")||t.pathname.endsWith(".aac")||t.pathname.endsWith(".ogg")||t.pathname.endsWith(".opus")){yield{type:"audio",url:t.toString()},r=a,n=r;continue}yield{type:"url",url:t.toString()},r=a,n=r;continue}catch(i){r=a+1;continue}}else{if("wss"!==e.substring(s-3,s)&&"ws"!==e.substring(s-2,s)){r=s+1;continue}{const o=e.substring(s+4).match(Ro),a=o?s+4+o.index:t,l="s"===e[s-1]?3:2;try{let t=new URL(e.substring(s-l,a));if(-1===t.hostname.indexOf("."))throw new Error("invalid ws url");n!==s-l&&(yield{type:"text",text:e.substring(n,s-l)}),yield{type:"relay",url:t.toString()},r=a,n=r;continue}catch(i){r=a+1;continue}}}}n!==t&&(yield{type:"text",text:e.substring(n)})}cr({},{channelCreateEvent:()=>No,channelHideMessageEvent:()=>Io,channelMessageEvent:()=>Lo,channelMetadataEvent:()=>Po,channelMuteUserEvent:()=>Uo});var No=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return _r({kind:Wr,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},Po=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return _r({kind:Kr,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Lo=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),_r({kind:Gr,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},Io=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return _r({kind:Qr,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Uo=(e,t)=>{let n;if("object"===typeof e.content)n=JSON.stringify(e.content);else{if("string"!==typeof e.content)return;n=e.content}return _r({kind:Zr,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};cr({},{EMOJI_SHORTCODE_REGEX:()=>Oo,matchAll:()=>Mo,regex:()=>Fo,replaceAll:()=>Do});var Oo=/:(\w+):/,Fo=()=>new RegExp(`\\B${Oo.source}\\B`,"g");function*Mo(e){const t=e.matchAll(Fo());for(const r of t)try{const[e,t]=r;yield{shortcode:e,name:t,start:r.index,end:r.index+e.length}}catch(n){}}function Do(e,t){return e.replaceAll(Fo(),((e,n)=>t({shortcode:e,name:n})))}var zo;cr({},{useFetchImplementation:()=>Bo,validateGithub:()=>$o});try{zo=fetch}catch{}function Bo(e){zo=e}async function $o(e,t,n){try{return await(await zo(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch($h){return!1}}function Vo(e){const{pathname:t,searchParams:n}=new URL(e),r=t,i=n.get("relay"),s=n.get("secret");if(!r||!i||!s)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:s}}async function jo(e,t,n){const r={method:"pay_invoice",params:{invoice:n}},i=await Ts(t,e,JSON.stringify(r)),s={kind:Ri,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]};return _r(s,t)}cr({},{makeNwcRequestEvent:()=>jo,parseConnectionString:()=>Vo});function Ho(e){return e=(e=e.trim().toLowerCase()).normalize("NFKC"),Array.from(e).map((e=>/\p{Letter}/u.test(e)||/\p{Number}/u.test(e)?e:"-")).join("")}cr({},{normalizeIdentifier:()=>Ho});var qo,Wo={};cr(Wo,{getZapEndpoint:()=>Go,makeZapReceipt:()=>Yo,makeZapRequest:()=>Qo,useFetchImplementation:()=>Ko,validateZapRequest:()=>Zo});try{qo=fetch}catch{}function Ko(e){qo=e}async function Go(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=Dt.decode(n,1e3),r=Dt.fromWords(e);t=fr.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=new URL(`/.well-known/lnurlp/${e}`,`https://${n}`).toString()}}let i=await qo(t),s=await i.json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch(t){}return null}function Qo(e){let{profile:t,event:n,amount:r,relays:i,comment:s=""}=e;if(!r)throw new Error("amount not given");if(!t)throw new Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:s,tags:[["p",t],["amount",r.toString()],["relays",...i]]};if(n&&"string"===typeof n&&o.tags.push(["e",n]),n&&"object"===typeof n)if(Rr(n.kind)){const e=["a",`${n.kind}:${n.pubkey}:`];o.tags.push(e)}else if(Nr(n.kind)){let e=n.tags.find((e=>{let[t,n]=e;return"d"===t&&n}));if(!e)throw new Error("d tag not found or is empty");const t=["a",`${n.kind}:${n.pubkey}:${e[1]}`];o.tags.push(t)}return o}function Zo(e){let t;try{t=JSON.parse(e)}catch(i){return"Invalid zap request JSON."}if(!hr(t))return"Zap request is not a valid Nostr event.";if(!Cr(t))return"Invalid signature on zap request.";let n=t.tags.find((e=>{let[t,n]=e;return"p"===t&&n}));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((e=>{let[t,n]=e;return"e"===t&&n}));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find((e=>{let[t,n]=e;return"relays"===t&&n}))?null:"Zap request doesn't have a 'relays' tag."}function Yo(e){let{zapRequest:t,preimage:n,bolt11:r,paidAt:i}=e,s=JSON.parse(t),o=s.tags.filter((e=>{let[t]=e;return"e"===t||"p"===t||"a"===t})),a={kind:9735,created_at:Math.round(i.getTime()/1e3),content:"",tags:[...o,["P",s.pubkey],["bolt11",r],["description",t]]};return n&&a.tags.push(["preimage",n]),a}cr({},{getToken:()=>Xo,hashPayload:()=>oa,unpackEventFromToken:()=>ta,validateEvent:()=>la,validateEventKind:()=>ra,validateEventMethodTag:()=>sa,validateEventPayloadTag:()=>aa,validateEventTimestamp:()=>na,validateEventUrlTag:()=>ia,validateToken:()=>ea});var Jo="Nostr ";async function Xo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;const s={kind:Pi,tags:[["u",e],["method",t]],created_at:Math.round((new Date).getTime()/1e3),content:""};i&&s.tags.push(["payload",oa(i)]);const o=await n(s);return(r?Jo:"")+At.encode(pr.encode(JSON.stringify(o)))}async function ea(e,t,n){const r=await ta(e).catch((e=>{throw e}));return await la(r,t,n).catch((e=>{throw e}))}async function ta(e){if(!e)throw new Error("Missing token");e=e.replace(Jo,"");const t=fr.decode(At.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function na(e){return!!e.created_at&&Math.round((new Date).getTime()/1e3)-e.created_at<60}function ra(e){return e.kind===Pi}function ia(e,t){const n=e.tags.find((e=>"u"===e[0]));return!!n&&(n.length>0&&n[1]===t)}function sa(e,t){const n=e.tags.find((e=>"method"===e[0]));return!!n&&(n.length>0&&n[1].toLowerCase()===t.toLowerCase())}function oa(e){return Ke(dt(pr.encode(JSON.stringify(e))))}function aa(e,t){const n=e.tags.find((e=>"payload"===e[0]));if(!n)return!1;const r=oa(t);return n.length>0&&n[1]===r}async function la(e,t,n,r){if(!Cr(e))throw new Error("Invalid nostr event, signature invalid");if(!ra(e))throw new Error("Invalid nostr event, kind invalid");if(!na(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!ia(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!sa(e,n))throw new Error("Invalid nostr event, method tag invalid");if(Boolean(r)&&"object"===typeof r&&Object.keys(r).length>0&&!aa(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}var ua=__webpack_require__(579);const ca=function(e){let{title:t,targetRelayUrls:n,canStartSync:r,pubkey:i,syncProgress:s,isSyncing:o,onStartSync:a,isDisabledByLimit:l}=e;return(0,ua.jsxs)("div",{style:{flex:1,border:"1px solid #ccc",padding:"1rem",margin:"0.5rem",display:"flex",flexDirection:"column"},children:[(0,ua.jsxs)("h3",{children:[t," (",n.length," Relays)"]}),n.length>0&&(0,ua.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,ua.jsx)("strong",{children:"Target Relays:"}),(0,ua.jsx)("ul",{style:{background:"#f9f9f9",padding:"0.5rem 1rem",listStyle:"none",margin:"0.5rem 0",fontSize:"0.9em",border:"1px solid #eee"},children:n.map(((e,t)=>(0,ua.jsx)("li",{style:{wordBreak:"break-all"},children:e},t)))})]}),(0,ua.jsx)("button",{onClick:()=>{a()},disabled:o||0===n.length||!r||!i||l||"fetching_batch"===s.status||"syncing_event"===s.status,style:{padding:"0.5rem 1rem",marginBottom:"1rem",alignSelf:"flex-start"},children:l?"Too Many Relays":o?"Syncing...":`Start ${t}`}),(0,ua.jsxs)("div",{style:{minHeight:"6em",marginTop:"auto"},children:[" ",(0,ua.jsxs)("div",{children:[(0,ua.jsx)("strong",{children:"Status:"})," ",s.message]}),s.syncedUntilTimestamp&&(0,ua.jsxs)("div",{style:{fontSize:"0.9em",color:"#555"},children:["Processed events before:"," ",new Date(1e3*s.syncedUntilTimestamp).toLocaleString()]}),o&&s.currentEventId&&(0,ua.jsxs)("div",{style:{fontSize:"0.9em",color:"#555"},children:["Current Event: ",s.currentEventId.substring(0,10),"..."]}),"error"===s.status&&s.errorDetails&&(0,ua.jsxs)("div",{style:{fontSize:"0.9em",color:"red",marginTop:"0.5em",wordBreak:"break-word"},children:[(0,ua.jsx)("strong",{children:"Details:"})," ",s.errorDetails]}),"complete"===s.status&&(0,ua.jsx)("div",{style:{color:"green",fontWeight:"bold",marginTop:"0.5em"},children:"Synchronization finished!"})]})]})};new TextDecoder("utf-8"),new TextEncoder;function da(e){-1===e.indexOf("://")&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var ha=__webpack_require__(821),fa=__webpack_require__(522);function pa(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ga(e){if(!((t=e)instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name))throw new Error("Uint8Array expected");for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(r.length>0&&!r.includes(e.length))throw new Error("Uint8Array expected of length "+r+", got length="+e.length)}function ya(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const ma="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function ba(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function wa(e,t){return e<<32-t|e>>>t}const va="function"===typeof Uint8Array.from([]).toHex&&"function"===typeof Uint8Array.fromHex,ka=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ea(e){if(ga(e),va)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=ka[e[n]];return t}const Sa=48,xa=57,_a=65,Ca=70,Aa=97,Ra=102;function Ta(e){return e>=Sa&&e<=xa?e-Sa:e>=_a&&e<=Ca?e-(_a-10):e>=Aa&&e<=Ra?e-(Aa-10):void 0}function Na(e){return"string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),ga(e),e}class Pa{clone(){return this._cloneInto()}}function La(e){const t=t=>e().update(Na(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ia(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(ma&&"function"===typeof ma.getRandomValues)return ma.getRandomValues(new Uint8Array(e));if(ma&&"function"===typeof ma.randomBytes)return Uint8Array.from(ma.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function Ua(e,t,n){return e&t^e&n^t&n}class Oa extends Pa{constructor(e,t,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(e),this.view=ba(this.buffer)}update(e){ya(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=Na(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=ba(e);for(;r<=i-s;s+=r)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){ya(this),function(e,t){ga(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let c=s;c<r;c++)t[c]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,u=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=ba(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<l;c++)o.setUint32(4*c,u[c],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=s,r%t&&e.buffer.set(n),e}}const Fa=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ma=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Da=new Uint32Array(64);class za extends Oa{constructor(){super(64,arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,8,!1),this.A=0|Ma[0],this.B=0|Ma[1],this.C=0|Ma[2],this.D=0|Ma[3],this.E=0|Ma[4],this.F=0|Ma[5],this.G=0|Ma[6],this.H=0|Ma[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[e,t,n,r,i,s,o,a]}set(e,t,n,r,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let d=0;d<16;d++,t+=4)Da[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const e=Da[d-15],t=Da[d-2],n=wa(e,7)^wa(e,18)^e>>>3,r=wa(t,17)^wa(t,19)^t>>>10;Da[d]=r+Da[d-7]+n+Da[d-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:l,H:u}=this;for(let d=0;d<64;d++){const e=u+(wa(o,6)^wa(o,11)^wa(o,25))+((c=o)&a^~c&l)+Fa[d]+Da[d]|0,t=(wa(n,2)^wa(n,13)^wa(n,22))+Ua(n,r,i)|0;u=l,l=a,a=o,o=s+e|0,s=i,i=r,r=n,n=e+t|0}var c;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,l,u)}roundClean(){Da.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ba=La((()=>new za));class $a extends Pa{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");pa(e.outputLen),pa(e.blockLen)}(e);const n=Na(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return ya(this),this.iHash.update(e),this}digestInto(e){ya(this),ga(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Va=(e,t,n)=>new $a(e,t).update(n).digest();Va.create=(e,t)=>new $a(e,t);const ja=BigInt(0),Ha=BigInt(1);function qa(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Wa(e){if(!qa(e))throw new Error("Uint8Array expected")}function Ka(e,t){if("boolean"!==typeof t)throw new Error(e+" boolean expected, got "+t)}function Ga(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function Qa(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?ja:BigInt("0x"+e)}const Za="function"===typeof Uint8Array.from([]).toHex&&"function"===typeof Uint8Array.fromHex,Ya=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ja(e){if(Wa(e),Za)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Ya[e[n]];return t}const Xa=48,el=57,tl=65,nl=70,rl=97,il=102;function sl(e){return e>=Xa&&e<=el?e-Xa:e>=tl&&e<=nl?e-(tl-10):e>=rl&&e<=il?e-(rl-10):void 0}function ol(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);if(Za)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const t=sl(e.charCodeAt(s)),n=sl(e.charCodeAt(s+1));if(void 0===t||void 0===n){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[i]=16*t+n}return r}function al(e){return Qa(Ja(e))}function ll(e){return Wa(e),Qa(Ja(Uint8Array.from(e).reverse()))}function ul(e,t){return ol(e.toString(16).padStart(2*t,"0"))}function cl(e,t){return ul(e,t).reverse()}function dl(e,t,n){let r;if("string"===typeof t)try{r=ol(t)}catch(s){throw new Error(e+" must be hex string or Uint8Array, cause: "+s)}else{if(!qa(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const i=r.length;if("number"===typeof n&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function hl(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];Wa(t),e+=t.length}const t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}const fl=e=>"bigint"===typeof e&&ja<=e;function pl(e,t,n){return fl(e)&&fl(t)&&fl(n)&&t<=e&&e<n}function gl(e,t,n,r){if(!pl(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}const yl=e=>(Ha<<BigInt(e))-Ha,ml=e=>new Uint8Array(e),bl=e=>Uint8Array.from(e);const wl={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||qa(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function vl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const i=wl[n];if("function"!==typeof i)throw new Error("invalid validator function");const s=e[t];if((!r||void 0!==s)&&!i(s,e))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+s)};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}function kl(e){const t=new WeakMap;return function(n){const r=t.get(n);if(void 0!==r)return r;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];const a=e(n,...s);return t.set(n,a),a}}const El=BigInt(0),Sl=BigInt(1),xl=BigInt(2),_l=BigInt(3),Cl=BigInt(4),Al=BigInt(5),Rl=BigInt(8);function Tl(e,t){const n=e%t;return n>=El?n:t+n}function Nl(e,t,n){if(t<El)throw new Error("invalid exponent, negatives unsupported");if(n<=El)throw new Error("invalid modulus");if(n===Sl)return El;let r=Sl;for(;t>El;)t&Sl&&(r=r*e%n),e=e*e%n,t>>=Sl;return r}function Pl(e,t,n){let r=e;for(;t-- >El;)r*=r,r%=n;return r}function Ll(e,t){if(e===El)throw new Error("invert: expected non-zero number");if(t<=El)throw new Error("invert: expected positive modulus, got "+t);let n=Tl(e,t),r=t,i=El,s=Sl,o=Sl,a=El;for(;n!==El;){const e=r/n,t=r%n,l=i-o*e,u=s-a*e;r=n,n=t,i=o,s=a,o=l,a=u}if(r!==Sl)throw new Error("invert: does not exist");return Tl(i,t)}function Il(e){if(e%Cl===_l){const t=(e+Sl)/Cl;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Rl===Al){const t=(e-Al)/Rl;return function(e,n){const r=e.mul(n,xl),i=e.pow(r,t),s=e.mul(n,i),o=e.mul(e.mul(s,xl),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Sl)/xl;let n,r,i;for(n=e-Sl,r=0;n%xl===El;n/=xl,r++);for(i=xl;i<e&&Nl(i,t,e)!==e-Sl;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const t=(e+Sl)/Cl;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+Sl)/xl;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),n),u=e.pow(o,s),c=e.pow(o,n);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,Sl<<BigInt(a-t-1));l=e.sqr(n),u=e.mul(u,n),c=e.mul(c,l),a=t}return u}}(e)}const Ul=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ol(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Fl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=El)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=Ol(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:s,MASK:yl(i),ZERO:El,ONE:Sl,create:t=>Tl(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return El<=t&&t<e},is0:e=>e===El,isOdd:e=>(e&Sl)===Sl,neg:t=>Tl(-t,e),eql:(e,t)=>e===t,sqr:t=>Tl(t*t,e),add:(t,n)=>Tl(t+n,e),sub:(t,n)=>Tl(t-n,e),mul:(t,n)=>Tl(t*n,e),pow:(e,t)=>function(e,t,n){if(n<El)throw new Error("invalid exponent, negatives unsupported");if(n===El)return e.ONE;if(n===Sl)return t;let r=e.ONE,i=t;for(;n>El;)n&Sl&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Sl;return r}(a,e,t),div:(t,n)=>Tl(t*Ll(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ll(t,e),sqrt:r.sqrt||(t=>(o||(o=Il(e)),o(a,t))),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?cl(e,s):ul(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return n?ll(e):al(e)}});return Object.freeze(a)}function Ml(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Dl(e){const t=Ml(e);return t+Math.ceil(t/2)}const zl=BigInt(0),Bl=BigInt(1);function $l(e,t){const n=t.negate();return e?n:t}function Vl(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function jl(e,t){Vl(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:yl(e),maxNumber:n,shiftBy:BigInt(e)}}function Hl(e,t,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(e&i),l=e>>o;a>r&&(a-=s,l+=Bl);const u=t*r;return{nextN:l,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!==0,offsetF:u}}function ql(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)}))}function Wl(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)}))}const Kl=new WeakMap,Gl=new WeakMap;function Ql(e){return Gl.get(e)||1}function Zl(e,t,n,r){if(ql(n,e),Wl(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=function(e){let t;for(t=0;e>ja;e>>=Ha,t+=1);return t}(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=yl(o),l=new Array(Number(a)+1).fill(i);let u=i;for(let c=Math.floor((t.BITS-1)/o)*o;c>=0;c-=o){l.fill(i);for(let t=0;t<r.length;t++){const e=r[t],i=Number(e>>BigInt(c)&a);l[i]=l[i].add(n[t])}let e=i;for(let t=l.length-1,n=i;t>0;t--)n=n.add(l[t]),e=e.add(n);if(u=u.add(e),0!==c)for(let t=0;t<o;t++)u=u.double()}return u}function Yl(e){return vl(e.Fp,Ul.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),vl(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ol(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Jl(e){void 0!==e.lowS&&Ka("lowS",e.lowS),void 0!==e.prehash&&Ka("prehash",e.prehash)}class Xl extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}}const eu={Err:Xl,_tlv:{encode:(e,t)=>{const{Err:n}=eu;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Ga(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Ga(i.length/2|128):"";return Ga(e)+s+i+t},decode(e,t){const{Err:n}=eu;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++];let s=0;if(!!(128&i)){const e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const o=t.subarray(r,r+e);if(o.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const t of o)s=s<<8|t;if(r+=e,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const o=t.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=eu;if(e<tu)throw new t("integer: negative integers are not allowed");let n=Ga(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=eu;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return al(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=eu,i=dl("signature",e),{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:l}=r.decode(2,s),{v:u,l:c}=r.decode(2,l);if(c.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=eu,r=t.encode(2,n.encode(e.r))+t.encode(2,n.encode(e.s));return t.encode(48,r)}},tu=BigInt(0),nu=BigInt(1),ru=(BigInt(2),BigInt(3));BigInt(4);function iu(e){const t=function(e){const t=Yl(e);vl(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=Fl(t.n,t.nBitLength),i=t.toBytes||((e,t,r)=>{const i=t.toAffine();return hl(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,s=n.sqr(e),o=n.mul(s,e);return n.add(n.add(o,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=t;if(n&&"bigint"!==typeof e){if(qa(e)&&(e=Ja(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*r,"0")}let o;try{o="bigint"===typeof e?e:al(dl("private key",e,r))}catch(a){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof e)}return i&&(o=Tl(o,s)),gl("private key",o,nu,s),o}function l(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}const u=kl(((e,t)=>{const{px:r,py:i,pz:s}=e;if(n.eql(s,n.ONE))return{x:r,y:i};const o=e.is0();null==t&&(t=o?n.ONE:n.inv(s));const a=n.mul(r,t),l=n.mul(i,t),u=n.mul(s,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:l}})),c=kl((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=e.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const s=n.sqr(i),a=o(r);if(!n.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class d{constructor(e,t,r){if(null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");this.px=e,this.py=t,this.pz=r,Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?d.ZERO:new d(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(s(dl("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(a(e))}static msm(e,t){return Zl(d,r,e,t)}_setWindowSize(e){f.setWindowSize(this,e)}assertValidity(){c(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){l(e);const{px:t,py:r,pz:i}=this,{px:s,py:o,pz:a}=e,u=n.eql(n.mul(t,a),n.mul(s,i)),c=n.eql(n.mul(r,a),n.mul(o,i));return u&&c}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,ru),{px:s,py:o,pz:a}=this;let l=n.ZERO,u=n.ZERO,c=n.ZERO,h=n.mul(s,s),f=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),c=n.mul(s,a),c=n.add(c,c),l=n.mul(e,c),u=n.mul(i,p),u=n.add(l,u),l=n.sub(f,u),u=n.add(f,u),u=n.mul(l,u),l=n.mul(g,l),c=n.mul(i,c),p=n.mul(e,p),g=n.sub(h,p),g=n.mul(e,g),g=n.add(g,c),c=n.add(h,h),h=n.add(c,h),h=n.add(h,p),h=n.mul(h,g),u=n.add(u,h),p=n.mul(o,a),p=n.add(p,p),h=n.mul(p,g),l=n.sub(l,h),c=n.mul(p,f),c=n.add(c,c),c=n.add(c,c),new d(l,u,c)}add(e){l(e);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:u}=e;let c=n.ZERO,h=n.ZERO,f=n.ZERO;const p=t.a,g=n.mul(t.b,ru);let y=n.mul(r,o),m=n.mul(i,a),b=n.mul(s,u),w=n.add(r,i),v=n.add(o,a);w=n.mul(w,v),v=n.add(y,m),w=n.sub(w,v),v=n.add(r,s);let k=n.add(o,u);return v=n.mul(v,k),k=n.add(y,b),v=n.sub(v,k),k=n.add(i,s),c=n.add(a,u),k=n.mul(k,c),c=n.add(m,b),k=n.sub(k,c),f=n.mul(p,v),c=n.mul(g,b),f=n.add(c,f),c=n.sub(m,f),f=n.add(m,f),h=n.mul(c,f),m=n.add(y,y),m=n.add(m,y),b=n.mul(p,b),v=n.mul(g,v),m=n.add(m,b),b=n.sub(y,b),b=n.mul(p,b),v=n.add(v,b),y=n.mul(m,v),h=n.add(h,y),y=n.mul(k,v),c=n.mul(w,c),c=n.sub(c,y),y=n.mul(w,m),f=n.mul(k,f),f=n.add(f,y),new d(c,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){const{endo:r,n:i}=t;gl("scalar",e,tu,i);const s=d.ZERO;if(e===tu)return s;if(this.is0()||e===nu)return this;if(!r||f.hasPrecomputes(this))return f.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:o,k1:a,k2neg:l,k2:u}=r.splitScalar(e),c=s,h=s,p=this;for(;a>tu||u>tu;)a&nu&&(c=c.add(p)),u&nu&&(h=h.add(p)),p=p.double(),a>>=nu,u>>=nu;return o&&(c=c.negate()),l&&(h=h.negate()),h=new d(n.mul(h.px,r.beta),h.py,h.pz),c.add(h)}multiply(e){const{endo:r,n:i}=t;let s,o;if(gl("scalar",e,nu,i),r){const{k1neg:t,k1:i,k2neg:a,k2:l}=r.splitScalar(e);let{p:u,f:c}=this.wNAF(i),{p:h,f:p}=this.wNAF(l);u=f.constTimeNegate(t,u),h=f.constTimeNegate(a,h),h=new d(n.mul(h.px,r.beta),h.py,h.pz),s=u.add(h),o=c.add(p)}else{const{p:t,f:n}=this.wNAF(e);s=t,o=n}return d.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=d.BASE,i=(e,t)=>t!==tu&&t!==nu&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,n));return s.is0()?void 0:s}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===nu)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===nu?this:n?n(d,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ka("isCompressed",e),this.assertValidity(),i(d,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return Ka("isCompressed",e),Ja(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,f=(p=d,g=t.endo?Math.ceil(h/2):h,{constTimeNegate:$l,hasPrecomputes:e=>1!==Ql(e),unsafeLadder(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.ZERO,r=e;for(;t>zl;)t&Bl&&(n=n.add(r)),r=r.double(),t>>=Bl;return n},precomputeWindow(e,t){const{windows:n,windowSize:r}=jl(t,g),i=[];let s=e,o=s;for(let a=0;a<n;a++){o=s,i.push(o);for(let e=1;e<r;e++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(e,t,n){let r=p.ZERO,i=p.BASE;const s=jl(e,g);for(let o=0;o<s.windows;o++){const{nextN:e,offset:a,isZero:l,isNeg:u,isNegF:c,offsetF:d}=Hl(n,o,s);n=e,l?i=i.add($l(c,t[d])):r=r.add($l(u,t[a]))}return{p:r,f:i}},wNAFUnsafe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.ZERO;const i=jl(e,g);for(let s=0;s<i.windows&&n!==zl;s++){const{nextN:e,offset:o,isZero:a,isNeg:l}=Hl(n,s,i);if(n=e,!a){const e=t[o];r=r.add(l?e.negate():e)}}return r},getPrecomputes(e,t,n){let r=Kl.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&Kl.set(t,n(r))),r},wNAFCached(e,t,n){const r=Ql(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){const i=Ql(e);return 1===i?this.unsafeLadder(e,t,r):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,r)},setWindowSize(e,t){Vl(t,g),Gl.set(e,t),Kl.delete(e)}});var p,g;return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return pl(e,nu,t.n)}}}function su(e){const t=function(e){const t=Yl(e);return vl(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(e){return Tl(e,r)}function a(e){return Ll(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:d}=iu({...t,toBytes(e,t,r){const i=t.toAffine(),s=n.toBytes(i.x),o=hl;return Ka("isCompressed",r),r?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===s&&4===r){return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))}}throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+t)}{const e=al(o);if(!pl(e,nu,n.ORDER))throw new Error("Point is not on curve");const t=c(e);let i;try{i=n.sqrt(t)}catch(a){const e=a instanceof Error?": "+a.message:"";throw new Error("Point is not on curve"+e)}return 1===(1&r)!==((i&nu)===nu)&&(i=n.neg(i)),{x:e,y:i}}}}),h=e=>Ja(ul(e,t.nByteLength));function f(e){return e>r>>nu}const p=(e,t,n)=>al(e.slice(t,n));class g{constructor(e,t,n){gl("r",e,nu,r),gl("s",t,nu,r),this.r=e,this.s=t,null!=n&&(this.recovery=n),Object.freeze(this)}static fromCompact(e){const n=t.nByteLength;return e=dl("compactSignature",e,2*n),new g(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=eu.toSig(dl("DER",e));return new g(t,n)}assertValidity(){}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:s}=this,u=w(dl("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const c=2===s||3===s?r+t.n:r;if(c>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0===(1&s)?"02":"03",f=l.fromHex(d+h(c)),p=a(c),g=o(-u*p),y=o(i*p),m=l.BASE.multiplyAndAddUnsafe(f,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ol(this.toDERHex())}toDERHex(){return eu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ol(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(e){try{return u(e),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Dl(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.length,i=Ml(t),s=Dl(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=Tl(n?ll(e):al(e),t-Sl)+Sl;return n?cl(o,i):ul(o,i)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function m(e){const t=qa(e),n="string"===typeof e,r=(t||n)&&e.length;return t?r===i||r===s:n?r===2*i||r===2*s:e instanceof l}const b=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const n=al(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},w=t.bits2int_modN||function(e){return o(b(e))},v=yl(t.nBitLength);function k(e){return gl("num < 2^"+t.nBitLength,e,tu,v),ul(e,t.nByteLength)}function E(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:c}=t;let{lowS:h,prehash:p,extraEntropy:y}=i;null==h&&(h=!0),e=dl("msgHash",e),Jl(i),p&&(e=dl("prehashed msgHash",s(e)));const m=w(e),v=u(r),E=[k(v),k(m)];if(null!=y&&!1!==y){const e=!0===y?c(n.BYTES):y;E.push(dl("extraEntropy",e))}const x=hl(...E),_=m;return{seed:x,k2sig:function(e){const t=b(e);if(!d(t))return;const n=a(t),r=l.BASE.multiply(t).toAffine(),i=o(r.x);if(i===tu)return;const s=o(n*o(_+i*v));if(s===tu)return;let u=(r.x===i?0:2)|Number(r.y&nu),c=s;return h&&f(s)&&(c=function(e){return f(e)?o(-e):e}(s),u^=1),new g(i,c,u)}}}const S={lowS:t.lowS,prehash:!1},x={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(m(e))throw new Error("first arg must be private key");if(!m(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;const{seed:i,k2sig:s}=E(e,n,r),o=t,a=function(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=ml(e),i=ml(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n(i,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ml(0);i=a(bl([0]),e),r=a(),0!==e.length&&(i=a(bl([1]),e),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return hl(...n)};return(e,t)=>{let n;for(o(),l(e);!(n=t(u()));)l();return o(),n}}(o.hash.outputLen,o.nByteLength,o.hmac);return a(i,s)},verify:function(e,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x;const s=e;n=dl("msgHash",n),r=dl("publicKey",r);const{lowS:u,prehash:c,format:d}=i;if(Jl(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");const h="string"===typeof s||qa(s),f=!h&&!d&&"object"===typeof s&&null!==s&&"bigint"===typeof s.r&&"bigint"===typeof s.s;if(!h&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,y;try{if(f&&(p=new g(s.r,s.s)),h){try{"compact"!==d&&(p=g.fromDER(s))}catch(C){if(!(C instanceof eu.Err))throw C}p||"der"===d||(p=g.fromCompact(s))}y=l.fromHex(r)}catch(A){return!1}if(!p)return!1;if(u&&p.hasHighS())return!1;c&&(n=t.hash(n));const{r:m,s:b}=p,v=w(n),k=a(b),E=o(v*k),S=o(m*k),_=l.BASE.multiplyAndAddUnsafe(y,E,S)?.toAffine();return!!_&&o(_.x)===m},ProjectivePoint:l,Signature:g,utils:y}}function ou(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Va(e,t,function(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];ga(t),e+=t.length}const t=new Uint8Array(e);for(let n=0,r=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}(...r))},randomBytes:Ia}}const au=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),lu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),uu=BigInt(1),cu=BigInt(2),du=(e,t)=>(e+t/cu)/t;function hu(e){const t=au,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,c=u*u*e%t,d=Pl(c,n,t)*c%t,h=Pl(d,n,t)*c%t,f=Pl(h,cu,t)*u%t,p=Pl(f,i,t)*f%t,g=Pl(p,s,t)*p%t,y=Pl(g,a,t)*g%t,m=Pl(y,l,t)*y%t,b=Pl(m,a,t)*g%t,w=Pl(b,n,t)*c%t,v=Pl(w,o,t)*p%t,k=Pl(v,r,t)*u%t,E=Pl(k,cu,t);if(!fu.eql(fu.sqr(E),e))throw new Error("Cannot find square root");return E}const fu=Fl(au,void 0,void 0,{sqrt:hu}),pu=function(e,t){const n=t=>su({...e,...ou(t)});return{...n(t),create:n}}({a:BigInt(0),b:BigInt(7),Fp:fu,n:lu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=lu,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-uu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=du(s*e,t),l=du(-r*e,t);let u=Tl(e-a*n-l*i,t),c=Tl(-a*r-l*s,t);const d=u>o,h=c>o;if(d&&(u=t-u),h&&(c=t-c),u>o||c>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:c}}}},Ba),gu=BigInt(0),yu={};function mu(e){let t=yu[e];if(void 0===t){const n=Ba(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=hl(n,n),yu[e]=t}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ba(hl(t,...r))}const bu=e=>e.toRawBytes(!0).slice(1),wu=e=>ul(e,32),vu=e=>Tl(e,au),ku=e=>Tl(e,lu),Eu=pu.ProjectivePoint;function Su(e){let t=pu.utils.normPrivateKeyToScalar(e),n=Eu.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:ku(-t),bytes:bu(n)}}function xu(e){gl("x",e,uu,au);const t=vu(e*e);let n=hu(vu(t*e+BigInt(7)));n%cu!==gu&&(n=vu(-n));const r=new Eu(e,n,uu);return r.assertValidity(),r}const _u=al;function Cu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ku(_u(mu("BIP0340/challenge",...t)))}function Au(e){return Su(e).bytes}function Ru(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ia(32);const r=dl("message",e),{bytes:i,scalar:s}=Su(t),o=dl("auxRand",n,32),a=wu(s^_u(mu("BIP0340/aux",o))),l=mu("BIP0340/nonce",a,i,r),u=ku(_u(l));if(u===gu)throw new Error("sign failed: k is zero");const{bytes:c,scalar:d}=Su(u),h=Cu(c,i,r),f=new Uint8Array(64);if(f.set(c,0),f.set(wu(ku(d+h*s)),32),!Tu(f,r,i))throw new Error("sign: Invalid signature produced");return f}function Tu(e,t,n){const r=dl("signature",e,64),i=dl("message",t),s=dl("publicKey",n,32);try{const e=xu(_u(s)),t=_u(r.subarray(0,32));if(!pl(t,uu,au))return!1;const n=_u(r.subarray(32,64));if(!pl(n,uu,lu))return!1;const u=Cu(wu(t),bu(e),i),c=(o=e,a=n,l=ku(-u),Eu.BASE.multiplyAndAddUnsafe(o,a,l));return!(!c||!c.hasEvenY()||c.toAffine().x!==t)}catch(u){return!1}var o,a,l}const Nu=(()=>({getPublicKey:Au,sign:Ru,verify:Tu,utils:{randomPrivateKey:pu.utils.randomPrivateKey,lift_x:xu,pointToBytes:bu,numberToBytesBE:ul,bytesToNumberBE:al,taggedHash:mu,mod:Tl}}))();var Pu=__webpack_require__(245);__webpack_require__(558);function Lu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Iu(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every((e=>"string"===typeof e)):t.every((e=>Number.isSafeInteger(e)))))}function Uu(e){if("function"!==typeof e)throw new Error("function expected");return!0}function Ou(e,t){if("string"!==typeof t)throw new Error(`${e}: string expected`);return!0}function Fu(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Mu(e){if(!Array.isArray(e))throw new Error("array expected")}function Du(e,t){if(!Iu(!0,t))throw new Error(`${e}: array of strings expected`)}function zu(e,t){if(!Iu(!1,t))throw new Error(`${e}: array of numbers expected`)}function Bu(){const e=e=>e,t=(e,t)=>n=>e(t(n));for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return{encode:r.map((e=>e.encode)).reduceRight(t,e),decode:r.map((e=>e.decode)).reduce(t,e)}}function $u(e){const t="string"===typeof e?e.split(""):e,n=t.length;Du("alphabet",t);const r=new Map(t.map(((e,t)=>[e,t])));return{encode:r=>(Mu(r),r.map((r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${e}`);return t[r]}))),decode:t=>(Mu(t),t.map((t=>{Ou("alphabet.decode",t);const n=r.get(t);if(void 0===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})))}}function Vu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ou("join",e),{encode:t=>(Du("join.decode",t),t.join(e)),decode:t=>(Ou("join.decode",t),t.split(e))}}function ju(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";return Fu(e),Ou("padding",t),{encode(n){for(Du("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){Du("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--){if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding")}return n.slice(0,r)}}}function Hu(e){return Uu(e),{encode:e=>e,decode:t=>e(t)}}function qu(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(Mu(e),!e.length)return[];let r=0;const i=[],s=Array.from(e,(e=>{if(Fu(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e})),o=s.length;for(;;){let e=0,a=!0;for(let i=r;i<o;i++){const o=s[i],l=t*e,u=l+o;if(!Number.isSafeInteger(u)||l/t!==e||u-o!==l)throw new Error("convertRadix: carry overflow");const c=u/n;e=u%n;const d=Math.floor(c);if(s[i]=d,!Number.isSafeInteger(d)||d*n+e!==u)throw new Error("convertRadix: carry overflow");a&&(d?a=!1:r=i)}if(i.push(e),a)break}for(let a=0;a<e.length-1&&0===e[a];a++)i.push(0);return i.reverse()}const Wu=(e,t)=>0===t?e:Wu(t,e%t),Ku=(e,t)=>e+(t-Wu(e,t)),Gu=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function Qu(e,t,n,r){if(Mu(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ku(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Ku(t,n)}`);let i=0,s=0;const o=Gu[t],a=Gu[n]-1,l=[];for(const u of e){if(Fu(u),u>=o)throw new Error(`convertRadix2: invalid data word=${u} from=${t}`);if(i=i<<t|u,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)l.push((i>>s-n&a)>>>0);const e=Gu[s];if(void 0===e)throw new Error("invalid carry");i&=e-1}if(i=i<<n-s&a,!r&&s>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&l.push(i>>>0),l}function Zu(e){Fu(e);return{encode:t=>{if(!Lu(t))throw new Error("radix.encode input should be Uint8Array");return qu(Array.from(t),256,e)},decode:t=>(zu("radix.decode",t),Uint8Array.from(qu(t,e,256)))}}function Yu(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Fu(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Ku(8,e)>32||Ku(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Lu(n))throw new Error("radix2.encode input should be Uint8Array");return Qu(Array.from(n),8,e,!t)},decode:n=>(zu("radix2.decode",n),Uint8Array.from(Qu(n,e,8,t)))}}function Ju(e){return Uu(e),function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(null,n)}catch(i){}}}const Xu=Bu(Yu(4),$u("0123456789ABCDEF"),Vu("")),ec=Bu(Yu(5),$u("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ju(5),Vu("")),tc=(Bu(Yu(5),$u("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Vu("")),Bu(Yu(5),$u("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ju(5),Vu("")),Bu(Yu(5),$u("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Vu("")),Bu(Yu(5),$u("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Vu(""),Hu((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),Bu(Yu(6),$u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ju(6),Vu(""))),nc=(Bu(Yu(6),$u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Vu("")),Bu(Yu(6),$u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ju(6),Vu(""))),rc=(Bu(Yu(6),$u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Vu("")),e=>Bu(Zu(58),$u(e),Vu(""))),ic=rc("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),sc=(rc("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),rc("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),[0,2,3,5,6,7,9,10,11]),oc={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=ic.encode(r).padStart(sc[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=sc.indexOf(r.length),s=ic.decode(r);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},ac=Bu($u("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Vu("")),lc=[996825010,642813549,513874426,1027748829,705979059];function uc(e){const t=e>>25;let n=(33554431&e)<<5;for(let r=0;r<lc.length;r++)1===(t>>r&1)&&(n^=lc[r]);return n}function cc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=e.length;let i=1;for(let s=0;s<r;s++){const t=e.charCodeAt(s);if(t<33||t>126)throw new Error(`Invalid prefix (${e})`);i=uc(i)^t>>5}i=uc(i);for(let s=0;s<r;s++)i=uc(i)^31&e.charCodeAt(s);for(let s of t)i=uc(i)^s;for(let s=0;s<6;s++)i=uc(i);return i^=n,ac.encode(Qu([i%Gu[30]],30,5,!1))}function dc(e){const t="bech32"===e?1:734539939,n=Yu(5),r=n.decode,i=n.encode,s=Ju(r);function o(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;Ou("bech32.encode prefix",e),Lu(n)&&(n=Array.from(n)),zu("bech32.encode",n);const i=e.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const s=i+7+n.length;if(!1!==r&&s>r)throw new TypeError(`Length ${s} exceeds limit ${r}`);const o=e.toLowerCase(),a=cc(o,n,t);return`${o}1${ac.encode(n)}${a}`}function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;Ou("bech32.decode input",e);const r=e.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${e}). Expected (8..${n})`);const i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const o=i.slice(0,s),a=i.slice(s+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const l=ac.decode(a).slice(0,-6),u=cc(o,l,t);if(!a.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:o,words:l}}return{encode:o,decode:a,encodeFromBytes:function(e,t){return o(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:n}=a(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:Ju(a),fromWords:r,fromWordsUnsafe:s,toWords:i}}const hc=dc("bech32"),fc=(dc("bech32m"),{encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)});Bu(Yu(4),$u("0123456789abcdef"),Vu(""),Hu((e=>{if("string"!==typeof e||e.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));var pc=(e=>(e[e.Metadata=0]="Metadata",e[e.Text=1]="Text",e[e.RecommendRelay=2]="RecommendRelay",e[e.Contacts=3]="Contacts",e[e.EncryptedDirectMessage=4]="EncryptedDirectMessage",e[e.EventDeletion=5]="EventDeletion",e[e.Repost=6]="Repost",e[e.Reaction=7]="Reaction",e[e.BadgeAward=8]="BadgeAward",e[e.GroupChat=9]="GroupChat",e[e.GroupNote=11]="GroupNote",e[e.GroupReply=12]="GroupReply",e[e.GiftWrapSeal=13]="GiftWrapSeal",e[e.PrivateDirectMessage=14]="PrivateDirectMessage",e[e.Image=20]="Image",e[e.Video=21]="Video",e[e.ShortVideo=22]="ShortVideo",e[e.Story=23]="Story",e[e.Vanish=62]="Vanish",e[e.CashuWalletBackup=375]="CashuWalletBackup",e[e.GiftWrap=1059]="GiftWrap",e[e.GenericRepost=16]="GenericRepost",e[e.ChannelCreation=40]="ChannelCreation",e[e.ChannelMetadata=41]="ChannelMetadata",e[e.ChannelMessage=42]="ChannelMessage",e[e.ChannelHideMessage=43]="ChannelHideMessage",e[e.ChannelMuteUser=44]="ChannelMuteUser",e[e.WikiMergeRequest=818]="WikiMergeRequest",e[e.GenericReply=1111]="GenericReply",e[e.Media=1063]="Media",e[e.Report=1984]="Report",e[e.Label=1985]="Label",e[e.DVMReqTextExtraction=5e3]="DVMReqTextExtraction",e[e.DVMReqTextSummarization=5001]="DVMReqTextSummarization",e[e.DVMReqTextTranslation=5002]="DVMReqTextTranslation",e[e.DVMReqTextGeneration=5050]="DVMReqTextGeneration",e[e.DVMReqImageGeneration=5100]="DVMReqImageGeneration",e[e.DVMReqTextToSpeech=5250]="DVMReqTextToSpeech",e[e.DVMReqDiscoveryNostrContent=5300]="DVMReqDiscoveryNostrContent",e[e.DVMReqDiscoveryNostrPeople=5301]="DVMReqDiscoveryNostrPeople",e[e.DVMReqTimestamping=5900]="DVMReqTimestamping",e[e.DVMEventSchedule=5905]="DVMEventSchedule",e[e.DVMJobFeedback=7e3]="DVMJobFeedback",e[e.Subscribe=7001]="Subscribe",e[e.Unsubscribe=7002]="Unsubscribe",e[e.SubscriptionReceipt=7003]="SubscriptionReceipt",e[e.CashuReserve=7373]="CashuReserve",e[e.CashuQuote=7374]="CashuQuote",e[e.CashuToken=7375]="CashuToken",e[e.CashuWalletTx=7376]="CashuWalletTx",e[e.GroupAdminAddUser=9e3]="GroupAdminAddUser",e[e.GroupAdminRemoveUser=9001]="GroupAdminRemoveUser",e[e.GroupAdminEditMetadata=9002]="GroupAdminEditMetadata",e[e.GroupAdminEditStatus=9006]="GroupAdminEditStatus",e[e.GroupAdminCreateGroup=9007]="GroupAdminCreateGroup",e[e.GroupAdminRequestJoin=9021]="GroupAdminRequestJoin",e[e.MuteList=1e4]="MuteList",e[e.PinList=10001]="PinList",e[e.RelayList=10002]="RelayList",e[e.BookmarkList=10003]="BookmarkList",e[e.CommunityList=10004]="CommunityList",e[e.PublicChatList=10005]="PublicChatList",e[e.BlockRelayList=10006]="BlockRelayList",e[e.SearchRelayList=10007]="SearchRelayList",e[e.SimpleGroupList=10009]="SimpleGroupList",e[e.InterestList=10015]="InterestList",e[e.CashuMintList=10019]="CashuMintList",e[e.EmojiList=10030]="EmojiList",e[e.DirectMessageReceiveRelayList=10050]="DirectMessageReceiveRelayList",e[e.BlossomList=10063]="BlossomList",e[e.NostrWaletConnectInfo=13194]="NostrWaletConnectInfo",e[e.TierList=17e3]="TierList",e[e.CashuWallet=17375]="CashuWallet",e[e.FollowSet=3e4]="FollowSet",e[e.CategorizedPeopleList=3e4]="CategorizedPeopleList",e[e.CategorizedBookmarkList=30001]="CategorizedBookmarkList",e[e.RelaySet=30002]="RelaySet",e[e.CategorizedRelayList=30002]="CategorizedRelayList",e[e.BookmarkSet=30003]="BookmarkSet",e[e.CurationSet=30004]="CurationSet",e[e.ArticleCurationSet=30004]="ArticleCurationSet",e[e.VideoCurationSet=30005]="VideoCurationSet",e[e.ImageCurationSet=30006]="ImageCurationSet",e[e.InterestSet=30015]="InterestSet",e[e.InterestsList=30015]="InterestsList",e[e.EmojiSet=30030]="EmojiSet",e[e.ModularArticle=30040]="ModularArticle",e[e.ModularArticleItem=30041]="ModularArticleItem",e[e.Wiki=30818]="Wiki",e[e.Draft=31234]="Draft",e[e.SubscriptionTier=37001]="SubscriptionTier",e[e.EcashMintRecommendation=38e3]="EcashMintRecommendation",e[e.HighlightSet=39802]="HighlightSet",e[e.CategorizedHighlightList=39802]="CategorizedHighlightList",e[e.Nutzap=9321]="Nutzap",e[e.ZapRequest=9734]="ZapRequest",e[e.Zap=9735]="Zap",e[e.Highlight=9802]="Highlight",e[e.ClientAuth=22242]="ClientAuth",e[e.NostrWalletConnectReq=23194]="NostrWalletConnectReq",e[e.NostrWalletConnectRes=23195]="NostrWalletConnectRes",e[e.NostrConnect=24133]="NostrConnect",e[e.BlossomUpload=24242]="BlossomUpload",e[e.HttpAuth=27235]="HttpAuth",e[e.ProfileBadge=30008]="ProfileBadge",e[e.BadgeDefinition=30009]="BadgeDefinition",e[e.MarketStall=30017]="MarketStall",e[e.MarketProduct=30018]="MarketProduct",e[e.Article=30023]="Article",e[e.AppSpecificData=30078]="AppSpecificData",e[e.Classified=30402]="Classified",e[e.HorizontalVideo=34235]="HorizontalVideo",e[e.VerticalVideo=34236]="VerticalVideo",e[e.LegacyCashuWallet=37375]="LegacyCashuWallet",e[e.GroupMetadata=39e3]="GroupMetadata",e[e.GroupAdmins=39001]="GroupAdmins",e[e.GroupMembers=39002]="GroupMembers",e[e.AppRecommendation=31989]="AppRecommendation",e[e.AppHandler=31990]="AppHandler",e))(pc||{});function gc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"write";if(!e.outboxTracker)return;const r=e.outboxTracker.data.get(t);return r?"write"===n?r.writeRelays:r.readRelays:void 0}function yc(e,t,n){let{count:r,preferredRelays:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r??=2,i??=new Set;const s=e.pool,o=s.connectedRelays();o.forEach((e=>{i?.add(e.url)}));const a=new Map,{pubkeysToRelays:l,authorsMissingRelays:u}=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"read";const r=new Map,i=new Set;return t.forEach((t=>{const s=gc(e,t,n);s&&s.size>0?(s.forEach((e=>{(r.get(e)||new Set).add(t)})),r.set(t,s)):i.add(t)})),{pubkeysToRelays:r,authorsMissingRelays:i}}(e,t,n),c=function(e,t){const n=new Map;return t.forEach((t=>{const r=gc(e,t);r&&r.forEach((e=>{const t=n.get(e)||0;n.set(e,t+1)}))})),Array.from(n.entries()).sort(((e,t)=>t[1]-e[1])).map((e=>e[0]))}(e,t),d=(e,t)=>{const n=a.get(t)||[];n.push(e),a.set(t,n)};for(const[h,f]of l.entries()){let e=r;for(const t of o)f.has(t.url)&&(d(h,t.url),e--);for(const t of f)a.has(t)&&(d(h,t),e--);if(!(e<=0))for(const t of c){if(e<=0)break;f.has(t)&&(d(h,t),e--)}}for(const h of u)s.permanentAndConnectedRelays().forEach((e=>{const t=a.get(e.url)||[];t.push(h),a.set(e.url,t)}));return a}function mc(e){try{return bc(e)}catch{return}}function bc(e){let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...t},"string"!==typeof t.defaultProtocol||t.defaultProtocol.endsWith(":")||(t.defaultProtocol=`${t.defaultProtocol}:`);if(e=e.trim(),/^data:/i.test(e))return Sc(e,t);if(Ec(e))return e;const n=e.startsWith("//");!n&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const r=new URL(e);if(r.hostname=r.hostname.toLowerCase(),t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");t.forceHttp&&"https:"===r.protocol&&(r.protocol="http:");t.forceHttps&&"http:"===r.protocol&&(r.protocol="https:");t.stripAuthentication&&(r.username="",r.password="");t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,""));if(r.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0,n="";for(;;){const i=e.exec(r.pathname);if(!i)break;const s=i[0],o=i.index;n+=r.pathname.slice(t,o).replace(/\/{2,}/g,"/"),n+=s,t=o+s.length}n+=r.pathname.slice(t,r.pathname.length).replace(/\/{2,}/g,"/"),r.pathname=n}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]);if(Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=r.pathname.split("/");const n=e[e.length-1];vc(n,t.removeDirectoryIndex)&&(e=e.slice(0,-1),r.pathname=`${e.slice(1).join("/")}/`)}r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,"")));if(Array.isArray(t.removeQueryParameters))for(const s of[...r.searchParams.keys()])vc(s,t.removeQueryParameters)&&r.searchParams.delete(s);Array.isArray(t.keepQueryParameters)||!0!==t.removeQueryParameters||(r.search="");if(Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0)for(const s of[...r.searchParams.keys()])vc(s,t.keepQueryParameters)||r.searchParams.delete(s);if(t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));t.removeExplicitPort&&r.port&&(r.port="");const i=e;e=r.toString(),t.removeSingleSlash||"/"!==r.pathname||i.endsWith("/")||""!==r.hash||(e=e.replace(/\/$/,""));(t.removeTrailingSlash||"/"===r.pathname)&&""===r.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,""));n&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//"));t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,""));return e}(e,{stripAuthentication:!1,stripWWW:!1,stripHash:!0});return t.endsWith("/")||(t+="/"),t}function wc(e){const t=new Set;for(const n of e)try{t.add(bc(n))}catch{}return Array.from(t)}var vc=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e)),kc=new Set(["https:","http:","file:"]),Ec=e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!t.includes(".")&&!kc.has(t)}catch{return!1}},Sc=(e,t)=>{let{stripHash:n}=t;const r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);const i=r.groups?.type??"",s=r.groups?.data??"";let o=r.groups?.hash??"";const a=i.split(";");o=n?"":o;let l=!1;"base64"===a[a.length-1]&&(a.pop(),l=!0);const u=a.shift()?.toLowerCase()??"",c=[...a.map((e=>{let[t,n=""]=e.split("=").map((e=>e.trim()));return"charset"===t&&(n=n.toLowerCase(),"us-ascii"===n)?"":`${t}${n?`=${n}`:""}`})).filter(Boolean)];return l&&c.push("base64"),(c.length>0||u&&"text/plain"!==u)&&c.unshift(u),`data:${c.join(";")},${l?s.trim():s}${o?`#${o}`:""}`};var xc=class{ndkRelay;ws;_status;timeoutMs;connectedAt;_connectionStats={attempts:0,success:0,durations:[]};debug;netDebug;connectTimeout;reconnectTimeout;ndk;openSubs=(()=>new Map)();openCountRequests=(()=>new Map)();openEventPublishes=(()=>new Map)();serial=0;baseEoseTimeout=4400;constructor(e,t){this.ndkRelay=e,this._status=1;const n=Math.floor(1e3*Math.random());this.debug=this.ndkRelay.debug.extend(`connectivity${n}`),this.ndk=t}async connect(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(2!==this._status&&1!==this._status||this.reconnectTimeout)this.debug("Relay requested to be connected but was in state %s or it had a reconnect timeout",this._status);else{this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),e??=this.timeoutMs,!this.timeoutMs&&e&&(this.timeoutMs=e),this.timeoutMs&&(this.connectTimeout=setTimeout((()=>this.onConnectionError(t)),this.timeoutMs));try{this.updateConnectionStats.attempt(),1===this._status?this._status=4:this._status=2,this.ws=new WebSocket(this.ndkRelay.url),this.ws.onopen=this.onConnect.bind(this),this.ws.onclose=this.onDisconnect.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=this.onError.bind(this)}catch(n){throw this.debug(`Failed to connect to ${this.ndkRelay.url}`,n),this._status=1,t?this.handleReconnection():this.ndkRelay.emit("delayed-connect",1728e5),n}}}disconnect(){this._status=0;try{this.ws?.close()}catch(e){this.debug("Failed to disconnect",e),this._status=1}}onConnectionError(e){this.debug(`Error connecting to ${this.ndkRelay.url}`,this.timeoutMs),e&&!this.reconnectTimeout&&this.handleReconnection()}onConnect(){this.netDebug?.("connected",this.ndkRelay),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.updateConnectionStats.connected(),this._status=5,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready")}onDisconnect(){this.netDebug?.("disconnected",this.ndkRelay),this.updateConnectionStats.disconnected(),5===this._status&&this.handleReconnection(),this._status=1,this.ndkRelay.emit("disconnect")}onMessage(e){this.netDebug?.(e.data,this.ndkRelay,"recv");try{const t=JSON.parse(e.data),[n,r,...i]=t;switch(n){case"EVENT":{const e=this.openSubs.get(r),n=t[2];return e?void e.onevent(n):void this.debug(`Received event for unknown subscription ${r}`)}case"COUNT":{const e=t[2],n=this.openCountRequests.get(r);return void(n&&(n.resolve(e.count),this.openCountRequests.delete(r)))}case"EOSE":{const e=this.openSubs.get(r);if(!e)return;return void e.oneose(r)}case"OK":{const e=t[2],n=t[3],i=this.openEventPublishes.get(r),s=i?.pop();return i&&s?(e?s.resolve(n):s.reject(new Error(n)),void(0===i.length?this.openEventPublishes.delete(r):this.openEventPublishes.set(r,i))):void this.debug("Received OK for unknown event publish",r)}case"CLOSED":{const e=this.openSubs.get(r);if(!e)return;return void e.onclosed(t[2])}case"NOTICE":return void this.onNotice(t[1]);case"AUTH":return void this.onAuthRequested(t[1])}}catch(t){return void this.debug(`Error parsing message from ${this.ndkRelay.url}: ${t.message}`,t?.stack)}}async onAuthRequested(e){const t=this.ndkRelay.authPolicy??this.ndk?.relayAuthDefaultPolicy;if(this.debug("Relay requested authentication",{havePolicy:!!t}),7!==this._status)if(this._status=6,t){if(this._status>=5){let r;this._status=7;try{r=await t(this.ndkRelay,e)}catch(n){this.debug("Authentication policy threw an error",n),r=!1}if(this.debug("Authentication policy returned",!!r),r instanceof hd||!0===r){r instanceof hd&&await this.auth(r);const t=async()=>{if(this._status>=5&&this._status<8){const t=new hd(this.ndk);t.kind=22242,t.tags=[["relay",this.ndkRelay.url],["challenge",e]],await t.sign(),this.auth(t).then((()=>{this._status=8,this.ndkRelay.emit("authed"),this.debug("Authentication successful")})).catch((e=>{this._status=6,this.ndkRelay.emit("auth:failed",e),this.debug("Authentication failed",e)}))}else this.debug("Authentication failed, it changed status, status is %d",this._status)};!0===r&&(this.ndk?.signer?t().catch((e=>{console.error("Error authenticating",e)})):(this.debug("No signer available for authentication localhost"),this.ndk?.once("signer:ready",t))),this._status=5,this.ndkRelay.emit("authed")}}}else this.ndkRelay.emit("auth",e);else this.debug("Already authenticating, ignoring")}onError(e){this.debug(`WebSocket error on ${this.ndkRelay.url}:`,e)}get status(){return this._status}isAvailable(){return 5===this._status}isFlapping(){const e=this._connectionStats.durations;if(e.length%3!==0)return!1;const t=e.reduce(((e,t)=>e+t),0)/e.length,n=e.map((e=>(e-t)**2)).reduce(((e,t)=>e+t),0)/e.length;return Math.sqrt(n)<1e3}async onNotice(e){this.ndkRelay.emit("notice",e)}handleReconnection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.reconnectTimeout)return;if(this.isFlapping())return this.ndkRelay.emit("flapping",this._connectionStats),void(this._status=3);const t=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):5e3*(this._connectionStats.attempts+1);this.reconnectTimeout=setTimeout((()=>{this.reconnectTimeout=void 0,this._status=2,this.connect().catch((t=>{e<5?setTimeout((()=>{this.handleReconnection(e+1)}),1e3*(e+1)^4):this.debug("Reconnect failed")}))}),t),this.ndkRelay.emit("delayed-connect",t),this.debug("Reconnecting in",t),this._connectionStats.nextReconnectAt=Date.now()+t}async send(e){this._status>=5&&this.ws?.readyState===WebSocket.OPEN?(this.ws?.send(e),this.netDebug?.(e,this.ndkRelay,"send")):this.debug(`Not connected to ${this.ndkRelay.url} (%d), not sending message ${e}`,this._status)}async auth(e){const t=new Promise(((t,n)=>{const r=this.openEventPublishes.get(e.id)??[];r.push({resolve:t,reject:n}),this.openEventPublishes.set(e.id,r)}));return this.send(`["AUTH",${JSON.stringify(e.rawEvent())}]`),t}async publish(e){const t=new Promise(((t,n)=>{const r=this.openEventPublishes.get(e.id)??[];r.length>0&&console.warn(`Duplicate event publishing detected, you are publishing event ${e.id} twice`),r.push({resolve:t,reject:n}),this.openEventPublishes.set(e.id,r)}));return this.send(`["EVENT",${JSON.stringify(e)}]`),t}async count(e,t){this.serial++;const n=t?.id||`count:${this.serial}`,r=new Promise(((e,t)=>{this.openCountRequests.set(n,{resolve:e,reject:t})}));return this.send(`["COUNT","${n}",${JSON.stringify(e).substring(1)}`),r}close(e,t){this.send(`["CLOSE","${e}"]`);const n=this.openSubs.get(e);this.openSubs.delete(e),n&&n.onclose(t)}req(e){this.send(`["REQ","${e.subId}",${JSON.stringify(e.executeFilters).substring(1)}`),this.openSubs.set(e.subId,e)}updateConnectionStats={connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++,this._connectionStats.connectedAt=Date.now()}};get connectionStats(){return this._connectionStats}get url(){return this.ndkRelay.url}get connected(){return this._status>=5&&this.ws?.readyState===WebSocket.OPEN}},_c=class{ndkRelay;debug;constructor(e){this.ndkRelay=e,this.debug=e.debug.extend("publisher")}async publish(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;const r=()=>new Promise(((t,n)=>{try{this.publishEvent(e).then((n=>{this.ndkRelay.emit("published",e),e.emit("relay:published",this.ndkRelay),t(!0)})).catch(n)}catch(r){n(r)}})),i=new Promise(((e,r)=>{t=setTimeout((()=>{t=void 0,r(new Error(`Timeout: ${n}ms`))}),n)})),s=()=>{r().then((e=>o(e))).catch((e=>a(e)))};let o,a;const l=t=>{throw this.ndkRelay.debug("Publish failed",t,e.id),this.ndkRelay.emit("publish:failed",e,t),e.emit("relay:publish:failed",this.ndkRelay,t),t},u=()=>{t&&clearTimeout(t),this.ndkRelay.removeListener("connect",s)};return this.ndkRelay.status>=5?Promise.race([r(),i]).catch(l).finally(u):(this.ndkRelay.status<=1?(console.warn("Relay is disconnected, trying to connect to publish an event",this.ndkRelay.url),this.ndkRelay.connect()):console.warn("Relay not connected, waiting for connection to publish an event",this.ndkRelay.url),Promise.race([new Promise(((e,t)=>{o=e,a=t,this.ndkRelay.on("connect",s)})),i]).catch(l).finally(u))}async publishEvent(e){return this.ndkRelay.connectivity.publish(e.rawEvent())}};function Cc(e){const t=[],n={};return e.filter((e=>!!e.limit)).forEach((e=>t.push(e))),0===(e=e.filter((e=>!e.limit))).length?t:(e.forEach((e=>{Object.entries(e).forEach((e=>{let[t,r]=e;Array.isArray(r)?void 0===n[t]?n[t]=[...r]:n[t]=Array.from(new Set([...n[t],...r])):n[t]=r}))})),[...t,n])}var Ac=class{fingerprint;items=(()=>new Map)();topSubManager;debug;status=0;onClose;relay;eosed=!1;executionTimer;fireTime;delayType;executeFilters;id=(()=>Math.random().toString(36).substring(7))();constructor(e,t,n){this.relay=e,this.topSubManager=n,this.debug=e.debug.extend(`sub[${this.id}]`),this.fingerprint=t||Math.random().toString(36).substring(7)}_subId;get subId(){return this._subId||(this._subId=this.fingerprint.slice(0,15)),this._subId}subIdParts=(()=>new Set)();addSubIdPart(e){this.subIdParts.add(e)}addItem(e,t){if(this.debug("Adding item",{filters:t,internalId:e.internalId,status:this.status,fingerprint:this.fingerprint,id:this.subId,items:this.items,itemsSize:this.items.size}),!this.items.has(e.internalId))switch(e.on("close",this.removeItem.bind(this,e)),this.items.set(e.internalId,{subscription:e,filters:t}),3!==this.status&&e.subId&&(!this._subId||this._subId.length<48)&&(0!==this.status&&1!==this.status||this.addSubIdPart(e.subId)),this.status){case 0:case 1:this.evaluateExecutionPlan(e);break;case 3:break;case 4:throw this.debug("Subscription is closed, cannot add new items %o (%o)",e,t),new Error("Cannot add new items to a closed subscription")}}removeItem(e){if(this.items.delete(e.internalId),0===this.items.size){if(!this.eosed)return;this.close(),this.cleanup()}}close(){if(4===this.status)return;const e=this.status;if(this.status=4,3===e)try{this.relay.close(this.subId)}catch(t){this.debug("Error closing subscription",t,this)}else this.debug("Subscription wanted to close but it wasn't running, this is probably ok",{subId:this.subId,prevStatus:e,sub:this});this.cleanup()}cleanup(){this.executionTimer&&clearTimeout(this.executionTimer),this.relay.off("ready",this.executeOnRelayReady),this.relay.off("authed",this.reExecuteAfterAuth),this.onClose&&this.onClose(this)}evaluateExecutionPlan(e){if(!e.isGroupable())return this.status=1,void this.execute();if(e.filters.find((e=>!!e.limit))&&(this.executeFilters=this.compileFilters(),this.executeFilters.length>=10))return this.status=1,void this.execute();const t=e.groupableDelay,n=e.groupableDelayType;if(!t)throw new Error("Cannot group a subscription without a delay");if(0===this.status)this.schedule(t,n);else{const e=this.delayType,r=this.fireTime-Date.now();if("at-least"===e&&"at-least"===n)r<t&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(t,n));else if("at-least"===e&&"at-most"===n)r>t&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(t,n));else if("at-most"===e&&"at-most"===n)r>t&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(t,n));else{if("at-most"!==e||"at-least"!==n)throw new Error(`Unknown delay type combination ${e} ${n}`);r>t&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(t,n))}}}schedule(e,t){this.status=1;const n=Date.now();this.fireTime=n+e,this.delayType=t;const r=setTimeout(this.execute.bind(this),e);"at-least"===t&&(this.executionTimer=r)}executeOnRelayReady=()=>{if(2===this.status){if(0===this.items.size)return this.debug("No items to execute; this relay was probably too slow to respond and the caller gave up",{status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size,id:this.id,subId:this.subId}),void this.cleanup();this.debug("Executing on relay ready",{status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.status=1,this.execute()}};finalizeSubId(){this.subIdParts.size>0?this._subId=Array.from(this.subIdParts).join("-"):this._subId=this.fingerprint.slice(0,15),this._subId+=`-${Math.random().toString(36).substring(2,7)}`}reExecuteAfterAuth=(()=>{const e=this.subId;this.debug("Re-executing after auth",this.items.size),this.eosed?this.relay.close(this.subId):this.debug("We are abandoning an opened subscription, once it EOSE's, the handler will close it",{oldSubId:e}),this._subId=void 0,this.status=1,this.execute(),this.debug("Re-executed after auth %s \ud83d\udc49 %s",e,this.subId)}).bind(this);execute(){if(1===this.status){if(!this.relay.connected)return this.status=2,this.debug("Waiting for relay to be ready",{status:this.status,id:this.subId,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),void this.relay.once("ready",this.executeOnRelayReady);this.relay.status<8&&this.relay.once("authed",this.reExecuteAfterAuth),this.status=3,this.finalizeSubId(),this.executeFilters=this.compileFilters(),this.relay.req(this)}}onstart(){}onevent(e){this.topSubManager.dispatchEvent(e,this.relay)}oneose(e){if(this.eosed=!0,e!==this.subId)return this.debug("Received EOSE for an abandoned subscription",e,this.subId),void this.relay.close(e);0===this.items.size&&this.close();for(const{subscription:t}of this.items.values())t.eoseReceived(this.relay),t.closeOnEose&&(this.debug("Removing item because of EOSE",{filters:t.filters,internalId:t.internalId,status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.removeItem(t))}onclose(e){this.status=4}onclosed(e){if(e)for(const{subscription:t}of this.items.values())t.closedReceived(this.relay,e)}compileFilters(){const e=[],t=Array.from(this.items.values()).map((e=>e.filters));if(!t[0])return this.debug("\ud83d\udc40 No filters to merge",this.items),console.error("BUG: No filters to merge!",this.items),[];const n=t[0].length;for(let r=0;r<n;r++){const n=t.map((e=>e[r]));e.push(...Cc(n))}return e}},Rc=class{relay;subscriptions;generalSubManager;constructor(e,t){this.relay=e,this.subscriptions=new Map,this.generalSubManager=t}addSubscription(e,t){let n;if(e.isGroupable()){const r=function(e,t){const n=[];for(const i of e){const e=Object.entries(i||{}).map((e=>{let[t,n]=e;return["since","until"].includes(t)?`${t}:${n}`:t})).sort().join("-");n.push(e)}let r=t?"+":"";return r+=n.join("|"),r}(t,e.closeOnEose);if(r){n=(this.subscriptions.get(r)||[]).find((e=>e.status<3))}n??=this.createSubscription(e,t,r)}else n=this.createSubscription(e,t);n.addItem(e,t)}createSubscription(e,t,n){const r=new Ac(this.relay,n||null,this.generalSubManager);r.onClose=this.onRelaySubscriptionClose.bind(this);const i=this.subscriptions.get(r.fingerprint)??[];return this.subscriptions.set(r.fingerprint,[...i,r]),r}onRelaySubscriptionClose(e){let t=this.subscriptions.get(e.fingerprint)??[];t?1===t.length?this.subscriptions.delete(e.fingerprint):(t=t.filter((t=>t.id!==e.id)),this.subscriptions.set(e.fingerprint,t)):console.warn("Unexpectedly did not find a subscription with fingerprint",e.fingerprint)}};var Tc=class e extends ha.EventEmitter{url;scores;connectivity;subs;publisher;authPolicy;lowestValidationRatio;targetValidationRatio;validationRatioFn;validatedEventCount=0;nonValidatedEventCount=0;trusted=!1;complaining=!1;debug;static defaultValidationRatioUpdateFn=(e,t,n)=>{if(void 0===e.lowestValidationRatio||void 0===e.targetValidationRatio)return 1;let r=e.validationRatio;if(e.validationRatio>e.targetValidationRatio){const n=t/100;r=Math.max(e.lowestValidationRatio,e.validationRatio-n)}return r<e.validationRatio?r:e.validationRatio};constructor(t,n,r){super(),this.url=bc(t),this.scores=new Map,this.debug=fa(`ndk:relay:${t}`),this.connectivity=new xc(this,r),this.connectivity.netDebug=r?.netDebug,this.req=this.connectivity.req.bind(this.connectivity),this.close=this.connectivity.close.bind(this.connectivity),this.subs=new Rc(this,r.subManager),this.publisher=new _c(this),this.authPolicy=n,this.targetValidationRatio=r?.initialValidationRatio,this.lowestValidationRatio=r?.lowestValidationRatio,this.validationRatioFn=(r?.validationRatioFn??e.defaultValidationRatioUpdateFn).bind(this),this.updateValidationRatio(),r||console.trace("relay created without ndk")}updateValidationRatio(){if(this.validationRatioFn&&this.validatedEventCount>0){const e=this.validationRatioFn(this,this.validatedEventCount,this.nonValidatedEventCount);this.targetValidationRatio=e}setTimeout((()=>{this.updateValidationRatio()}),3e4)}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.connectivity.connect(e,t)}disconnect(){1!==this.status&&this.connectivity.disconnect()}subscribe(e,t){this.subs.addSubscription(e,t)}async publish(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2500;return this.publisher.publish(e,t)}referenceTags(){return[["r",this.url]]}addValidatedEvent(){this.validatedEventCount++}addNonValidatedEvent(){this.nonValidatedEventCount++}get validationRatio(){return 0===this.nonValidatedEventCount?1:this.validatedEventCount/(this.validatedEventCount+this.nonValidatedEventCount)}shouldValidateEvent(){return!this.trusted&&(void 0===this.targetValidationRatio||(this.targetValidationRatio>=1||Math.random()<this.targetValidationRatio))}get connected(){return this.connectivity.connected}req;close},Nc=class extends Error{errors;publishedToRelays;intendedRelaySet;constructor(e,t,n,r){super(e),this.errors=t,this.publishedToRelays=n,this.intendedRelaySet=r}get relayErrors(){const e=[];for(const[t,n]of this.errors)e.push(`${t.url}: ${n}`);return e.join("\n")}},Pc=class e{relays;debug;ndk;pool;constructor(e,t,n){this.relays=e,this.ndk=t,this.pool=n??t.pool,this.debug=t.debug.extend("relayset")}addRelay(e){this.relays.add(e)}get relayUrls(){return Array.from(this.relays).map((e=>e.url))}static fromRelayUrls(t,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;if(i=i??n.pool,!i)throw new Error("No pool provided");const s=new Set;for(const e of t){const o=i.relays.get(bc(e));if(o)o.status<5&&r&&o.connect(),s.add(o);else{const r=new Tc(bc(e),n?.relayAuthDefaultPolicy,n);i.useTemporaryRelay(r,void 0,`requested from fromRelayUrls ${t}`),s.add(r)}}return new e(new Set(s),n,i)}async publish(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=new Set,i=new Map,s=e.isEphemeral();e.publishStatus="pending";const o=e=>{r.add(e)};e.on("relay:published",o);try{const o=Array.from(this.relays).map((n=>new Promise((o=>{const a=t?setTimeout((()=>{r.has(n)||(i.set(n,new Error(`Publish timeout after ${t}ms`)),o(!1))}),t):null;n.publish(e,t).then((e=>{a&&clearTimeout(a),e?(r.add(n),o(!0)):o(!1)})).catch((e=>{a&&clearTimeout(a),s||i.set(n,e),o(!1)}))}))));if(await Promise.all(o),r.size<n){if(!s){const t=new Nc("Not enough relays received the event ("+r.size+" published, "+n+" required)",i,r,this);throw e.publishStatus="error",e.publishError=t,this.ndk?.emit("event:publish-failed",e,t,this.relayUrls),t}}else e.publishStatus="success",e.emit("published",{relaySet:this,publishedToRelays:r});return r}finally{e.off("relay:published",o)}}get size(){return this.relays.size}},Lc=fa("ndk:outbox:calculate");async function Ic(e,t,n){const r=new Set,i=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"write";if(e.outboxTracker)return e.outboxTracker.data.has(t)||await e.outboxTracker.trackUsers([t]),gc(e,t,n)}(e,t.pubkey);i&&i.forEach((t=>{const n=e.pool?.getRelay(t);n&&r.add(n)}));let s=t.tags.filter((e=>["a","e"].includes(e[0]))).map((e=>e[2])).filter((e=>e?.startsWith("wss://"))).filter((e=>{try{return new URL(e),!0}catch{return!1}})).map((e=>bc(e)));s=Array.from(new Set(s)).slice(0,5),s.forEach((t=>{const n=e.pool?.getRelay(t,!0,!0);n&&(Lc("Adding relay hint %s",t),r.add(n))}));const o=t.getMatchingTags("p").map((e=>e[1]));if(o.length<5){Array.from(yc(e,o,"read",{preferredRelays:new Set(i)}).keys()).forEach((t=>{const n=e.pool?.getRelay(t,!1,!0);n&&(Lc("Adding p-tagged relay %s",t),r.add(n))}))}else Lc("Too many p-tags to consider %d",o.length);if(e.pool?.permanentAndConnectedRelays().forEach((e=>r.add(e))),n&&r.size<n){const t=e.explicitRelayUrls?.filter((e=>!Array.from(r).some((t=>t.url===e)))).slice(0,n-r.size);t?.forEach((t=>{const n=e.pool?.getRelay(t,!1,!0);n&&(Lc("Adding explicit relay %s",t),r.add(n))}))}return new Pc(r,e)}function Uc(e,t,n){const r=new Map,i=new Set;if(t.forEach((e=>{e.authors&&e.authors.forEach((e=>i.add(e)))})),i.size>0){const n=function(e,t){return yc(e,t,"write",{count:arguments.length>2&&void 0!==arguments[2]?arguments[2]:2})}(e,Array.from(i));for(const e of n.keys())r.set(e,[]);for(const e of t)if(e.authors)for(const[t,i]of n.entries()){const n=e.authors.filter((e=>i.includes(e)));r.set(t,[...r.get(t),{...e,authors:n}])}else for(const t of n.keys())r.set(t,[...r.get(t),e])}else e.explicitRelayUrls&&e.explicitRelayUrls.forEach((e=>{r.set(e,t)}));return 0===r.size&&n.permanentAndConnectedRelays().slice(0,5).forEach((e=>{r.set(e.url,t)})),r}function Oc(e,t,n){return Uc(e,t,n)}function Fc(e,t){const n=new Map,r=(e,t)=>e.every(((e,n)=>e===t[n]));return e.concat(t).forEach((e=>{for(const[t,i]of n)if(r(i,e)||r(e,i))return void(e.length>=i.length&&n.set(t,e));n.set((e=>e.join(","))(e),e)})),Array.from(n.values())}var Mc=/(?<=\s|^)(#[^\s!@#$%^&*()=+./,[{\]};:'"?><]+)/g;async function Dc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=[],r=e=>{t.find((t=>["q",e[0]].includes(t[0])&&t[1]===e[1]))||t.push(e)};e=e.replace(/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,(e=>{try{const t=e.split(/(@|nostr:)/)[2],{type:i,data:s}=hs.decode(t);let o;switch(i){case"npub":o=["p",s];break;case"nprofile":o=["p",s.pubkey];break;case"note":n.push(new Promise((async e=>{r(["q",s,await zc(t)]),e()})));break;case"nevent":n.push(new Promise((async e=>{const{id:n,author:i}=s;let{relays:o}=s;o&&0!==o.length||(o=[await zc(t)]),r(["q",n,o[0]]),i&&r(["p",i]),e()})));break;case"naddr":n.push(new Promise((async e=>{const n=[s.kind,s.pubkey,s.identifier].join(":");let i=s.relays??[];0===i.length&&(i=[await zc(t)]),r(["q",n,i[0]]),r(["p",s.pubkey]),e()})));break;default:return e}return o&&r(o),`nostr:${t}`}catch(t){return e}})),await Promise.all(n);const i=function(e){const t=e.match(Mc),n=new Set,r=new Set;if(t)for(const i of t)n.has(i.slice(1))||(r.add(i.slice(1)),n.add(i.slice(1)));return Array.from(r)}(e).map((e=>["t",e]));return t=Fc(t,i),{content:e,tags:t}}async function zc(e){return""}async function Bc(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nip44";if(!this.ndk)throw new Error("No NDK instance found!");let i=t;if(i||(this.ndk.assertSigner(),i=this.ndk.signer),!i)throw new Error("no NDK signer");const s=e||(()=>{const e=this.getMatchingTags("p");if(1!==e.length)throw new Error("No recipient could be determined and no explicit recipient was provided");return this.ndk.getUser({pubkey:e[0][1]})})();if("nip44"===r&&await Vc(i,"nip44")&&(n=await i.encrypt(s,this.content,"nip44")),n&&"nip04"!==r||!await Vc(i,"nip04")||(n=await i.encrypt(s,this.content,"nip04")),!n)throw new Error("Failed to encrypt event.");this.content=n}async function $c(e,t,n){if(this.ndk?.cacheAdapter?.getDecryptedEvent){let e=null;if("function"===typeof this.ndk.cacheAdapter.getDecryptedEvent&&(e=this.ndk.cacheAdapter.getDecryptedEvent(this.id)),e)return void(this.content=e.content)}let r;if(!this.ndk)throw new Error("No NDK instance found!");let i=t;if(i||(this.ndk.assertSigner(),i=this.ndk.signer),!i)throw new Error("no NDK signer");const s=e||this.author;if(!s)throw new Error("No sender provided and no author available");const o=n||(this.content.match(/\\?iv=/)?"nip04":"nip44");if(("nip04"===o||4===this.kind)&&await Vc(i,"nip04")&&this.content.search("\\?iv=")&&(r=await i.decrypt(s,this.content,"nip04")),!r&&"nip44"===o&&await Vc(i,"nip44")&&(r=await i.decrypt(s,this.content,"nip44")),!r)throw new Error("Failed to decrypt event.");this.content=r,this.ndk?.cacheAdapter?.addDecryptedEvent&&this.ndk.cacheAdapter.addDecryptedEvent(this)}async function Vc(e,t){return!!e.encryptionEnabled&&(!t||Boolean(await e.encryptionEnabled(t)))}function jc(e,t){t??=e.tagType();const n=e.tags.find(Kc);if(!n){if(function(e){for(const t of e.tags)if("e"===t[0]&&(t[3]??"").length>0)return!0;return!1}(e))return;const n=e.getMatchingTags(t);if(n.length<3)return n[0]}return n}var Hc=new Set(["A","E","I"]),qc=new Set(["a","e","i"]);function Wc(e,t){if(1111===e.kind){let t;for(const n of e.tags)if(Hc.has(n[0]))t=n;else if(qc.has(n[0])){t=n;break}return t}t??=e.tagType();let n,r=!1;for(const i of e.tags)if(i[0]===t){if((i[3]??"").length>0&&(r=!0),r&&"reply"===i[3])return i;r&&"root"===i[3]&&(n=i),r||(n=i)}return n}function Kc(e){return"E"===e[0]||"root"===e[3]}async function Gc(e,t){if(!this.ndk)throw new Error("NDK instance not found");const n=this.getMatchingTags(e,t);if(0===n.length)return;const[r,i,s]=n[0];let o=""!==s?this.ndk.pool.getRelay(s):void 0;return await this.ndk.fetchEvent(i,{},o)}async function Qc(e){if(!this.ndk)throw new Error("NDK instance not found");const t=jc(this);if(t)return this.ndk.fetchEventFromTag(t,this,e)}async function Zc(e){if(!this.ndk)throw new Error("NDK instance not found");const t=Wc(this);if(t)return this.ndk.fetchEventFromTag(t,this,e)}function Yc(){if(void 0===this.kind)throw new Error("Kind not set");return[0,3].includes(this.kind)||this.kind>=1e4&&this.kind<2e4||this.kind>=3e4&&this.kind<4e4}function Jc(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function Xc(){if(void 0===this.kind)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}var ed;function td(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=[];return this.onRelays.length>0?t=this.onRelays.map((e=>e.url)):this.relay&&(t=[this.relay.url]),t.length>e&&(t=t.slice(0,e)),this.isParamReplaceable()?hs.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:t}):t.length>0?hs.neventEncode({id:this.tagId(),relays:t,author:this.pubkey}):hs.noteEncode(this.tagId())}async function nd(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!t&&e){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t=this.ndk.signer}const n=new hd(this.ndk,{kind:rd(this)});return this.isProtected||(n.content=JSON.stringify(this.rawEvent())),n.tag(this),1!==this.kind&&n.tags.push(["k",`${this.kind}`]),t&&await n.sign(t),e&&await n.publish(),n}function rd(e){return 1===e.kind?6:16}function id(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[0,this.pubkey,this.created_at,this.kind,this.tags,this.content];return e&&n.push(this.sig),t&&n.push(this.id),JSON.stringify(n)}var sd={};var od=/^[a-f0-9]{64}$/;function ad(){if("number"!==typeof this.kind)return!1;if("string"!==typeof this.content)return!1;if("number"!==typeof this.created_at)return!1;if("string"!==typeof this.pubkey)return!1;if(!this.pubkey.match(od))return!1;if(!Array.isArray(this.tags))return!1;for(let e=0;e<this.tags.length;e++){const t=this.tags[e];if(!Array.isArray(t))return!1;for(let e=0;e<t.length;e++)if("object"===typeof t[e])return!1}return!0}var ld=new Pu.LRUCache({maxSize:1e3,entryExpirationTimeInMS:6e4});function ud(e){if("boolean"===typeof this.signatureVerified)return this.signatureVerified;const t=ld.get(this.id);if(null!==t)return this.signatureVerified=!!t,this.signatureVerified;try{if(!this.ndk?.asyncSigVerification){const e=Ba((new TextEncoder).encode(this.serialize())),t=Nu.verify(this.sig,e,this.pubkey);return t?ld.set(this.id,this.sig):ld.set(this.id,!1),this.signatureVerified=t,t}(async function(e,t,n){const r=e.ndk,i=Date.now();let s;return r.signatureVerificationFunction?(console.log("[NDK-CORE] Using custom signature verification function async"),s=await r.signatureVerificationFunction(e),console.log("Custom signature verification result",e.id,{result:s})):(console.log("Using worker-based signature verification async"),s=await new Promise((t=>{const r=e.serialize();let i=!1;sd[e.id]||(sd[e.id]={event:e,resolves:[],relay:n},i=!0),sd[e.id].resolves.push(t),i&&ed?.postMessage({serialized:r,id:e.id,sig:e.sig,pubkey:e.pubkey})}))),r.signatureVerificationTimeMs+=Date.now()-i,s})(this,0,this.relay).then((t=>{e&&(this.signatureVerified=t,t&&ld.set(this.id,this.sig)),t||(this.relay?this.ndk?.reportInvalidSignature(this,this.relay):this.ndk?.reportInvalidSignature(this),ld.set(this.id,!1))})).catch((e=>{console.error("signature verification error",this.id,e)}))}catch(n){return this.signatureVerified=!1,!1}}function cd(){return e=this.serialize(),Ea(Ba((new TextEncoder).encode(e)));var e}var dd=new Set([0,4,1059,13,3,9734,5]),hd=class e extends ha.EventEmitter{ndk;created_at;content="";tags=[];kind;id="";sig;pubkey="";signatureVerified;_author=void 0;relay;get onRelays(){let e=[];return this.ndk?e=this.ndk.subManager.seenEvents.get(this.id)||[]:this.relay&&e.push(this.relay),e}publishStatus="success";publishError;constructor(t,n){super(),this.ndk=t,this.created_at=n?.created_at,this.content=n?.content||"",this.tags=n?.tags||[],this.id=n?.id||"",this.sig=n?.sig,this.pubkey=n?.pubkey||"",this.kind=n?.kind,n instanceof e&&(this.relay&&(this.relay=n.relay,this.ndk?.subManager.seenEvent(n.id,this.relay)),this.publishStatus=n.publishStatus,this.publishError=n.publishError)}static deserialize(t,n){return new e(t,function(e){const t=JSON.parse(e),n={pubkey:t[1],created_at:t[2],kind:t[3],tags:t[4],content:t[5]};if(t.length>=7){const e=t[6],r=t[7];e&&128===e.length?(n.sig=e,r&&64===r.length&&(n.id=r)):e&&64===e.length&&(n.id=e,r&&128===r.length&&(n.sig=r))}return n}(n))}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.pubkey,this._author=e,this._author.ndk??=this.ndk}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const e=this.ndk.getUser({pubkey:this.pubkey});return this._author=e,e}tagExternal(e,t,n){const r=["i"],i=["k"];switch(t){case"url":{const t=new URL(e);t.hash="",r.push(t.toString()),i.push(`${t.protocol}//${t.host}`);break}case"hashtag":r.push(`#${e.toLowerCase()}`),i.push("#");break;case"geohash":r.push(`geo:${e.toLowerCase()}`),i.push("geo");break;case"isbn":r.push(`isbn:${e.replace(/-/g,"")}`),i.push("isbn");break;case"podcast:guid":r.push(`podcast:guid:${e}`),i.push("podcast:guid");break;case"podcast:item:guid":r.push(`podcast:item:guid:${e}`),i.push("podcast:item:guid");break;case"podcast:publisher:guid":r.push(`podcast:publisher:guid:${e}`),i.push("podcast:publisher:guid");break;case"isan":r.push(`isan:${e.split("-").slice(0,4).join("-")}`),i.push("isan");break;case"doi":r.push(`doi:${e.toLowerCase()}`),i.push("doi");break;default:throw new Error(`Unsupported NIP-73 entity type: ${t}`)}n&&r.push(n),this.tags.push(r),this.tags.push(i)}tag(t,n,r,i){let s=[];if(void 0!==t.fetchProfile){i??="p";const e=[i,t.pubkey];n&&e.push("",n),s.push(e)}else if(t instanceof e){const e=t;r??=e?.pubkey===this.pubkey,s=e.referenceTags(n,r,i);for(const t of e.getMatchingTags("p"))t[1]!==this.pubkey&&(this.tags.find((e=>"p"===e[0]&&e[1]===t[1]))||this.tags.push(["p",t[1]]))}else{if(!Array.isArray(t))throw new Error("Invalid argument",t);s=[t]}this.tags=Fc(this.tags,s)}async toNostrEvent(e){if(!e&&""===this.pubkey){const e=await(this.ndk?.signer?.user());this.pubkey=e?.pubkey||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const{content:t,tags:n}=await this.generateTags();this.content=t||"",this.tags=n;try{this.id=this.getEventHash()}catch(r){}return this.rawEvent()}serialize=(()=>id.bind(this))();getEventHash=(()=>cd.bind(this))();validate=(()=>ad.bind(this))();verifySignature=(()=>ud.bind(this))();isReplaceable=(()=>Yc.bind(this))();isEphemeral=(()=>Jc.bind(this))();isDvm=()=>this.kind&&this.kind>=5e3&&this.kind<=7e3;isParamReplaceable=(()=>Xc.bind(this))();encode=(()=>td.bind(this))();encrypt=(()=>Bc.bind(this))();decrypt=(()=>$c.bind(this))();getMatchingTags(e,t){const n=this.tags.filter((t=>t[0]===e));return void 0===t?n:n.filter((e=>e[3]===t))}hasTag(e,t){return this.tags.some((n=>n[0]===e&&(!t||n[3]===t)))}tagValue(e,t){const n=this.getMatchingTags(e,t);if(0!==n.length)return n[0][1]}get alt(){return this.tagValue("alt")}set alt(e){this.removeTag("alt"),e&&this.tags.push(["alt",e])}get dTag(){return this.tagValue("d")}set dTag(e){this.removeTag("d"),e&&this.tags.push(["d",e])}removeTag(e,t){const n=Array.isArray(e)?e:[e];this.tags=this.tags.filter((e=>{const r=n.includes(e[0]),i=!t||e[3]===t;return!(r&&i)}))}replaceTag(e){this.removeTag(e[0]),this.tags.push(e)}async sign(e){e?this.author=await e.user():(this.ndk?.assertSigner(),e=this.ndk?.signer);const t=await this.toNostrEvent();return this.sig=await e.sign(t),this.sig}async publishReplaceable(e,t,n){return this.id="",this.created_at=Math.floor(Date.now()/1e3),this.sig="",this.publish(e,t,n)}async publish(e,t,n){if(n||(n=1),this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");if(e&&0!==e.size||(e=this.ndk.devWriteRelaySet||await Ic(this.ndk,this,n)),5===this.kind&&this.ndk.cacheAdapter?.deleteEventIds){const e=this.getMatchingTags("e").map((e=>e[1]));this.ndk.cacheAdapter.deleteEventIds(e)}const r=this.rawEvent();if(this.ndk.cacheAdapter?.addUnpublishedEvent&&(i=this,!fd.has(i.kind)))try{this.ndk.cacheAdapter.addUnpublishedEvent(this,e.relayUrls)}catch(o){console.error("Error adding unpublished event to cache",o)}var i;5===this.kind&&this.ndk.cacheAdapter?.deleteEventIds&&this.ndk.cacheAdapter.deleteEventIds(this.getMatchingTags("e").map((e=>e[1]))),this.ndk.subManager.dispatchEvent(r,void 0,!0);const s=await e.publish(this,t,n);return s.forEach((e=>this.ndk?.subManager.seenEvent(this.id,e))),s}async generateTags(){let e=[];const t=await Dc(this.content,this.tags),n=t.content;if(e=t.tags,this.kind&&this.isParamReplaceable()){if(!this.getMatchingTags("d")[0]){const t=this.tagValue("title");let n=[...Array(t?6:16)].map((()=>Math.random().toString(36)[2])).join("");t&&t.length>0&&(n=`${t.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")}-${n}`),e.push(["d",n])}}if(this.shouldAddClientTag){const t=["client",this.ndk?.clientName??""];this.ndk?.clientNip89&&t.push(this.ndk?.clientNip89),e.push(t)}else this.shouldStripClientTag&&(e=e.filter((e=>"client"!==e[0])));return{content:n||"",tags:e}}get shouldAddClientTag(){return!(!this.ndk?.clientName&&!this.ndk?.clientNip89)&&(!dd.has(this.kind)&&(!this.isEphemeral()&&(!(this.isReplaceable()&&!this.isParamReplaceable())&&(!this.isDvm()&&!this.hasTag("client")))))}get shouldStripClientTag(){return dd.has(this.kind)}muted(){const e=this.ndk?.mutedIds.get(this.pubkey);if(e&&"p"===e)return"author";const t=this.tagReference(),n=this.ndk?.mutedIds.get(t[1]);return n&&n===t[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return 0===this.kind||3===this.kind||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(this.isParamReplaceable()){const e=this.dTag??"";return`${this.kind}:${this.pubkey}:${e}`}if(this.isReplaceable())return`${this.kind}:${this.pubkey}:`;throw new Error("Event is not a replaceable event")}tagType(){return this.isParamReplaceable()?"a":"e"}tagReference(e){let t;return t=this.isParamReplaceable()?["a",this.tagAddress()]:["e",this.tagId()],this.relay?t.push(this.relay.url):t.push(""),t.push(e??""),this.isParamReplaceable()||t.push(this.pubkey),t}referenceTags(e,t,n){let r=[];return r=this.isParamReplaceable()?[[n??"a",this.tagAddress()],[n??"e",this.id]]:[[n??"e",this.id]],r=r.map((t=>("e"===t[0]||e?t.push(this.relay?.url??""):this.relay?.url&&t.push(this.relay?.url),t))),r.forEach((t=>{"e"===t[0]?(t.push(e??""),t.push(this.pubkey)):e&&t.push(e)})),r=[...r,...this.getMatchingTags("h")],t||r.push(...this.author.referenceTags()),r}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}nip22Filter(){return this.isParamReplaceable()?{"#A":[this.tagId()]}:{"#E":[this.tagId()]}}async delete(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new e(this.ndk,{kind:5,content:t||""});return r.tag(this,void 0,!0),r.tags.push(["k",this.kind?.toString()]),n&&(this.emit("deleted"),await r.publish()),r}set isProtected(e){this.removeTag("-"),e&&this.tags.push(["-"])}get isProtected(){return this.hasTag("-")}fetchTaggedEvent=(()=>Gc.bind(this))();fetchRootEvent=(()=>Qc.bind(this))();fetchReplyEvent=(()=>Zc.bind(this))();repost=(()=>nd.bind(this))();async react(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const r=new e(this.ndk,{kind:7,content:t});return r.tag(this),n&&await r.publish(),r}get isValid(){return this.validate()}get inspect(){return JSON.stringify(this.rawEvent(),null,4)}dump(){console.debug(JSON.stringify(this.rawEvent(),null,4)),console.debug("Event on relays:",this.onRelays.map((e=>e.url)).join(", "))}reply(){const t=new e(this.ndk);if(1===this.kind){t.kind=1;this.hasTag("e")?t.tags=[...t.tags,...this.getMatchingTags("e"),...this.getMatchingTags("p"),...this.getMatchingTags("a"),...this.referenceTags("reply")]:t.tag(this,"root")}else{t.kind=1111;const e=["A","E","I","P"],n=this.tags.filter((t=>e.includes(t[0])));if(n.length>0){const e=this.tagValue("K");t.tags.push(...n),e&&t.tags.push(["K",e]);const[r,i,s,...o]=this.tagReference(),a=[r,i,...o];t.tags.push(a)}else{const[e,n,r,i]=this.tagReference(),s=[e,n,i??""];"e"===e&&s.push(this.pubkey),t.tags.push(s);const o=[...s];o[0]=o[0].toUpperCase(),t.tags.push(o),t.tags.push(["K",this.kind?.toString()]),t.tags.push(["P",this.pubkey])}t.tags.push(["k",this.kind?.toString()]),t.tags.push(...this.getMatchingTags("p")),t.tags.push(["p",this.pubkey])}return t}},fd=new Set([24133,13194,23194,23195]);var pd=class extends ha.EventEmitter{_relays=(()=>new Map)();status="idle";autoConnectRelays=(()=>new Set)();poolBlacklistRelayUrls=(()=>new Set)();debug;temporaryRelayTimers=(()=>new Map)();flappingRelays=(()=>new Set)();backoffTimes=(()=>new Map)();ndk;get blacklistRelayUrls(){const e=new Set(this.ndk.blacklistRelayUrls);return this.poolBlacklistRelayUrls.forEach((t=>e.add(t))),e}constructor(e,t,n){let{debug:r,name:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.debug=r??n.debug.extend("pool"),i&&(this._name=i),this.ndk=n,this.relayUrls=e,this.poolBlacklistRelayUrls=new Set(t),this.ndk.pools.push(this)}get relays(){return this._relays}set relayUrls(e){this._relays.clear();for(const t of e){const e=new Tc(t,void 0,this.ndk);e.connectivity.netDebug=this.ndk.netDebug,this.addRelay(e)}}_name="unnamed";get name(){return this._name}set name(e){this._name=e,this.debug=this.debug.extend(e)}useTemporaryRelay(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,n=arguments.length>2?arguments[2]:void 0;const r=this.relays.has(e.url);r||(this.addRelay(e),this.debug("Adding temporary relay %s for filters %o",e.url,n));const i=this.temporaryRelayTimers.get(e.url);if(i&&clearTimeout(i),!r||i){const n=setTimeout((()=>{this.ndk.explicitRelayUrls?.includes(e.url)||this.removeRelay(e.url)}),t);this.temporaryRelayTimers.set(e.url,n)}}addRelay(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.relays.has(e.url),r=this.blacklistRelayUrls?.has(e.url),i=e.url.includes("/npub1");let s=!0;const o=e.url;if(n)return;if(r)return void this.debug(`Refusing to add relay ${o}: blacklisted`);if(i)return void this.debug(`Refusing to add relay ${o}: is a filter relay`);if(this.ndk.cacheAdapter?.getRelayStatus){const n=this.ndk.cacheAdapter.getRelayStatus(o);if(n?.dontConnectBefore){if(n.dontConnectBefore>Date.now()){const r=n.dontConnectBefore-Date.now();return this.debug(`Refusing to add relay ${o}: delayed connect for ${r}ms`),void setTimeout((()=>{this.addRelay(e,t)}),r)}s=!1}}const a=t=>this.emit("notice",e,t),l=()=>this.handleRelayConnect(o),u=()=>this.handleRelayReady(e),c=()=>this.emit("relay:disconnect",e),d=()=>this.handleFlapping(e),h=t=>this.emit("relay:auth",e,t),f=()=>this.emit("relay:authed",e);e.off("notice",a),e.off("connect",l),e.off("ready",u),e.off("disconnect",c),e.off("flapping",d),e.off("auth",h),e.off("authed",f),e.on("notice",a),e.on("connect",l),e.on("ready",u),e.on("disconnect",c),e.on("flapping",d),e.on("auth",h),e.on("authed",f),e.on("delayed-connect",(t=>{this.ndk.cacheAdapter?.updateRelayStatus&&this.ndk.cacheAdapter.updateRelayStatus(e.url,{dontConnectBefore:Date.now()+t})})),this._relays.set(o,e),t&&this.autoConnectRelays.add(o),t&&"active"===this.status&&(this.emit("relay:connecting",e),e.connect(void 0,s).catch((e=>{this.debug(`Failed to connect to relay ${o}`,e)})))}removeRelay(e){const t=this.relays.get(e);if(t)return t.disconnect(),this.relays.delete(e),this.autoConnectRelays.delete(e),this.emit("relay:disconnect",t),!0;const n=this.temporaryRelayTimers.get(e);return n&&(clearTimeout(n),this.temporaryRelayTimers.delete(e)),!1}isRelayConnected(e){const t=bc(e),n=this.relays.get(t);return!!n&&5===n.status}getRelay(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=this.relays.get(bc(e));return i||(i=new Tc(e,void 0,this.ndk),i.connectivity.netDebug=this.ndk.netDebug,n?this.useTemporaryRelay(i,3e4,r):this.addRelay(i,t)),i}handleRelayConnect(e){const t=this.relays.get(e);t?(this.emit("relay:connect",t),this.stats().connected===this.relays.size&&this.emit("connect")):console.error("NDK BUG: relay not found in pool",{relayUrl:e})}handleRelayReady(e){this.emit("relay:ready",e)}async connect(e){this.status="active",this.debug(`Connecting to ${this.relays.size} relays${e?`, timeout ${e}ms`:""}...`);const t=Array.from(this.autoConnectRelays.keys()).map((e=>this.relays.get(e))).filter((e=>!!e));for(const s of t)5!==s.status&&4!==s.status&&(this.emit("relay:connecting",s),s.connect().catch((e=>{this.debug(`Failed to connect to relay ${s.url}: ${e??"No reason specified"}`)})));const n=()=>t.every((e=>5===e.status)),r=new Promise((e=>{if(n())return void e();const r=[];for(const i of t){const s=()=>{if(n()){for(let e=0;e<t.length;e++)t[e].off("connect",r[e]);e()}};r.push(s),i.on("connect",s)}})),i=new Promise("number"===typeof e?t=>setTimeout(t,e):()=>{});await Promise.race([r,i])}checkOnFlappingRelays(){if(this.flappingRelays.size/this.relays.size>=.8)for(const e of this.flappingRelays)this.backoffTimes.set(e,0)}handleFlapping(e){this.debug(`Relay ${e.url} is flapping`);let t=this.backoffTimes.get(e.url)||5e3;t*=2,this.backoffTimes.set(e.url,t),this.debug(`Backoff time for ${e.url} is ${t}ms`),setTimeout((()=>{this.debug(`Attempting to reconnect to ${e.url}`),this.emit("relay:connecting",e),e.connect(),this.checkOnFlappingRelays()}),t),e.disconnect(),this.emit("flapping",e)}size(){return this.relays.size}stats(){const e={total:0,connected:0,disconnected:0,connecting:0};for(const t of this.relays.values())e.total++,5===t.status?e.connected++:1===t.status?e.disconnected++:4===t.status&&e.connecting++;return e}connectedRelays(){return Array.from(this.relays.values()).filter((e=>e.status>=5))}permanentAndConnectedRelays(){return Array.from(this.relays.values()).filter((e=>e.status>=5&&!this.temporaryRelayTimers.has(e.url)))}urls(){return Array.from(this.relays.keys())}},gd=class e extends hd{static kind=10019;static kinds=[10019];_p2pk;constructor(e,t){super(e,t),this.kind??=10019}static from(t){return new e(t.ndk,t)}set relays(e){this.tags=this.tags.filter((e=>"relay"!==e[0]));for(const t of e)this.tags.push(["relay",t])}get relays(){const e=[];for(const t of this.tags)"relay"===t[0]&&e.push(t[1]);return e}set mints(e){this.tags=this.tags.filter((e=>"mint"!==e[0]));for(const t of e)this.tags.push(["mint",t])}get mints(){const e=[];for(const t of this.tags)"mint"===t[0]&&e.push(t[1]);return Array.from(new Set(e))}get p2pk(){return this._p2pk||(this._p2pk=this.tagValue("pubkey")??this.pubkey),this._p2pk}set p2pk(e){this._p2pk=e,this.removeTag("pubkey"),e&&this.tags.push(["pubkey",e])}get relaySet(){return Pc.fromRelayUrls(this.relays,this.ndk)}},yd=class e extends hd{static kind=30023;static kinds=[30023];constructor(e,t){super(e,t),this.kind??=30023}static from(t){return new e(t.ndk,t)}get title(){return this.tagValue("title")}set title(e){this.removeTag("title"),e&&this.tags.push(["title",e])}get image(){return this.tagValue("image")}set image(e){this.removeTag("image"),e&&this.tags.push(["image",e])}get summary(){return this.tagValue("summary")}set summary(e){this.removeTag("summary"),e&&this.tags.push(["summary",e])}get published_at(){const e=this.tagValue("published_at");if(e){let t=Number.parseInt(e);return t>1e12&&(t=Math.floor(t/1e3)),t}}set published_at(e){this.removeTag("published_at"),void 0!==e&&this.tags.push(["published_at",e.toString()])}async generateTags(){return super.generateTags(),this.published_at||(this.published_at=this.created_at),super.generateTags()}get url(){return this.tagValue("url")}set url(e){e?this.tags.push(["url",e]):this.removeTag("url")}};var md=class e extends hd{_proofs=[];_mint;static kind=7375;static kinds=[7375];_deletes=[];original;constructor(e,t){super(e,t),this.kind??=7375}static async from(t){const n=new e(t.ndk,t);n.original=t;try{await n.decrypt()}catch{n.content=n.original.content}try{const e=JSON.parse(n.content);if(n.proofs=e.proofs,n.mint=e.mint??n.tagValue("mint"),n.deletedTokens=e.del??[],!Array.isArray(n.proofs))return}catch(r){return}return n}get proofs(){return this._proofs}set proofs(e){const t=new Set;this._proofs=e.filter((e=>t.has(e.C)?(console.warn("Passed in proofs had duplicates, ignoring",e.C),!1):e.amount<0?(console.warn("Invalid proof with negative amount",e),!1):(t.add(e.C),!0))).map(this.cleanProof)}cleanProof(e){return{id:e.id,amount:e.amount,C:e.C,secret:e.secret}}async toNostrEvent(e){if(!this.ndk)throw new Error("no ndk");if(!this.ndk.signer)throw new Error("no signer");const t={proofs:this.proofs.map(this.cleanProof),mint:this.mint,del:this.deletedTokens??[]};this.content=JSON.stringify(t);const n=await this.ndk.signer.user();return await this.encrypt(n,void 0,"nip44"),super.toNostrEvent(e)}set mint(e){this._mint=e}get mint(){return this._mint}get deletedTokens(){return this._deletes}set deletedTokens(e){this._deletes=e}get amount(){return this.proofs.reduce(((e,t)=>{if(t.amount<0)throw new Error("proof amount is negative");return e+t.amount}),0)}async publish(e,t,n){return this.original?this.original.publish(e,t,n):super.publish(e,t,n)}},bd=class e extends hd{_article;static kind=9802;static kinds=[9802];constructor(e,t){super(e,t),this.kind??=9802}static from(t){return new e(t.ndk,t)}get url(){return this.tagValue("r")}set context(e){void 0===e?this.tags=this.tags.filter((e=>{let[t,n]=e;return"context"!==t})):(this.tags=this.tags.filter((e=>{let[t,n]=e;return"context"!==t})),this.tags.push(["context",e]))}get context(){return this.tags.find((e=>{let[t,n]=e;return"context"===t}))?.[1]??void 0}get article(){return this._article}set article(e){this._article=e,"string"===typeof e?this.tags.push(["r",e]):this.tag(e)}getArticleTag(){return this.getMatchingTags("a")[0]||this.getMatchingTags("e")[0]||this.getMatchingTags("r")[0]}async getArticle(){if(void 0!==this._article)return this._article;let e;const t=this.getArticleTag();if(t){switch(t[0]){case"a":{const[n,r,i]=t[1].split(":");e=hs.naddrEncode({kind:Number.parseInt(n),pubkey:r,identifier:i});break}case"e":e=hs.noteEncode(t[1]);break;case"r":this._article=t[1]}if(e){let t=await(this.ndk?.fetchEvent(e));t&&(30023===t.kind&&(t=yd.from(t)),this._article=t)}return this._article}}};function wd(e){const t={};if(2===e.length){const n=e[1].split(" ");for(let e=0;e<n.length;e+=2){const r=n[e],i=n[e+1];"fallback"===r?(t.fallback||(t.fallback=[]),t.fallback.push(i)):t[r]=i}return t}const n=e.slice(1);for(const r of n){const e=r.split(" "),n=e[0],i=e.slice(1).join(" ");"fallback"===n?(t.fallback||(t.fallback=[]),t.fallback.push(i)):t[n]=i}return t}function vd(e){const t=["imeta"];for(const[n,r]of Object.entries(e))if(Array.isArray(r))for(const e of r)t.push(`${n} ${e}`);else r&&t.push(`${n} ${r}`);return t}var kd=class e extends hd{static kind=20;static kinds=[20];_imetas;constructor(e,t){super(e,t),this.kind??=20}static from(t){return new e(t.ndk,t.rawEvent())}get isValid(){return this.imetas.length>0}get imetas(){return this._imetas||(this._imetas=this.tags.filter((e=>"imeta"===e[0])).map(wd).filter((e=>!!e.url))),this._imetas}set imetas(e){this._imetas=e,this.tags=this.tags.filter((e=>"imeta"!==e[0])),this.tags.push(...e.map(vd))}},Ed=class e extends hd{_encryptedTags;static kinds=[10063,30001,10004,10050,10030,10015,10001,10002,10007,10006,10003];encryptedTagsLength;constructor(e,t){super(e,t),this.kind??=30001}static from(t){return new e(t.ndk,t)}get title(){const e=this.tagValue("title")||this.tagValue("name");return e||(3===this.kind?"Contacts":1e4===this.kind?"Mute":10001===this.kind?"Pinned Notes":10002===this.kind?"Relay Metadata":10003===this.kind?"Bookmarks":10004===this.kind?"Communities":10005===this.kind?"Public Chats":10006===this.kind?"Blocked Relays":10007===this.kind?"Search Relays":10050===this.kind?"Direct Message Receive Relays":10015===this.kind?"Interests":10030===this.kind?"Emojis":this.tagValue("d"))}set title(e){this.removeTag(["title","name"]),e&&this.tags.push(["title",e])}get name(){return this.title}set name(e){this.title=e}get description(){return this.tagValue("description")}set description(e){this.removeTag("description"),e&&this.tags.push(["description",e])}get image(){return this.tagValue("image")}set image(e){this.removeTag("image"),e&&this.tags.push(["image",e])}isEncryptedTagsCacheValid(){return!(!this._encryptedTags||this.encryptedTagsLength!==this.content.length)}async encryptedTags(){if((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.isEncryptedTagsCacheValid())return this._encryptedTags;if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const e=await this.ndk.signer.user();try{if(this.content.length>0)try{const t=await this.ndk.signer.decrypt(e,this.content),n=JSON.parse(t);return n?.[0]?(this.encryptedTagsLength=this.content.length,this._encryptedTags=n):(this.encryptedTagsLength=this.content.length,this._encryptedTags=[])}catch(t){}}catch(t){}return[]}validateTag(e){return!0}getItems(e){return this.tags.filter((t=>t[0]===e))}get items(){return this.tags.filter((e=>!["d","L","l","title","name","description","published_at","summary","image","thumb","alt","expiration","subject","client"].includes(e[0])))}async addItem(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom";if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(e instanceof hd)t=[e.tagReference(n)];else if(e instanceof Jd)t=e.referenceTags();else if(e instanceof Tc)t=e.referenceTags();else{if(!Array.isArray(e))throw new Error("Invalid object type");t=[e]}if(n&&t[0].push(n),r){const e=await this.ndk.signer.user(),n=await this.encryptedTags();"top"===i?n.unshift(...t):n.push(...t),this._encryptedTags=n,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(n),await this.encrypt(e)}else"top"===i?this.tags.unshift(...t):this.tags.push(...t);this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItemByValue(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const n=this.tags.findIndex((t=>t[1]===e));n>=0&&this.tags.splice(n,1);const r=await this.ndk.signer.user(),i=await this.encryptedTags(),s=i.findIndex((t=>t[1]===e));if(s>=0&&(i.splice(s,1),this._encryptedTags=i,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(i),await this.encrypt(r)),t)return this.publishReplaceable();this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItem(e,t){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(t){const t=await this.ndk.signer.user(),n=await this.encryptedTags();n.splice(e,1),this._encryptedTags=n,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(n),await this.encrypt(t)}else this.tags.splice(e,1);return this.created_at=Math.floor(Date.now()/1e3),this.emit("change"),this}has(e){return this.items.some((t=>t[1]===e))}filterForItems(){const e=new Set,t=new Map,n=[];for(const r of this.items)if("e"===r[0]&&r[1])e.add(r[1]);else if("a"===r[0]&&r[1]){const[e,n,i]=r[1].split(":");if(!e||!n)continue;const s=`${e}:${n}`,o=t.get(s)||[];o.push(i||""),t.set(s,o)}if(e.size>0&&n.push({ids:Array.from(e)}),t.size>0)for(const[r,i]of t.entries()){const[e,t]=r.split(":");n.push({kinds:[Number.parseInt(e)],authors:[t],"#d":i})}return n}},Sd=Ed,xd=class e extends hd{debug;_proofs=[];static kind=9321;static kinds=(()=>[e.kind])();constructor(e,t){super(e,t),this.kind??=9321,this.debug=e?.debug.extend("nutzap")??fa("ndk:nutzap"),this.alt||(this.alt="This is a nutzap");try{const e=this.getMatchingTags("proof");e.length?this._proofs=e.map((e=>JSON.parse(e[1]))):this._proofs=JSON.parse(this.content)}catch{return}}static from(t){const n=new e(t.ndk,t);if(n._proofs&&n._proofs.length)return n}set comment(e){this.content=e??""}get comment(){const e=this.tagValue("comment");return e||this.content}set proofs(e){this._proofs=e,this.tags=this.tags.filter((e=>"proof"!==e[0]));for(const t of e)this.tags.push(["proof",JSON.stringify(t)])}get proofs(){return this._proofs}get rawP2pk(){const e=this.proofs[0];try{const t=JSON.parse(e.secret);let n;if("string"===typeof t?(n=JSON.parse(t),this.debug("stringified payload",e.secret)):"object"===typeof t&&(n=t),Array.isArray(n)&&"P2PK"===n[0]&&n.length>1&&"object"===typeof n[1]&&null!==n[1])return n[1].data;if("object"===typeof n&&null!==n&&"string"===typeof n[1]?.data)return n[1].data}catch(t){this.debug("error parsing p2pk pubkey",t,this.proofs[0])}}get p2pk(){const e=this.rawP2pk;if(e)return e.startsWith("02")?e.slice(2):e}get mint(){return this.tagValue("u")}set mint(e){this.replaceTag(["u",e])}get unit(){let e=this.tagValue("unit")??"sat";return e?.startsWith("msat")&&(e="sat"),e}set unit(e){if(this.removeTag("unit"),e?.startsWith("msat"))throw new Error("msat is not allowed, use sat denomination instead");e&&this.tag(["unit",e])}get amount(){return this.proofs.reduce(((e,t)=>e+t.amount),0)}sender=this.author;set target(e){this.tags=this.tags.filter((e=>"p"!==e[0])),e instanceof hd&&this.tags.push(e.tagReference())}set recipientPubkey(e){this.removeTag("p"),this.tag(["p",e])}get recipientPubkey(){return this.tagValue("p")}get recipient(){const e=this.recipientPubkey;return this.ndk?this.ndk.getUser({pubkey:e}):new Jd({pubkey:e})}async toNostrEvent(){"msat"===this.unit&&(this.unit="sat"),this.removeTag("amount"),this.tags.push(["amount",this.amount.toString()]);const e=await super.toNostrEvent();return e.content=this.comment,e}get isValid(){let e=0,t=0,n=0;for(const r of this.tags)"e"===r[0]&&e++,"p"===r[0]&&t++,"u"===r[0]&&n++;return 1===t&&1===n&&e<=1&&this.proofs.length>0}};var _d=class e extends hd{relaySet;memberSet=(()=>new Set)();static kind=39002;static kinds=[39002];constructor(e,t){super(e,t),this.kind??=39002,this.memberSet=new Set(this.members)}static from(t){return new e(t.ndk,t)}get members(){return this.getMatchingTags("p").map((e=>e[1]))}hasMember(e){return this.memberSet.has(e)}async publish(e,t,n){return e??=this.relaySet,super.publishReplaceable(e,t,n)}},Cd=class e extends hd{static kind=39e3;static kinds=[39e3];constructor(e,t){super(e,t),this.kind??=39e3}static from(t){return new e(t.ndk,t)}get name(){return this.tagValue("name")}get picture(){return this.tagValue("picture")}get about(){return this.tagValue("about")}get scope(){return this.getMatchingTags("public").length>0?"public":this.getMatchingTags("public").length>0?"private":void 0}set scope(e){this.removeTag("public"),this.removeTag("private"),"public"===e?this.tags.push(["public",""]):"private"===e&&this.tags.push(["private",""])}get access(){return this.getMatchingTags("open").length>0?"open":this.getMatchingTags("closed").length>0?"closed":void 0}set access(e){this.removeTag("open"),this.removeTag("closed"),"open"===e?this.tags.push(["open",""]):"closed"===e&&this.tags.push(["closed",""])}};function Ad(e){const[t,n]=e.split("x").map(Number);return{width:t,height:n}}var Rd=class e{static Text="text";static Pubkey="pubkey";static Event="event";static Prompt="prompt";static Countdown="countdown";type;value;position;dimension;properties;constructor(e){if(Array.isArray(e)){const t=e;if("sticker"!==t[0]||t.length<5)throw new Error("Invalid sticker tag");this.type=t[1],this.value=t[2],this.position=function(e){const[t,n]=e.split(",").map(Number);return{x:t,y:n}}(t[3]),this.dimension=Ad(t[4]);const n={};for(let e=5;e<t.length;e++){const[r,...i]=t[e].split(" ");n[r]=i.join(" ")}Object.keys(n).length>0&&(this.properties=n)}else this.type=e,this.value=void 0,this.position={x:0,y:0},this.dimension={width:0,height:0}}static fromTag(t){try{return new e(t)}catch{return null}}get style(){return this.properties?.style}set style(e){e?this.properties={...this.properties,style:e}:delete this.properties?.style}get rotation(){return this.properties?.rot?Number.parseFloat(this.properties.rot):void 0}set rotation(e){void 0!==e?this.properties={...this.properties,rot:e.toString()}:delete this.properties?.rot}get isValid(){return this.hasValidDimensions()&&this.hasValidPosition()}hasValidDimensions=()=>"number"===typeof this.dimension.width&&"number"===typeof this.dimension.height&&!Number.isNaN(this.dimension.width)&&!Number.isNaN(this.dimension.height);hasValidPosition=()=>"number"===typeof this.position.x&&"number"===typeof this.position.y&&!Number.isNaN(this.position.x)&&!Number.isNaN(this.position.y);toTag(){if(!this.isValid){const e=[this.hasValidDimensions()?void 0:"dimensions is invalid",this.hasValidPosition()?void 0:"position is invalid"].filter(Boolean);throw new Error(`Invalid sticker: ${e.join(", ")}`)}let e;switch(this.type){case"event":e=this.value.tagId();break;case"pubkey":e=this.value.pubkey;break;default:e=this.value}const t=["sticker",this.type,e,Nd(this.position),Pd(this.dimension)];if(this.properties)for(const[n,r]of Object.entries(this.properties))t.push(`${n} ${r}`);return t}},Td=class e extends hd{static kind=23;static kinds=[23];_imeta;_dimensions;constructor(e,t){if(super(e,t),this.kind??=23,t)for(const n of t.tags)switch(n[0]){case"imeta":this._imeta=wd(n);break;case"dim":this.dimensions=Ad(n[1])}}static from(t){return new e(t.ndk,t)}get isValid(){return!!this.imeta}get imeta(){return this._imeta}set imeta(e){this._imeta=e,this.tags=this.tags.filter((e=>"imeta"!==e[0])),e&&this.tags.push(vd(e))}get dimensions(){const e=this.tagValue("dim");if(e)return Ad(e)}set dimensions(e){this.removeTag("dim"),e&&this.tags.push(["dim",`${e.width}x${e.height}`])}get duration(){const e=this.tagValue("dur");if(e)return Number.parseInt(e)}set duration(e){this.removeTag("dur"),void 0!==e&&this.tags.push(["dur",e.toString()])}get stickers(){const e=[];for(const t of this.tags){if("sticker"!==t[0]||t.length<5)continue;const n=Rd.fromTag(t);n&&e.push(n)}return e}addSticker(e){let t;if(e instanceof Rd)t=e;else{const n=["sticker",e.type,"string"===typeof e.value?e.value:"",Nd(e.position),Pd(e.dimension)];if(e.properties)for(const[t,r]of Object.entries(e.properties))n.push(`${t} ${r}`);t=new Rd(n),t.value=e.value}("pubkey"===t.type||"event"===t.type)&&this.tag(t.value),this.tags.push(t.toTag())}removeSticker(e){const t=this.stickers;if(e<0||e>=t.length)return;let n=0;for(let r=0;r<this.tags.length;r++)if("sticker"===this.tags[r][0]){if(n===e){this.tags.splice(r,1);break}n++}}},Nd=e=>`${e.x},${e.y}`,Pd=e=>`${e.width}x${e.height}`,Ld=["daily","weekly","monthly","quarterly","yearly"];function Id(e,t,n){return["amount",e.toString(),t,n]}function Ud(e){const t=Number.parseInt(e[1]);if(Number.isNaN(t)||void 0===t||null===t||t<=0)return;const n=e[2];if(void 0===n||""===n)return;const r=e[3];return void 0!==r&&Ld.includes(r)?{amount:t,currency:n,term:r}:void 0}var Od=class e extends yd{static kind=37001;static kinds=[37001];constructor(e,t){const n=t?.kind??37001;super(e,t),this.kind=n}static from(t){return new e(t.ndk,t)}get perks(){return this.getMatchingTags("perk").map((e=>e[1])).filter((e=>void 0!==e))}addPerk(e){this.tags.push(["perk",e])}get amounts(){return this.getMatchingTags("amount").map((e=>Ud(e))).filter((e=>void 0!==e))}addAmount(e,t,n){this.tags.push(Id(e,t,n))}set relayUrl(e){this.tags.push(["r",e])}get relayUrls(){return this.getMatchingTags("r").map((e=>e[1])).filter((e=>void 0!==e))}get verifierPubkey(){return this.tagValue("p")}set verifierPubkey(e){this.removeTag("p"),e&&this.tags.push(["p",e])}get isValid(){return void 0!==this.title&&this.amounts.length>0}},Fd=class e extends hd{static kind=21;static kinds=[34235,34236,22,21];_imetas;static from(t){return new e(t.ndk,t.rawEvent())}get title(){return this.tagValue("title")}set title(e){this.removeTag("title"),e&&this.tags.push(["title",e])}get thumbnail(){let e;return this.imetas&&this.imetas.length>0&&(e=this.imetas[0].image?.[0]),e??this.tagValue("thumb")}get imetas(){return this._imetas||(this._imetas=this.tags.filter((e=>"imeta"===e[0])).map(wd)),this._imetas}set imetas(e){this._imetas=e,this.tags=this.tags.filter((e=>"imeta"!==e[0])),this.tags.push(...e.map(vd))}get url(){return this.imetas&&this.imetas.length>0?this.imetas[0].url:this.tagValue("url")}get published_at(){const e=this.tagValue("published_at");if(e)return Number.parseInt(e)}async generateTags(){if(super.generateTags(),!this.kind&&this.imetas?.[0]?.dim){const[e,t]=this.imetas[0].dim.split("x"),n=e&&t&&Number.parseInt(e)<Number.parseInt(t),r=this.duration&&this.duration<120;this.kind=r&&n?22:21}return super.generateTags()}get duration(){const e=this.tagValue("duration");if(e)return Number.parseInt(e)}set duration(e){this.removeTag("duration"),void 0!==e&&this.tags.push(["duration",Math.floor(e).toString()])}},Md=class e extends yd{static kind=30818;static kinds=[30818];static from(t){return new e(t.ndk,t.rawEvent())}get isDefered(){return this.hasTag("a","defer")}get deferedId(){return this.tagValue("a","defer")}set defer(e){this.removeTag("a","defer"),this.tag(e,"defer")}},Dd=class e extends hd{static kinds=[10063];constructor(e,t){super(e,t),this.kind??=10063}static from(t){return new e(t.ndk,t.rawEvent())}get servers(){return this.tags.filter((e=>"server"===e[0])).map((e=>e[1]))}set servers(e){this.tags=this.tags.filter((e=>"server"!==e[0]));for(const t of e)this.tags.push(["server",t])}get default(){const e=this.servers;return e.length>0?e[0]:void 0}set default(e){if(!e)return;const t=this.servers.filter((t=>t!==e));this.servers=[e,...t]}addServer(e){if(!e)return;const t=this.servers;t.includes(e)||(this.servers=[...t,e])}removeServer(e){if(!e)return;const t=this.servers;this.servers=t.filter((t=>t!==e))}};function zd(e){const t=new Map;for(const r of[kd,Fd,gd,yd,bd,Md,xd,_d,Cd,Od,md,Ed,Td,Dd])for(const e of r.kinds)t.set(e,r);const n=t.get(e.kind);return n?n.from(e):e}function Bd(e){return!(!e.filter.ids||!function(e){const t=e.filter.ids;return!!t&&t.length===e.eventFirstSeen.size}(e))}function $d(e){let t;if(e.match(Vd)){const[t,n,r]=e.split(":"),i={authors:[n],kinds:[Number.parseInt(t)]};return r&&(i["#d"]=[r]),i}if(e.match(jd))try{switch(t=hs.decode(e),t.type){case"nevent":{const e={ids:[t.data.id]};return t.data.author&&(e.authors=[t.data.author]),t.data.kind&&(e.kinds=[t.data.kind]),e}case"note":return{ids:[t.data]};case"naddr":{const e={authors:[t.data.pubkey],kinds:[t.data.kind]};return t.data.identifier&&(e["#d"]=[t.data.identifier]),e}}}catch(n){console.error("Error decoding",e,n)}return{ids:[e]}}var Vd=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,jd=/^n(event|ote|profile|pub|addr)1[\d\w]+$/;function Hd(e,t){try{const n=hs.decode(e);if(["naddr","nevent"].includes(n?.type)){const e=n.data;if(e?.relays)return e.relays.map((e=>new Tc(e,t.relayAuthDefaultPolicy,t)))}}catch(n){}return[]}var qd={closeOnEose:!1,cacheUsage:"CACHE_FIRST",dontSaveToCache:!1,groupable:!0,groupableDelay:100,groupableDelayType:"at-most",cacheUnconstrainFilter:["limit","since","until"]},Wd=class extends ha.EventEmitter{subId;filters;opts;pool;skipVerification=!1;skipValidation=!1;relayFilters;relaySet;ndk;debug;eventFirstSeen=(()=>new Map)();eosesSeen=(()=>new Set)();lastEventReceivedAt;mostRecentCacheEventTimestamp;internalId;closeOnEose;poolMonitor;skipOptimisticPublishEvent=!1;cacheUnconstrainFilter;constructor(e,t,n,r){super(),this.ndk=e,this.opts={...qd,...n||{}},this.pool=this.opts.pool||e.pool,this.filters=Array.isArray(t)?t:[t],this.subId=r||this.opts.subId,this.internalId=Math.random().toString(36).substring(7),this.debug=e.debug.extend(`subscription[${this.opts.subId??this.internalId}]`),this.opts.relaySet?this.relaySet=this.opts.relaySet:this.opts.relayUrls&&(this.relaySet=Pc.fromRelayUrls(this.opts.relayUrls,this.ndk)),this.skipVerification=this.opts.skipVerification||!1,this.skipValidation=this.opts.skipValidation||!1,this.closeOnEose=this.opts.closeOnEose||!1,this.skipOptimisticPublishEvent=this.opts.skipOptimisticPublishEvent||!1,this.cacheUnconstrainFilter=this.opts.cacheUnconstrainFilter}relaysMissingEose(){if(!this.relayFilters)return[];return Array.from(this.relayFilters?.keys()).filter((e=>!this.eosesSeen.has(this.pool.getRelay(e,!1,!1))))}get filter(){return this.filters[0]}get groupableDelay(){if(this.isGroupable())return this.opts?.groupableDelay}get groupableDelayType(){return this.opts?.groupableDelayType||"at-most"}isGroupable(){return this.opts?.groupable||!1}shouldQueryCache(){if(this.opts.addSinceFromCache)return!0;if("ONLY_RELAY"===this.opts?.cacheUsage)return!1;this.filters.some((e=>e.kinds?.some((e=>Kd(e)))));return!0}shouldQueryRelays(){return"ONLY_CACHE"!==this.opts?.cacheUsage}shouldWaitForCache(){return!!this.opts.addSinceFromCache||!!this.opts.closeOnEose&&!!this.ndk.cacheAdapter?.locking&&"PARALLEL"!==this.opts.cacheUsage}start(){let e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=n=>{if(t)for(const e of n)(!this.mostRecentCacheEventTimestamp||e.created_at>this.mostRecentCacheEventTimestamp)&&(this.mostRecentCacheEventTimestamp=e.created_at),this.eventReceived(e,void 0,!0,!1);else{e=[];for(const t of n){(!this.mostRecentCacheEventTimestamp||t.created_at>this.mostRecentCacheEventTimestamp)&&(this.mostRecentCacheEventTimestamp=t.created_at),t.ndk=this.ndk;const n=this.opts.wrap?zd(t):t;if(!n)break;if(n instanceof Promise){n.then((e=>{this.emitEvent(!1,e,void 0,!0,!1)}));break}this.eventFirstSeen.set(n.id,Date.now()),e.push(n)}}},r=()=>{this.shouldQueryRelays()?(this.startWithRelays(),this.startPoolMonitor()):this.emit("eose",this)};return this.shouldQueryCache()?(e=this.startWithCache(),e instanceof Promise?this.shouldWaitForCache()?(e.then((e=>{n(e),Bd(this)?this.emit("eose",this):r()})),null):(e.then((e=>{n(e)})),r(),null):(n(e),Bd(this)?this.emit("eose",this):r(),e)):(r(),null)}startPoolMonitor(){this.debug.extend("pool-monitor");this.poolMonitor=e=>{if(this.relayFilters?.has(e.url))return;Oc(this.ndk,this.filters,this.pool).get(e.url)&&(this.relayFilters?.set(e.url,this.filters),e.subscribe(this,this.filters))},this.pool.on("relay:connect",this.poolMonitor)}onStopped;stop(){this.emit("close",this),this.poolMonitor&&this.pool.off("relay:connect",this.poolMonitor),this.onStopped?.()}hasAuthorsFilter(){return this.filters.some((e=>e.authors?.length))}startWithCache(){return this.ndk.cacheAdapter?.query?this.ndk.cacheAdapter.query(this):[]}startWithRelays(){let e=this.filters;if(this.opts.addSinceFromCache&&this.mostRecentCacheEventTimestamp){const t=this.mostRecentCacheEventTimestamp+1;e=e.map((e=>({...e,since:Math.max(e.since||0,t)})))}if(this.relaySet&&0!==this.relaySet.relays.size){this.relayFilters=new Map;for(const t of this.relaySet.relays)this.relayFilters.set(t.url,e)}else this.relayFilters=Oc(this.ndk,e,this.pool);for(const[t,n]of this.relayFilters){this.pool.getRelay(t,!0,!0,n).subscribe(this,n)}}eventReceived(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=e.id,s=this.eventFirstSeen.has(i);let o;if(e instanceof hd&&(o=e),s){const s=Date.now()-(this.eventFirstSeen.get(i)||0);if(this.emit("event:dup",e,t,s,this,n,r),t){const n=ld.get(i);if(n&&"string"===typeof n)if(e.sig===n)t.addValidatedEvent();else{const n=e instanceof hd?e:new hd(this.ndk,e);this.ndk.reportInvalidSignature(n,t)}}}else{if(o??=new hd(this.ndk,e),o.ndk=this.ndk,o.relay=t,!n&&!r){if(!this.skipValidation&&!o.isValid)return void this.debug("Event failed validation %s from relay %s",i,t?.url);if(t){if(t.shouldValidateEvent()&&!this.skipVerification){if(o.relay=t,!this.ndk.asyncSigVerification){if(!o.verifySignature(!0))return this.debug("Event failed signature validation",e),void this.ndk.reportInvalidSignature(o,t);t.addValidatedEvent()}}else t.addNonValidatedEvent()}this.ndk.cacheAdapter&&!this.opts.dontSaveToCache&&this.ndk.cacheAdapter.setEvent(o,this.filters,t)}r&&!0===this.skipOptimisticPublishEvent||(this.emitEvent(this.opts?.wrap??!1,o,t,n,r),this.eventFirstSeen.set(i,Date.now()))}this.lastEventReceivedAt=Date.now()}emitEvent(e,t,n,r,i){const s=e?zd(t):t;s instanceof Promise?s.then((e=>this.emitEvent(!1,e,n,r,i))):s&&this.emit("event",s,n,this,r,i)}closedReceived(e,t){this.emit("closed",e,t)}eoseTimeout;eosed=!1;eoseReceived(e){this.debug("EOSE received from %s",e.url),this.eosesSeen.add(e);let t=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const n=this.eosesSeen.size===this.relayFilters?.size,r=Bd(this),i=e=>{this.debug("Performing EOSE: %s %d",e,this.eosed),this.eosed||(this.eoseTimeout&&clearTimeout(this.eoseTimeout),this.emit("eose",this),this.eosed=!0,this.opts?.closeOnEose&&this.stop())};if(r||n)i("query filled or seen all");else if(this.relayFilters){let e=1e3;const n=new Set(this.pool.connectedRelays().map((e=>e.url))),r=Array.from(this.relayFilters.keys()).filter((e=>n.has(e)));if(0===r.length)return void this.debug("No connected relays, waiting for all relays to connect",Array.from(this.relayFilters.keys()).join(", "));const s=this.eosesSeen.size/r.length;if(this.debug("Percentage of relays that have sent EOSE",{subId:this.subId,percentageOfRelaysThatHaveSentEose:s,seen:this.eosesSeen.size,total:r.length}),this.eosesSeen.size>=2&&s>=.5){if(e*=1-s,0===e)return void i("time to wait was 0");this.eoseTimeout&&clearTimeout(this.eoseTimeout);const n=()=>{t=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,void 0!==t&&t<20?this.eoseTimeout=setTimeout(n,e):i(`send eose timeout: ${e}`)};this.eoseTimeout=setTimeout(n,e)}}}},Kd=e=>e>=2e4&&e<3e4;async function Gd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!this.ndk)throw new Error("NDK not set");const r=await this.ndk.fetchEvent({kinds:[n],authors:[this.pubkey]},e||{groupable:!1});if(r){const e=new Set;return r.tags.forEach((t=>{"p"===t[0]&&e.add(t[1])})),t&&this.ndk?.outboxTracker?.trackUsers(Array.from(e)),[...e].reduce(((e,t)=>{const n=new Jd({pubkey:t});return n.ndk=this.ndk,e.add(n),e}),new Set)}return new Set}var Qd=/^(?:([\w.+-]+)@)?([\w.-]+)$/;async function Zd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return await e.queuesNip05.add({id:t,func:async()=>{if(e.cacheAdapter?.loadNip05){const n=await e.cacheAdapter.loadNip05(t);if("missing"!==n){if(n){const t=new Jd({pubkey:n.pubkey,relayUrls:n.relays,nip46Urls:n.nip46});return t.ndk=e,t}if("no-cache"!==r.cache)return null}}const i=t.match(Qd);if(!i)return null;const[s,o="_",a]=i;try{const i=await n(`https://${a}/.well-known/nostr.json?name=${o}`,r),{names:s,relays:l,nip46:u}=function(e){const t={names:{}};for(const[n,r]of Object.entries(e.names))"string"===typeof n&&"string"===typeof r&&(t.names[n.toLowerCase()]=r);if(e.relays){t.relays={};for(const[n,r]of Object.entries(e.relays))"string"===typeof n&&Array.isArray(r)&&(t.relays[n]=r.filter((e=>"string"===typeof e)))}if(e.nip46){t.nip46={};for(const[n,r]of Object.entries(e.nip46))"string"===typeof n&&Array.isArray(r)&&(t.nip46[n]=r.filter((e=>"string"===typeof e)))}return t}(await i.json()),c=s[o.toLowerCase()];let d=null;return c&&(d={pubkey:c,relays:l?.[c],nip46:u?.[c]}),e?.cacheAdapter?.saveNip05&&e.cacheAdapter.saveNip05(t,d),d}catch(l){return e?.cacheAdapter?.saveNip05&&e?.cacheAdapter.saveNip05(t,null),console.error("Failed to fetch NIP05 for",t,l),null}}})}function Yd(e){const t={};for(const[n,r]of Object.entries(e))switch(n){case"username":case"name":t.name=r;break;case"displayName":t.display_name=r;break;case"image":case"picture":t.picture=r;break;case"bio":case"about":t.about=r;break;default:t[n]=r}return JSON.stringify(t)}var Jd=class e{ndk;profile;profileEvent;_npub;_pubkey;relayUrls=[];nip46Urls=[];constructor(e){if(e.npub&&(this._npub=e.npub),e.hexpubkey&&(this._pubkey=e.hexpubkey),e.pubkey&&(this._pubkey=e.pubkey),e.relayUrls&&(this.relayUrls=e.relayUrls),e.nip46Urls&&(this.nip46Urls=e.nip46Urls),e.nprofile)try{const t=hs.decode(e.nprofile);"nprofile"===t.type&&(this._pubkey=t.data.pubkey,t.data.relays&&t.data.relays.length>0&&this.relayUrls.push(...t.data.relays))}catch(t){console.error("Failed to decode nprofile",t)}}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("pubkey not set");this._npub=hs.npubEncode(this.pubkey)}return this._npub}get nprofile(){const e=this.profileEvent?.onRelays?.map((e=>e.url));return hs.nprofileEncode({pubkey:this.pubkey,relays:e})}set npub(e){this._npub=e}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=hs.decode(this.npub).data}return this._pubkey}set pubkey(e){this._pubkey=e}filter(){return{"#p":[this.pubkey]}}async getZapInfo(e){if(!this.ndk)throw new Error("No NDK instance found");const t=async t=>{if(!e)return t;let n;const r=new Promise(((t,r)=>{n=setTimeout((()=>r(new Error("Timeout"))),e)}));try{const e=await Promise.race([t,r]);return n&&clearTimeout(n),e}catch(i){if(i instanceof Error&&"Timeout"===i.message)try{return await t}catch(s){return}return}},[n,r]=await Promise.all([t(this.fetchProfile()),t(this.ndk.fetchEvent({kinds:[10019],authors:[this.pubkey]}))]),i=new Map;if(r){const e=gd.from(r);e.mints.length>0&&i.set("nip61",{mints:e.mints,relays:e.relays,p2pk:e.p2pk})}if(n){const{lud06:e,lud16:t}=n;i.set("nip57",{lud06:e,lud16:t})}return i}static async fromNip05(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n)throw new Error("No NDK instance found");const i={};r&&(i.cache="no-cache");const s=await Zd(n,t,n?.httpFetch,i);if(s){const t=new e({pubkey:s.pubkey,relayUrls:s.relays,nip46Urls:s.nip46});return t.ndk=n,t}}async fetchProfile(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.ndk)throw new Error("NDK not set");let n=null;if(this.ndk.cacheAdapter&&(this.ndk.cacheAdapter.fetchProfile||this.ndk.cacheAdapter.fetchProfileSync)&&"ONLY_RELAY"!==e?.cacheUsage){let e=null;if(this.ndk.cacheAdapter.fetchProfileSync?e=this.ndk.cacheAdapter.fetchProfileSync(this.pubkey):this.ndk.cacheAdapter.fetchProfile&&(e=await this.ndk.cacheAdapter.fetchProfile(this.pubkey)),e)return this.profile=e,e}return e??={},e.cacheUsage??="ONLY_RELAY",e.closeOnEose??=!0,e.groupable??=!0,e.groupableDelay??=250,n||(n=await this.ndk.fetchEvent({kinds:[0],authors:[this.pubkey]},e)),n?(this.profile=function(e){const t={};let n;try{n=JSON.parse(e.content)}catch(r){throw new Error(`Failed to parse profile event: ${r}`)}t.profileEvent=JSON.stringify(e.rawEvent());for(const i of Object.keys(n))switch(i){case"name":t.name=n.name;break;case"display_name":t.displayName=n.display_name;break;case"image":case"picture":t.picture=n.picture||n.image,t.image=t.picture;break;case"banner":t.banner=n.banner;break;case"bio":t.bio=n.bio;break;case"nip05":t.nip05=n.nip05;break;case"lud06":t.lud06=n.lud06;break;case"lud16":t.lud16=n.lud16;break;case"about":t.about=n.about;break;case"website":t.website=n.website;break;default:t[i]=n[i]}return t.created_at=e.created_at,t}(n),t&&this.profile&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.saveProfile&&this.ndk.cacheAdapter.saveProfile(this.pubkey,this.profile),this.profile):null}follows=(()=>Gd.bind(this))();async followSet(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const r=await this.follows(e,t,n);return new Set(Array.from(r).map((e=>e.pubkey)))}tagReference(){return["p",this.pubkey]}referenceTags(e){const t=[["p",this.pubkey]];return e?(t[0].push("",e),t):t}async publish(){if(!this.ndk)throw new Error("No NDK instance found");if(!this.profile)throw new Error("No profile available");this.ndk.assertSigner();const e=new hd(this.ndk,{kind:0,content:Yd(this.profile)});await e.publish()}async follow(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),t||(t=await this.follows(void 0,void 0,n)),t.has(e))return!1;t.add(e);const r=new hd(this.ndk,{kind:n});for(const i of t)r.tag(i);return await r.publish(),!0}async unfollow(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),t||(t=await this.follows(void 0,void 0,n));const r=new Set;let i=!1;for(const o of t)o.pubkey!==e.pubkey?r.add(o):i=!0;if(!i)return!1;const s=new hd(this.ndk,{kind:n});for(const o of r)s.tag(o);return await s.publish()}async validateNip05(e){if(!this.ndk)throw new Error("No NDK instance found");const t=await Zd(this.ndk,e);return null===t?null:t.pubkey===this.pubkey}};var Xd={REDEEMED:"redeemed",CREATED:"created",DESTROYED:"destroyed",RESERVED:"reserved"},eh=((()=>{})(),"read"),th="write",nh=class e extends hd{constructor(e,t){super(e,t),this.kind??=10002}static from(t){return new e(t.ndk,t.rawEvent())}get readRelayUrls(){return this.tags.filter((e=>"r"===e[0]||"relay"===e[0])).filter((e=>!e[2]||e[2]&&e[2]===eh)).map((e=>mc(e[1]))).filter((e=>!!e))}set readRelayUrls(e){for(const t of e)this.tags.push(["r",t,eh])}get writeRelayUrls(){return this.tags.filter((e=>"r"===e[0]||"relay"===e[0])).filter((e=>!e[2]||e[2]&&e[2]===th)).map((e=>mc(e[1]))).filter((e=>!!e))}set writeRelayUrls(e){for(const t of e)this.tags.push(["r",t,th])}get bothRelayUrls(){return this.tags.filter((e=>"r"===e[0]||"relay"===e[0])).filter((e=>!e[2])).map((e=>e[1]))}set bothRelayUrls(e){for(const t of e)this.tags.push(["r",t])}get relays(){return this.tags.filter((e=>"r"===e[0]||"relay"===e[0])).map((e=>e[1]))}get relaySet(){if(!this.ndk)throw new Error("NDKRelayList has no NDK instance");return new Pc(new Set(this.relays.map((e=>this.ndk?.pool.getRelay(e))).filter((e=>!!e))),this.ndk)}};function rh(e,t){try{const n=JSON.parse(t.content),r=new nh(e),i=new Set,s=new Set;for(let[e,t]of Object.entries(n)){try{e=bc(e)}catch{continue}if(t){const n=t;n.write&&s.add(e),n.read&&i.add(e)}else i.add(e),s.add(e)}return r.readRelayUrls=Array.from(i),r.writeRelayUrls=Array.from(s),r}catch{}}var ih=new Map;function sh(e,t){ih.set(e,t)}var oh=class e{_user;_privateKey;_pubkey;constructor(e,t){if("string"===typeof e)if(e.startsWith("nsec1")){const{type:t,data:n}=hs.decode(e);if("nsec"!==t)throw new Error("Invalid private key provided.");this._privateKey=n}else{if(64!==e.length)throw new Error("Invalid private key provided.");this._privateKey=function(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);if(va)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const t=Ta(e.charCodeAt(s)),n=Ta(e.charCodeAt(s+1));if(void 0===t||void 0===n){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[i]=16*t+n}return r}(e)}else this._privateKey=e;this._pubkey=xr(this._privateKey),t&&(this._user=t.getUser({pubkey:this._pubkey})),this._user??=new Jd({pubkey:this._pubkey})}get privateKey(){if(!this._privateKey)throw new Error("Not ready");return Ea(this._privateKey)}get pubkey(){if(!this._pubkey)throw new Error("Not ready");return this._pubkey}get nsec(){if(!this._privateKey)throw new Error("Not ready");return hs.nsecEncode(this._privateKey)}get npub(){if(!this._pubkey)throw new Error("Not ready");return hs.npubEncode(this._pubkey)}static generate(){const t=Sr();return new e(t)}async blockUntilReady(){return this._user}async user(){return this._user}get userSync(){return this._user}async sign(e){if(!this._privateKey)throw Error("Attempted to sign without a private key");return _r(e,this._privateKey).sig}async encryptionEnabled(e){const t=[];return e&&"nip04"!==e||t.push("nip04"),e&&"nip44"!==e||t.push("nip44"),t}async encrypt(e,t,n){if(!this._privateKey||!this.privateKey)throw Error("Attempted to encrypt without a private key");const r=e.pubkey;if("nip44"===n){const e=qs.v2.utils.getConversationKey(this._privateKey,r);return await qs.v2.encrypt(t,e)}return await Rs.encrypt(this._privateKey,r,t)}async decrypt(e,t,n){if(!this._privateKey||!this.privateKey)throw Error("Attempted to decrypt without a private key");const r=e.pubkey;if("nip44"===n){const e=qs.v2.utils.getConversationKey(this._privateKey,r);return await qs.v2.decrypt(t,e)}return await Rs.decrypt(this._privateKey,r,t)}toPayload(){if(!this._privateKey)throw new Error("Private key not available");const e={type:"private-key",payload:this.privateKey};return JSON.stringify(e)}static async fromPayload(t,n){const r=JSON.parse(t);if("private-key"!==r.type)throw new Error(`Invalid payload type: expected 'private-key', got ${r.type}`);if(!r.payload||"string"!==typeof r.payload)throw new Error("Invalid payload content for private-key signer");return new e(r.payload,n)}};sh("private-key",oh);async function ah(e,t,n,r,i,s){try{await e.sign(n),i(e)}catch(o){r?.(`Failed to publish auth event to relay ${t.url}`,o),s(e)}}var lh={disconnect:function(e,t){return t??=fa("ndk:relay:auth-policies:disconnect"),async n=>{t?.(`Relay ${n.url} requested authentication, disconnecting`),e.removeRelay(n.url)}},signIn:function(){let{ndk:e,signer:t,debug:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n??=fa("ndk:auth-policies:signIn"),async(r,i)=>{n?.(`Relay ${r.url} requested authentication, signing in`);const s=new hd(e);return s.kind=22242,s.tags=[["relay",r.url],["challenge",i]],t??=e?.signer,new Promise((async(i,o)=>{t?await ah(s,r,t,n,i,o):e?.once("signer:ready",(async e=>{await ah(s,r,e,n,i,o)}))}))}}},uh=class e{_userPromise;encryptionQueue=[];encryptionProcessing=!1;debug;waitTimeout;_pubkey;ndk;_user;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1?arguments[1]:void 0;this.debug=fa("ndk:nip07"),this.waitTimeout=e,this.ndk=t}get pubkey(){if(!this._pubkey)throw new Error("Not ready");return this._pubkey}async blockUntilReady(){await this.waitForExtension();const e=await(window.nostr?.getPublicKey());if(!e)throw new Error("User rejected access");let t;return this._pubkey=e,t=this.ndk?this.ndk.getUser({pubkey:e}):new Jd({pubkey:e}),this._user=t,t}async user(){return this._userPromise||(this._userPromise=this.blockUntilReady()),this._userPromise}get userSync(){if(!this._user)throw new Error("User not ready");return this._user}async sign(e){await this.waitForExtension();const t=await(window.nostr?.signEvent(e));if(!t)throw new Error("Failed to sign event");return t.sig}async relays(e){await this.waitForExtension();const t=await(window.nostr?.getRelays?.())||{},n=[];for(const r of Object.keys(t))t[r].read&&t[r].write&&n.push(r);return n.map((t=>new Tc(t,e?.relayAuthDefaultPolicy,e)))}async encryptionEnabled(e){const t=[];return e&&"nip04"!==e||!Boolean(window.nostr?.nip04)||t.push("nip04"),e&&"nip44"!==e||!Boolean(window.nostr?.nip44)||t.push("nip44"),t}async encrypt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nip04";if(!await this.encryptionEnabled(n))throw new Error(`${n}encryption is not available from your browser extension`);await this.waitForExtension();const r=e.pubkey;return this.queueEncryption(n,"encrypt",r,t)}async decrypt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nip04";if(!await this.encryptionEnabled(n))throw new Error(`${n}encryption is not available from your browser extension`);await this.waitForExtension();const r=e.pubkey;return this.queueEncryption(n,"decrypt",r,t)}async queueEncryption(e,t,n,r){return new Promise(((i,s)=>{this.encryptionQueue.push({scheme:e,method:t,counterpartyHexpubkey:n,value:r,resolve:i,reject:s}),this.encryptionProcessing||this.processEncryptionQueue()}))}async processEncryptionQueue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e&&0===this.encryptionQueue.length)return void(this.encryptionProcessing=!1);this.encryptionProcessing=!0;const n=e||this.encryptionQueue.shift();if(!n)return void(this.encryptionProcessing=!1);const{scheme:r,method:i,counterpartyHexpubkey:s,value:o,resolve:a,reject:l}=n;this.debug("Processing encryption queue item",{method:i,counterpartyHexpubkey:s,value:o});try{const e=await(window.nostr?.[r]?.[i](s,o));if(!e)throw new Error("Failed to encrypt/decrypt");a(e)}catch(u){const e=u instanceof Error?u.message:String(u);if(e.includes("call already executing")&&t<5)return this.debug("Retrying encryption queue item",{method:i,counterpartyHexpubkey:s,value:o,retries:t}),void setTimeout((()=>{this.processEncryptionQueue(n,t+1)}),50*t);l(u instanceof Error?u:new Error(e))}this.processEncryptionQueue()}waitForExtension(){return new Promise(((e,t)=>{if(window.nostr)return void e();let n;const r=setInterval((()=>{window.nostr&&(clearTimeout(n),clearInterval(r),e())}),100);n=setTimeout((()=>{clearInterval(r),t(new Error("NIP-07 extension not available"))}),this.waitTimeout)}))}toPayload(){return JSON.stringify({type:"nip07",payload:""})}static async fromPayload(t,n){const r=JSON.parse(t);if("nip07"!==r.type)throw new Error(`Invalid payload type: expected 'nip07', got ${r.type}`);return new e(void 0,n)}};sh("nip07",uh);var ch=class extends ha.EventEmitter{ndk;signer;relaySet;debug;encryptionType="nip04";pool;constructor(e,t,n,r){if(super(),this.ndk=e,this.signer=t,r){this.pool=new pd(r,[],e,{debug:n.extend("rpc-pool"),name:"Nostr RPC"}),this.relaySet=new Pc(new Set,e,this.pool);for(const i of r){const r=this.pool.getRelay(i,!1,!1);r.authPolicy=lh.signIn({ndk:e,signer:t,debug:n}),this.relaySet.addRelay(r),r.connect()}}this.debug=n.extend("rpc")}subscribe(e){const t=this.ndk.subscribe(e,{closeOnEose:!1,groupable:!1,cacheUsage:"ONLY_RELAY",pool:this.pool,relaySet:this.relaySet},!1);return t.on("event",(async e=>{console.log("Received event",e.rawEvent());try{const t=await this.parseEvent(e);t.method?(console.log("Received request",t),this.emit("request",t)):(console.log("Received response",t),this.emit(`response-${t.id}`,t),this.emit("response",t))}catch(t){this.debug("error parsing event",t,e.rawEvent())}})),new Promise((e=>{t.on("eose",(()=>{this.debug("eosed"),e(t)})),t.start()}))}async parseEvent(e){"nip44"===this.encryptionType&&e.content.includes("?iv=")?this.encryptionType="nip04":"nip04"!==this.encryptionType||e.content.includes("?iv=")||(this.encryptionType="nip44");const t=this.ndk.getUser({pubkey:e.pubkey});let n;t.ndk=this.ndk;try{n=await this.signer.decrypt(t,e.content,this.encryptionType)}catch(u){const r="nip04"===this.encryptionType?"nip44":"nip04";n=await this.signer.decrypt(t,e.content,r),this.encryptionType=r}const r=JSON.parse(n),{id:i,method:s,params:o,result:a,error:l}=r;return s?{id:i,pubkey:e.pubkey,method:s,params:o,event:e}:{id:i,result:a,error:l,event:e}}async sendResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24133,i=arguments.length>4?arguments[4]:void 0;const s={id:e,result:n};i&&(s.error=i);const o=await this.signer.user(),a=this.ndk.getUser({pubkey:t}),l=new hd(this.ndk,{kind:r,content:JSON.stringify(s),tags:[["p",t]],pubkey:o.pubkey});l.content=await this.signer.encrypt(a,l.content,this.encryptionType),await l.sign(this.signer),await l.publish(this.relaySet)}async sendRequest(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:24133,i=arguments.length>4?arguments[4]:void 0;console.log("Sending request",t,n);const s=Math.random().toString(36).substring(7),o=await this.signer.user(),a=this.ndk.getUser({pubkey:e}),l={id:s,method:t,params:n},u=new Promise((()=>{const e=t=>{"auth_url"===t.result?(this.once(`response-${s}`,e),this.emit("authUrl",t.error)):i&&i(t)};this.once(`response-${s}`,e)}));console.log("Sending request",l);const c=new hd(this.ndk,{kind:r,content:JSON.stringify(l),tags:[["p",e]],pubkey:o.pubkey});return c.content=await this.signer.encrypt(a,c.content,this.encryptionType),await c.sign(this.signer),await c.publish(this.relaySet),u}};var dh=class e extends ha.EventEmitter{ndk;_user;bunkerPubkey;userPubkey;get pubkey(){if(!this.userPubkey)throw new Error("Not ready");return this.userPubkey}secret;localSigner;nip05;rpc;debug;relayUrls;subscription;nostrConnectUri;nostrConnectSecret;constructor(e,t,n,r,i){super(),this.ndk=e,this.debug=e.debug.extend("nip46:signer"),this.relayUrls=r,this.localSigner=n?"string"===typeof n?new oh(n):n:oh.generate(),!1===t||(t?t.startsWith("bunker://")?this.bunkerFlowInit(t):this.nip05Init(t):this.nostrconnectFlowInit(i)),this.rpc=new ch(this.ndk,this.localSigner,this.debug,this.relayUrls)}static bunker(t,n,r){return new e(t,n,r)}static nostrconnect(t,n,r,i){return new e(t,void 0,r,[n],i)}nostrconnectFlowInit(e){this.nostrConnectSecret=Math.random().toString(36).substring(2,15);const t=this.localSigner.pubkey;this.nostrConnectUri=function(e,t,n,r){const i=r?.name?encodeURIComponent(r.name):"",s=r?.url?encodeURIComponent(r.url):"";let o=`nostrconnect://${e}?image=${r?.image?encodeURIComponent(r.image):""}&url=${s}&name=${i}&perms=${r?.perms?encodeURIComponent(r.perms):""}&secret=${encodeURIComponent(t)}`;return n&&(o+=`&relay=${encodeURIComponent(n)}`),o}(t,this.nostrConnectSecret,this.relayUrls?.[0],e)}bunkerFlowInit(e){const t=new URL(e),n=t.hostname||t.pathname.replace(/^\/\//,""),r=t.searchParams.get("pubkey"),i=t.searchParams.getAll("relay"),s=t.searchParams.get("secret");this.bunkerPubkey=n,this.userPubkey=r,this.relayUrls=i,this.secret=s}nip05Init(e){this.nip05=e}async startListening(){if(this.subscription)return;const e=await this.localSigner.user();if(!e)throw new Error("Local signer not ready");this.subscription=await this.rpc.subscribe({kinds:[24133],"#p":[e.pubkey]})}async user(){return this._user?this._user:this.blockUntilReady()}get userSync(){if(!this._user)throw new Error("Remote user not ready synchronously");return this._user}async blockUntilReadyNostrConnect(){return new Promise(((e,t)=>{const n=t=>{t.result===this.nostrConnectSecret&&(this._user=t.event.author,this.userPubkey=t.event.pubkey,this.bunkerPubkey=t.event.pubkey,this.rpc.off("response",n),e(this._user))};this.startListening(),this.rpc.on("response",n)}))}async blockUntilReady(){var e=this;if(!this.bunkerPubkey&&!this.nostrConnectSecret&&!this.nip05)throw new Error("Bunker pubkey not set");if(this.nostrConnectSecret)return this.blockUntilReadyNostrConnect();if(this.nip05&&!this.userPubkey){const e=await Jd.fromNip05(this.nip05,this.ndk);e&&(this._user=e,this.userPubkey=e.pubkey,this.relayUrls=e.nip46Urls,this.rpc=new ch(this.ndk,this.localSigner,this.debug,this.relayUrls))}if(!this.bunkerPubkey&&this.userPubkey)this.bunkerPubkey=this.userPubkey;else if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");return await this.startListening(),this.rpc.on("authUrl",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.emit("authUrl",...n)})),new Promise(((e,t)=>{const n=[this.userPubkey??""];if(this.secret&&n.push(this.secret),!this.bunkerPubkey)throw new Error("Bunker pubkey not set");console.log("sending connect"),this.rpc.sendRequest(this.bunkerPubkey,"connect",n,24133,(n=>{"ack"===n.result?this.getPublicKey().then((t=>{this.userPubkey=t,this._user=this.ndk.getUser({pubkey:t}),e(this._user)})):t(n.error)}))}))}stop(){this.subscription?.stop(),this.subscription=void 0}async getPublicKey(){return this.userPubkey?this.userPubkey:new Promise(((e,t)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"get_public_key",[],24133,(t=>{e(t.result)}))}))}async encryptionEnabled(e){return e?[e]:Promise.resolve(["nip04","nip44"])}async encrypt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nip04";return this.encryption(e,t,n,"encrypt")}async decrypt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nip04";return this.encryption(e,t,n,"decrypt")}async encryption(e,t,n,r){return new Promise(((i,s)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,`${n}_${r}`,[e.pubkey,t],24133,(e=>{e.error?s(e.error):i(e.result)}))}))}async sign(e){return new Promise(((t,n)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"sign_event",[JSON.stringify(e)],24133,(e=>{if(e.error)n(e.error);else{const n=JSON.parse(e.result);t(n.sig)}}))}))}async createAccount(e,t,n){await this.startListening();const r=[];return e&&r.push(e),t&&r.push(t),n&&r.push(n),new Promise(((e,t)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"create_account",r,24133,(n=>{if(n.error)t(n.error);else{const t=n.result;e(t)}}))}))}toPayload(){if(!this.bunkerPubkey||!this.userPubkey)throw new Error("NIP-46 signer is not fully initialized for serialization");const e={type:"nip46",payload:{bunkerPubkey:this.bunkerPubkey,userPubkey:this.userPubkey,relayUrls:this.relayUrls,secret:this.secret,localSignerPayload:this.localSigner.toPayload(),nip05:this.nip05||null}};return JSON.stringify(e)}static async fromPayload(t,n){if(console.log("from payload",t),!n)throw new Error("NDK instance is required to deserialize NIP-46 signer");const r=JSON.parse(t);if("nip46"!==r.type)throw new Error(`Invalid payload type: expected 'nip46', got ${r.type}`);const i=r.payload;if(!i||"object"!==typeof i||!i.localSignerPayload)throw new Error("Invalid payload content for nip46 signer");const s=await async function(e,t){let n;try{n=JSON.parse(e)}catch(i){return void console.error("Failed to parse signer payload string",e,i)}if(!n||"string"!==typeof n.type)return void console.error("Failed to parse signer payload string",e,new Error("Missing type field"));const r=ih.get(n.type);if(!r)throw new Error(`Unknown signer type: ${n.type}`);try{return await r.fromPayload(e,t)}catch(i){const e=i instanceof Error?i.message:String(i);throw new Error(`Failed to deserialize signer type ${n.type}: ${e}`)}}(i.localSignerPayload,n);if(!s)throw new Error("Failed to deserialize local signer for NIP-46");if(!(s instanceof oh))throw new Error("Local signer must be an instance of NDKPrivateKeySigner");let o;return console.log("restore payload",i),o=new e(n,!1,s,i.relayUrls),o.userPubkey=i.userPubkey,o.bunkerPubkey=i.bunkerPubkey,o.relayUrls=i.relayUrls,o.secret=i.secret,i.userPubkey&&(o._user=new Jd({pubkey:i.userPubkey}),o._user&&(o._user.ndk=n)),o}};async function hh(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;const i=t.outboxPool||t.pool,s=new Set;for(const d of i.relays.values())s.add(d);const o=new Map,a=new Map,l=new Pc(s,t);if(t.cacheAdapter?.locking&&!n){const n=await t.fetchEvents({kinds:[3,10002],authors:Array.from(new Set(e))},{cacheUsage:"ONLY_CACHE",subId:"ndk-relay-list-fetch"});for(const e of n)10002===e.kind&&o.set(e.pubkey,nh.from(e));for(const e of n)if(3===e.kind){if(o.has(e.pubkey))continue;const n=rh(t,e);n&&a.set(e.pubkey,n)}e=e.filter((e=>!o.has(e)&&!a.has(e)))}if(0===e.length)return o;const u=new Map,c=new Map;return new Promise((n=>{(async()=>{const s={closeOnEose:!0,pool:i,groupable:!0,subId:"ndk-relay-list-fetch",addSinceFromCache:!0,relaySet:l};l&&(s.relaySet=l),t.subscribe({kinds:[3,10002],authors:e},s,{onEvent:e=>{if(10002===e.kind){const t=u.get(e.pubkey);if(t&&t.created_at>e.created_at)return;u.set(e.pubkey,e)}else if(3===e.kind){const t=c.get(e.pubkey);if(t&&t.created_at>e.created_at)return;c.set(e.pubkey,e)}},onEose:()=>{for(const e of u.values())o.set(e.pubkey,nh.from(e));for(const n of e){if(o.has(n))continue;const e=c.get(n);if(!e)continue;const r=rh(t,e);r&&o.set(n,r)}n(o)}}),setTimeout((()=>{n(o)}),r)})()}))}sh("nip46",dh);var fh=class{type;relayUrlScores;readRelays;writeRelays;constructor(e){this.type=e,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}},ph=class extends ha.EventEmitter{data;ndk;debug;constructor(e){super(),this.ndk=e,this.debug=e.debug.extend("outbox-tracker"),this.data=new Pu.LRUCache({maxSize:1e5,entryExpirationTimeInMS:12e4})}async trackUsers(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[];for(let r=0;r<e.length;r+=400){const i=e.slice(r,r+400).map((e=>gh(e))).filter((e=>!this.data.has(e)));if(0!==i.length){for(const e of i)this.data.set(e,new fh("user"));n.push(new Promise((e=>{hh(i,this.ndk,t).then((e=>{for(const[t,n]of e){let e=this.data.get(t);if(e??=new fh("user"),n){e.readRelays=new Set(wc(n.readRelayUrls)),e.writeRelays=new Set(wc(n.writeRelayUrls));for(const t of e.readRelays)this.ndk.pool.blacklistRelayUrls.has(t)&&e.readRelays.delete(t);for(const t of e.writeRelays)this.ndk.pool.blacklistRelayUrls.has(t)&&e.writeRelays.delete(t);this.data.set(t,e)}}})).finally(e)})))}}return Promise.all(n)}track(e,t){const n=gh(e);t??=function(e){if(e instanceof Jd)return"user";return"kind"}(e);let r=this.data.get(n);return r||(r=new fh(t),e instanceof Jd&&this.trackUsers([e])),r}};function gh(e){return e instanceof Jd?e.pubkey:e}var yh=class{subscriptions;seenEvents=(()=>new Map)();constructor(){this.subscriptions=new Map}add(e){this.subscriptions.set(e.internalId,e),e.onStopped,e.onStopped=()=>{this.subscriptions.delete(e.internalId)},e.on("close",(()=>{this.subscriptions.delete(e.internalId)}))}seenEvent(e,t){const n=this.seenEvents.get(e)||[];n.push(t),this.seenEvents.set(e,n)}dispatchEvent(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&this.seenEvent(e.id,t);const r=this.subscriptions.values(),i=[];for(const s of r)is(s.filters,e)&&i.push(s);for(const s of i)s.eventReceived(e,t,!1,n)}},mh=fa("ndk:active-user");async function bh(e){if(!this.autoConnectUserRelays)return;const t=await async function(e,t){return(await hh([e],t)).get(e)}(e.pubkey,this);if(t){for(const e of t.relays){let t=this.pool.relays.get(e);t||(t=new Tc(e,this.relayAuthDefaultPolicy,this),this.pool.addRelay(t))}return t}}async function wh(e){const t=this.outboxPool||this.pool;t.connectedRelays.length>0?vh.call(this,e):t.once("connect",(()=>{vh.call(this,e)}))}async function vh(e){const t=await bh.call(this,e),n=[{kinds:[10006],authors:[e.pubkey]}];this.autoFetchUserMutelist&&n[0].kinds?.push(1e4);const r=new Map,i=t?t.relaySet:void 0;this.subscribe(n,{subId:"active-user-settings",closeOnEose:!0,relaySet:i},{onEvent:e=>{const t=r.get(e.kind);t&&t.created_at>=e.created_at||r.set(e.kind,e)},onEose:()=>{for(const e of r.values())kh.call(this,e)}})}async function kh(e){10006===e.kind?Eh.call(this,e):1e4===e.kind&&Sh.call(this,e)}function Eh(e){const t=Sd.from(e);for(const n of t.items)this.pool.blacklistRelayUrls.add(n[0]);mh("Added %d relays to relay blacklist",t.items.length)}function Sh(e){const t=Sd.from(e);for(const n of t.items)this.mutedIds.set(n[1],n[0]);mh("Added %d users to mute list",t.items.length)}function xh(e){try{const t=hs.decode(e);return"npub"===t.type?function(e,t){return e.getUser({pubkey:t})}(this,t.data):"nprofile"===t.type?function(e,t){const n=e.getUser({pubkey:t.pubkey});t.relays&&(n.relayUrls=t.relays);return n}(this,t.data):t}catch(t){return null}}function _h(e){if(!e||""===e)return!1;try{return new URL(e),!0}catch(t){return!1}}async function Ch(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{type:"timeout"};const i=this.debug.extend("fetch-event-from-tag"),[s,o,a]=e;i("fetching event from tag",e,n={},r);const l=gc(this,t.pubkey);if(l&&l.size>0){i("fetching event from author relays %o",Array.from(l));const e=Pc.fromRelayUrls(Array.from(l),this),t=await this.fetchEvent(o,n,e);if(t)return t}else i("no author relays found for %s",t.pubkey,t);const u=Oc(this,[{ids:[o]}],this.pool);i("fetching event without relay hint",u);const c=await this.fetchEvent(o,n);if(c)return c;if(a&&""!==a){const e=await this.fetchEvent(o,n,this.pool.getRelay(a,!0,!0,[{ids:[o]}]));if(e)return e}let d;const h=_h(a)?this.pool.getRelay(a,!1,!0,[{ids:[o]}]):void 0,f=new Promise((e=>{this.fetchEvent(o,n,h).then(e)}));if(!_h(a)||"none"===r.type)return f;const p=new Promise((async e=>{const t=r.relaySet,s=r.timeout??1500,a=new Promise((e=>setTimeout(e,s)));if("timeout"===r.type&&await a,d)e(d);else{i("fallback fetch triggered");e(await this.fetchEvent(o,n,t))}}));switch(r.type){case"timeout":return Promise.race([f,p]);case"eose":return d=await f,d||p}}var Ah=class{queue=[];maxConcurrency;processing=(()=>new Set)();promises=(()=>new Map)();constructor(e,t){this.maxConcurrency=t}add(e){if(this.promises.has(e.id))return this.promises.get(e.id);const t=new Promise(((t,n)=>{this.queue.push({...e,func:()=>e.func().then((e=>(t(e),e)),(e=>{throw n(e),e}))}),this.process()}));return this.promises.set(e.id,t),t.finally((()=>{this.promises.delete(e.id),this.processing.delete(e.id),this.process()})),t}process(){if(this.processing.size>=this.maxConcurrency||0===this.queue.length)return;const e=this.queue.shift();e&&!this.processing.has(e.id)&&(this.processing.add(e.id),e.func())}clear(){this.queue=[]}clearProcessing(){this.processing.clear()}clearAll(){this.clear(),this.clearProcessing()}length(){return this.queue.length}},Rh=["wss://purplepag.es/","wss://nos.lol/"],Th=["wss://brb.io/","wss://nostr.mutinywallet.com/"],Nh=class extends ha.EventEmitter{_explicitRelayUrls;blacklistRelayUrls;pool;outboxPool;_signer;_activeUser;cacheAdapter;debug;devWriteRelaySet;outboxTracker;mutedIds;clientName;clientNip89;queuesZapConfig;queuesNip05;asyncSigVerification=!1;initialValidationRatio=1;lowestValidationRatio=.1;validationRatioFn;autoBlacklistInvalidRelays=!1;subManager;_signatureVerificationFunction;_signatureVerificationWorker;signatureVerificationTimeMs=0;publishingFailureHandled=!1;pools=[];relayAuthDefaultPolicy;httpFetch;netDebug;autoConnectUserRelays=!0;autoFetchUserMutelist=!0;walletConfig;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.debug=e.debug||fa("ndk"),this.netDebug=e.netDebug,this._explicitRelayUrls=e.explicitRelayUrls||[],this.blacklistRelayUrls=e.blacklistRelayUrls||Th,this.subManager=new yh,this.pool=new pd(e.explicitRelayUrls||[],[],this),this.pool.name="Main",this.pool.on("relay:auth",(async(e,t)=>{this.relayAuthDefaultPolicy&&await this.relayAuthDefaultPolicy(e,t)})),this.autoConnectUserRelays=e.autoConnectUserRelays??!0,this.autoFetchUserMutelist=e.autoFetchUserMutelist??!0,this.clientName=e.clientName,this.clientNip89=e.clientNip89,this.relayAuthDefaultPolicy=e.relayAuthDefaultPolicy,e.enableOutboxModel&&(this.outboxPool=new pd(e.outboxRelayUrls||Rh,[],this,{debug:this.debug.extend("outbox-pool"),name:"Outbox Pool"}),this.outboxTracker=new ph(this)),this.signer=e.signer,this.cacheAdapter=e.cacheAdapter,this.mutedIds=e.mutedIds||new Map,e.devWriteRelayUrls&&(this.devWriteRelaySet=Pc.fromRelayUrls(e.devWriteRelayUrls,this)),this.queuesZapConfig=new Ah("zaps",3),this.queuesNip05=new Ah("nip05",10),e.signatureVerificationWorker&&(this.signatureVerificationWorker=e.signatureVerificationWorker),e.signatureVerificationFunction&&(this.signatureVerificationFunction=e.signatureVerificationFunction),this.initialValidationRatio=e.initialValidationRatio||1,this.lowestValidationRatio=e.lowestValidationRatio||.1,this.autoBlacklistInvalidRelays=e.autoBlacklistInvalidRelays||!1,this.validationRatioFn=e.validationRatioFn||this.defaultValidationRatioFn;try{this.httpFetch=fetch}catch{}}set explicitRelayUrls(e){this._explicitRelayUrls=e.map(bc),this.pool.relayUrls=e}get explicitRelayUrls(){return this._explicitRelayUrls||[]}set signatureVerificationWorker(e){this._signatureVerificationWorker=e,e?((ed=e).onmessage=e=>{const[t,n]=e.data,r=sd[t];if(r){delete sd[t];for(const e of r.resolves)e(n)}else console.error("No record found for event",t)},this.asyncSigVerification=!0):this.asyncSigVerification=!1}set signatureVerificationFunction(e){this._signatureVerificationFunction=e,this.asyncSigVerification=!!e}get signatureVerificationFunction(){return this._signatureVerificationFunction}addExplicitRelay(e,t){let n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n="string"===typeof e?new Tc(e,t,this):e,this.pool.addRelay(n,r),this.explicitRelayUrls?.push(n.url),n}toJSON(){return{relayCount:this.pool.relays.size}.toString()}get activeUser(){return this._activeUser}set activeUser(e){const t=this._activeUser?.pubkey!==e?.pubkey;this._activeUser=e,e&&t?wh.call(this,e):e||(this.mutedIds=new Map)}get signer(){return this._signer}set signer(e){this._signer=e,e&&this.emit("signer:ready",e),e?.user().then((e=>{e.ndk=this,this.activeUser=e}))}async connect(e){if(this._signer&&this.autoConnectUserRelays&&(this.debug("Attempting to connect to user relays specified by signer %o",await(this._signer.relays?.(this))),this._signer.relays)){(await this._signer.relays(this)).forEach((e=>this.pool.addRelay(e)))}const t=[this.pool.connect(e)];return this.outboxPool&&t.push(this.outboxPool.connect(e)),Promise.allSettled(t).then((()=>{}))}reportInvalidSignature(e,t){this.debug(`Invalid signature detected for event ${e.id}${t?` from relay ${t.url}`:""}`),this.emit("event:invalid-sig",e,t),this.autoBlacklistInvalidRelays&&t&&this.blacklistRelay(t.url)}blacklistRelay(e){if(this.blacklistRelayUrls||(this.blacklistRelayUrls=[]),!this.blacklistRelayUrls.includes(e)){this.blacklistRelayUrls.push(e),this.debug(`Added relay to blacklist: ${e}`);const t=this.pool.getRelay(e,!1,!1);t&&(t.disconnect(),this.debug(`Disconnected from blacklisted relay: ${e}`))}}defaultValidationRatioFn(e,t,n){if(t<10)return this.initialValidationRatio;const r=Math.min(t/100,1),i=this.initialValidationRatio*(1-r)+this.lowestValidationRatio*r;return Math.max(i,this.lowestValidationRatio)}getUser(e){const t=new Jd(e);return t.ndk=this,t}async getUserFromNip05(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Jd.fromNip05(e,this,t)}subscribe(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t?.relaySet,s=r;n instanceof Pc?(console.warn("relaySet is deprecated, use opts.relaySet instead. This will be removed in version v2.14.0"),i=n,s=r):"boolean"!==typeof n&&"object"!==typeof n||(s=n);const o=new Wd(this,e,{relaySet:i,...t});this.subManager.add(o);const a=o.pool;if(o.relaySet)for(const l of o.relaySet.relays)a.useTemporaryRelay(l,void 0,o.filters);if(this.outboxPool&&o.hasAuthorsFilter()){const e=o.filters.filter((e=>e.authors&&e.authors?.length>0)).flatMap((e=>e.authors));this.outboxTracker?.trackUsers(e)}if(s){let e;"object"===typeof s&&(s.onEvent&&o.on("event",s.onEvent),s.onEose&&o.on("eose",s.onEose),s.onEvents&&(e=s.onEvents)),setTimeout((()=>{const t=o.start(!e);t&&t.length>0&&e&&e(t)}),0)}return o}fetchEventFromTag=(()=>Ch.bind(this))();fetchEventSync(e){if(!this.cacheAdapter)throw new Error("Cache adapter not set");let t;t="string"===typeof e?[$d(e)]:e;const n=new Wd(this,t),r=this.cacheAdapter.query(n);if(r instanceof Promise)throw new Error("Cache adapter is async");return r.map((e=>(e.ndk=this,e)))}async fetchEvent(e,t,n){let r,i;if(n instanceof Tc?i=new Pc(new Set([n]),this):n instanceof Pc&&(i=n),!n&&"string"===typeof e&&null===e.match(Vd)){const t=Hd(e,this);t.length>0&&(i=new Pc(new Set(t),this),i=function(e,t){const n=t.connectedRelays();if(!Array.from(e.relays).some((e=>n.map((e=>e.url)).includes(e.url))))for(const r of n)e.addRelay(r);if(0===n.length)for(const r of t.relays.values())e.addRelay(r);return e}(i,this.pool))}if(r="string"===typeof e?[$d(e)]:Array.isArray(e)?e:[e],0===r.length)throw new Error(`Invalid filter: ${JSON.stringify(e)}`);return new Promise((e=>{let n=null;const s={...t||{},closeOnEose:!0};i&&(s.relaySet=i);const o=this.subscribe(r,s,!1),a=setTimeout((()=>{o.stop(),e(n)}),1e4);o.on("event",(t=>{t.ndk=this,t.isReplaceable()?(!n||n.created_at<t.created_at)&&(n=t):(clearTimeout(a),e(t))})),o.on("eose",(()=>{clearTimeout(a),e(n)})),o.start()}))}async fetchEvents(e,t,n){return new Promise((r=>{const i=new Map,s={...t||{},closeOnEose:!0};n&&(s.relaySet=n);const o=this.subscribe(e,s,!1);o.on("event",(e=>{let t;t=e instanceof hd?e:new hd(void 0,e);const n=t.deduplicationKey(),r=i.get(n);var s,o;r&&(o=t,t=(s=r).created_at>o.created_at?s:o),t.ndk=this,i.set(n,t)})),o.on("eose",(()=>{r(new Set(i.values()))})),o.start()}))}assertSigner(){if(!this.signer)throw this.emit("signer:required"),new Error("Signer required")}getEntity=(()=>xh.bind(this))();set wallet(e){e?(this.walletConfig??={},this.walletConfig.lnPay=e?.lnPay?.bind(e),this.walletConfig.cashuPay=e?.cashuPay?.bind(e)):this.walletConfig=void 0}};var Ph=fa("ndk:zapper:ln");var Lh=fa("ndk:zapper");ha.EventEmitter;const Ih=e=>e.type.includes("Write"),Uh=e=>e.type.includes("Read");async function Oh(e,t,n,r){if(0===t.length)return r({status:"error",message:"Error: No relays found in NIP-65 list."}),!1;const i=Pc.fromRelayUrls(t,e);let s=Math.floor(Date.now()/1e3);n.limit=20;let o=!0,a=0;r({status:"fetching_batch",message:`Identified ${t.length} target relays. Starting sync...`,syncedUntilTimestamp:s}),console.log("Starting sync for filter:",n,"on relays:",t);try{for(;;){r({status:"fetching_batch",message:`Fetching max 20 notes before ${new Date(1e3*s).toLocaleString()}... (Total synced: ${a})`,syncedUntilTimestamp:s}),n.until=s;const o=[];try{await new Promise((t=>{e.subscribe(n,{groupable:!0,groupableDelay:1e3,closeOnEose:!0,relaySet:i},{onEvent:e=>{o.push(e)},onEose:()=>{t(o)}})})),console.log(`Fetched ${o.length} events for batch before ${s}`)}catch(l){return console.error("Error fetching event batch with querySync:",l),r({status:"error",message:"Error fetching event batch.",syncedUntilTimestamp:s,errorDetails:l.message||String(l)}),!1}if(0===o.length)return r({status:"complete",message:`Sync complete! No more older events found. Total synced: ${a}`,syncedUntilTimestamp:s}),!0;o.sort(((e,t)=>t.created_at-e.created_at));const c=o.slice(0,20),d=c[c.length-1].created_at;for(const[,t]of e.pool.relays)if(i.relays.has(t)&&!t.connected)return console.warn("disconnected relay: ",t),r({status:"error",message:"stop",errorDetails:`Unable to connect ${t.url}`,syncedUntilTimestamp:s}),!1;for(const n of c){r({status:"syncing_event",message:`Syncing event ${n.id.substring(0,8)}... (created: ${new Date(1e3*n.created_at).toLocaleString()})`,currentEventId:n.id,syncedUntilTimestamp:s}),console.log(`Attempting to sync event ${n.id} to ${t.length} target relays.`);const i=e.subManager.seenEvents.get(n.id),o=i?i.map((e=>e.url)):[],l=t.filter((e=>!o.includes(e))),c=Pc.fromRelayUrls(l,e);if(0!==c.size){console.log(`Publishing event ${n.id.substring(0,8)} to ${c.size} relays: ${l.join(", ")}`);try{await n.publish(c,5e3,c.size),a++}catch(u){let e="Unknown failure reason";if(u instanceof Nc){const t=Array.from(u.errors.entries()).map((e=>{let[t,n]=e;return`${t.url}: ${n.message}`})).join("; ");e=`Failed relays (${u.errors.size}): ${t}`,console.warn("Publish failed. Errors per relay:",u.errors.entries())}else e=u instanceof Error?u.message:String(u);if(!e.includes("deletion")){return r({status:"error",message:`Error publishing event ${n.id}. Stopping sync.`,currentEventId:n.id,syncedUntilTimestamp:s,errorDetails:e}),!1}console.log(`user requested deletion: ${n.id}`)}await new Promise((e=>setTimeout(e,1e4)))}else console.log(`Event ${n.id.substring(0,8)} already exists on all target relays according to seenOn.`),a++}s=d,r({status:"batch_complete",message:`Batch synced. Continuing before ${new Date(1e3*s).toLocaleString()} (Total synced: ${a})`,syncedUntilTimestamp:s}),await new Promise((e=>setTimeout(e,1e4)))}}catch(c){r({status:"error",message:"Unhandled sync error.",syncedUntilTimestamp:s,errorDetails:c.message||String(c)}),console.error("Unhandled sync error:",c),o=!1}return o}function Fh(e){let{outboxRelays:n,decodedHex:r,writeSyncProgress:i,isWriteSyncing:s,handleWriteSync:o,readSyncProgress:a,isReadSyncing:l,handleReadSync:u}=e;const c=(0,t.useMemo)((()=>(null===n||void 0===n?void 0:n.filter(Ih))||[]),[n]),d=(0,t.useMemo)((()=>(null===n||void 0===n?void 0:n.filter(Uh))||[]),[n]),h=c.length>5,f=d.length>5,p=!!r&&c.length>0,g=!!r&&d.length>0;if(!n||!r)return null;const y=()=>(0,ua.jsxs)("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeeba",color:"#856404",padding:"0.75rem 1.25rem",borderRadius:"0.25rem",marginBottom:"1rem"},children:[(0,ua.jsx)("strong",{children:"Relay Limit Notice:"})," To promote efficient network usage as intended by the Outbox Model, syncing is disabled if you have more than"," ",5," write or ",5," read relays configured in your NIP-65 list.",(0,ua.jsx)("br",{}),(0,ua.jsx)("small",{children:"Using too many relays can unnecessarily consume storage, bandwidth, and battery for you and others. Consider refining your relay list."})]});return(0,ua.jsxs)("div",{children:[(0,ua.jsx)("strong",{children:"\ud83d\udce4 NIP-65 Relays Found:"}),(h||f)&&(0,ua.jsx)(y,{}),(0,ua.jsxs)("div",{style:{display:"flex",marginTop:"1rem",gap:"1rem"},children:[(0,ua.jsx)(ca,{title:"Write Relay Sync",targetRelayUrls:c.map((e=>e.url)),canStartSync:p,pubkey:r,syncProgress:i,isSyncing:s||l,onStartSync:o,isDisabledByLimit:h}),(0,ua.jsx)(ca,{title:"Read Relay Sync",targetRelayUrls:d.map((e=>e.url)),canStartSync:g,pubkey:r,syncProgress:a,isSyncing:s||l,onStartSync:u,isDisabledByLimit:f})]})]})}function Mh(e){let{input:t,setInput:n,handleDecode:r,isDecoding:i,isWriteSyncing:s,isReadSyncing:o,decodeError:a}=e;const l=s||o;return(0,ua.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,ua.jsx)("input",{type:"text",placeholder:"npub1... or nprofile1...",value:t,onChange:e=>n(e.target.value),disabled:i||l,style:{width:"calc(100% - 110px)",padding:"0.5rem",fontSize:"1rem",marginRight:"10px"}}),(0,ua.jsx)("button",{onClick:r,disabled:i||l,style:{padding:"0.5rem 1rem"},children:i?"Decoding...":"Decode"}),a&&(0,ua.jsxs)("div",{style:{marginTop:"0.5rem",color:"red"},children:["Error: ",a]})]})}function Dh(e){let{decodedHex:t,profileRelays:n}=e;return t?(0,ua.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,ua.jsx)("strong",{children:"\ud83d\udd13 HEX pubkey:"}),(0,ua.jsx)("pre",{style:{background:"#f0f0f0",padding:"0.5rem",overflowX:"auto",marginBottom:"0.5rem"},children:t}),n&&n.length>0&&(0,ua.jsxs)("div",{children:[(0,ua.jsx)("strong",{children:"\u2139\ufe0f Relays from nprofile:"}),(0,ua.jsx)("ul",{style:{background:"#f8f8f8",padding:"0.5rem 1rem",listStyle:"none",margin:"0.5rem 0",maxHeight:"60px",overflowY:"auto"},children:n.map(((e,t)=>(0,ua.jsx)("li",{style:{wordBreak:"break-all"},children:e},t)))})]})]}):null}const zh=new Nh({explicitRelayUrls:["wss://hbr.coracle.social/","wss://nos.lol/","wss://purplepag.es/","wss://relay.nostr.band/"],enableOutboxModel:!0,autoFetchUserMutelist:!1,autoConnectUserRelays:!0});zh.relayAuthDefaultPolicy=async(e,t)=>{console.log(`AUTH challenge received from ${e.url}:`,t);return!!zh.signer?(console.log(`Policy decides to authenticate with ${e.url}. NDK will use the signer.`),!0):(console.log(`Policy decides *not* to authenticate with ${e.url}.`),!1)};const Bh=function(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(null),[s,o]=(0,t.useState)(null),[a,l]=(0,t.useState)(null),[u,c]=(0,t.useState)(null),[d,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(!1),[g,y]=(0,t.useState)({status:"idle",message:"Ready."}),[m,b]=(0,t.useState)(!1),[w,v]=(0,t.useState)({status:"idle",message:"Ready."}),[k,E]=(0,t.useState)(null);(0,t.useEffect)((()=>{zh.connect().then((()=>console.log("NDK Connected!"))).catch((e=>console.error("NDK Connection Error:",e)))}),[]);const S=(0,t.useCallback)((async()=>{h(!0),c(null),i(null),o(null),l(null),y({status:"idle",message:"Ready."}),v({status:"idle",message:"Ready."});try{const{type:t,data:n}=hs.decode(e.trim());let r,s=null;if("npub"===t)r=n;else{if("nprofile"!==t)throw new Error("Unsupported NIP-19 format. (Only npub or nprofile supported)");r=n.pubkey,s=n.relays||null}i(r),o(s),y((e=>({...e,status:"fetching_relays",message:"Fetching NIP-65..."}))),v((e=>({...e,status:"fetching_relays",message:"Fetching NIP-65..."})));const a=await async function(e,t,n){try{const r={kinds:[pc.RelayList],authors:[t]};let i=null;if(n){const t=Pc.fromRelayUrls(n,e);i=await e.fetchEvent(r,{},t)}else i=await e.fetchEvent(r);if(i&&i.tags){const e=i.tags.filter((e=>"r"===e[0]&&"string"===typeof e[1])).map((e=>({url:da(e[1]),type:e[2]?"read"===e[2]?"\ud83d\udcd6 Read":"\u270d\ufe0f Write":"\ud83d\udcd6\u270d\ufe0f Read/Write"})));return e.length>0?e:null}return console.log(`NIP-65 (Kind ${pc.RelayList}) event not found for pubkey: ${t}`),null}catch(r){return console.error("NDK Outbox relay fetch error:",r),null}}(zh,r,s);if(a){l(a);const e=a.filter(Ih).length,t=a.filter(Uh).length,n=`Found ${a.length} NIP-65 relays (${e} write, ${t} read). Ready.`;y({status:"idle",message:n}),v({status:"idle",message:n})}else{const e="Could not find NIP-65 list. Sync disabled.";y({status:"idle",message:e}),v({status:"idle",message:e}),c("Could not find or fetch NIP-65 relay list (kind:10002).")}}catch(t){c(`Decoding failed: ${t.message||"Invalid NIP-19 string?"}`),y({status:"idle",message:"Decode failed."}),v({status:"idle",message:"Decode failed."})}finally{h(!1)}}),[e]),x=(0,t.useCallback)((async()=>{if(!r||!a||f||m)return;const e=a.filter(Ih).map((e=>e.url));if(0===e.length)return void y({status:"error",message:"No write relays to sync."});p(!0);const t={kinds:[1,6,30023],authors:[r]},n=await Oh(zh,e,t,y);p(!1),n&&"complete"!==g.status?y((e=>({...e,status:"complete",message:"Write sync finished!"}))):n||"error"===g.status||y((e=>({...e,status:"error",message:"Write sync stopped.",errorDetails:e.errorDetails||"Unknown reason."})))}),[r,a,f,m,g.status]),_=(0,t.useCallback)((async()=>{if(!r||!a||f||m)return;const e=a.filter(Uh).map((e=>e.url));if(0===e.length)return void v({status:"error",message:"No read relays to sync."});b(!0);const t={"#p":[r],kinds:[1,6,7,9735]},n=await Oh(zh,e,t,v);b(!1),n&&"complete"!==w.status?v((e=>({...e,status:"complete",message:"Read sync finished!"}))):n||"error"===w.status||v((e=>({...e,status:"error",message:"Read sync stopped.",errorDetails:e.errorDetails||"Unknown reason."})))}),[r,a,f,m,w.status]),C=(0,t.useCallback)((async()=>{if(!window.nostr)return console.error("NIP-07 Extension not found on login attempt."),void alert("NIP-07 compatible extension (like Alby, nos2x) not found. Please install one and refresh the page.");try{const e=new uh;zh.signer=e;const t=await e.user();n(t.nprofile),E(t),t.ndk=zh}catch(e){console.error("NIP-07 Login failed:",e),alert(`Login failed: ${e instanceof Error?e.message:String(e)}`),zh.signer=void 0,E(null)}}),[]);return(0,ua.jsxs)("div",{style:{padding:"2rem",fontFamily:"sans-serif",maxWidth:"800px",margin:"auto"},children:[(0,ua.jsx)("h1",{children:"Nostr Event Synchronizer"}),(0,ua.jsx)("div",{style:{marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #eee"},children:k?(0,ua.jsxs)("div",{children:["Logged in as:"," ",(0,ua.jsx)("strong",{children:hs.npubEncode(k.pubkey)})]}):(0,ua.jsx)("button",{onClick:C,children:"Login with Extension (NIP-07)"})}),(0,ua.jsx)("p",{children:"Syncs past events to your designated write and read relays based on NIP-65."}),(0,ua.jsx)(Mh,{input:e,setInput:n,handleDecode:S,isDecoding:d,isWriteSyncing:f,isReadSyncing:m,decodeError:u}),(0,ua.jsx)(Dh,{decodedHex:r,profileRelays:s}),(0,ua.jsx)(Fh,{outboxRelays:a,decodedHex:r,writeSyncProgress:g,isWriteSyncing:f,handleWriteSync:x,readSyncProgress:w,isReadSyncing:m,handleReadSync:_}),!a&&r&&!d&&!u&&(0,ua.jsx)("div",{style:{marginTop:"1rem",color:"orange"},children:"Could not find or fetch NIP-65 relay list (kind:10002). Sync is not possible."})]})};n.createRoot(document.getElementById("root")).render((0,ua.jsx)(t.StrictMode,{children:(0,ua.jsx)(Bh,{})}))})()})();
//# sourceMappingURL=main.e7f9e690.js.map