var Ly=Object.defineProperty;var Hy=(r,n,s)=>n in r?Ly(r,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[n]=s;var A=(r,n,s)=>Hy(r,typeof n!="symbol"?n+"":n,s);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(u){if(u.ep)return;u.ep=!0;const c=s(u);fetch(u.href,c)}})();function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(o,u,c){var h=null;if(c!==void 0&&(h=""+c),u.key!==void 0&&(h=""+u.key),"key"in u){c={};for(var p in u)p!=="key"&&(c[p]=u[p])}else c=u;return u=c.ref,{$$typeof:r,type:o,key:h,ref:u!==void 0?u:null,props:c}}return reactJsxRuntime_production.Fragment=n,reactJsxRuntime_production.jsx=s,reactJsxRuntime_production.jsxs=s,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function _(k){return k===null||typeof k!="object"?null:(k=b&&k[b]||k["@@iterator"],typeof k=="function"?k:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,x={};function R(k,D,W){this.props=k,this.context=D,this.refs=x,this.updater=W||C}R.prototype.isReactComponent={},R.prototype.setState=function(k,D){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,D,"setState")},R.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function O(){}O.prototype=R.prototype;function P(k,D,W){this.props=k,this.context=D,this.refs=x,this.updater=W||C}var I=P.prototype=new O;I.constructor=P,z(I,R.prototype),I.isPureReactComponent=!0;var te=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function N(k,D,W,ie,le,ce){return W=ce.ref,{$$typeof:r,type:k,key:D,ref:W!==void 0?W:null,props:ce}}function V(k,D){return N(k.type,D,void 0,void 0,void 0,k.props)}function J(k){return typeof k=="object"&&k!==null&&k.$$typeof===r}function ae(k){var D={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(W){return D[W]})}var M=/\/+/g;function H(k,D){return typeof k=="object"&&k!==null&&k.key!=null?ae(""+k.key):D.toString(36)}function G(){}function Z(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(G,G):(k.status="pending",k.then(function(D){k.status==="pending"&&(k.status="fulfilled",k.value=D)},function(D){k.status==="pending"&&(k.status="rejected",k.reason=D)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function U(k,D,W,ie,le){var ce=typeof k;(ce==="undefined"||ce==="boolean")&&(k=null);var ue=!1;if(k===null)ue=!0;else switch(ce){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(k.$$typeof){case r:case n:ue=!0;break;case v:return ue=k._init,U(ue(k._payload),D,W,ie,le)}}if(ue)return le=le(k),ue=ie===""?"."+H(k,0):ie,te(le)?(W="",ue!=null&&(W=ue.replace(M,"$&/")+"/"),U(le,D,W,"",function($e){return $e})):le!=null&&(J(le)&&(le=V(le,W+(le.key==null||k&&k.key===le.key?"":(""+le.key).replace(M,"$&/")+"/")+ue)),D.push(le)),1;ue=0;var we=ie===""?".":ie+":";if(te(k))for(var de=0;de<k.length;de++)ie=k[de],ce=we+H(ie,de),ue+=U(ie,D,W,ce,le);else if(de=_(k),typeof de=="function")for(k=de.call(k),de=0;!(ie=k.next()).done;)ie=ie.value,ce=we+H(ie,de++),ue+=U(ie,D,W,ce,le);else if(ce==="object"){if(typeof k.then=="function")return U(Z(k),D,W,ie,le);throw D=String(k),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return ue}function S(k,D,W){if(k==null)return k;var ie=[],le=0;return U(k,ie,"","",function(ce){return D.call(W,ce,le++)}),ie}function L(k){if(k._status===-1){var D=k._result;D=D(),D.then(function(W){(k._status===0||k._status===-1)&&(k._status=1,k._result=W)},function(W){(k._status===0||k._status===-1)&&(k._status=2,k._result=W)}),k._status===-1&&(k._status=0,k._result=D)}if(k._status===1)return k._result.default;throw k._result}var K=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function se(){}return react_production.Children={map:S,forEach:function(k,D,W){S(k,function(){D.apply(this,arguments)},W)},count:function(k){var D=0;return S(k,function(){D++}),D},toArray:function(k){return S(k,function(D){return D})||[]},only:function(k){if(!J(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},react_production.Component=R,react_production.Fragment=s,react_production.Profiler=u,react_production.PureComponent=P,react_production.StrictMode=o,react_production.Suspense=g,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(k){return T.H.useMemoCache(k)}},react_production.cache=function(k){return function(){return k.apply(null,arguments)}},react_production.cloneElement=function(k,D,W){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ie=z({},k.props),le=k.key,ce=void 0;if(D!=null)for(ue in D.ref!==void 0&&(ce=void 0),D.key!==void 0&&(le=""+D.key),D)!$.call(D,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&D.ref===void 0||(ie[ue]=D[ue]);var ue=arguments.length-2;if(ue===1)ie.children=W;else if(1<ue){for(var we=Array(ue),de=0;de<ue;de++)we[de]=arguments[de+2];ie.children=we}return N(k.type,le,void 0,void 0,ce,ie)},react_production.createContext=function(k){return k={$$typeof:h,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:c,_context:k},k},react_production.createElement=function(k,D,W){var ie,le={},ce=null;if(D!=null)for(ie in D.key!==void 0&&(ce=""+D.key),D)$.call(D,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(le[ie]=D[ie]);var ue=arguments.length-2;if(ue===1)le.children=W;else if(1<ue){for(var we=Array(ue),de=0;de<ue;de++)we[de]=arguments[de+2];le.children=we}if(k&&k.defaultProps)for(ie in ue=k.defaultProps,ue)le[ie]===void 0&&(le[ie]=ue[ie]);return N(k,ce,void 0,void 0,null,le)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(k){return{$$typeof:p,render:k}},react_production.isValidElement=J,react_production.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:L}},react_production.memo=function(k,D){return{$$typeof:m,type:k,compare:D===void 0?null:D}},react_production.startTransition=function(k){var D=T.T,W={};T.T=W;try{var ie=k(),le=T.S;le!==null&&le(W,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(se,K)}catch(ce){K(ce)}finally{T.T=D}},react_production.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},react_production.use=function(k){return T.H.use(k)},react_production.useActionState=function(k,D,W){return T.H.useActionState(k,D,W)},react_production.useCallback=function(k,D){return T.H.useCallback(k,D)},react_production.useContext=function(k){return T.H.useContext(k)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(k,D){return T.H.useDeferredValue(k,D)},react_production.useEffect=function(k,D,W){var ie=T.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(k,D)},react_production.useId=function(){return T.H.useId()},react_production.useImperativeHandle=function(k,D,W){return T.H.useImperativeHandle(k,D,W)},react_production.useInsertionEffect=function(k,D){return T.H.useInsertionEffect(k,D)},react_production.useLayoutEffect=function(k,D){return T.H.useLayoutEffect(k,D)},react_production.useMemo=function(k,D){return T.H.useMemo(k,D)},react_production.useOptimistic=function(k,D){return T.H.useOptimistic(k,D)},react_production.useReducer=function(k,D,W){return T.H.useReducer(k,D,W)},react_production.useRef=function(k){return T.H.useRef(k)},react_production.useState=function(k){return T.H.useState(k)},react_production.useSyncExternalStore=function(k,D,W){return T.H.useSyncExternalStore(k,D,W)},react_production.useTransition=function(){return T.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact(),client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(r){function n(S,L){var K=S.length;S.push(L);e:for(;0<K;){var se=K-1>>>1,k=S[se];if(0<u(k,L))S[se]=L,S[K]=k,K=se;else break e}}function s(S){return S.length===0?null:S[0]}function o(S){if(S.length===0)return null;var L=S[0],K=S.pop();if(K!==L){S[0]=K;e:for(var se=0,k=S.length,D=k>>>1;se<D;){var W=2*(se+1)-1,ie=S[W],le=W+1,ce=S[le];if(0>u(ie,K))le<k&&0>u(ce,ie)?(S[se]=ce,S[le]=K,se=le):(S[se]=ie,S[W]=K,se=W);else if(le<k&&0>u(ce,K))S[se]=ce,S[le]=K,se=le;else break e}}return L}function u(S,L){var K=S.sortIndex-L.sortIndex;return K!==0?K:S.id-L.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();r.unstable_now=function(){return h.now()-p}}var g=[],m=[],v=1,b=null,_=3,C=!1,z=!1,x=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function te(S){for(var L=s(m);L!==null;){if(L.callback===null)o(m);else if(L.startTime<=S)o(m),L.sortIndex=L.expirationTime,n(g,L);else break;L=s(m)}}function T(S){if(x=!1,te(S),!z)if(s(g)!==null)z=!0,$||($=!0,H());else{var L=s(m);L!==null&&U(T,L.startTime-S)}}var $=!1,N=-1,V=5,J=-1;function ae(){return R?!0:!(r.unstable_now()-J<V)}function M(){if(R=!1,$){var S=r.unstable_now();J=S;var L=!0;try{e:{z=!1,x&&(x=!1,P(N),N=-1),C=!0;var K=_;try{t:{for(te(S),b=s(g);b!==null&&!(b.expirationTime>S&&ae());){var se=b.callback;if(typeof se=="function"){b.callback=null,_=b.priorityLevel;var k=se(b.expirationTime<=S);if(S=r.unstable_now(),typeof k=="function"){b.callback=k,te(S),L=!0;break t}b===s(g)&&o(g),te(S)}else o(g);b=s(g)}if(b!==null)L=!0;else{var D=s(m);D!==null&&U(T,D.startTime-S),L=!1}}break e}finally{b=null,_=K,C=!1}L=void 0}}finally{L?H():$=!1}}}var H;if(typeof I=="function")H=function(){I(M)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=M,H=function(){Z.postMessage(null)}}else H=function(){O(M,0)};function U(S,L){N=O(function(){S(r.unstable_now())},L)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(S){S.callback=null},r.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<S?Math.floor(1e3/S):5},r.unstable_getCurrentPriorityLevel=function(){return _},r.unstable_next=function(S){switch(_){case 1:case 2:case 3:var L=3;break;default:L=_}var K=_;_=L;try{return S()}finally{_=K}},r.unstable_requestPaint=function(){R=!0},r.unstable_runWithPriority=function(S,L){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var K=_;_=S;try{return L()}finally{_=K}},r.unstable_scheduleCallback=function(S,L,K){var se=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?se+K:se):K=se,S){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=K+k,S={id:v++,callback:L,priorityLevel:S,startTime:K,expirationTime:k,sortIndex:-1},K>se?(S.sortIndex=K,n(m,S),s(g)===null&&S===s(m)&&(x?(P(N),N=-1):x=!0,U(T,K-se))):(S.sortIndex=k,n(g,S),z||C||(z=!0,$||($=!0,H()))),S},r.unstable_shouldYield=ae,r.unstable_wrapCallback=function(S){var L=_;return function(){var K=_;_=L;try{return S.apply(this,arguments)}finally{_=K}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var r=requireReact();function n(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},u=Symbol.for("react.portal");function c(g,m,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:g,containerInfo:m,implementation:v}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,reactDom_production.createPortal=function(g,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return c(g,m,null,v)},reactDom_production.flushSync=function(g){var m=h.T,v=o.p;try{if(h.T=null,o.p=2,g)return g()}finally{h.T=m,o.p=v,o.d.f()}},reactDom_production.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(g,m))},reactDom_production.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},reactDom_production.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var v=m.as,b=p(v,m.crossOrigin),_=typeof m.integrity=="string"?m.integrity:void 0,C=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:_,fetchPriority:C}):v==="script"&&o.d.X(g,{crossOrigin:b,integrity:_,fetchPriority:C,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},reactDom_production.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(g)},reactDom_production.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,b=p(v,m.crossOrigin);o.d.L(g,v,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},reactDom_production.preloadModule=function(g,m){if(typeof g=="string")if(m){var v=p(m.as,m.crossOrigin);o.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(g)},reactDom_production.requestFormReset=function(g){o.d.r(g)},reactDom_production.unstable_batchedUpdates=function(g,m){return g(m)},reactDom_production.useFormState=function(g,m,v){return h.H.useFormState(g,m,v)},reactDom_production.useFormStatus=function(){return h.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var r=requireScheduler(),n=requireReact(),s=requireReactDom();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(c(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,l=t;;){var f=a.return;if(f===null)break;var y=f.alternate;if(y===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===a)return p(f),e;if(y===l)return p(f),t;y=y.sibling}throw Error(o(188))}if(a.return!==l.return)a=f,l=y;else{for(var E=!1,w=f.child;w;){if(w===a){E=!0,a=f,l=y;break}if(w===l){E=!0,l=f,a=y;break}w=w.sibling}if(!E){for(w=y.child;w;){if(w===a){E=!0,a=y,l=f;break}if(w===l){E=!0,l=y,a=f;break}w=w.sibling}if(!E)throw Error(o(189))}}if(a.alternate!==l)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function m(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=m(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),I=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=M&&e[M]||e["@@iterator"],typeof e=="function"?e:null)}var G=Symbol.for("react.client.reference");function Z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===G?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case R:return"Profiler";case x:return"StrictMode";case T:return"Suspense";case $:return"SuspenseList";case J:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case I:return(e.displayName||"Context")+".Provider";case P:return(e._context.displayName||"Context")+".Consumer";case te:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case N:return t=e.displayName||null,t!==null?t:Z(e.type)||"Memo";case V:t=e._payload,e=e._init;try{return Z(e(t))}catch{}}return null}var U=Array.isArray,S=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},se=[],k=-1;function D(e){return{current:e}}function W(e){0>k||(e.current=se[k],se[k]=null,k--)}function ie(e,t){k++,se[k]=e.current,e.current=t}var le=D(null),ce=D(null),ue=D(null),we=D(null);function de(e,t){switch(ie(ue,t),ie(ce,e),ie(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Vf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Vf(t),e=jf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}W(le),ie(le,e)}function $e(){W(le),W(ce),W(ue)}function rt(e){e.memoizedState!==null&&ie(we,e);var t=le.current,a=jf(t,e.type);t!==a&&(ie(ce,e),ie(le,a))}function ft(e){ce.current===e&&(W(le),W(ce)),we.current===e&&(W(we),Hr._currentValue=K)}var Fe=Object.prototype.hasOwnProperty,ze=r.unstable_scheduleCallback,et=r.unstable_cancelCallback,Bt=r.unstable_shouldYield,Gr=r.unstable_requestPaint,Ot=r.unstable_now,mh=r.unstable_getCurrentPriorityLevel,El=r.unstable_ImmediatePriority,wl=r.unstable_UserBlockingPriority,Ir=r.unstable_NormalPriority,bh=r.unstable_LowPriority,_l=r.unstable_IdlePriority,vh=r.log,Eh=r.unstable_setDisableYieldValue,Fi=null,ht=null;function rn(e){if(typeof vh=="function"&&Eh(e),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Fi,e)}catch{}}var dt=Math.clz32?Math.clz32:Sh,wh=Math.log,_h=Math.LN2;function Sh(e){return e>>>=0,e===0?32:31-(wh(e)/_h|0)|0}var Yr=256,Fr=4194304;function zn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Zr(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,y=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var w=l&134217727;return w!==0?(l=w&~y,l!==0?f=zn(l):(E&=w,E!==0?f=zn(E):a||(a=w&~e,a!==0&&(f=zn(a))))):(w=l&~y,w!==0?f=zn(w):E!==0?f=zn(E):a||(a=l&~e,a!==0&&(f=zn(a)))),f===0?0:t!==0&&t!==f&&(t&y)===0&&(y=f&-f,a=t&-t,y>=a||y===32&&(a&4194048)!==0)?t:f}function Zi(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function xh(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sl(){var e=Yr;return Yr<<=1,(Yr&4194048)===0&&(Yr=256),e}function xl(){var e=Fr;return Fr<<=1,(Fr&62914560)===0&&(Fr=4194304),e}function aa(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Pi(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Rh(e,t,a,l,f,y){var E=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var w=e.entanglements,B=e.expirationTimes,F=e.hiddenUpdates;for(a=E&~a;0<a;){var ne=31-dt(a),oe=1<<ne;w[ne]=0,B[ne]=-1;var X=F[ne];if(X!==null)for(F[ne]=null,ne=0;ne<X.length;ne++){var Q=X[ne];Q!==null&&(Q.lane&=-536870913)}a&=~oe}l!==0&&Rl(e,l,0),y!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=y&~(E&~t))}function Rl(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-dt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Tl(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-dt(a),f=1<<l;f&t|e[l]&t&&(e[l]|=t),a&=~f}}function oa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function la(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Al(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:oh(e.type))}function Th(e,t){var a=L.p;try{return L.p=e,t()}finally{L.p=a}}var sn=Math.random().toString(36).slice(2),tt="__reactFiber$"+sn,st="__reactProps$"+sn,oi="__reactContainer$"+sn,ua="__reactEvents$"+sn,Ah="__reactListeners$"+sn,kh="__reactHandles$"+sn,kl="__reactResources$"+sn,Xi="__reactMarker$"+sn;function ca(e){delete e[tt],delete e[st],delete e[ua],delete e[Ah],delete e[kh]}function li(e){var t=e[tt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[oi]||a[tt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Ff(e);e!==null;){if(a=e[tt])return a;e=Ff(e)}return t}e=a,a=e.parentNode}return null}function ui(e){if(e=e[tt]||e[oi]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Qi(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function ci(e){var t=e[kl];return t||(t=e[kl]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[Xi]=!0}var Cl=new Set,Bl={};function qn(e,t){fi(e,t),fi(e+"Capture",t)}function fi(e,t){for(Bl[e]=t,e=0;e<t.length;e++)Cl.add(t[e])}var Ch=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ul={},$l={};function Bh(e){return Fe.call($l,e)?!0:Fe.call(Ul,e)?!1:Ch.test(e)?$l[e]=!0:(Ul[e]=!0,!1)}function Pr(e,t,a){if(Bh(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function Xr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Vt(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}var fa,Nl;function hi(e){if(fa===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);fa=t&&t[1]||"",Nl=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fa+e+Nl}var ha=!1;function da(e,t){if(!e||ha)return"";ha=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Q){var X=Q}Reflect.construct(e,[],oe)}else{try{oe.call()}catch(Q){X=Q}e.call(oe.prototype)}}else{try{throw Error()}catch(Q){X=Q}(oe=e())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Q){if(Q&&X&&typeof Q.stack=="string")return[Q.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=l.DetermineComponentFrameRoot(),E=y[0],w=y[1];if(E&&w){var B=E.split(`
`),F=w.split(`
`);for(f=l=0;l<B.length&&!B[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===B.length||f===F.length)for(l=B.length-1,f=F.length-1;1<=l&&0<=f&&B[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(B[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||B[l]!==F[f]){var ne=`
`+B[l].replace(" at new "," at ");return e.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",e.displayName)),ne}while(1<=l&&0<=f);break}}}finally{ha=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?hi(a):""}function Uh(e){switch(e.tag){case 26:case 27:case 5:return hi(e.type);case 16:return hi("Lazy");case 13:return hi("Suspense");case 19:return hi("SuspenseList");case 0:case 15:return da(e.type,!1);case 11:return da(e.type.render,!1);case 1:return da(e.type,!0);case 31:return hi("Activity");default:return""}}function Ml(e){try{var t="";do t+=Uh(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ol(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $h(e){var t=Ol(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,y=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,y.call(this,E)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qr(e){e._valueTracker||(e._valueTracker=$h(e))}function Dl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=Ol(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function Wr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Nh=/[\n"\\]/g;function _t(e){return e.replace(Nh,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ya(e,t,a,l,f,y,E,w){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),t!=null?E==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+wt(t)):e.value!==""+wt(t)&&(e.value=""+wt(t)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),t!=null?pa(e,E,wt(t)):a!=null?pa(e,E,wt(a)):l!=null&&e.removeAttribute("value"),f==null&&y!=null&&(e.defaultChecked=!!y),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.name=""+wt(w):e.removeAttribute("name")}function Ll(e,t,a,l,f,y,E,w){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.type=y),t!=null||a!=null){if(!(y!=="submit"&&y!=="reset"||t!=null))return;a=a!=null?""+wt(a):"",t=t!=null?""+wt(t):a,w||t===e.value||(e.value=t),e.defaultValue=t}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=w?e.checked:!!l,e.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E)}function pa(e,t,a){t==="number"&&Wr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function di(e,t,a,l){if(e=e.options,t){t={};for(var f=0;f<a.length;f++)t["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=t.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+wt(a),t=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}t!==null||e[f].disabled||(t=e[f])}t!==null&&(t.selected=!0)}}function Hl(e,t,a){if(t!=null&&(t=""+wt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+wt(a):""}function zl(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(o(92));if(U(l)){if(1<l.length)throw Error(o(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=wt(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function yi(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Mh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ql(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Mh.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Vl(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in t)l=t[f],t.hasOwnProperty(f)&&a[f]!==l&&ql(e,f,l)}else for(var y in t)t.hasOwnProperty(y)&&ql(e,y,t[y])}function ga(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jr(e){return Dh.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ma=null;function ba(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pi=null,gi=null;function jl(e){var t=ui(e);if(t&&(e=t.stateNode)){var a=e[st]||null;e:switch(e=t.stateNode,t.type){case"input":if(ya(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_t(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var f=l[st]||null;if(!f)throw Error(o(90));ya(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&Dl(l)}break e;case"textarea":Hl(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&di(e,!!a.multiple,t,!1)}}}var va=!1;function Gl(e,t,a){if(va)return e(t,a);va=!0;try{var l=e(t);return l}finally{if(va=!1,(pi!==null||gi!==null)&&(Hs(),pi&&(t=pi,e=gi,gi=pi=null,jl(t),e)))for(t=0;t<e.length;t++)jl(e[t])}}function Wi(e,t){var a=e.stateNode;if(a===null)return null;var l=a[st]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var jt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=!1;if(jt)try{var Ji={};Object.defineProperty(Ji,"passive",{get:function(){Ea=!0}}),window.addEventListener("test",Ji,Ji),window.removeEventListener("test",Ji,Ji)}catch{Ea=!1}var an=null,wa=null,Kr=null;function Il(){if(Kr)return Kr;var e,t=wa,a=t.length,l,f="value"in an?an.value:an.textContent,y=f.length;for(e=0;e<a&&t[e]===f[e];e++);var E=a-e;for(l=1;l<=E&&t[a-l]===f[y-l];l++);return Kr=f.slice(e,1<l?1-l:void 0)}function es(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ts(){return!0}function Yl(){return!1}function at(e){function t(a,l,f,y,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(a=e[w],this[w]=a?a(y):y[w]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ts:Yl,this.isPropagationStopped=Yl,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),t}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ns=at(Vn),Ki=v({},Vn,{view:0,detail:0}),Lh=at(Ki),Sa,xa,er,is=v({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==er&&(er&&e.type==="mousemove"?(Sa=e.screenX-er.screenX,xa=e.screenY-er.screenY):xa=Sa=0,er=e),Sa)},movementY:function(e){return"movementY"in e?e.movementY:xa}}),Fl=at(is),Hh=v({},is,{dataTransfer:0}),zh=at(Hh),qh=v({},Ki,{relatedTarget:0}),Ra=at(qh),Vh=v({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),jh=at(Vh),Gh=v({},Vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ih=at(Gh),Yh=v({},Vn,{data:0}),Zl=at(Yh),Fh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ph={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ph[e])?!!t[e]:!1}function Ta(){return Xh}var Qh=v({},Ki,{key:function(e){if(e.key){var t=Fh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=es(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(e){return e.type==="keypress"?es(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?es(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wh=at(Qh),Jh=v({},is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pl=at(Jh),Kh=v({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),ed=at(Kh),td=v({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),nd=at(td),id=v({},is,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rd=at(id),sd=v({},Vn,{newState:0,oldState:0}),ad=at(sd),od=[9,13,27,32],Aa=jt&&"CompositionEvent"in window,tr=null;jt&&"documentMode"in document&&(tr=document.documentMode);var ld=jt&&"TextEvent"in window&&!tr,Xl=jt&&(!Aa||tr&&8<tr&&11>=tr),Ql=" ",Wl=!1;function Jl(e,t){switch(e){case"keyup":return od.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kl(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mi=!1;function ud(e,t){switch(e){case"compositionend":return Kl(t);case"keypress":return t.which!==32?null:(Wl=!0,Ql);case"textInput":return e=t.data,e===Ql&&Wl?null:e;default:return null}}function cd(e,t){if(mi)return e==="compositionend"||!Aa&&Jl(e,t)?(e=Il(),Kr=wa=an=null,mi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xl&&t.locale!=="ko"?null:t.data;default:return null}}var fd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fd[e.type]:t==="textarea"}function tu(e,t,a,l){pi?gi?gi.push(l):gi=[l]:pi=l,t=Is(t,"onChange"),0<t.length&&(a=new ns("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var nr=null,ir=null;function hd(e){Df(e,0)}function rs(e){var t=Qi(e);if(Dl(t))return e}function nu(e,t){if(e==="change")return t}var iu=!1;if(jt){var ka;if(jt){var Ca="oninput"in document;if(!Ca){var ru=document.createElement("div");ru.setAttribute("oninput","return;"),Ca=typeof ru.oninput=="function"}ka=Ca}else ka=!1;iu=ka&&(!document.documentMode||9<document.documentMode)}function su(){nr&&(nr.detachEvent("onpropertychange",au),ir=nr=null)}function au(e){if(e.propertyName==="value"&&rs(ir)){var t=[];tu(t,ir,e,ba(e)),Gl(hd,t)}}function dd(e,t,a){e==="focusin"?(su(),nr=t,ir=a,nr.attachEvent("onpropertychange",au)):e==="focusout"&&su()}function yd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rs(ir)}function pd(e,t){if(e==="click")return rs(t)}function gd(e,t){if(e==="input"||e==="change")return rs(t)}function md(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:md;function rr(e,t){if(yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Fe.call(t,f)||!yt(e[f],t[f]))return!1}return!0}function ou(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lu(e,t){var a=ou(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ou(a)}}function uu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Wr(e.document)}return t}function Ba(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var bd=jt&&"documentMode"in document&&11>=document.documentMode,bi=null,Ua=null,sr=null,$a=!1;function fu(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$a||bi==null||bi!==Wr(l)||(l=bi,"selectionStart"in l&&Ba(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),sr&&rr(sr,l)||(sr=l,l=Is(Ua,"onSelect"),0<l.length&&(t=new ns("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=bi)))}function jn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var vi={animationend:jn("Animation","AnimationEnd"),animationiteration:jn("Animation","AnimationIteration"),animationstart:jn("Animation","AnimationStart"),transitionrun:jn("Transition","TransitionRun"),transitionstart:jn("Transition","TransitionStart"),transitioncancel:jn("Transition","TransitionCancel"),transitionend:jn("Transition","TransitionEnd")},Na={},hu={};jt&&(hu=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function Gn(e){if(Na[e])return Na[e];if(!vi[e])return e;var t=vi[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in hu)return Na[e]=t[a];return e}var du=Gn("animationend"),yu=Gn("animationiteration"),pu=Gn("animationstart"),vd=Gn("transitionrun"),Ed=Gn("transitionstart"),wd=Gn("transitioncancel"),gu=Gn("transitionend"),mu=new Map,Ma="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ma.push("scrollEnd");function Ut(e,t){mu.set(e,t),qn(t,[e])}var bu=new WeakMap;function St(e,t){if(typeof e=="object"&&e!==null){var a=bu.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ml(t)},bu.set(e,t),t)}return{value:e,source:t,stack:Ml(t)}}var xt=[],Ei=0,Oa=0;function ss(){for(var e=Ei,t=Oa=Ei=0;t<e;){var a=xt[t];xt[t++]=null;var l=xt[t];xt[t++]=null;var f=xt[t];xt[t++]=null;var y=xt[t];if(xt[t++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}y!==0&&vu(a,f,y)}}function as(e,t,a,l){xt[Ei++]=e,xt[Ei++]=t,xt[Ei++]=a,xt[Ei++]=l,Oa|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Da(e,t,a,l){return as(e,t,a,l),os(e)}function wi(e,t){return as(e,null,null,t),os(e)}function vu(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,y=e.return;y!==null;)y.childLanes|=a,l=y.alternate,l!==null&&(l.childLanes|=a),y.tag===22&&(e=y.stateNode,e===null||e._visibility&1||(f=!0)),e=y,y=y.return;return e.tag===3?(y=e.stateNode,f&&t!==null&&(f=31-dt(a),e=y.hiddenUpdates,l=e[f],l===null?e[f]=[t]:l.push(t),t.lane=a|536870912),y):null}function os(e){if(50<Br)throw Br=0,Go=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _i={};function _d(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,a,l){return new _d(e,t,a,l)}function La(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Gt(e,t){var a=e.alternate;return a===null?(a=pt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Eu(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ls(e,t,a,l,f,y){var E=0;if(l=e,typeof e=="function")La(e)&&(E=1);else if(typeof e=="string")E=xy(e,a,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case J:return e=pt(31,a,t,f),e.elementType=J,e.lanes=y,e;case z:return In(a.children,f,y,t);case x:E=8,f|=24;break;case R:return e=pt(12,a,t,f|2),e.elementType=R,e.lanes=y,e;case T:return e=pt(13,a,t,f),e.elementType=T,e.lanes=y,e;case $:return e=pt(19,a,t,f),e.elementType=$,e.lanes=y,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case I:E=10;break e;case P:E=9;break e;case te:E=11;break e;case N:E=14;break e;case V:E=16,l=null;break e}E=29,a=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=pt(E,a,t,f),t.elementType=e,t.type=l,t.lanes=y,t}function In(e,t,a,l){return e=pt(7,e,l,t),e.lanes=a,e}function Ha(e,t,a){return e=pt(6,e,null,t),e.lanes=a,e}function za(e,t,a){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Si=[],xi=0,us=null,cs=0,Rt=[],Tt=0,Yn=null,It=1,Yt="";function Fn(e,t){Si[xi++]=cs,Si[xi++]=us,us=e,cs=t}function wu(e,t,a){Rt[Tt++]=It,Rt[Tt++]=Yt,Rt[Tt++]=Yn,Yn=e;var l=It;e=Yt;var f=32-dt(l)-1;l&=~(1<<f),a+=1;var y=32-dt(t)+f;if(30<y){var E=f-f%5;y=(l&(1<<E)-1).toString(32),l>>=E,f-=E,It=1<<32-dt(t)+f|a<<f|l,Yt=y+e}else It=1<<y|a<<f|l,Yt=e}function qa(e){e.return!==null&&(Fn(e,1),wu(e,1,0))}function Va(e){for(;e===us;)us=Si[--xi],Si[xi]=null,cs=Si[--xi],Si[xi]=null;for(;e===Yn;)Yn=Rt[--Tt],Rt[Tt]=null,Yt=Rt[--Tt],Rt[Tt]=null,It=Rt[--Tt],Rt[Tt]=null}var it=null,Le=null,Te=!1,Zn=null,Dt=!1,ja=Error(o(519));function Pn(e){var t=Error(o(418,""));throw lr(St(t,e)),ja}function _u(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[tt]=e,t[st]=l,a){case"dialog":Se("cancel",t),Se("close",t);break;case"iframe":case"object":case"embed":Se("load",t);break;case"video":case"audio":for(a=0;a<$r.length;a++)Se($r[a],t);break;case"source":Se("error",t);break;case"img":case"image":case"link":Se("error",t),Se("load",t);break;case"details":Se("toggle",t);break;case"input":Se("invalid",t),Ll(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Qr(t);break;case"select":Se("invalid",t);break;case"textarea":Se("invalid",t),zl(t,l.value,l.defaultValue,l.children),Qr(t)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||qf(t.textContent,a)?(l.popover!=null&&(Se("beforetoggle",t),Se("toggle",t)),l.onScroll!=null&&Se("scroll",t),l.onScrollEnd!=null&&Se("scrollend",t),l.onClick!=null&&(t.onclick=Ys),t=!0):t=!1,t||Pn(e)}function Su(e){for(it=e.return;it;)switch(it.tag){case 5:case 13:Dt=!1;return;case 27:case 3:Dt=!0;return;default:it=it.return}}function ar(e){if(e!==it)return!1;if(!Te)return Su(e),Te=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||sl(e.type,e.memoizedProps)),a=!a),a&&Le&&Pn(e),Su(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Le=Nt(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Le=null}}else t===27?(t=Le,_n(e.type)?(e=ul,ul=null,Le=e):Le=t):Le=it?Nt(e.stateNode.nextSibling):null;return!0}function or(){Le=it=null,Te=!1}function xu(){var e=Zn;return e!==null&&(ct===null?ct=e:ct.push.apply(ct,e),Zn=null),e}function lr(e){Zn===null?Zn=[e]:Zn.push(e)}var Ga=D(null),Xn=null,Ft=null;function on(e,t,a){ie(Ga,t._currentValue),t._currentValue=a}function Zt(e){e._currentValue=Ga.current,W(Ga)}function Ia(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function Ya(e,t,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var y=f.dependencies;if(y!==null){var E=f.child;y=y.firstContext;e:for(;y!==null;){var w=y;y=f;for(var B=0;B<t.length;B++)if(w.context===t[B]){y.lanes|=a,w=y.alternate,w!==null&&(w.lanes|=a),Ia(y.return,a,e),l||(E=null);break e}y=w.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(o(341));E.lanes|=a,y=E.alternate,y!==null&&(y.lanes|=a),Ia(E,a,e),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===e){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function ur(e,t,a,l){e=null;for(var f=t,y=!1;f!==null;){if(!y){if((f.flags&524288)!==0)y=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(o(387));if(E=E.memoizedProps,E!==null){var w=f.type;yt(f.pendingProps.value,E.value)||(e!==null?e.push(w):e=[w])}}else if(f===we.current){if(E=f.alternate,E===null)throw Error(o(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Hr):e=[Hr])}f=f.return}e!==null&&Ya(t,e,a,l),t.flags|=262144}function fs(e){for(e=e.firstContext;e!==null;){if(!yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qn(e){Xn=e,Ft=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function nt(e){return Ru(Xn,e)}function hs(e,t){return Xn===null&&Qn(e),Ru(e,t)}function Ru(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ft===null){if(e===null)throw Error(o(308));Ft=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ft=Ft.next=t;return a}var Sd=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},xd=r.unstable_scheduleCallback,Rd=r.unstable_NormalPriority,Ie={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fa(){return{controller:new Sd,data:new Map,refCount:0}}function cr(e){e.refCount--,e.refCount===0&&xd(Rd,function(){e.controller.abort()})}var fr=null,Za=0,Ri=0,Ti=null;function Td(e,t){if(fr===null){var a=fr=[];Za=0,Ri=Qo(),Ti={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Za++,t.then(Tu,Tu),t}function Tu(){if(--Za===0&&fr!==null){Ti!==null&&(Ti.status="fulfilled");var e=fr;fr=null,Ri=0,Ti=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ad(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var f=0;f<a.length;f++)(0,a[f])(t)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Au=S.S;S.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Td(e,t),Au!==null&&Au(e,t)};var Wn=D(null);function Pa(){var e=Wn.current;return e!==null?e:Me.pooledCache}function ds(e,t){t===null?ie(Wn,Wn.current):ie(Wn,t.pool)}function ku(){var e=Pa();return e===null?null:{parent:Ie._currentValue,pool:e}}var hr=Error(o(460)),Cu=Error(o(474)),ys=Error(o(542)),Xa={then:function(){}};function Bu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ps(){}function Uu(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ps,ps),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Nu(e),e;default:if(typeof t.status=="string")t.then(ps,ps);else{if(e=Me,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var f=t;f.status="fulfilled",f.value=l}},function(l){if(t.status==="pending"){var f=t;f.status="rejected",f.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Nu(e),e}throw dr=t,hr}}var dr=null;function $u(){if(dr===null)throw Error(o(459));var e=dr;return dr=null,e}function Nu(e){if(e===hr||e===ys)throw Error(o(483))}var ln=!1;function Qa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function un(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function cn(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ae&2)!==0){var f=l.pending;return f===null?t.next=t:(t.next=f.next,f.next=t),l.pending=t,t=os(e),vu(e,null,a),t}return as(e,l,t,a),os(e)}function yr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Tl(e,a)}}function Ja(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};y===null?f=y=E:y=y.next=E,a=a.next}while(a!==null);y===null?f=y=t:y=y.next=t}else f=y=t;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Ka=!1;function pr(){if(Ka){var e=Ti;if(e!==null)throw e}}function gr(e,t,a,l){Ka=!1;var f=e.updateQueue;ln=!1;var y=f.firstBaseUpdate,E=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var B=w,F=B.next;B.next=null,E===null?y=F:E.next=F,E=B;var ne=e.alternate;ne!==null&&(ne=ne.updateQueue,w=ne.lastBaseUpdate,w!==E&&(w===null?ne.firstBaseUpdate=F:w.next=F,ne.lastBaseUpdate=B))}if(y!==null){var oe=f.baseState;E=0,ne=F=B=null,w=y;do{var X=w.lane&-536870913,Q=X!==w.lane;if(Q?(xe&X)===X:(l&X)===X){X!==0&&X===Ri&&(Ka=!0),ne!==null&&(ne=ne.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var be=e,pe=w;X=t;var Ue=a;switch(pe.tag){case 1:if(be=pe.payload,typeof be=="function"){oe=be.call(Ue,oe,X);break e}oe=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=pe.payload,X=typeof be=="function"?be.call(Ue,oe,X):be,X==null)break e;oe=v({},oe,X);break e;case 2:ln=!0}}X=w.callback,X!==null&&(e.flags|=64,Q&&(e.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[X]:Q.push(X))}else Q={lane:X,tag:w.tag,payload:w.payload,callback:w.callback,next:null},ne===null?(F=ne=Q,B=oe):ne=ne.next=Q,E|=X;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;Q=w,w=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);ne===null&&(B=oe),f.baseState=B,f.firstBaseUpdate=F,f.lastBaseUpdate=ne,y===null&&(f.shared.lanes=0),bn|=E,e.lanes=E,e.memoizedState=oe}}function Mu(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Ou(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Mu(a[e],t)}var Ai=D(null),gs=D(0);function Du(e,t){e=en,ie(gs,e),ie(Ai,t),en=e|t.baseLanes}function eo(){ie(gs,en),ie(Ai,Ai.current)}function to(){en=gs.current,W(Ai),W(gs)}var fn=0,ve=null,Ce=null,je=null,bs=!1,ki=!1,Jn=!1,vs=0,mr=0,Ci=null,kd=0;function qe(){throw Error(o(321))}function no(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!yt(e[a],t[a]))return!1;return!0}function io(e,t,a,l,f,y){return fn=y,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,S.H=e===null||e.memoizedState===null?vc:Ec,Jn=!1,y=a(l,f),Jn=!1,ki&&(y=Hu(t,a,l,f)),Lu(e),y}function Lu(e){S.H=Rs;var t=Ce!==null&&Ce.next!==null;if(fn=0,je=Ce=ve=null,bs=!1,mr=0,Ci=null,t)throw Error(o(300));e===null||Pe||(e=e.dependencies,e!==null&&fs(e)&&(Pe=!0))}function Hu(e,t,a,l){ve=e;var f=0;do{if(ki&&(Ci=null),mr=0,ki=!1,25<=f)throw Error(o(301));if(f+=1,je=Ce=null,e.updateQueue!=null){var y=e.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}S.H=Od,y=t(a,l)}while(ki);return y}function Cd(){var e=S.H,t=e.useState()[0];return t=typeof t.then=="function"?br(t):t,e=e.useState()[0],(Ce!==null?Ce.memoizedState:null)!==e&&(ve.flags|=1024),t}function ro(){var e=vs!==0;return vs=0,e}function so(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ao(e){if(bs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}bs=!1}fn=0,je=Ce=ve=null,ki=!1,mr=vs=0,Ci=null}function ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?ve.memoizedState=je=e:je=je.next=e,je}function Ge(){if(Ce===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=je===null?ve.memoizedState:je.next;if(t!==null)je=t,Ce=e;else{if(e===null)throw ve.alternate===null?Error(o(467)):Error(o(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},je===null?ve.memoizedState=je=e:je=je.next=e}return je}function oo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function br(e){var t=mr;return mr+=1,Ci===null&&(Ci=[]),e=Uu(Ci,e,t),t=ve,(je===null?t.memoizedState:je.next)===null&&(t=t.alternate,S.H=t===null||t.memoizedState===null?vc:Ec),e}function Es(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return br(e);if(e.$$typeof===I)return nt(e)}throw Error(o(438,String(e)))}function lo(e){var t=null,a=ve.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(f){return f.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=oo(),ve.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=ae;return t.index++,a}function Pt(e,t){return typeof t=="function"?t(e):t}function ws(e){var t=Ge();return uo(t,Ce,e)}function uo(e,t,a){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=a;var f=e.baseQueue,y=l.pending;if(y!==null){if(f!==null){var E=f.next;f.next=y.next,y.next=E}t.baseQueue=f=y,l.pending=null}if(y=e.baseState,f===null)e.memoizedState=y;else{t=f.next;var w=E=null,B=null,F=t,ne=!1;do{var oe=F.lane&-536870913;if(oe!==F.lane?(xe&oe)===oe:(fn&oe)===oe){var X=F.revertLane;if(X===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),oe===Ri&&(ne=!0);else if((fn&X)===X){F=F.next,X===Ri&&(ne=!0);continue}else oe={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},B===null?(w=B=oe,E=y):B=B.next=oe,ve.lanes|=X,bn|=X;oe=F.action,Jn&&a(y,oe),y=F.hasEagerState?F.eagerState:a(y,oe)}else X={lane:oe,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},B===null?(w=B=X,E=y):B=B.next=X,ve.lanes|=oe,bn|=oe;F=F.next}while(F!==null&&F!==t);if(B===null?E=y:B.next=w,!yt(y,e.memoizedState)&&(Pe=!0,ne&&(a=Ti,a!==null)))throw a;e.memoizedState=y,e.baseState=E,e.baseQueue=B,l.lastRenderedState=y}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function co(e){var t=Ge(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,y=t.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do y=e(y,E.action),E=E.next;while(E!==f);yt(y,t.memoizedState)||(Pe=!0),t.memoizedState=y,t.baseQueue===null&&(t.baseState=y),a.lastRenderedState=y}return[y,l]}function zu(e,t,a){var l=ve,f=Ge(),y=Te;if(y){if(a===void 0)throw Error(o(407));a=a()}else a=t();var E=!yt((Ce||f).memoizedState,a);E&&(f.memoizedState=a,Pe=!0),f=f.queue;var w=ju.bind(null,l,f,e);if(vr(2048,8,w,[e]),f.getSnapshot!==t||E||je!==null&&je.memoizedState.tag&1){if(l.flags|=2048,Bi(9,_s(),Vu.bind(null,l,f,a,t),null),Me===null)throw Error(o(349));y||(fn&124)!==0||qu(l,t,a)}return a}function qu(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ve.updateQueue,t===null?(t=oo(),ve.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Vu(e,t,a,l){t.value=a,t.getSnapshot=l,Gu(t)&&Iu(e)}function ju(e,t,a){return a(function(){Gu(t)&&Iu(e)})}function Gu(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!yt(e,a)}catch{return!0}}function Iu(e){var t=wi(e,2);t!==null&&Et(t,e,2)}function fo(e){var t=ot();if(typeof e=="function"){var a=e;if(e=a(),Jn){rn(!0);try{a()}finally{rn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pt,lastRenderedState:e},t}function Yu(e,t,a,l){return e.baseState=a,uo(e,Ce,typeof l=="function"?l:Pt)}function Bd(e,t,a,l,f){if(xs(e))throw Error(o(485));if(e=t.action,e!==null){var y={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};S.T!==null?a(!0):y.isTransition=!1,l(y),a=t.pending,a===null?(y.next=t.pending=y,Fu(t,y)):(y.next=a.next,t.pending=a.next=y)}}function Fu(e,t){var a=t.action,l=t.payload,f=e.state;if(t.isTransition){var y=S.T,E={};S.T=E;try{var w=a(f,l),B=S.S;B!==null&&B(E,w),Zu(e,t,w)}catch(F){ho(e,t,F)}finally{S.T=y}}else try{y=a(f,l),Zu(e,t,y)}catch(F){ho(e,t,F)}}function Zu(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Pu(e,t,l)},function(l){return ho(e,t,l)}):Pu(e,t,a)}function Pu(e,t,a){t.status="fulfilled",t.value=a,Xu(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Fu(e,a)))}function ho(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Xu(t),t=t.next;while(t!==l)}e.action=null}function Xu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qu(e,t){return t}function Wu(e,t){if(Te){var a=Me.formState;if(a!==null){e:{var l=ve;if(Te){if(Le){t:{for(var f=Le,y=Dt;f.nodeType!==8;){if(!y){f=null;break t}if(f=Nt(f.nextSibling),f===null){f=null;break t}}y=f.data,f=y==="F!"||y==="F"?f:null}if(f){Le=Nt(f.nextSibling),l=f.data==="F!";break e}}Pn(l)}l=!1}l&&(t=a[0])}}return a=ot(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:t},a.queue=l,a=gc.bind(null,ve,l),l.dispatch=a,l=fo(!1),y=bo.bind(null,ve,!1,l.queue),l=ot(),f={state:t,dispatch:null,action:e,pending:null},l.queue=f,a=Bd.bind(null,ve,f,y,a),f.dispatch=a,l.memoizedState=e,[t,a,!1]}function Ju(e){var t=Ge();return Ku(t,Ce,e)}function Ku(e,t,a){if(t=uo(e,t,Qu)[0],e=ws(Pt)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=br(t)}catch(E){throw E===hr?ys:E}else l=t;t=Ge();var f=t.queue,y=f.dispatch;return a!==t.memoizedState&&(ve.flags|=2048,Bi(9,_s(),Ud.bind(null,f,a),null)),[l,y,e]}function Ud(e,t){e.action=t}function ec(e){var t=Ge(),a=Ce;if(a!==null)return Ku(t,a,e);Ge(),t=t.memoizedState,a=Ge();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Bi(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=ve.updateQueue,t===null&&(t=oo(),ve.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function _s(){return{destroy:void 0,resource:void 0}}function tc(){return Ge().memoizedState}function Ss(e,t,a,l){var f=ot();l=l===void 0?null:l,ve.flags|=e,f.memoizedState=Bi(1|t,_s(),a,l)}function vr(e,t,a,l){var f=Ge();l=l===void 0?null:l;var y=f.memoizedState.inst;Ce!==null&&l!==null&&no(l,Ce.memoizedState.deps)?f.memoizedState=Bi(t,y,a,l):(ve.flags|=e,f.memoizedState=Bi(1|t,y,a,l))}function nc(e,t){Ss(8390656,8,e,t)}function ic(e,t){vr(2048,8,e,t)}function rc(e,t){return vr(4,2,e,t)}function sc(e,t){return vr(4,4,e,t)}function ac(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function oc(e,t,a){a=a!=null?a.concat([e]):null,vr(4,4,ac.bind(null,t,e),a)}function yo(){}function lc(e,t){var a=Ge();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&no(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function uc(e,t){var a=Ge();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&no(t,l[1]))return l[0];if(l=e(),Jn){rn(!0);try{e()}finally{rn(!1)}}return a.memoizedState=[l,t],l}function po(e,t,a){return a===void 0||(fn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=df(),ve.lanes|=e,bn|=e,a)}function cc(e,t,a,l){return yt(a,t)?a:Ai.current!==null?(e=po(e,a,l),yt(e,t)||(Pe=!0),e):(fn&42)===0?(Pe=!0,e.memoizedState=a):(e=df(),ve.lanes|=e,bn|=e,t)}function fc(e,t,a,l,f){var y=L.p;L.p=y!==0&&8>y?y:8;var E=S.T,w={};S.T=w,bo(e,!1,t,a);try{var B=f(),F=S.S;if(F!==null&&F(w,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ne=Ad(B,l);Er(e,t,ne,vt(e))}else Er(e,t,l,vt(e))}catch(oe){Er(e,t,{then:function(){},status:"rejected",reason:oe},vt())}finally{L.p=y,S.T=E}}function $d(){}function go(e,t,a,l){if(e.tag!==5)throw Error(o(476));var f=hc(e).queue;fc(e,f,t,K,a===null?$d:function(){return dc(e),a(l)})}function hc(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pt,lastRenderedState:K},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pt,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function dc(e){var t=hc(e).next.queue;Er(e,t,{},vt())}function mo(){return nt(Hr)}function yc(){return Ge().memoizedState}function pc(){return Ge().memoizedState}function Nd(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=vt();e=un(a);var l=cn(t,e,a);l!==null&&(Et(l,t,a),yr(l,t,a)),t={cache:Fa()},e.payload=t;return}t=t.return}}function Md(e,t,a){var l=vt();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xs(e)?mc(t,a):(a=Da(e,t,a,l),a!==null&&(Et(a,e,l),bc(a,t,l)))}function gc(e,t,a){var l=vt();Er(e,t,a,l)}function Er(e,t,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xs(e))mc(t,f);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=t.lastRenderedReducer,y!==null))try{var E=t.lastRenderedState,w=y(E,a);if(f.hasEagerState=!0,f.eagerState=w,yt(w,E))return as(e,t,f,0),Me===null&&ss(),!1}catch{}finally{}if(a=Da(e,t,f,l),a!==null)return Et(a,e,l),bc(a,t,l),!0}return!1}function bo(e,t,a,l){if(l={lane:2,revertLane:Qo(),action:l,hasEagerState:!1,eagerState:null,next:null},xs(e)){if(t)throw Error(o(479))}else t=Da(e,a,l,2),t!==null&&Et(t,e,2)}function xs(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function mc(e,t){ki=bs=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function bc(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,Tl(e,a)}}var Rs={readContext:nt,use:Es,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useLayoutEffect:qe,useInsertionEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useSyncExternalStore:qe,useId:qe,useHostTransitionStatus:qe,useFormState:qe,useActionState:qe,useOptimistic:qe,useMemoCache:qe,useCacheRefresh:qe},vc={readContext:nt,use:Es,useCallback:function(e,t){return ot().memoizedState=[e,t===void 0?null:t],e},useContext:nt,useEffect:nc,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ss(4194308,4,ac.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ss(4194308,4,e,t)},useInsertionEffect:function(e,t){Ss(4,2,e,t)},useMemo:function(e,t){var a=ot();t=t===void 0?null:t;var l=e();if(Jn){rn(!0);try{e()}finally{rn(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=ot();if(a!==void 0){var f=a(t);if(Jn){rn(!0);try{a(t)}finally{rn(!1)}}}else f=t;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=Md.bind(null,ve,e),[l.memoizedState,e]},useRef:function(e){var t=ot();return e={current:e},t.memoizedState=e},useState:function(e){e=fo(e);var t=e.queue,a=gc.bind(null,ve,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:yo,useDeferredValue:function(e,t){var a=ot();return po(a,e,t)},useTransition:function(){var e=fo(!1);return e=fc.bind(null,ve,e.queue,!0,!1),ot().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=ve,f=ot();if(Te){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Me===null)throw Error(o(349));(xe&124)!==0||qu(l,t,a)}f.memoizedState=a;var y={value:a,getSnapshot:t};return f.queue=y,nc(ju.bind(null,l,y,e),[e]),l.flags|=2048,Bi(9,_s(),Vu.bind(null,l,y,a,t),null),a},useId:function(){var e=ot(),t=Me.identifierPrefix;if(Te){var a=Yt,l=It;a=(l&~(1<<32-dt(l)-1)).toString(32)+a,t="«"+t+"R"+a,a=vs++,0<a&&(t+="H"+a.toString(32)),t+="»"}else a=kd++,t="«"+t+"r"+a.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:mo,useFormState:Wu,useActionState:Wu,useOptimistic:function(e){var t=ot();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=bo.bind(null,ve,!0,a),a.dispatch=t,[e,t]},useMemoCache:lo,useCacheRefresh:function(){return ot().memoizedState=Nd.bind(null,ve)}},Ec={readContext:nt,use:Es,useCallback:lc,useContext:nt,useEffect:ic,useImperativeHandle:oc,useInsertionEffect:rc,useLayoutEffect:sc,useMemo:uc,useReducer:ws,useRef:tc,useState:function(){return ws(Pt)},useDebugValue:yo,useDeferredValue:function(e,t){var a=Ge();return cc(a,Ce.memoizedState,e,t)},useTransition:function(){var e=ws(Pt)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:br(e),t]},useSyncExternalStore:zu,useId:yc,useHostTransitionStatus:mo,useFormState:Ju,useActionState:Ju,useOptimistic:function(e,t){var a=Ge();return Yu(a,Ce,e,t)},useMemoCache:lo,useCacheRefresh:pc},Od={readContext:nt,use:Es,useCallback:lc,useContext:nt,useEffect:ic,useImperativeHandle:oc,useInsertionEffect:rc,useLayoutEffect:sc,useMemo:uc,useReducer:co,useRef:tc,useState:function(){return co(Pt)},useDebugValue:yo,useDeferredValue:function(e,t){var a=Ge();return Ce===null?po(a,e,t):cc(a,Ce.memoizedState,e,t)},useTransition:function(){var e=co(Pt)[0],t=Ge().memoizedState;return[typeof e=="boolean"?e:br(e),t]},useSyncExternalStore:zu,useId:yc,useHostTransitionStatus:mo,useFormState:ec,useActionState:ec,useOptimistic:function(e,t){var a=Ge();return Ce!==null?Yu(a,Ce,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:lo,useCacheRefresh:pc},Ui=null,wr=0;function Ts(e){var t=wr;return wr+=1,Ui===null&&(Ui=[]),Uu(Ui,e,t)}function _r(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function As(e,t){throw t.$$typeof===b?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wc(e){var t=e._init;return t(e._payload)}function _c(e){function t(j,q){if(e){var Y=j.deletions;Y===null?(j.deletions=[q],j.flags|=16):Y.push(q)}}function a(j,q){if(!e)return null;for(;q!==null;)t(j,q),q=q.sibling;return null}function l(j){for(var q=new Map;j!==null;)j.key!==null?q.set(j.key,j):q.set(j.index,j),j=j.sibling;return q}function f(j,q){return j=Gt(j,q),j.index=0,j.sibling=null,j}function y(j,q,Y){return j.index=Y,e?(Y=j.alternate,Y!==null?(Y=Y.index,Y<q?(j.flags|=67108866,q):Y):(j.flags|=67108866,q)):(j.flags|=1048576,q)}function E(j){return e&&j.alternate===null&&(j.flags|=67108866),j}function w(j,q,Y,re){return q===null||q.tag!==6?(q=Ha(Y,j.mode,re),q.return=j,q):(q=f(q,Y),q.return=j,q)}function B(j,q,Y,re){var he=Y.type;return he===z?ne(j,q,Y.props.children,re,Y.key):q!==null&&(q.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===V&&wc(he)===q.type)?(q=f(q,Y.props),_r(q,Y),q.return=j,q):(q=ls(Y.type,Y.key,Y.props,null,j.mode,re),_r(q,Y),q.return=j,q)}function F(j,q,Y,re){return q===null||q.tag!==4||q.stateNode.containerInfo!==Y.containerInfo||q.stateNode.implementation!==Y.implementation?(q=za(Y,j.mode,re),q.return=j,q):(q=f(q,Y.children||[]),q.return=j,q)}function ne(j,q,Y,re,he){return q===null||q.tag!==7?(q=In(Y,j.mode,re,he),q.return=j,q):(q=f(q,Y),q.return=j,q)}function oe(j,q,Y){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Ha(""+q,j.mode,Y),q.return=j,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case _:return Y=ls(q.type,q.key,q.props,null,j.mode,Y),_r(Y,q),Y.return=j,Y;case C:return q=za(q,j.mode,Y),q.return=j,q;case V:var re=q._init;return q=re(q._payload),oe(j,q,Y)}if(U(q)||H(q))return q=In(q,j.mode,Y,null),q.return=j,q;if(typeof q.then=="function")return oe(j,Ts(q),Y);if(q.$$typeof===I)return oe(j,hs(j,q),Y);As(j,q)}return null}function X(j,q,Y,re){var he=q!==null?q.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return he!==null?null:w(j,q,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:return Y.key===he?B(j,q,Y,re):null;case C:return Y.key===he?F(j,q,Y,re):null;case V:return he=Y._init,Y=he(Y._payload),X(j,q,Y,re)}if(U(Y)||H(Y))return he!==null?null:ne(j,q,Y,re,null);if(typeof Y.then=="function")return X(j,q,Ts(Y),re);if(Y.$$typeof===I)return X(j,q,hs(j,Y),re);As(j,Y)}return null}function Q(j,q,Y,re,he){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return j=j.get(Y)||null,w(q,j,""+re,he);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case _:return j=j.get(re.key===null?Y:re.key)||null,B(q,j,re,he);case C:return j=j.get(re.key===null?Y:re.key)||null,F(q,j,re,he);case V:var Ee=re._init;return re=Ee(re._payload),Q(j,q,Y,re,he)}if(U(re)||H(re))return j=j.get(Y)||null,ne(q,j,re,he,null);if(typeof re.then=="function")return Q(j,q,Y,Ts(re),he);if(re.$$typeof===I)return Q(j,q,Y,hs(q,re),he);As(q,re)}return null}function be(j,q,Y,re){for(var he=null,Ee=null,ye=q,me=q=0,Qe=null;ye!==null&&me<Y.length;me++){ye.index>me?(Qe=ye,ye=null):Qe=ye.sibling;var Re=X(j,ye,Y[me],re);if(Re===null){ye===null&&(ye=Qe);break}e&&ye&&Re.alternate===null&&t(j,ye),q=y(Re,q,me),Ee===null?he=Re:Ee.sibling=Re,Ee=Re,ye=Qe}if(me===Y.length)return a(j,ye),Te&&Fn(j,me),he;if(ye===null){for(;me<Y.length;me++)ye=oe(j,Y[me],re),ye!==null&&(q=y(ye,q,me),Ee===null?he=ye:Ee.sibling=ye,Ee=ye);return Te&&Fn(j,me),he}for(ye=l(ye);me<Y.length;me++)Qe=Q(ye,j,me,Y[me],re),Qe!==null&&(e&&Qe.alternate!==null&&ye.delete(Qe.key===null?me:Qe.key),q=y(Qe,q,me),Ee===null?he=Qe:Ee.sibling=Qe,Ee=Qe);return e&&ye.forEach(function(An){return t(j,An)}),Te&&Fn(j,me),he}function pe(j,q,Y,re){if(Y==null)throw Error(o(151));for(var he=null,Ee=null,ye=q,me=q=0,Qe=null,Re=Y.next();ye!==null&&!Re.done;me++,Re=Y.next()){ye.index>me?(Qe=ye,ye=null):Qe=ye.sibling;var An=X(j,ye,Re.value,re);if(An===null){ye===null&&(ye=Qe);break}e&&ye&&An.alternate===null&&t(j,ye),q=y(An,q,me),Ee===null?he=An:Ee.sibling=An,Ee=An,ye=Qe}if(Re.done)return a(j,ye),Te&&Fn(j,me),he;if(ye===null){for(;!Re.done;me++,Re=Y.next())Re=oe(j,Re.value,re),Re!==null&&(q=y(Re,q,me),Ee===null?he=Re:Ee.sibling=Re,Ee=Re);return Te&&Fn(j,me),he}for(ye=l(ye);!Re.done;me++,Re=Y.next())Re=Q(ye,j,me,Re.value,re),Re!==null&&(e&&Re.alternate!==null&&ye.delete(Re.key===null?me:Re.key),q=y(Re,q,me),Ee===null?he=Re:Ee.sibling=Re,Ee=Re);return e&&ye.forEach(function(Dy){return t(j,Dy)}),Te&&Fn(j,me),he}function Ue(j,q,Y,re){if(typeof Y=="object"&&Y!==null&&Y.type===z&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case _:e:{for(var he=Y.key;q!==null;){if(q.key===he){if(he=Y.type,he===z){if(q.tag===7){a(j,q.sibling),re=f(q,Y.props.children),re.return=j,j=re;break e}}else if(q.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===V&&wc(he)===q.type){a(j,q.sibling),re=f(q,Y.props),_r(re,Y),re.return=j,j=re;break e}a(j,q);break}else t(j,q);q=q.sibling}Y.type===z?(re=In(Y.props.children,j.mode,re,Y.key),re.return=j,j=re):(re=ls(Y.type,Y.key,Y.props,null,j.mode,re),_r(re,Y),re.return=j,j=re)}return E(j);case C:e:{for(he=Y.key;q!==null;){if(q.key===he)if(q.tag===4&&q.stateNode.containerInfo===Y.containerInfo&&q.stateNode.implementation===Y.implementation){a(j,q.sibling),re=f(q,Y.children||[]),re.return=j,j=re;break e}else{a(j,q);break}else t(j,q);q=q.sibling}re=za(Y,j.mode,re),re.return=j,j=re}return E(j);case V:return he=Y._init,Y=he(Y._payload),Ue(j,q,Y,re)}if(U(Y))return be(j,q,Y,re);if(H(Y)){if(he=H(Y),typeof he!="function")throw Error(o(150));return Y=he.call(Y),pe(j,q,Y,re)}if(typeof Y.then=="function")return Ue(j,q,Ts(Y),re);if(Y.$$typeof===I)return Ue(j,q,hs(j,Y),re);As(j,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,q!==null&&q.tag===6?(a(j,q.sibling),re=f(q,Y),re.return=j,j=re):(a(j,q),re=Ha(Y,j.mode,re),re.return=j,j=re),E(j)):a(j,q)}return function(j,q,Y,re){try{wr=0;var he=Ue(j,q,Y,re);return Ui=null,he}catch(ye){if(ye===hr||ye===ys)throw ye;var Ee=pt(29,ye,null,j.mode);return Ee.lanes=re,Ee.return=j,Ee}finally{}}}var $i=_c(!0),Sc=_c(!1),At=D(null),Lt=null;function hn(e){var t=e.alternate;ie(Ye,Ye.current&1),ie(At,e),Lt===null&&(t===null||Ai.current!==null||t.memoizedState!==null)&&(Lt=e)}function xc(e){if(e.tag===22){if(ie(Ye,Ye.current),ie(At,e),Lt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Lt=e)}}else dn()}function dn(){ie(Ye,Ye.current),ie(At,At.current)}function Xt(e){W(At),Lt===e&&(Lt=null),W(Ye)}var Ye=D(0);function ks(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ll(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function vo(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:v({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Eo={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=vt(),f=un(l);f.payload=t,a!=null&&(f.callback=a),t=cn(e,f,l),t!==null&&(Et(t,e,l),yr(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=vt(),f=un(l);f.tag=1,f.payload=t,a!=null&&(f.callback=a),t=cn(e,f,l),t!==null&&(Et(t,e,l),yr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=vt(),l=un(a);l.tag=2,t!=null&&(l.callback=t),t=cn(e,l,a),t!==null&&(Et(t,e,a),yr(t,e,a))}};function Rc(e,t,a,l,f,y,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,y,E):t.prototype&&t.prototype.isPureReactComponent?!rr(a,l)||!rr(f,y):!0}function Tc(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Eo.enqueueReplaceState(t,t.state,null)}function Kn(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=v({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}var Cs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Ac(e){Cs(e)}function kc(e){console.error(e)}function Cc(e){Cs(e)}function Bs(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Bc(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function wo(e,t,a){return a=un(a),a.tag=3,a.payload={element:null},a.callback=function(){Bs(e,t)},a}function Uc(e){return e=un(e),e.tag=3,e}function $c(e,t,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var y=l.value;e.payload=function(){return f(y)},e.callback=function(){Bc(t,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){Bc(t,a,l),typeof f!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function Dd(e,t,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&ur(t,a,f,!0),a=At.current,a!==null){switch(a.tag){case 13:return Lt===null?Yo():a.alternate===null&&He===0&&(He=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Xa?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),Zo(e,l,f)),!1;case 22:return a.flags|=65536,l===Xa?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),Zo(e,l,f)),!1}throw Error(o(435,a.tag))}return Zo(e,l,f),Yo(),!1}if(Te)return t=At.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=f,l!==ja&&(e=Error(o(422),{cause:l}),lr(St(e,a)))):(l!==ja&&(t=Error(o(423),{cause:l}),lr(St(t,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=St(l,a),f=wo(e.stateNode,l,f),Ja(e,f),He!==4&&(He=2)),!1;var y=Error(o(520),{cause:l});if(y=St(y,a),Cr===null?Cr=[y]:Cr.push(y),He!==4&&(He=2),t===null)return!0;l=St(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=wo(a.stateNode,l,e),Ja(a,e),!1;case 1:if(t=a.type,y=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(vn===null||!vn.has(y))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Uc(f),$c(f,e,a,l),Ja(a,f),!1}a=a.return}while(a!==null);return!1}var Nc=Error(o(461)),Pe=!1;function We(e,t,a,l){t.child=e===null?Sc(t,null,a,l):$i(t,e.child,a,l)}function Mc(e,t,a,l,f){a=a.render;var y=t.ref;if("ref"in l){var E={};for(var w in l)w!=="ref"&&(E[w]=l[w])}else E=l;return Qn(t),l=io(e,t,a,E,y,f),w=ro(),e!==null&&!Pe?(so(e,t,f),Qt(e,t,f)):(Te&&w&&qa(t),t.flags|=1,We(e,t,l,f),t.child)}function Oc(e,t,a,l,f){if(e===null){var y=a.type;return typeof y=="function"&&!La(y)&&y.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=y,Dc(e,t,y,l,f)):(e=ls(a.type,null,l,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}if(y=e.child,!Co(e,f)){var E=y.memoizedProps;if(a=a.compare,a=a!==null?a:rr,a(E,l)&&e.ref===t.ref)return Qt(e,t,f)}return t.flags|=1,e=Gt(y,l),e.ref=t.ref,e.return=t,t.child=e}function Dc(e,t,a,l,f){if(e!==null){var y=e.memoizedProps;if(rr(y,l)&&e.ref===t.ref)if(Pe=!1,t.pendingProps=l=y,Co(e,f))(e.flags&131072)!==0&&(Pe=!0);else return t.lanes=e.lanes,Qt(e,t,f)}return _o(e,t,a,l,f)}function Lc(e,t,a){var l=t.pendingProps,f=l.children,y=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=y!==null?y.baseLanes|a:a,e!==null){for(f=t.child=e.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;t.childLanes=y&~l}else t.childLanes=0,t.child=null;return Hc(e,t,l,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ds(t,y!==null?y.cachePool:null),y!==null?Du(t,y):eo(),xc(t);else return t.lanes=t.childLanes=536870912,Hc(e,t,y!==null?y.baseLanes|a:a,a)}else y!==null?(ds(t,y.cachePool),Du(t,y),dn(),t.memoizedState=null):(e!==null&&ds(t,null),eo(),dn());return We(e,t,f,a),t.child}function Hc(e,t,a,l){var f=Pa();return f=f===null?null:{parent:Ie._currentValue,pool:f},t.memoizedState={baseLanes:a,cachePool:f},e!==null&&ds(t,null),eo(),xc(t),e!==null&&ur(e,t,l,!0),null}function Us(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function _o(e,t,a,l,f){return Qn(t),a=io(e,t,a,l,void 0,f),l=ro(),e!==null&&!Pe?(so(e,t,f),Qt(e,t,f)):(Te&&l&&qa(t),t.flags|=1,We(e,t,a,f),t.child)}function zc(e,t,a,l,f,y){return Qn(t),t.updateQueue=null,a=Hu(t,l,a,f),Lu(e),l=ro(),e!==null&&!Pe?(so(e,t,y),Qt(e,t,y)):(Te&&l&&qa(t),t.flags|=1,We(e,t,a,y),t.child)}function qc(e,t,a,l,f){if(Qn(t),t.stateNode===null){var y=_i,E=a.contextType;typeof E=="object"&&E!==null&&(y=nt(E)),y=new a(l,y),t.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Eo,t.stateNode=y,y._reactInternals=t,y=t.stateNode,y.props=l,y.state=t.memoizedState,y.refs={},Qa(t),E=a.contextType,y.context=typeof E=="object"&&E!==null?nt(E):_i,y.state=t.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(vo(t,a,E,l),y.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&Eo.enqueueReplaceState(y,y.state,null),gr(t,l,y,f),pr(),y.state=t.memoizedState),typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){y=t.stateNode;var w=t.memoizedProps,B=Kn(a,w);y.props=B;var F=y.context,ne=a.contextType;E=_i,typeof ne=="object"&&ne!==null&&(E=nt(ne));var oe=a.getDerivedStateFromProps;ne=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",w=t.pendingProps!==w,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w||F!==E)&&Tc(t,y,l,E),ln=!1;var X=t.memoizedState;y.state=X,gr(t,l,y,f),pr(),F=t.memoizedState,w||X!==F||ln?(typeof oe=="function"&&(vo(t,a,oe,l),F=t.memoizedState),(B=ln||Rc(t,a,B,l,X,F,E))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=F),y.props=l,y.state=F,y.context=E,l=B):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{y=t.stateNode,Wa(e,t),E=t.memoizedProps,ne=Kn(a,E),y.props=ne,oe=t.pendingProps,X=y.context,F=a.contextType,B=_i,typeof F=="object"&&F!==null&&(B=nt(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==oe||X!==B)&&Tc(t,y,l,B),ln=!1,X=t.memoizedState,y.state=X,gr(t,l,y,f),pr();var Q=t.memoizedState;E!==oe||X!==Q||ln||e!==null&&e.dependencies!==null&&fs(e.dependencies)?(typeof w=="function"&&(vo(t,a,w,l),Q=t.memoizedState),(ne=ln||Rc(t,a,ne,l,X,Q,B)||e!==null&&e.dependencies!==null&&fs(e.dependencies))?(F||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,Q,B),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,Q,B)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=Q),y.props=l,y.state=Q,y.context=B,l=ne):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&X===e.memoizedState||(t.flags|=1024),l=!1)}return y=l,Us(e,t),l=(t.flags&128)!==0,y||l?(y=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:y.render(),t.flags|=1,e!==null&&l?(t.child=$i(t,e.child,null,f),t.child=$i(t,null,a,f)):We(e,t,a,f),t.memoizedState=y.state,e=t.child):e=Qt(e,t,f),e}function Vc(e,t,a,l){return or(),t.flags|=256,We(e,t,a,l),t.child}var So={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xo(e){return{baseLanes:e,cachePool:ku()}}function Ro(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=kt),e}function jc(e,t,a){var l=t.pendingProps,f=!1,y=(t.flags&128)!==0,E;if((E=y)||(E=e!==null&&e.memoizedState===null?!1:(Ye.current&2)!==0),E&&(f=!0,t.flags&=-129),E=(t.flags&32)!==0,t.flags&=-33,e===null){if(Te){if(f?hn(t):dn(),Te){var w=Le,B;if(B=w){e:{for(B=w,w=Dt;B.nodeType!==8;){if(!w){w=null;break e}if(B=Nt(B.nextSibling),B===null){w=null;break e}}w=B}w!==null?(t.memoizedState={dehydrated:w,treeContext:Yn!==null?{id:It,overflow:Yt}:null,retryLane:536870912,hydrationErrors:null},B=pt(18,null,null,0),B.stateNode=w,B.return=t,t.child=B,it=t,Le=null,B=!0):B=!1}B||Pn(t)}if(w=t.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return ll(w)?t.lanes=32:t.lanes=536870912,null;Xt(t)}return w=l.children,l=l.fallback,f?(dn(),f=t.mode,w=$s({mode:"hidden",children:w},f),l=In(l,f,a,null),w.return=t,l.return=t,w.sibling=l,t.child=w,f=t.child,f.memoizedState=xo(a),f.childLanes=Ro(e,E,a),t.memoizedState=So,l):(hn(t),To(t,w))}if(B=e.memoizedState,B!==null&&(w=B.dehydrated,w!==null)){if(y)t.flags&256?(hn(t),t.flags&=-257,t=Ao(e,t,a)):t.memoizedState!==null?(dn(),t.child=e.child,t.flags|=128,t=null):(dn(),f=l.fallback,w=t.mode,l=$s({mode:"visible",children:l.children},w),f=In(f,w,a,null),f.flags|=2,l.return=t,f.return=t,l.sibling=f,t.child=l,$i(t,e.child,null,a),l=t.child,l.memoizedState=xo(a),l.childLanes=Ro(e,E,a),t.memoizedState=So,t=f);else if(hn(t),ll(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(o(419)),l.stack="",l.digest=E,lr({value:l,source:null,stack:null}),t=Ao(e,t,a)}else if(Pe||ur(e,t,a,!1),E=(a&e.childLanes)!==0,Pe||E){if(E=Me,E!==null&&(l=a&-a,l=(l&42)!==0?1:oa(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==B.retryLane))throw B.retryLane=l,wi(e,l),Et(E,e,l),Nc;w.data==="$?"||Yo(),t=Ao(e,t,a)}else w.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=B.treeContext,Le=Nt(w.nextSibling),it=t,Te=!0,Zn=null,Dt=!1,e!==null&&(Rt[Tt++]=It,Rt[Tt++]=Yt,Rt[Tt++]=Yn,It=e.id,Yt=e.overflow,Yn=t),t=To(t,l.children),t.flags|=4096);return t}return f?(dn(),f=l.fallback,w=t.mode,B=e.child,F=B.sibling,l=Gt(B,{mode:"hidden",children:l.children}),l.subtreeFlags=B.subtreeFlags&65011712,F!==null?f=Gt(F,f):(f=In(f,w,a,null),f.flags|=2),f.return=t,l.return=t,l.sibling=f,t.child=l,l=f,f=t.child,w=e.child.memoizedState,w===null?w=xo(a):(B=w.cachePool,B!==null?(F=Ie._currentValue,B=B.parent!==F?{parent:F,pool:F}:B):B=ku(),w={baseLanes:w.baseLanes|a,cachePool:B}),f.memoizedState=w,f.childLanes=Ro(e,E,a),t.memoizedState=So,l):(hn(t),a=e.child,e=a.sibling,a=Gt(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(E=t.deletions,E===null?(t.deletions=[e],t.flags|=16):E.push(e)),t.child=a,t.memoizedState=null,a)}function To(e,t){return t=$s({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function $s(e,t){return e=pt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ao(e,t,a){return $i(t,e.child,null,a),e=To(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gc(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ia(e.return,t,a)}function ko(e,t,a,l,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=l,y.tail=a,y.tailMode=f)}function Ic(e,t,a){var l=t.pendingProps,f=l.revealOrder,y=l.tail;if(We(e,t,l.children,a),l=Ye.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gc(e,a,t);else if(e.tag===19)Gc(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(ie(Ye,l),f){case"forwards":for(a=t.child,f=null;a!==null;)e=a.alternate,e!==null&&ks(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=t.child,t.child=null):(f=a.sibling,a.sibling=null),ko(t,!1,f,a,y);break;case"backwards":for(a=null,f=t.child,t.child=null;f!==null;){if(e=f.alternate,e!==null&&ks(e)===null){t.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}ko(t,!0,a,null,y);break;case"together":ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qt(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),bn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ur(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=Gt(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Gt(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Co(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&fs(e)))}function Ld(e,t,a){switch(t.tag){case 3:de(t,t.stateNode.containerInfo),on(t,Ie,e.memoizedState.cache),or();break;case 27:case 5:rt(t);break;case 4:de(t,t.stateNode.containerInfo);break;case 10:on(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(hn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?jc(e,t,a):(hn(t),e=Qt(e,t,a),e!==null?e.sibling:null);hn(t);break;case 19:var f=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(ur(e,t,a,!1),l=(a&t.childLanes)!==0),f){if(l)return Ic(e,t,a);t.flags|=128}if(f=t.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ie(Ye,Ye.current),l)break;return null;case 22:case 23:return t.lanes=0,Lc(e,t,a);case 24:on(t,Ie,e.memoizedState.cache)}return Qt(e,t,a)}function Yc(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Pe=!0;else{if(!Co(e,a)&&(t.flags&128)===0)return Pe=!1,Ld(e,t,a);Pe=(e.flags&131072)!==0}else Pe=!1,Te&&(t.flags&1048576)!==0&&wu(t,cs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,f=l._init;if(l=f(l._payload),t.type=l,typeof l=="function")La(l)?(e=Kn(l,e),t.tag=1,t=qc(null,t,l,e,a)):(t.tag=0,t=_o(null,t,l,e,a));else{if(l!=null){if(f=l.$$typeof,f===te){t.tag=11,t=Mc(null,t,l,e,a);break e}else if(f===N){t.tag=14,t=Oc(null,t,l,e,a);break e}}throw t=Z(l)||l,Error(o(306,t,""))}}return t;case 0:return _o(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,f=Kn(l,t.pendingProps),qc(e,t,l,f,a);case 3:e:{if(de(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var y=t.memoizedState;f=y.element,Wa(e,t),gr(t,l,null,a);var E=t.memoizedState;if(l=E.cache,on(t,Ie,l),l!==y.cache&&Ya(t,[Ie],a,!0),pr(),l=E.element,y.isDehydrated)if(y={element:l,isDehydrated:!1,cache:E.cache},t.updateQueue.baseState=y,t.memoizedState=y,t.flags&256){t=Vc(e,t,l,a);break e}else if(l!==f){f=St(Error(o(424)),t),lr(f),t=Vc(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=Nt(e.firstChild),it=t,Te=!0,Zn=null,Dt=!0,a=Sc(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(or(),l===f){t=Qt(e,t,a);break e}We(e,t,l,a)}t=t.child}return t;case 26:return Us(e,t),e===null?(a=Qf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Te||(a=t.type,e=t.pendingProps,l=Fs(ue.current).createElement(a),l[tt]=t,l[st]=e,Ke(l,a,e),Ze(l),t.stateNode=l):t.memoizedState=Qf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return rt(t),e===null&&Te&&(l=t.stateNode=Zf(t.type,t.pendingProps,ue.current),it=t,Dt=!0,f=Le,_n(t.type)?(ul=f,Le=Nt(l.firstChild)):Le=f),We(e,t,t.pendingProps.children,a),Us(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Te&&((f=l=Le)&&(l=fy(l,t.type,t.pendingProps,Dt),l!==null?(t.stateNode=l,it=t,Le=Nt(l.firstChild),Dt=!1,f=!0):f=!1),f||Pn(t)),rt(t),f=t.type,y=t.pendingProps,E=e!==null?e.memoizedProps:null,l=y.children,sl(f,y)?l=null:E!==null&&sl(f,E)&&(t.flags|=32),t.memoizedState!==null&&(f=io(e,t,Cd,null,null,a),Hr._currentValue=f),Us(e,t),We(e,t,l,a),t.child;case 6:return e===null&&Te&&((e=a=Le)&&(a=hy(a,t.pendingProps,Dt),a!==null?(t.stateNode=a,it=t,Le=null,e=!0):e=!1),e||Pn(t)),null;case 13:return jc(e,t,a);case 4:return de(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=$i(t,null,l,a):We(e,t,l,a),t.child;case 11:return Mc(e,t,t.type,t.pendingProps,a);case 7:return We(e,t,t.pendingProps,a),t.child;case 8:return We(e,t,t.pendingProps.children,a),t.child;case 12:return We(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,on(t,t.type,l.value),We(e,t,l.children,a),t.child;case 9:return f=t.type._context,l=t.pendingProps.children,Qn(t),f=nt(f),l=l(f),t.flags|=1,We(e,t,l,a),t.child;case 14:return Oc(e,t,t.type,t.pendingProps,a);case 15:return Dc(e,t,t.type,t.pendingProps,a);case 19:return Ic(e,t,a);case 31:return l=t.pendingProps,a=t.mode,l={mode:l.mode,children:l.children},e===null?(a=$s(l,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=Gt(e.child,l),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Lc(e,t,a);case 24:return Qn(t),l=nt(Ie),e===null?(f=Pa(),f===null&&(f=Me,y=Fa(),f.pooledCache=y,y.refCount++,y!==null&&(f.pooledCacheLanes|=a),f=y),t.memoizedState={parent:l,cache:f},Qa(t),on(t,Ie,f)):((e.lanes&a)!==0&&(Wa(e,t),gr(t,null,null,a),pr()),f=e.memoizedState,y=t.memoizedState,f.parent!==l?(f={parent:l,cache:l},t.memoizedState=f,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=f),on(t,Ie,l)):(l=y.cache,on(t,Ie,l),l!==f.cache&&Ya(t,[Ie],a,!0))),We(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Wt(e){e.flags|=4}function Fc(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!th(t)){if(t=At.current,t!==null&&((xe&4194048)===xe?Lt!==null:(xe&62914560)!==xe&&(xe&536870912)===0||t!==Lt))throw dr=Xa,Cu;e.flags|=8192}}function Ns(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?xl():536870912,e.lanes|=t,Di|=t)}function Sr(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function De(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function Hd(e,t,a){var l=t.pendingProps;switch(Va(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(t),null;case 1:return De(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Zt(Ie),$e(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ar(t)?Wt(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,xu())),De(t),null;case 26:return a=t.memoizedState,e===null?(Wt(t),a!==null?(De(t),Fc(t,a)):(De(t),t.flags&=-16777217)):a?a!==e.memoizedState?(Wt(t),De(t),Fc(t,a)):(De(t),t.flags&=-16777217):(e.memoizedProps!==l&&Wt(t),De(t),t.flags&=-16777217),null;case 27:ft(t),a=ue.current;var f=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Wt(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return De(t),null}e=le.current,ar(t)?_u(t):(e=Zf(f,l,a),t.stateNode=e,Wt(t))}return De(t),null;case 5:if(ft(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&Wt(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return De(t),null}if(e=le.current,ar(t))_u(t);else{switch(f=Fs(ue.current),e){case 1:e=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}e[tt]=t,e[st]=l;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)e.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=e;e:switch(Ke(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Wt(t)}}return De(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&Wt(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=ue.current,ar(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,f=it,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[tt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||qf(e.nodeValue,a)),e||Pn(t)}else e=Fs(e).createTextNode(l),e[tt]=t,t.stateNode=e}return De(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=ar(t),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(o(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));f[tt]=t}else or(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;De(t),f=!1}else f=xu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return t.flags&256?(Xt(t),t):(Xt(t),null)}if(Xt(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=t.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var y=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==f&&(l.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Ns(t,t.updateQueue),De(t),null;case 4:return $e(),e===null&&el(t.stateNode.containerInfo),De(t),null;case 10:return Zt(t.type),De(t),null;case 19:if(W(Ye),f=t.memoizedState,f===null)return De(t),null;if(l=(t.flags&128)!==0,y=f.rendering,y===null)if(l)Sr(f,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(y=ks(e),y!==null){for(t.flags|=128,Sr(f,!1),e=y.updateQueue,t.updateQueue=e,Ns(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Eu(a,e),a=a.sibling;return ie(Ye,Ye.current&1|2),t.child}e=e.sibling}f.tail!==null&&Ot()>Ds&&(t.flags|=128,l=!0,Sr(f,!1),t.lanes=4194304)}else{if(!l)if(e=ks(y),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Ns(t,e),Sr(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!Te)return De(t),null}else 2*Ot()-f.renderingStartTime>Ds&&a!==536870912&&(t.flags|=128,l=!0,Sr(f,!1),t.lanes=4194304);f.isBackwards?(y.sibling=t.child,t.child=y):(e=f.last,e!==null?e.sibling=y:t.child=y,f.last=y)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Ot(),t.sibling=null,e=Ye.current,ie(Ye,l?e&1|2:e&1),t):(De(t),null);case 22:case 23:return Xt(t),to(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(De(t),t.subtreeFlags&6&&(t.flags|=8192)):De(t),a=t.updateQueue,a!==null&&Ns(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&W(Wn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Zt(Ie),De(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function zd(e,t){switch(Va(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zt(Ie),$e(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ft(t),null;case 13:if(Xt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return W(Ye),null;case 4:return $e(),null;case 10:return Zt(t.type),null;case 22:case 23:return Xt(t),to(),e!==null&&W(Wn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Zt(Ie),null;case 25:return null;default:return null}}function Zc(e,t){switch(Va(t),t.tag){case 3:Zt(Ie),$e();break;case 26:case 27:case 5:ft(t);break;case 4:$e();break;case 13:Xt(t);break;case 19:W(Ye);break;case 10:Zt(t.type);break;case 22:case 23:Xt(t),to(),e!==null&&W(Wn);break;case 24:Zt(Ie)}}function xr(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var y=a.create,E=a.inst;l=y(),E.destroy=l}a=a.next}while(a!==f)}}catch(w){Ne(t,t.return,w)}}function yn(e,t,a){try{var l=t.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var y=f.next;l=y;do{if((l.tag&e)===e){var E=l.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,f=t;var B=a,F=w;try{F()}catch(ne){Ne(f,B,ne)}}}l=l.next}while(l!==y)}}catch(ne){Ne(t,t.return,ne)}}function Pc(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Ou(t,a)}catch(l){Ne(e,e.return,l)}}}function Xc(e,t,a){a.props=Kn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Ne(e,t,l)}}function Rr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){Ne(e,t,f)}}function Ht(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){Ne(e,t,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Ne(e,t,f)}else a.current=null}function Qc(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){Ne(e,e.return,f)}}function Bo(e,t,a){try{var l=e.stateNode;ay(l,e.type,a,t),l[st]=t}catch(f){Ne(e,e.return,f)}}function Wc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&_n(e.type)||e.tag===4}function Uo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&_n(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $o(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ys));else if(l!==4&&(l===27&&_n(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for($o(e,t,a),e=e.sibling;e!==null;)$o(e,t,a),e=e.sibling}function Ms(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&_n(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ms(e,t,a),e=e.sibling;e!==null;)Ms(e,t,a),e=e.sibling}function Jc(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=t.attributes;f.length;)t.removeAttributeNode(f[0]);Ke(t,l,a),t[tt]=e,t[st]=a}catch(y){Ne(e,e.return,y)}}var Jt=!1,Ve=!1,No=!1,Kc=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function qd(e,t){if(e=e.containerInfo,il=Js,e=cu(e),Ba(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,y=l.focusNode;l=l.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var E=0,w=-1,B=-1,F=0,ne=0,oe=e,X=null;t:for(;;){for(var Q;oe!==a||f!==0&&oe.nodeType!==3||(w=E+f),oe!==y||l!==0&&oe.nodeType!==3||(B=E+l),oe.nodeType===3&&(E+=oe.nodeValue.length),(Q=oe.firstChild)!==null;)X=oe,oe=Q;for(;;){if(oe===e)break t;if(X===a&&++F===f&&(w=E),X===y&&++ne===l&&(B=E),(Q=oe.nextSibling)!==null)break;oe=X,X=oe.parentNode}oe=Q}a=w===-1||B===-1?null:{start:w,end:B}}else a=null}a=a||{start:0,end:0}}else a=null;for(rl={focusedElem:e,selectionRange:a},Js=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,y=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&y!==null){e=void 0,a=t,f=y.memoizedProps,y=y.memoizedState,l=a.stateNode;try{var be=Kn(a.type,f,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(be,y),l.__reactInternalSnapshotBeforeUpdate=e}catch(pe){Ne(a,a.return,pe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)ol(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ol(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function ef(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:pn(e,a),l&4&&xr(5,a);break;case 1:if(pn(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(E){Ne(a,a.return,E)}else{var f=Kn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(f,t,e.__reactInternalSnapshotBeforeUpdate)}catch(E){Ne(a,a.return,E)}}l&64&&Pc(a),l&512&&Rr(a,a.return);break;case 3:if(pn(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ou(e,t)}catch(E){Ne(a,a.return,E)}}break;case 27:t===null&&l&4&&Jc(a);case 26:case 5:pn(e,a),t===null&&l&4&&Qc(a),l&512&&Rr(a,a.return);break;case 12:pn(e,a);break;case 13:pn(e,a),l&4&&rf(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Xd.bind(null,a),dy(e,a))));break;case 22:if(l=a.memoizedState!==null||Jt,!l){t=t!==null&&t.memoizedState!==null||Ve,f=Jt;var y=Ve;Jt=l,(Ve=t)&&!y?gn(e,a,(a.subtreeFlags&8772)!==0):pn(e,a),Jt=f,Ve=y}break;case 30:break;default:pn(e,a)}}function tf(e){var t=e.alternate;t!==null&&(e.alternate=null,tf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ca(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Oe=null,lt=!1;function Kt(e,t,a){for(a=a.child;a!==null;)nf(e,t,a),a=a.sibling}function nf(e,t,a){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Fi,a)}catch{}switch(a.tag){case 26:Ve||Ht(a,t),Kt(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ve||Ht(a,t);var l=Oe,f=lt;_n(a.type)&&(Oe=a.stateNode,lt=!1),Kt(e,t,a),Mr(a.stateNode),Oe=l,lt=f;break;case 5:Ve||Ht(a,t);case 6:if(l=Oe,f=lt,Oe=null,Kt(e,t,a),Oe=l,lt=f,Oe!==null)if(lt)try{(Oe.nodeType===9?Oe.body:Oe.nodeName==="HTML"?Oe.ownerDocument.body:Oe).removeChild(a.stateNode)}catch(y){Ne(a,t,y)}else try{Oe.removeChild(a.stateNode)}catch(y){Ne(a,t,y)}break;case 18:Oe!==null&&(lt?(e=Oe,Yf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),jr(e)):Yf(Oe,a.stateNode));break;case 4:l=Oe,f=lt,Oe=a.stateNode.containerInfo,lt=!0,Kt(e,t,a),Oe=l,lt=f;break;case 0:case 11:case 14:case 15:Ve||yn(2,a,t),Ve||yn(4,a,t),Kt(e,t,a);break;case 1:Ve||(Ht(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Xc(a,t,l)),Kt(e,t,a);break;case 21:Kt(e,t,a);break;case 22:Ve=(l=Ve)||a.memoizedState!==null,Kt(e,t,a),Ve=l;break;default:Kt(e,t,a)}}function rf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{jr(e)}catch(a){Ne(t,t.return,a)}}function Vd(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kc),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kc),t;default:throw Error(o(435,e.tag))}}function Mo(e,t){var a=Vd(e);t.forEach(function(l){var f=Qd.bind(null,e,l);a.has(l)||(a.add(l),l.then(f,f))})}function gt(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],y=e,E=t,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(_n(w.type)){Oe=w.stateNode,lt=!1;break e}break;case 5:Oe=w.stateNode,lt=!1;break e;case 3:case 4:Oe=w.stateNode.containerInfo,lt=!0;break e}w=w.return}if(Oe===null)throw Error(o(160));nf(y,E,f),Oe=null,lt=!1,y=f.alternate,y!==null&&(y.return=null),f.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)sf(t,e),t=t.sibling}var $t=null;function sf(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gt(t,e),mt(e),l&4&&(yn(3,e,e.return),xr(3,e),yn(5,e,e.return));break;case 1:gt(t,e),mt(e),l&512&&(Ve||a===null||Ht(a,a.return)),l&64&&Jt&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=$t;if(gt(t,e),mt(e),l&512&&(Ve||a===null||Ht(a,a.return)),l&4){var y=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":y=f.getElementsByTagName("title")[0],(!y||y[Xi]||y[tt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=f.createElement(l),f.head.insertBefore(y,f.querySelector("head > title"))),Ke(y,l,a),y[tt]=e,Ze(y),l=y;break e;case"link":var E=Kf("link","href",f).get(l+(a.href||""));if(E){for(var w=0;w<E.length;w++)if(y=E[w],y.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&y.getAttribute("rel")===(a.rel==null?null:a.rel)&&y.getAttribute("title")===(a.title==null?null:a.title)&&y.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(w,1);break t}}y=f.createElement(l),Ke(y,l,a),f.head.appendChild(y);break;case"meta":if(E=Kf("meta","content",f).get(l+(a.content||""))){for(w=0;w<E.length;w++)if(y=E[w],y.getAttribute("content")===(a.content==null?null:""+a.content)&&y.getAttribute("name")===(a.name==null?null:a.name)&&y.getAttribute("property")===(a.property==null?null:a.property)&&y.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&y.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(w,1);break t}}y=f.createElement(l),Ke(y,l,a),f.head.appendChild(y);break;default:throw Error(o(468,l))}y[tt]=e,Ze(y),l=y}e.stateNode=l}else eh(f,e.type,e.stateNode);else e.stateNode=Jf(f,l,e.memoizedProps);else y!==l?(y===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):y.count--,l===null?eh(f,e.type,e.stateNode):Jf(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Bo(e,e.memoizedProps,a.memoizedProps)}break;case 27:gt(t,e),mt(e),l&512&&(Ve||a===null||Ht(a,a.return)),a!==null&&l&4&&Bo(e,e.memoizedProps,a.memoizedProps);break;case 5:if(gt(t,e),mt(e),l&512&&(Ve||a===null||Ht(a,a.return)),e.flags&32){f=e.stateNode;try{yi(f,"")}catch(Q){Ne(e,e.return,Q)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,Bo(e,f,a!==null?a.memoizedProps:f)),l&1024&&(No=!0);break;case 6:if(gt(t,e),mt(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(Q){Ne(e,e.return,Q)}}break;case 3:if(Xs=null,f=$t,$t=Zs(t.containerInfo),gt(t,e),$t=f,mt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{jr(t.containerInfo)}catch(Q){Ne(e,e.return,Q)}No&&(No=!1,af(e));break;case 4:l=$t,$t=Zs(e.stateNode.containerInfo),gt(t,e),mt(e),$t=l;break;case 12:gt(t,e),mt(e);break;case 13:gt(t,e),mt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qo=Ot()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mo(e,l)));break;case 22:f=e.memoizedState!==null;var B=a!==null&&a.memoizedState!==null,F=Jt,ne=Ve;if(Jt=F||f,Ve=ne||B,gt(t,e),Ve=ne,Jt=F,mt(e),l&8192)e:for(t=e.stateNode,t._visibility=f?t._visibility&-2:t._visibility|1,f&&(a===null||B||Jt||Ve||ei(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){B=a=t;try{if(y=B.stateNode,f)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=B.stateNode;var oe=B.memoizedProps.style,X=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;w.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Q){Ne(B,B.return,Q)}}}else if(t.tag===6){if(a===null){B=t;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(Q){Ne(B,B.return,Q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Mo(e,a))));break;case 19:gt(t,e),mt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Mo(e,l)));break;case 30:break;case 21:break;default:gt(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(Wc(l)){a=l;break}l=l.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var f=a.stateNode,y=Uo(e);Ms(e,y,f);break;case 5:var E=a.stateNode;a.flags&32&&(yi(E,""),a.flags&=-33);var w=Uo(e);Ms(e,w,E);break;case 3:case 4:var B=a.stateNode.containerInfo,F=Uo(e);$o(e,F,B);break;default:throw Error(o(161))}}catch(ne){Ne(e,e.return,ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function af(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;af(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function pn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ef(e,t.alternate,t),t=t.sibling}function ei(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yn(4,t,t.return),ei(t);break;case 1:Ht(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Xc(t,t.return,a),ei(t);break;case 27:Mr(t.stateNode);case 26:case 5:Ht(t,t.return),ei(t);break;case 22:t.memoizedState===null&&ei(t);break;case 30:ei(t);break;default:ei(t)}e=e.sibling}}function gn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,f=e,y=t,E=y.flags;switch(y.tag){case 0:case 11:case 15:gn(f,y,a),xr(4,y);break;case 1:if(gn(f,y,a),l=y,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){Ne(l,l.return,F)}if(l=y,f=l.updateQueue,f!==null){var w=l.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)Mu(B[f],w)}catch(F){Ne(l,l.return,F)}}a&&E&64&&Pc(y),Rr(y,y.return);break;case 27:Jc(y);case 26:case 5:gn(f,y,a),a&&l===null&&E&4&&Qc(y),Rr(y,y.return);break;case 12:gn(f,y,a);break;case 13:gn(f,y,a),a&&E&4&&rf(f,y);break;case 22:y.memoizedState===null&&gn(f,y,a),Rr(y,y.return);break;case 30:break;default:gn(f,y,a)}t=t.sibling}}function Oo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&cr(a))}function Do(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cr(e))}function zt(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)of(e,t,a,l),t=t.sibling}function of(e,t,a,l){var f=t.flags;switch(t.tag){case 0:case 11:case 15:zt(e,t,a,l),f&2048&&xr(9,t);break;case 1:zt(e,t,a,l);break;case 3:zt(e,t,a,l),f&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cr(e)));break;case 12:if(f&2048){zt(e,t,a,l),e=t.stateNode;try{var y=t.memoizedProps,E=y.id,w=y.onPostCommit;typeof w=="function"&&w(E,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){Ne(t,t.return,B)}}else zt(e,t,a,l);break;case 13:zt(e,t,a,l);break;case 23:break;case 22:y=t.stateNode,E=t.alternate,t.memoizedState!==null?y._visibility&2?zt(e,t,a,l):Tr(e,t):y._visibility&2?zt(e,t,a,l):(y._visibility|=2,Ni(e,t,a,l,(t.subtreeFlags&10256)!==0)),f&2048&&Oo(E,t);break;case 24:zt(e,t,a,l),f&2048&&Do(t.alternate,t);break;default:zt(e,t,a,l)}}function Ni(e,t,a,l,f){for(f=f&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var y=e,E=t,w=a,B=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:Ni(y,E,w,B,f),xr(8,E);break;case 23:break;case 22:var ne=E.stateNode;E.memoizedState!==null?ne._visibility&2?Ni(y,E,w,B,f):Tr(y,E):(ne._visibility|=2,Ni(y,E,w,B,f)),f&&F&2048&&Oo(E.alternate,E);break;case 24:Ni(y,E,w,B,f),f&&F&2048&&Do(E.alternate,E);break;default:Ni(y,E,w,B,f)}t=t.sibling}}function Tr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,f=l.flags;switch(l.tag){case 22:Tr(a,l),f&2048&&Oo(l.alternate,l);break;case 24:Tr(a,l),f&2048&&Do(l.alternate,l);break;default:Tr(a,l)}t=t.sibling}}var Ar=8192;function Mi(e){if(e.subtreeFlags&Ar)for(e=e.child;e!==null;)lf(e),e=e.sibling}function lf(e){switch(e.tag){case 26:Mi(e),e.flags&Ar&&e.memoizedState!==null&&Ty($t,e.memoizedState,e.memoizedProps);break;case 5:Mi(e);break;case 3:case 4:var t=$t;$t=Zs(e.stateNode.containerInfo),Mi(e),$t=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ar,Ar=16777216,Mi(e),Ar=t):Mi(e));break;default:Mi(e)}}function uf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function kr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Xe=l,ff(l,e)}uf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cf(e),e=e.sibling}function cf(e){switch(e.tag){case 0:case 11:case 15:kr(e),e.flags&2048&&yn(9,e,e.return);break;case 3:kr(e);break;case 12:kr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Os(e)):kr(e);break;default:kr(e)}}function Os(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Xe=l,ff(l,e)}uf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:yn(8,t,t.return),Os(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Os(t));break;default:Os(t)}e=e.sibling}}function ff(e,t){for(;Xe!==null;){var a=Xe;switch(a.tag){case 0:case 11:case 15:yn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:cr(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Xe=l;else e:for(a=e;Xe!==null;){l=Xe;var f=l.sibling,y=l.return;if(tf(l),l===a){Xe=null;break e}if(f!==null){f.return=y,Xe=f;break e}Xe=y}}}var jd={getCacheForType:function(e){var t=nt(Ie),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},Gd=typeof WeakMap=="function"?WeakMap:Map,Ae=0,Me=null,_e=null,xe=0,ke=0,bt=null,mn=!1,Oi=!1,Lo=!1,en=0,He=0,bn=0,ti=0,Ho=0,kt=0,Di=0,Cr=null,ct=null,zo=!1,qo=0,Ds=1/0,Ls=null,vn=null,Je=0,En=null,Li=null,Hi=0,Vo=0,jo=null,hf=null,Br=0,Go=null;function vt(){if((Ae&2)!==0&&xe!==0)return xe&-xe;if(S.T!==null){var e=Ri;return e!==0?e:Qo()}return Al()}function df(){kt===0&&(kt=(xe&536870912)===0||Te?Sl():536870912);var e=At.current;return e!==null&&(e.flags|=32),kt}function Et(e,t,a){(e===Me&&(ke===2||ke===9)||e.cancelPendingCommit!==null)&&(zi(e,0),wn(e,xe,kt,!1)),Pi(e,a),((Ae&2)===0||e!==Me)&&(e===Me&&((Ae&2)===0&&(ti|=a),He===4&&wn(e,xe,kt,!1)),qt(e))}function yf(e,t,a){if((Ae&6)!==0)throw Error(o(327));var l=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Zi(e,t),f=l?Fd(e,t):Fo(e,t,!0),y=l;do{if(f===0){Oi&&!l&&wn(e,t,0,!1);break}else{if(a=e.current.alternate,y&&!Id(a)){f=Fo(e,t,!1),y=!1;continue}if(f===2){if(y=t,e.errorRecoveryDisabledLanes&y)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){t=E;e:{var w=e;f=Cr;var B=w.current.memoizedState.isDehydrated;if(B&&(zi(w,E).flags|=256),E=Fo(w,E,!1),E!==2){if(Lo&&!B){w.errorRecoveryDisabledLanes|=y,ti|=y,f=4;break e}y=ct,ct=f,y!==null&&(ct===null?ct=y:ct.push.apply(ct,y))}f=E}if(y=!1,f!==2)continue}}if(f===1){zi(e,0),wn(e,t,0,!0);break}e:{switch(l=e,y=f,y){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:wn(l,t,kt,!mn);break e;case 2:ct=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(f=qo+300-Ot(),10<f)){if(wn(l,t,kt,!mn),Zr(l,0,!0)!==0)break e;l.timeoutHandle=Gf(pf.bind(null,l,a,ct,Ls,zo,t,kt,ti,Di,mn,y,2,-0,0),f);break e}pf(l,a,ct,Ls,zo,t,kt,ti,Di,mn,y,0,-0,0)}}break}while(!0);qt(e)}function pf(e,t,a,l,f,y,E,w,B,F,ne,oe,X,Q){if(e.timeoutHandle=-1,oe=t.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Lr={stylesheets:null,count:0,unsuspend:Ry},lf(t),oe=Ay(),oe!==null)){e.cancelPendingCommit=oe(_f.bind(null,e,t,y,a,l,f,E,w,B,ne,1,X,Q)),wn(e,y,E,!F);return}_f(e,t,y,a,l,f,E,w,B)}function Id(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],y=f.getSnapshot;f=f.value;try{if(!yt(y(),f))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wn(e,t,a,l){t&=~Ho,t&=~ti,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var f=t;0<f;){var y=31-dt(f),E=1<<y;l[y]=-1,f&=~E}a!==0&&Rl(e,a,t)}function Hs(){return(Ae&6)===0?(Ur(0),!1):!0}function Io(){if(_e!==null){if(ke===0)var e=_e.return;else e=_e,Ft=Xn=null,ao(e),Ui=null,wr=0,e=_e;for(;e!==null;)Zc(e.alternate,e),e=e.return;_e=null}}function zi(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,ly(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Io(),Me=e,_e=a=Gt(e.current,null),xe=t,ke=0,bt=null,mn=!1,Oi=Zi(e,t),Lo=!1,Di=kt=Ho=ti=bn=He=0,ct=Cr=null,zo=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var f=31-dt(l),y=1<<f;t|=e[f],l&=~y}return en=t,ss(),a}function gf(e,t){ve=null,S.H=Rs,t===hr||t===ys?(t=$u(),ke=3):t===Cu?(t=$u(),ke=4):ke=t===Nc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,bt=t,_e===null&&(He=1,Bs(e,St(t,e.current)))}function mf(){var e=S.H;return S.H=Rs,e===null?Rs:e}function bf(){var e=S.A;return S.A=jd,e}function Yo(){He=4,mn||(xe&4194048)!==xe&&At.current!==null||(Oi=!0),(bn&134217727)===0&&(ti&134217727)===0||Me===null||wn(Me,xe,kt,!1)}function Fo(e,t,a){var l=Ae;Ae|=2;var f=mf(),y=bf();(Me!==e||xe!==t)&&(Ls=null,zi(e,t)),t=!1;var E=He;e:do try{if(ke!==0&&_e!==null){var w=_e,B=bt;switch(ke){case 8:Io(),E=6;break e;case 3:case 2:case 9:case 6:At.current===null&&(t=!0);var F=ke;if(ke=0,bt=null,qi(e,w,B,F),a&&Oi){E=0;break e}break;default:F=ke,ke=0,bt=null,qi(e,w,B,F)}}Yd(),E=He;break}catch(ne){gf(e,ne)}while(!0);return t&&e.shellSuspendCounter++,Ft=Xn=null,Ae=l,S.H=f,S.A=y,_e===null&&(Me=null,xe=0,ss()),E}function Yd(){for(;_e!==null;)vf(_e)}function Fd(e,t){var a=Ae;Ae|=2;var l=mf(),f=bf();Me!==e||xe!==t?(Ls=null,Ds=Ot()+500,zi(e,t)):Oi=Zi(e,t);e:do try{if(ke!==0&&_e!==null){t=_e;var y=bt;t:switch(ke){case 1:ke=0,bt=null,qi(e,t,y,1);break;case 2:case 9:if(Bu(y)){ke=0,bt=null,Ef(t);break}t=function(){ke!==2&&ke!==9||Me!==e||(ke=7),qt(e)},y.then(t,t);break e;case 3:ke=7;break e;case 4:ke=5;break e;case 7:Bu(y)?(ke=0,bt=null,Ef(t)):(ke=0,bt=null,qi(e,t,y,7));break;case 5:var E=null;switch(_e.tag){case 26:E=_e.memoizedState;case 5:case 27:var w=_e;if(!E||th(E)){ke=0,bt=null;var B=w.sibling;if(B!==null)_e=B;else{var F=w.return;F!==null?(_e=F,zs(F)):_e=null}break t}}ke=0,bt=null,qi(e,t,y,5);break;case 6:ke=0,bt=null,qi(e,t,y,6);break;case 8:Io(),He=6;break e;default:throw Error(o(462))}}Zd();break}catch(ne){gf(e,ne)}while(!0);return Ft=Xn=null,S.H=l,S.A=f,Ae=a,_e!==null?0:(Me=null,xe=0,ss(),He)}function Zd(){for(;_e!==null&&!Bt();)vf(_e)}function vf(e){var t=Yc(e.alternate,e,en);e.memoizedProps=e.pendingProps,t===null?zs(e):_e=t}function Ef(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=zc(a,t,t.pendingProps,t.type,void 0,xe);break;case 11:t=zc(a,t,t.pendingProps,t.type.render,t.ref,xe);break;case 5:ao(t);default:Zc(a,t),t=_e=Eu(t,en),t=Yc(a,t,en)}e.memoizedProps=e.pendingProps,t===null?zs(e):_e=t}function qi(e,t,a,l){Ft=Xn=null,ao(t),Ui=null,wr=0;var f=t.return;try{if(Dd(e,f,t,a,xe)){He=1,Bs(e,St(a,e.current)),_e=null;return}}catch(y){if(f!==null)throw _e=f,y;He=1,Bs(e,St(a,e.current)),_e=null;return}t.flags&32768?(Te||l===1?e=!0:Oi||(xe&536870912)!==0?e=!1:(mn=e=!0,(l===2||l===9||l===3||l===6)&&(l=At.current,l!==null&&l.tag===13&&(l.flags|=16384))),wf(t,e)):zs(t)}function zs(e){var t=e;do{if((t.flags&32768)!==0){wf(t,mn);return}e=t.return;var a=Hd(t.alternate,t,en);if(a!==null){_e=a;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);He===0&&(He=5)}function wf(e,t){do{var a=zd(e.alternate,e);if(a!==null){a.flags&=32767,_e=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){_e=e;return}_e=e=a}while(e!==null);He=6,_e=null}function _f(e,t,a,l,f,y,E,w,B){e.cancelPendingCommit=null;do qs();while(Je!==0);if((Ae&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(y=t.lanes|t.childLanes,y|=Oa,Rh(e,a,y,E,w,B),e===Me&&(_e=Me=null,xe=0),Li=t,En=e,Hi=a,Vo=y,jo=f,hf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Wd(Ir,function(){return Af(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=S.T,S.T=null,f=L.p,L.p=2,E=Ae,Ae|=4;try{qd(e,t,a)}finally{Ae=E,L.p=f,S.T=l}}Je=1,Sf(),xf(),Rf()}}function Sf(){if(Je===1){Je=0;var e=En,t=Li,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=S.T,S.T=null;var l=L.p;L.p=2;var f=Ae;Ae|=4;try{sf(t,e);var y=rl,E=cu(e.containerInfo),w=y.focusedElem,B=y.selectionRange;if(E!==w&&w&&w.ownerDocument&&uu(w.ownerDocument.documentElement,w)){if(B!==null&&Ba(w)){var F=B.start,ne=B.end;if(ne===void 0&&(ne=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(ne,w.value.length);else{var oe=w.ownerDocument||document,X=oe&&oe.defaultView||window;if(X.getSelection){var Q=X.getSelection(),be=w.textContent.length,pe=Math.min(B.start,be),Ue=B.end===void 0?pe:Math.min(B.end,be);!Q.extend&&pe>Ue&&(E=Ue,Ue=pe,pe=E);var j=lu(w,pe),q=lu(w,Ue);if(j&&q&&(Q.rangeCount!==1||Q.anchorNode!==j.node||Q.anchorOffset!==j.offset||Q.focusNode!==q.node||Q.focusOffset!==q.offset)){var Y=oe.createRange();Y.setStart(j.node,j.offset),Q.removeAllRanges(),pe>Ue?(Q.addRange(Y),Q.extend(q.node,q.offset)):(Y.setEnd(q.node,q.offset),Q.addRange(Y))}}}}for(oe=[],Q=w;Q=Q.parentNode;)Q.nodeType===1&&oe.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<oe.length;w++){var re=oe[w];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Js=!!il,rl=il=null}finally{Ae=f,L.p=l,S.T=a}}e.current=t,Je=2}}function xf(){if(Je===2){Je=0;var e=En,t=Li,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=S.T,S.T=null;var l=L.p;L.p=2;var f=Ae;Ae|=4;try{ef(e,t.alternate,t)}finally{Ae=f,L.p=l,S.T=a}}Je=3}}function Rf(){if(Je===4||Je===3){Je=0,Gr();var e=En,t=Li,a=Hi,l=hf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Je=5:(Je=0,Li=En=null,Tf(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(vn=null),la(a),t=t.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Fi,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=S.T,f=L.p,L.p=2,S.T=null;try{for(var y=e.onRecoverableError,E=0;E<l.length;E++){var w=l[E];y(w.value,{componentStack:w.stack})}}finally{S.T=t,L.p=f}}(Hi&3)!==0&&qs(),qt(e),f=e.pendingLanes,(a&4194090)!==0&&(f&42)!==0?e===Go?Br++:(Br=0,Go=e):Br=0,Ur(0)}}function Tf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,cr(t)))}function qs(e){return Sf(),xf(),Rf(),Af()}function Af(){if(Je!==5)return!1;var e=En,t=Vo;Vo=0;var a=la(Hi),l=S.T,f=L.p;try{L.p=32>a?32:a,S.T=null,a=jo,jo=null;var y=En,E=Hi;if(Je=0,Li=En=null,Hi=0,(Ae&6)!==0)throw Error(o(331));var w=Ae;if(Ae|=4,cf(y.current),of(y,y.current,E,a),Ae=w,Ur(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Fi,y)}catch{}return!0}finally{L.p=f,S.T=l,Tf(e,t)}}function kf(e,t,a){t=St(a,t),t=wo(e.stateNode,t,2),e=cn(e,t,2),e!==null&&(Pi(e,2),qt(e))}function Ne(e,t,a){if(e.tag===3)kf(e,e,a);else for(;t!==null;){if(t.tag===3){kf(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vn===null||!vn.has(l))){e=St(a,e),a=Uc(2),l=cn(t,a,2),l!==null&&($c(a,l,t,e),Pi(l,2),qt(l));break}}t=t.return}}function Zo(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new Gd;var f=new Set;l.set(t,f)}else f=l.get(t),f===void 0&&(f=new Set,l.set(t,f));f.has(a)||(Lo=!0,f.add(a),e=Pd.bind(null,e,t,a),t.then(e,e))}function Pd(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Me===e&&(xe&a)===a&&(He===4||He===3&&(xe&62914560)===xe&&300>Ot()-qo?(Ae&2)===0&&zi(e,0):Ho|=a,Di===xe&&(Di=0)),qt(e)}function Cf(e,t){t===0&&(t=xl()),e=wi(e,t),e!==null&&(Pi(e,t),qt(e))}function Xd(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Cf(e,a)}function Qd(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),Cf(e,a)}function Wd(e,t){return ze(e,t)}var Vs=null,Vi=null,Po=!1,js=!1,Xo=!1,ni=0;function qt(e){e!==Vi&&e.next===null&&(Vi===null?Vs=Vi=e:Vi=Vi.next=e),js=!0,Po||(Po=!0,Kd())}function Ur(e,t){if(!Xo&&js){Xo=!0;do for(var a=!1,l=Vs;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var y=0;else{var E=l.suspendedLanes,w=l.pingedLanes;y=(1<<31-dt(42|e)+1)-1,y&=f&~(E&~w),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(a=!0,Nf(l,y))}else y=xe,y=Zr(l,l===Me?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(y&3)===0||Zi(l,y)||(a=!0,Nf(l,y));l=l.next}while(a);Xo=!1}}function Jd(){Bf()}function Bf(){js=Po=!1;var e=0;ni!==0&&(oy()&&(e=ni),ni=0);for(var t=Ot(),a=null,l=Vs;l!==null;){var f=l.next,y=Uf(l,t);y===0?(l.next=null,a===null?Vs=f:a.next=f,f===null&&(Vi=a)):(a=l,(e!==0||(y&3)!==0)&&(js=!0)),l=f}Ur(e)}function Uf(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,y=e.pendingLanes&-62914561;0<y;){var E=31-dt(y),w=1<<E,B=f[E];B===-1?((w&a)===0||(w&l)!==0)&&(f[E]=xh(w,t)):B<=t&&(e.expiredLanes|=w),y&=~w}if(t=Me,a=xe,a=Zr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(ke===2||ke===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&et(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Zi(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&et(l),la(a)){case 2:case 8:a=wl;break;case 32:a=Ir;break;case 268435456:a=_l;break;default:a=Ir}return l=$f.bind(null,e),a=ze(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&et(l),e.callbackPriority=2,e.callbackNode=null,2}function $f(e,t){if(Je!==0&&Je!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(qs()&&e.callbackNode!==a)return null;var l=xe;return l=Zr(e,e===Me?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(yf(e,l,t),Uf(e,Ot()),e.callbackNode!=null&&e.callbackNode===a?$f.bind(null,e):null)}function Nf(e,t){if(qs())return null;yf(e,t,!0)}function Kd(){uy(function(){(Ae&6)!==0?ze(El,Jd):Bf()})}function Qo(){return ni===0&&(ni=Sl()),ni}function Mf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jr(""+e)}function Of(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function ey(e,t,a,l,f){if(t==="submit"&&a&&a.stateNode===f){var y=Mf((f[st]||null).action),E=l.submitter;E&&(t=(t=E[st]||null)?Mf(t.formAction):E.getAttribute("formAction"),t!==null&&(y=t,E=null));var w=new ns("action","action",null,l,f);e.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ni!==0){var B=E?Of(f,E):new FormData(f);go(a,{pending:!0,data:B,method:f.method,action:y},null,B)}}else typeof y=="function"&&(w.preventDefault(),B=E?Of(f,E):new FormData(f),go(a,{pending:!0,data:B,method:f.method,action:y},y,B))},currentTarget:f}]})}}for(var Wo=0;Wo<Ma.length;Wo++){var Jo=Ma[Wo],ty=Jo.toLowerCase(),ny=Jo[0].toUpperCase()+Jo.slice(1);Ut(ty,"on"+ny)}Ut(du,"onAnimationEnd"),Ut(yu,"onAnimationIteration"),Ut(pu,"onAnimationStart"),Ut("dblclick","onDoubleClick"),Ut("focusin","onFocus"),Ut("focusout","onBlur"),Ut(vd,"onTransitionRun"),Ut(Ed,"onTransitionStart"),Ut(wd,"onTransitionCancel"),Ut(gu,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($r));function Df(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;e:{var y=void 0;if(t)for(var E=l.length-1;0<=E;E--){var w=l[E],B=w.instance,F=w.currentTarget;if(w=w.listener,B!==y&&f.isPropagationStopped())break e;y=w,f.currentTarget=F;try{y(f)}catch(ne){Cs(ne)}f.currentTarget=null,y=B}else for(E=0;E<l.length;E++){if(w=l[E],B=w.instance,F=w.currentTarget,w=w.listener,B!==y&&f.isPropagationStopped())break e;y=w,f.currentTarget=F;try{y(f)}catch(ne){Cs(ne)}f.currentTarget=null,y=B}}}}function Se(e,t){var a=t[ua];a===void 0&&(a=t[ua]=new Set);var l=e+"__bubble";a.has(l)||(Lf(t,e,2,!1),a.add(l))}function Ko(e,t,a){var l=0;t&&(l|=4),Lf(a,e,l,t)}var Gs="_reactListening"+Math.random().toString(36).slice(2);function el(e){if(!e[Gs]){e[Gs]=!0,Cl.forEach(function(a){a!=="selectionchange"&&(iy.has(a)||Ko(a,!1,e),Ko(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gs]||(t[Gs]=!0,Ko("selectionchange",!1,t))}}function Lf(e,t,a,l){switch(oh(t)){case 2:var f=By;break;case 8:f=Uy;break;default:f=yl}a=f.bind(null,t,a,e),f=void 0,!Ea||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(t,a,{capture:!0,passive:f}):e.addEventListener(t,a,!0):f!==void 0?e.addEventListener(t,a,{passive:f}):e.addEventListener(t,a,!1)}function tl(e,t,a,l,f){var y=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var w=l.stateNode.containerInfo;if(w===f)break;if(E===4)for(E=l.return;E!==null;){var B=E.tag;if((B===3||B===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;w!==null;){if(E=li(w),E===null)return;if(B=E.tag,B===5||B===6||B===26||B===27){l=y=E;continue e}w=w.parentNode}}l=l.return}Gl(function(){var F=y,ne=ba(a),oe=[];e:{var X=mu.get(e);if(X!==void 0){var Q=ns,be=e;switch(e){case"keypress":if(es(a)===0)break e;case"keydown":case"keyup":Q=Wh;break;case"focusin":be="focus",Q=Ra;break;case"focusout":be="blur",Q=Ra;break;case"beforeblur":case"afterblur":Q=Ra;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=ed;break;case du:case yu:case pu:Q=jh;break;case gu:Q=nd;break;case"scroll":case"scrollend":Q=Lh;break;case"wheel":Q=rd;break;case"copy":case"cut":case"paste":Q=Ih;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Pl;break;case"toggle":case"beforetoggle":Q=ad}var pe=(t&4)!==0,Ue=!pe&&(e==="scroll"||e==="scrollend"),j=pe?X!==null?X+"Capture":null:X;pe=[];for(var q=F,Y;q!==null;){var re=q;if(Y=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Y===null||j===null||(re=Wi(q,j),re!=null&&pe.push(Nr(q,re,Y))),Ue)break;q=q.return}0<pe.length&&(X=new Q(X,be,null,a,ne),oe.push({event:X,listeners:pe}))}}if((t&7)===0){e:{if(X=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",X&&a!==ma&&(be=a.relatedTarget||a.fromElement)&&(li(be)||be[oi]))break e;if((Q||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,Q?(be=a.relatedTarget||a.toElement,Q=F,be=be?li(be):null,be!==null&&(Ue=c(be),pe=be.tag,be!==Ue||pe!==5&&pe!==27&&pe!==6)&&(be=null)):(Q=null,be=F),Q!==be)){if(pe=Fl,re="onMouseLeave",j="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(pe=Pl,re="onPointerLeave",j="onPointerEnter",q="pointer"),Ue=Q==null?X:Qi(Q),Y=be==null?X:Qi(be),X=new pe(re,q+"leave",Q,a,ne),X.target=Ue,X.relatedTarget=Y,re=null,li(ne)===F&&(pe=new pe(j,q+"enter",be,a,ne),pe.target=Y,pe.relatedTarget=Ue,re=pe),Ue=re,Q&&be)t:{for(pe=Q,j=be,q=0,Y=pe;Y;Y=ji(Y))q++;for(Y=0,re=j;re;re=ji(re))Y++;for(;0<q-Y;)pe=ji(pe),q--;for(;0<Y-q;)j=ji(j),Y--;for(;q--;){if(pe===j||j!==null&&pe===j.alternate)break t;pe=ji(pe),j=ji(j)}pe=null}else pe=null;Q!==null&&Hf(oe,X,Q,pe,!1),be!==null&&Ue!==null&&Hf(oe,Ue,be,pe,!0)}}e:{if(X=F?Qi(F):window,Q=X.nodeName&&X.nodeName.toLowerCase(),Q==="select"||Q==="input"&&X.type==="file")var he=nu;else if(eu(X))if(iu)he=gd;else{he=yd;var Ee=dd}else Q=X.nodeName,!Q||Q.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?F&&ga(F.elementType)&&(he=nu):he=pd;if(he&&(he=he(e,F))){tu(oe,he,a,ne);break e}Ee&&Ee(e,X,F),e==="focusout"&&F&&X.type==="number"&&F.memoizedProps.value!=null&&pa(X,"number",X.value)}switch(Ee=F?Qi(F):window,e){case"focusin":(eu(Ee)||Ee.contentEditable==="true")&&(bi=Ee,Ua=F,sr=null);break;case"focusout":sr=Ua=bi=null;break;case"mousedown":$a=!0;break;case"contextmenu":case"mouseup":case"dragend":$a=!1,fu(oe,a,ne);break;case"selectionchange":if(bd)break;case"keydown":case"keyup":fu(oe,a,ne)}var ye;if(Aa)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else mi?Jl(e,a)&&(me="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(me="onCompositionStart");me&&(Xl&&a.locale!=="ko"&&(mi||me!=="onCompositionStart"?me==="onCompositionEnd"&&mi&&(ye=Il()):(an=ne,wa="value"in an?an.value:an.textContent,mi=!0)),Ee=Is(F,me),0<Ee.length&&(me=new Zl(me,e,null,a,ne),oe.push({event:me,listeners:Ee}),ye?me.data=ye:(ye=Kl(a),ye!==null&&(me.data=ye)))),(ye=ld?ud(e,a):cd(e,a))&&(me=Is(F,"onBeforeInput"),0<me.length&&(Ee=new Zl("onBeforeInput","beforeinput",null,a,ne),oe.push({event:Ee,listeners:me}),Ee.data=ye)),ey(oe,e,F,a,ne)}Df(oe,t)})}function Nr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Is(e,t){for(var a=t+"Capture",l=[];e!==null;){var f=e,y=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||y===null||(f=Wi(e,a),f!=null&&l.unshift(Nr(e,f,y)),f=Wi(e,t),f!=null&&l.push(Nr(e,f,y))),e.tag===3)return l;e=e.return}return[]}function ji(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Hf(e,t,a,l,f){for(var y=t._reactName,E=[];a!==null&&a!==l;){var w=a,B=w.alternate,F=w.stateNode;if(w=w.tag,B!==null&&B===l)break;w!==5&&w!==26&&w!==27||F===null||(B=F,f?(F=Wi(a,y),F!=null&&E.unshift(Nr(a,F,B))):f||(F=Wi(a,y),F!=null&&E.push(Nr(a,F,B)))),a=a.return}E.length!==0&&e.push({event:t,listeners:E})}var ry=/\r\n?/g,sy=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(ry,`
`).replace(sy,"")}function qf(e,t){return t=zf(t),zf(e)===t}function Ys(){}function Be(e,t,a,l,f,y){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||yi(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&yi(e,""+l);break;case"className":Xr(e,"class",l);break;case"tabIndex":Xr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(e,a,l);break;case"style":Vl(e,l,y);break;case"data":if(t!=="object"){Xr(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Jr(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(a==="formAction"?(t!=="input"&&Be(e,t,"name",f.name,f,null),Be(e,t,"formEncType",f.formEncType,f,null),Be(e,t,"formMethod",f.formMethod,f,null),Be(e,t,"formTarget",f.formTarget,f,null)):(Be(e,t,"encType",f.encType,f,null),Be(e,t,"method",f.method,f,null),Be(e,t,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Jr(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Ys);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Jr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Se("beforetoggle",e),Se("toggle",e),Pr(e,"popover",l);break;case"xlinkActuate":Vt(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Pr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Oh.get(a)||a,Pr(e,a,l))}}function nl(e,t,a,l,f,y){switch(a){case"style":Vl(e,l,y);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof l=="string"?yi(e,l):(typeof l=="number"||typeof l=="bigint")&&yi(e,""+l);break;case"onScroll":l!=null&&Se("scroll",e);break;case"onScrollEnd":l!=null&&Se("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Ys);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),t=a.slice(2,f?a.length-7:void 0),y=e[st]||null,y=y!=null?y[a]:null,typeof y=="function"&&e.removeEventListener(t,y,f),typeof l=="function")){typeof y!="function"&&y!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,f);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Pr(e,a,l)}}}function Ke(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",e),Se("load",e);var l=!1,f=!1,y;for(y in a)if(a.hasOwnProperty(y)){var E=a[y];if(E!=null)switch(y){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Be(e,t,y,E,a,null)}}f&&Be(e,t,"srcSet",a.srcSet,a,null),l&&Be(e,t,"src",a.src,a,null);return;case"input":Se("invalid",e);var w=y=E=f=null,B=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var ne=a[l];if(ne!=null)switch(l){case"name":f=ne;break;case"type":E=ne;break;case"checked":B=ne;break;case"defaultChecked":F=ne;break;case"value":y=ne;break;case"defaultValue":w=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,t));break;default:Be(e,t,l,ne,a,null)}}Ll(e,y,w,B,F,E,f,!1),Qr(e);return;case"select":Se("invalid",e),l=E=y=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":y=w;break;case"defaultValue":E=w;break;case"multiple":l=w;default:Be(e,t,f,w,a,null)}t=y,a=E,e.multiple=!!l,t!=null?di(e,!!l,t,!1):a!=null&&di(e,!!l,a,!0);return;case"textarea":Se("invalid",e),y=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(w=a[E],w!=null))switch(E){case"value":l=w;break;case"defaultValue":f=w;break;case"children":y=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(91));break;default:Be(e,t,E,w,a,null)}zl(e,l,f,y),Qr(e);return;case"option":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Be(e,t,B,l,a,null)}return;case"dialog":Se("beforetoggle",e),Se("toggle",e),Se("cancel",e),Se("close",e);break;case"iframe":case"object":Se("load",e);break;case"video":case"audio":for(l=0;l<$r.length;l++)Se($r[l],e);break;case"image":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"embed":case"source":case"link":Se("error",e),Se("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Be(e,t,F,l,a,null)}return;default:if(ga(t)){for(ne in a)a.hasOwnProperty(ne)&&(l=a[ne],l!==void 0&&nl(e,t,ne,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Be(e,t,w,l,a,null))}function ay(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,y=null,E=null,w=null,B=null,F=null,ne=null;for(Q in a){var oe=a[Q];if(a.hasOwnProperty(Q)&&oe!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":B=oe;default:l.hasOwnProperty(Q)||Be(e,t,Q,null,l,oe)}}for(var X in l){var Q=l[X];if(oe=a[X],l.hasOwnProperty(X)&&(Q!=null||oe!=null))switch(X){case"type":y=Q;break;case"name":f=Q;break;case"checked":F=Q;break;case"defaultChecked":ne=Q;break;case"value":E=Q;break;case"defaultValue":w=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(o(137,t));break;default:Q!==oe&&Be(e,t,X,Q,l,oe)}}ya(e,E,w,B,F,ne,y,f);return;case"select":Q=E=w=X=null;for(y in a)if(B=a[y],a.hasOwnProperty(y)&&B!=null)switch(y){case"value":break;case"multiple":Q=B;default:l.hasOwnProperty(y)||Be(e,t,y,null,l,B)}for(f in l)if(y=l[f],B=a[f],l.hasOwnProperty(f)&&(y!=null||B!=null))switch(f){case"value":X=y;break;case"defaultValue":w=y;break;case"multiple":E=y;default:y!==B&&Be(e,t,f,y,l,B)}t=w,a=E,l=Q,X!=null?di(e,!!a,X,!1):!!l!=!!a&&(t!=null?di(e,!!a,t,!0):di(e,!!a,a?[]:"",!1));return;case"textarea":Q=X=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Be(e,t,w,null,l,f)}for(E in l)if(f=l[E],y=a[E],l.hasOwnProperty(E)&&(f!=null||y!=null))switch(E){case"value":X=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(o(91));break;default:f!==y&&Be(e,t,E,f,l,y)}Hl(e,X,Q);return;case"option":for(var be in a)if(X=a[be],a.hasOwnProperty(be)&&X!=null&&!l.hasOwnProperty(be))switch(be){case"selected":e.selected=!1;break;default:Be(e,t,be,null,l,X)}for(B in l)if(X=l[B],Q=a[B],l.hasOwnProperty(B)&&X!==Q&&(X!=null||Q!=null))switch(B){case"selected":e.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Be(e,t,B,X,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in a)X=a[pe],a.hasOwnProperty(pe)&&X!=null&&!l.hasOwnProperty(pe)&&Be(e,t,pe,null,l,X);for(F in l)if(X=l[F],Q=a[F],l.hasOwnProperty(F)&&X!==Q&&(X!=null||Q!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,t));break;default:Be(e,t,F,X,l,Q)}return;default:if(ga(t)){for(var Ue in a)X=a[Ue],a.hasOwnProperty(Ue)&&X!==void 0&&!l.hasOwnProperty(Ue)&&nl(e,t,Ue,void 0,l,X);for(ne in l)X=l[ne],Q=a[ne],!l.hasOwnProperty(ne)||X===Q||X===void 0&&Q===void 0||nl(e,t,ne,X,l,Q);return}}for(var j in a)X=a[j],a.hasOwnProperty(j)&&X!=null&&!l.hasOwnProperty(j)&&Be(e,t,j,null,l,X);for(oe in l)X=l[oe],Q=a[oe],!l.hasOwnProperty(oe)||X===Q||X==null&&Q==null||Be(e,t,oe,X,l,Q)}var il=null,rl=null;function Fs(e){return e.nodeType===9?e:e.ownerDocument}function Vf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function sl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var al=null;function oy(){var e=window.event;return e&&e.type==="popstate"?e===al?!1:(al=e,!0):(al=null,!1)}var Gf=typeof setTimeout=="function"?setTimeout:void 0,ly=typeof clearTimeout=="function"?clearTimeout:void 0,If=typeof Promise=="function"?Promise:void 0,uy=typeof queueMicrotask=="function"?queueMicrotask:typeof If<"u"?function(e){return If.resolve(null).then(e).catch(cy)}:Gf;function cy(e){setTimeout(function(){throw e})}function _n(e){return e==="head"}function Yf(e,t){var a=t,l=0,f=0;do{var y=a.nextSibling;if(e.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"){if(0<l&&8>l){a=l;var E=e.ownerDocument;if(a&1&&Mr(E.documentElement),a&2&&Mr(E.body),a&4)for(a=E.head,Mr(a),E=a.firstChild;E;){var w=E.nextSibling,B=E.nodeName;E[Xi]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=w}}if(f===0){e.removeChild(y),jr(t);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=y}while(a);jr(t)}function ol(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ol(a),ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function fy(e,t,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Xi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(y=e.getAttribute("rel"),y==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(y!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(y=e.getAttribute("src"),(y!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&y&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var y=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===y)return e}else return e;if(e=Nt(e.nextSibling),e===null)break}return null}function hy(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Nt(e.nextSibling),e===null))return null;return e}function ll(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function dy(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Nt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var ul=null;function Ff(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function Zf(e,t,a){switch(t=Fs(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Mr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ca(e)}var Ct=new Map,Pf=new Set;function Zs(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var tn=L.d;L.d={f:yy,r:py,D:gy,C:my,L:by,m:vy,X:wy,S:Ey,M:_y};function yy(){var e=tn.f(),t=Hs();return e||t}function py(e){var t=ui(e);t!==null&&t.tag===5&&t.type==="form"?dc(t):tn.r(e)}var Gi=typeof document>"u"?null:document;function Xf(e,t,a){var l=Gi;if(l&&typeof t=="string"&&t){var f=_t(t);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Pf.has(f)||(Pf.add(f),e={rel:e,crossOrigin:a,href:t},l.querySelector(f)===null&&(t=l.createElement("link"),Ke(t,"link",e),Ze(t),l.head.appendChild(t)))}}function gy(e){tn.D(e),Xf("dns-prefetch",e,null)}function my(e,t){tn.C(e,t),Xf("preconnect",e,t)}function by(e,t,a){tn.L(e,t,a);var l=Gi;if(l&&e&&t){var f='link[rel="preload"][as="'+_t(t)+'"]';t==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+_t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+_t(a.imageSizes)+'"]')):f+='[href="'+_t(e)+'"]';var y=f;switch(t){case"style":y=Ii(e);break;case"script":y=Yi(e)}Ct.has(y)||(e=v({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ct.set(y,e),l.querySelector(f)!==null||t==="style"&&l.querySelector(Or(y))||t==="script"&&l.querySelector(Dr(y))||(t=l.createElement("link"),Ke(t,"link",e),Ze(t),l.head.appendChild(t)))}}function vy(e,t){tn.m(e,t);var a=Gi;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",f='link[rel="modulepreload"][as="'+_t(l)+'"][href="'+_t(e)+'"]',y=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Yi(e)}if(!Ct.has(y)&&(e=v({rel:"modulepreload",href:e},t),Ct.set(y,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Dr(y)))return}l=a.createElement("link"),Ke(l,"link",e),Ze(l),a.head.appendChild(l)}}}function Ey(e,t,a){tn.S(e,t,a);var l=Gi;if(l&&e){var f=ci(l).hoistableStyles,y=Ii(e);t=t||"default";var E=f.get(y);if(!E){var w={loading:0,preload:null};if(E=l.querySelector(Or(y)))w.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ct.get(y))&&cl(e,a);var B=E=l.createElement("link");Ze(B),Ke(B,"link",e),B._p=new Promise(function(F,ne){B.onload=F,B.onerror=ne}),B.addEventListener("load",function(){w.loading|=1}),B.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Ps(E,t,l)}E={type:"stylesheet",instance:E,count:1,state:w},f.set(y,E)}}}function wy(e,t){tn.X(e,t);var a=Gi;if(a&&e){var l=ci(a).hoistableScripts,f=Yi(e),y=l.get(f);y||(y=a.querySelector(Dr(f)),y||(e=v({src:e,async:!0},t),(t=Ct.get(f))&&fl(e,t),y=a.createElement("script"),Ze(y),Ke(y,"link",e),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(f,y))}}function _y(e,t){tn.M(e,t);var a=Gi;if(a&&e){var l=ci(a).hoistableScripts,f=Yi(e),y=l.get(f);y||(y=a.querySelector(Dr(f)),y||(e=v({src:e,async:!0,type:"module"},t),(t=Ct.get(f))&&fl(e,t),y=a.createElement("script"),Ze(y),Ke(y,"link",e),a.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},l.set(f,y))}}function Qf(e,t,a,l){var f=(f=ue.current)?Zs(f):null;if(!f)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Ii(a.href),a=ci(f).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ii(a.href);var y=ci(f).hoistableStyles,E=y.get(e);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(e,E),(y=f.querySelector(Or(e)))&&!y._p&&(E.instance=y,E.state.loading=5),Ct.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ct.set(e,a),y||Sy(f,e,a,E.state))),t&&l===null)throw Error(o(528,""));return E}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Yi(a),a=ci(f).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ii(e){return'href="'+_t(e)+'"'}function Or(e){return'link[rel="stylesheet"]['+e+"]"}function Wf(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Sy(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Ke(t,"link",a),Ze(t),e.head.appendChild(t))}function Yi(e){return'[src="'+_t(e)+'"]'}function Dr(e){return"script[async]"+e}function Jf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+_t(a.href)+'"]');if(l)return t.instance=l,Ze(l),l;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ze(l),Ke(l,"style",f),Ps(l,a.precedence,e),t.instance=l;case"stylesheet":f=Ii(a.href);var y=e.querySelector(Or(f));if(y)return t.state.loading|=4,t.instance=y,Ze(y),y;l=Wf(a),(f=Ct.get(f))&&cl(l,f),y=(e.ownerDocument||e).createElement("link"),Ze(y);var E=y;return E._p=new Promise(function(w,B){E.onload=w,E.onerror=B}),Ke(y,"link",l),t.state.loading|=4,Ps(y,a.precedence,e),t.instance=y;case"script":return y=Yi(a.src),(f=e.querySelector(Dr(y)))?(t.instance=f,Ze(f),f):(l=a,(f=Ct.get(y))&&(l=v({},a),fl(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ze(f),Ke(f,"link",l),e.head.appendChild(f),t.instance=f);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ps(l,a.precedence,e));return t.instance}function Ps(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,y=f,E=0;E<l.length;E++){var w=l[E];if(w.dataset.precedence===t)y=w;else if(y!==f)break}y?y.parentNode.insertBefore(e,y.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function cl(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function fl(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Xs=null;function Kf(e,t,a){if(Xs===null){var l=new Map,f=Xs=new Map;f.set(a,l)}else f=Xs,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var y=a[f];if(!(y[Xi]||y[tt]||e==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(t)||"";E=e+E;var w=l.get(E);w?w.push(y):l.set(E,[y])}}return l}function eh(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function xy(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function th(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Lr=null;function Ry(){}function Ty(e,t,a){if(Lr===null)throw Error(o(475));var l=Lr;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var f=Ii(a.href),y=e.querySelector(Or(f));if(y){e=y._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Qs.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=y,Ze(y);return}y=e.ownerDocument||e,a=Wf(a),(f=Ct.get(f))&&cl(a,f),y=y.createElement("link"),Ze(y);var E=y;E._p=new Promise(function(w,B){E.onload=w,E.onerror=B}),Ke(y,"link",a),t.instance=y}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=Qs.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function Ay(){if(Lr===null)throw Error(o(475));var e=Lr;return e.stylesheets&&e.count===0&&hl(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&hl(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Qs(){if(this.count--,this.count===0){if(this.stylesheets)hl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ws=null;function hl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ws=new Map,t.forEach(ky,e),Ws=null,Qs.call(e))}function ky(e,t){if(!(t.state.loading&4)){var a=Ws.get(e);if(a)var l=a.get(null);else{a=new Map,Ws.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<f.length;y++){var E=f[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=t.instance,E=f.getAttribute("data-precedence"),y=a.get(E)||l,y===l&&a.set(null,f),a.set(E,f),this.count++,l=Qs.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),y?y.parentNode.insertBefore(f,y.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),t.state.loading|=4}}var Hr={$$typeof:I,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Cy(e,t,a,l,f,y,E,w){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=aa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.hiddenUpdates=aa(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function nh(e,t,a,l,f,y,E,w,B,F,ne,oe){return e=new Cy(e,t,a,E,w,B,F,oe),t=1,y===!0&&(t|=24),y=pt(3,null,null,t),e.current=y,y.stateNode=e,t=Fa(),t.refCount++,e.pooledCache=t,t.refCount++,y.memoizedState={element:l,isDehydrated:a,cache:t},Qa(y),e}function ih(e){return e?(e=_i,e):_i}function rh(e,t,a,l,f,y){f=ih(f),l.context===null?l.context=f:l.pendingContext=f,l=un(t),l.payload={element:a},y=y===void 0?null:y,y!==null&&(l.callback=y),a=cn(e,l,t),a!==null&&(Et(a,e,t),yr(a,e,t))}function sh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function dl(e,t){sh(e,t),(e=e.alternate)&&sh(e,t)}function ah(e){if(e.tag===13){var t=wi(e,67108864);t!==null&&Et(t,e,67108864),dl(e,67108864)}}var Js=!0;function By(e,t,a,l){var f=S.T;S.T=null;var y=L.p;try{L.p=2,yl(e,t,a,l)}finally{L.p=y,S.T=f}}function Uy(e,t,a,l){var f=S.T;S.T=null;var y=L.p;try{L.p=8,yl(e,t,a,l)}finally{L.p=y,S.T=f}}function yl(e,t,a,l){if(Js){var f=pl(l);if(f===null)tl(e,t,l,Ks,a),lh(e,l);else if(Ny(f,e,t,a,l))l.stopPropagation();else if(lh(e,l),t&4&&-1<$y.indexOf(e)){for(;f!==null;){var y=ui(f);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=zn(y.pendingLanes);if(E!==0){var w=y;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var B=1<<31-dt(E);w.entanglements[1]|=B,E&=~B}qt(y),(Ae&6)===0&&(Ds=Ot()+500,Ur(0))}}break;case 13:w=wi(y,2),w!==null&&Et(w,y,2),Hs(),dl(y,2)}if(y=pl(l),y===null&&tl(e,t,l,Ks,a),y===f)break;f=y}f!==null&&l.stopPropagation()}else tl(e,t,l,null,a)}}function pl(e){return e=ba(e),gl(e)}var Ks=null;function gl(e){if(Ks=null,e=li(e),e!==null){var t=c(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ks=e,null}function oh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mh()){case El:return 2;case wl:return 8;case Ir:case bh:return 32;case _l:return 268435456;default:return 32}default:return 32}}var ml=!1,Sn=null,xn=null,Rn=null,zr=new Map,qr=new Map,Tn=[],$y="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lh(e,t){switch(e){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":zr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(t.pointerId)}}function Vr(e,t,a,l,f,y){return e===null||e.nativeEvent!==y?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:y,targetContainers:[f]},t!==null&&(t=ui(t),t!==null&&ah(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,f!==null&&t.indexOf(f)===-1&&t.push(f),e)}function Ny(e,t,a,l,f){switch(t){case"focusin":return Sn=Vr(Sn,e,t,a,l,f),!0;case"dragenter":return xn=Vr(xn,e,t,a,l,f),!0;case"mouseover":return Rn=Vr(Rn,e,t,a,l,f),!0;case"pointerover":var y=f.pointerId;return zr.set(y,Vr(zr.get(y)||null,e,t,a,l,f)),!0;case"gotpointercapture":return y=f.pointerId,qr.set(y,Vr(qr.get(y)||null,e,t,a,l,f)),!0}return!1}function uh(e){var t=li(e.target);if(t!==null){var a=c(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,Th(e.priority,function(){if(a.tag===13){var l=vt();l=oa(l);var f=wi(a,l);f!==null&&Et(f,a,l),dl(a,l)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ea(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=pl(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);ma=l,a.target.dispatchEvent(l),ma=null}else return t=ui(a),t!==null&&ah(t),e.blockedOn=a,!1;t.shift()}return!0}function ch(e,t,a){ea(e)&&a.delete(t)}function My(){ml=!1,Sn!==null&&ea(Sn)&&(Sn=null),xn!==null&&ea(xn)&&(xn=null),Rn!==null&&ea(Rn)&&(Rn=null),zr.forEach(ch),qr.forEach(ch)}function ta(e,t){e.blockedOn===t&&(e.blockedOn=null,ml||(ml=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,My)))}var na=null;function fh(e){na!==e&&(na=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){na===e&&(na=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],f=e[t+2];if(typeof l!="function"){if(gl(l||a)===null)continue;break}var y=ui(a);y!==null&&(e.splice(t,3),t-=3,go(y,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function jr(e){function t(B){return ta(B,e)}Sn!==null&&ta(Sn,e),xn!==null&&ta(xn,e),Rn!==null&&ta(Rn,e),zr.forEach(t),qr.forEach(t);for(var a=0;a<Tn.length;a++){var l=Tn[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Tn.length&&(a=Tn[0],a.blockedOn===null);)uh(a),a.blockedOn===null&&Tn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],y=a[l+1],E=f[st]||null;if(typeof y=="function")E||fh(a);else if(E){var w=null;if(y&&y.hasAttribute("formAction")){if(f=y,E=y[st]||null)w=E.formAction;else if(gl(f)!==null)continue}else w=E.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),fh(a)}}}function bl(e){this._internalRoot=e}ia.prototype.render=bl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,l=vt();rh(a,l,e,t,null,null)},ia.prototype.unmount=bl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rh(e.current,2,null,e,null,null),Hs(),t[oi]=null}};function ia(e){this._internalRoot=e}ia.prototype.unstable_scheduleHydration=function(e){if(e){var t=Al();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Tn.length&&t!==0&&t<Tn[a].priority;a++);Tn.splice(a,0,e),a===0&&uh(e)}};var hh=n.version;if(hh!=="19.1.0")throw Error(o(527,hh,"19.1.0"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var Oy={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ra.isDisabled&&ra.supportsFiber)try{Fi=ra.inject(Oy),ht=ra}catch{}}return reactDomClient_production.createRoot=function(e,t){if(!u(e))throw Error(o(299));var a=!1,l="",f=Ac,y=kc,E=Cc,w=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(f=t.onUncaughtError),t.onCaughtError!==void 0&&(y=t.onCaughtError),t.onRecoverableError!==void 0&&(E=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(w=t.unstable_transitionCallbacks)),t=nh(e,1,!1,null,null,a,l,f,y,E,w,null),e[oi]=t.current,el(e),new bl(t)},reactDomClient_production.hydrateRoot=function(e,t,a){if(!u(e))throw Error(o(299));var l=!1,f="",y=Ac,E=kc,w=Cc,B=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(B=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),t=nh(e,1,!0,t,a??null,l,f,y,E,w,B,F),t.context=ih(null),a=t.current,l=vt(),l=oa(l),f=un(l),f.callback=null,cn(a,f,l),a=l,t.current.lanes=a,Pi(t,a),qt(t),e[oi]=t.current,el(e),new ia(t)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();function number$2(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function bytes$2(r,...n){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(n.length>0&&!n.includes(r.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${r.length}`)}function hash$1(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(r.outputLen),number$2(r.blockLen)}function exists$1(r,n=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(n&&r.finished)throw new Error("Hash#digest() has already been called")}function output$1(r,n){bytes$2(r);const s=n.outputLen;if(r.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const crypto$2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$2=r=>r instanceof Uint8Array,createView$2=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),rotr$2=(r,n)=>r<<32-n|r>>>n,isLE$2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$2)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$3(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function toBytes$2(r){if(typeof r=="string"&&(r=utf8ToBytes$3(r)),!u8a$2(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function concatBytes$4(...r){const n=new Uint8Array(r.reduce((o,u)=>o+u.length,0));let s=0;return r.forEach(o=>{if(!u8a$2(o))throw new Error("Uint8Array expected");n.set(o,s),s+=o.length}),n}let Hash$2=class{clone(){return this._cloneInto()}};function wrapConstructor$1(r){const n=o=>r().update(toBytes$2(o)).digest(),s=r();return n.outputLen=s.outputLen,n.blockLen=s.blockLen,n.create=()=>r(),n}function randomBytes$2(r=32){if(crypto$2&&typeof crypto$2.getRandomValues=="function")return crypto$2.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$2(r,n,s,o){if(typeof r.setBigUint64=="function")return r.setBigUint64(n,s,o);const u=BigInt(32),c=BigInt(4294967295),h=Number(s>>u&c),p=Number(s&c),g=o?4:0,m=o?0:4;r.setUint32(n+g,h,o),r.setUint32(n+m,p,o)}let SHA2$1=class extends Hash$2{constructor(n,s,o,u){super(),this.blockLen=n,this.outputLen=s,this.padOffset=o,this.isLE=u,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=createView$2(this.buffer)}update(n){exists$1(this);const{view:s,buffer:o,blockLen:u}=this;n=toBytes$2(n);const c=n.length;for(let h=0;h<c;){const p=Math.min(u-this.pos,c-h);if(p===u){const g=createView$2(n);for(;u<=c-h;h+=u)this.process(g,h);continue}o.set(n.subarray(h,h+p),this.pos),this.pos+=p,h+=p,this.pos===u&&(this.process(s,0),this.pos=0)}return this.length+=n.length,this.roundClean(),this}digestInto(n){exists$1(this),output$1(n,this),this.finished=!0;const{buffer:s,view:o,blockLen:u,isLE:c}=this;let{pos:h}=this;s[h++]=128,this.buffer.subarray(h).fill(0),this.padOffset>u-h&&(this.process(o,0),h=0);for(let b=h;b<u;b++)s[b]=0;setBigUint64$2(o,u-8,BigInt(this.length*8),c),this.process(o,0);const p=createView$2(n),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=g/4,v=this.get();if(m>v.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)p.setUint32(4*b,v[b],c)}digest(){const{buffer:n,outputLen:s}=this;this.digestInto(n);const o=n.slice(0,s);return this.destroy(),o}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:s,buffer:o,length:u,finished:c,destroyed:h,pos:p}=this;return n.length=u,n.pos=p,n.finished=c,n.destroyed=h,u%s&&n.buffer.set(o),n}};const Chi$2=(r,n,s)=>r&n^~r&s,Maj$2=(r,n,s)=>r&n^r&s^n&s,SHA256_K$2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$2=new Uint32Array(64);let SHA256$2=class extends SHA2$1{constructor(){super(64,32,8,!1),this.A=IV$1[0]|0,this.B=IV$1[1]|0,this.C=IV$1[2]|0,this.D=IV$1[3]|0,this.E=IV$1[4]|0,this.F=IV$1[5]|0,this.G=IV$1[6]|0,this.H=IV$1[7]|0}get(){const{A:n,B:s,C:o,D:u,E:c,F:h,G:p,H:g}=this;return[n,s,o,u,c,h,p,g]}set(n,s,o,u,c,h,p,g){this.A=n|0,this.B=s|0,this.C=o|0,this.D=u|0,this.E=c|0,this.F=h|0,this.G=p|0,this.H=g|0}process(n,s){for(let b=0;b<16;b++,s+=4)SHA256_W$2[b]=n.getUint32(s,!1);for(let b=16;b<64;b++){const _=SHA256_W$2[b-15],C=SHA256_W$2[b-2],z=rotr$2(_,7)^rotr$2(_,18)^_>>>3,x=rotr$2(C,17)^rotr$2(C,19)^C>>>10;SHA256_W$2[b]=x+SHA256_W$2[b-7]+z+SHA256_W$2[b-16]|0}let{A:o,B:u,C:c,D:h,E:p,F:g,G:m,H:v}=this;for(let b=0;b<64;b++){const _=rotr$2(p,6)^rotr$2(p,11)^rotr$2(p,25),C=v+_+Chi$2(p,g,m)+SHA256_K$2[b]+SHA256_W$2[b]|0,x=(rotr$2(o,2)^rotr$2(o,13)^rotr$2(o,22))+Maj$2(o,u,c)|0;v=m,m=g,g=p,p=h+C|0,h=c,c=u,u=o,o=C+x|0}o=o+this.A|0,u=u+this.B|0,c=c+this.C|0,h=h+this.D|0,p=p+this.E|0,g=g+this.F|0,m=m+this.G|0,v=v+this.H|0,this.set(o,u,c,h,p,g,m,v)}roundClean(){SHA256_W$2.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$3=wrapConstructor$1(()=>new SHA256$2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$9=BigInt(0),_1n$9=BigInt(1),_2n$4=BigInt(2),u8a$1=r=>r instanceof Uint8Array,hexes$3=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));function bytesToHex$3(r){if(!u8a$1(r))throw new Error("Uint8Array expected");let n="";for(let s=0;s<r.length;s++)n+=hexes$3[r[s]];return n}function numberToHexUnpadded$1(r){const n=r.toString(16);return n.length&1?`0${n}`:n}function hexToNumber$1(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function hexToBytes$3(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const n=r.length;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const s=new Uint8Array(n/2);for(let o=0;o<s.length;o++){const u=o*2,c=r.slice(u,u+2),h=Number.parseInt(c,16);if(Number.isNaN(h)||h<0)throw new Error("Invalid byte sequence");s[o]=h}return s}function bytesToNumberBE$1(r){return hexToNumber$1(bytesToHex$3(r))}function bytesToNumberLE$1(r){if(!u8a$1(r))throw new Error("Uint8Array expected");return hexToNumber$1(bytesToHex$3(Uint8Array.from(r).reverse()))}function numberToBytesBE$1(r,n){return hexToBytes$3(r.toString(16).padStart(n*2,"0"))}function numberToBytesLE$1(r,n){return numberToBytesBE$1(r,n).reverse()}function numberToVarBytesBE(r){return hexToBytes$3(numberToHexUnpadded$1(r))}function ensureBytes$1(r,n,s){let o;if(typeof n=="string")try{o=hexToBytes$3(n)}catch(c){throw new Error(`${r} must be valid hex string, got "${n}". Cause: ${c}`)}else if(u8a$1(n))o=Uint8Array.from(n);else throw new Error(`${r} must be hex string or Uint8Array`);const u=o.length;if(typeof s=="number"&&u!==s)throw new Error(`${r} expected ${s} bytes, got ${u}`);return o}function concatBytes$3(...r){const n=new Uint8Array(r.reduce((o,u)=>o+u.length,0));let s=0;return r.forEach(o=>{if(!u8a$1(o))throw new Error("Uint8Array expected");n.set(o,s),s+=o.length}),n}function equalBytes$1(r,n){if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!==n[s])return!1;return!0}function utf8ToBytes$2(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function bitLen$1(r){let n;for(n=0;r>_0n$9;r>>=_1n$9,n+=1);return n}function bitGet(r,n){return r>>BigInt(n)&_1n$9}const bitSet=(r,n,s)=>r|(s?_1n$9:_0n$9)<<BigInt(n),bitMask$1=r=>(_2n$4<<BigInt(r-1))-_1n$9,u8n$1=r=>new Uint8Array(r),u8fr$1=r=>Uint8Array.from(r);function createHmacDrbg$1(r,n,s){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");if(typeof s!="function")throw new Error("hmacFn must be a function");let o=u8n$1(r),u=u8n$1(r),c=0;const h=()=>{o.fill(1),u.fill(0),c=0},p=(...b)=>s(u,o,...b),g=(b=u8n$1())=>{u=p(u8fr$1([0]),b),o=p(),b.length!==0&&(u=p(u8fr$1([1]),b),o=p())},m=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const _=[];for(;b<n;){o=p();const C=o.slice();_.push(C),b+=o.length}return concatBytes$3(..._)};return(b,_)=>{h(),g(b);let C;for(;!(C=_(m()));)g();return h(),C}}const validatorFns$1={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,n)=>n.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function validateObject$1(r,n,s={}){const o=(u,c,h)=>{const p=validatorFns$1[c];if(typeof p!="function")throw new Error(`Invalid validator "${c}", expected function`);const g=r[u];if(!(h&&g===void 0)&&!p(g,r))throw new Error(`Invalid param ${String(u)}=${g} (${typeof g}), expected ${c}`)};for(const[u,c]of Object.entries(n))o(u,c,!1);for(const[u,c]of Object.entries(s))o(u,c,!0);return r}const ut=Object.freeze(Object.defineProperty({__proto__:null,bitGet,bitLen:bitLen$1,bitMask:bitMask$1,bitSet,bytesToHex:bytesToHex$3,bytesToNumberBE:bytesToNumberBE$1,bytesToNumberLE:bytesToNumberLE$1,concatBytes:concatBytes$3,createHmacDrbg:createHmacDrbg$1,ensureBytes:ensureBytes$1,equalBytes:equalBytes$1,hexToBytes:hexToBytes$3,hexToNumber:hexToNumber$1,numberToBytesBE:numberToBytesBE$1,numberToBytesLE:numberToBytesLE$1,numberToHexUnpadded:numberToHexUnpadded$1,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$2,validateObject:validateObject$1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$8=BigInt(0),_1n$8=BigInt(1),_2n$3=BigInt(2),_3n$3=BigInt(3),_4n$1=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod$1(r,n){const s=r%n;return s>=_0n$8?s:n+s}function pow(r,n,s){if(s<=_0n$8||n<_0n$8)throw new Error("Expected power/modulo > 0");if(s===_1n$8)return _0n$8;let o=_1n$8;for(;n>_0n$8;)n&_1n$8&&(o=o*r%s),r=r*r%s,n>>=_1n$8;return o}function pow2$1(r,n,s){let o=r;for(;n-- >_0n$8;)o*=o,o%=s;return o}function invert$1(r,n){if(r===_0n$8||n<=_0n$8)throw new Error(`invert: expected positive integers, got n=${r} mod=${n}`);let s=mod$1(r,n),o=n,u=_0n$8,c=_1n$8;for(;s!==_0n$8;){const p=o/s,g=o%s,m=u-c*p;o=s,s=g,u=c,c=m}if(o!==_1n$8)throw new Error("invert: does not exist");return mod$1(u,n)}function tonelliShanks$1(r){const n=(r-_1n$8)/_2n$3;let s,o,u;for(s=r-_1n$8,o=0;s%_2n$3===_0n$8;s/=_2n$3,o++);for(u=_2n$3;u<r&&pow(u,n,r)!==r-_1n$8;u++);if(o===1){const h=(r+_1n$8)/_4n$1;return function(g,m){const v=g.pow(m,h);if(!g.eql(g.sqr(v),m))throw new Error("Cannot find square root");return v}}const c=(s+_1n$8)/_2n$3;return function(p,g){if(p.pow(g,n)===p.neg(p.ONE))throw new Error("Cannot find square root");let m=o,v=p.pow(p.mul(p.ONE,u),s),b=p.pow(g,c),_=p.pow(g,s);for(;!p.eql(_,p.ONE);){if(p.eql(_,p.ZERO))return p.ZERO;let C=1;for(let x=p.sqr(_);C<m&&!p.eql(x,p.ONE);C++)x=p.sqr(x);const z=p.pow(v,_1n$8<<BigInt(m-C-1));v=p.sqr(z),b=p.mul(b,z),_=p.mul(_,v),m=C}return b}}function FpSqrt$1(r){if(r%_4n$1===_3n$3){const n=(r+_1n$8)/_4n$1;return function(o,u){const c=o.pow(u,n);if(!o.eql(o.sqr(c),u))throw new Error("Cannot find square root");return c}}if(r%_8n$1===_5n$1){const n=(r-_5n$1)/_8n$1;return function(o,u){const c=o.mul(u,_2n$3),h=o.pow(c,n),p=o.mul(u,h),g=o.mul(o.mul(p,_2n$3),h),m=o.mul(p,o.sub(g,o.ONE));if(!o.eql(o.sqr(m),u))throw new Error("Cannot find square root");return m}}return tonelliShanks$1(r)}const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(r){const n={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},s=FIELD_FIELDS$1.reduce((o,u)=>(o[u]="function",o),n);return validateObject$1(r,s)}function FpPow$1(r,n,s){if(s<_0n$8)throw new Error("Expected power > 0");if(s===_0n$8)return r.ONE;if(s===_1n$8)return n;let o=r.ONE,u=n;for(;s>_0n$8;)s&_1n$8&&(o=r.mul(o,u)),u=r.sqr(u),s>>=_1n$8;return o}function FpInvertBatch$1(r,n){const s=new Array(n.length),o=n.reduce((c,h,p)=>r.is0(h)?c:(s[p]=c,r.mul(c,h)),r.ONE),u=r.inv(o);return n.reduceRight((c,h,p)=>r.is0(h)?c:(s[p]=r.mul(c,s[p]),r.mul(c,h)),u),s}function nLength$1(r,n){const s=n!==void 0?n:r.toString(2).length,o=Math.ceil(s/8);return{nBitLength:s,nByteLength:o}}function Field$1(r,n,s=!1,o={}){if(r<=_0n$8)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:u,nByteLength:c}=nLength$1(r,n);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const h=FpSqrt$1(r),p=Object.freeze({ORDER:r,BITS:u,BYTES:c,MASK:bitMask$1(u),ZERO:_0n$8,ONE:_1n$8,create:g=>mod$1(g,r),isValid:g=>{if(typeof g!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof g}`);return _0n$8<=g&&g<r},is0:g=>g===_0n$8,isOdd:g=>(g&_1n$8)===_1n$8,neg:g=>mod$1(-g,r),eql:(g,m)=>g===m,sqr:g=>mod$1(g*g,r),add:(g,m)=>mod$1(g+m,r),sub:(g,m)=>mod$1(g-m,r),mul:(g,m)=>mod$1(g*m,r),pow:(g,m)=>FpPow$1(p,g,m),div:(g,m)=>mod$1(g*invert$1(m,r),r),sqrN:g=>g*g,addN:(g,m)=>g+m,subN:(g,m)=>g-m,mulN:(g,m)=>g*m,inv:g=>invert$1(g,r),sqrt:o.sqrt||(g=>h(p,g)),invertBatch:g=>FpInvertBatch$1(p,g),cmov:(g,m,v)=>v?m:g,toBytes:g=>s?numberToBytesLE$1(g,c):numberToBytesBE$1(g,c),fromBytes:g=>{if(g.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${g.length}`);return s?bytesToNumberLE$1(g):bytesToNumberBE$1(g)}});return Object.freeze(p)}function getFieldBytesLength$1(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const n=r.toString(2).length;return Math.ceil(n/8)}function getMinHashLength$1(r){const n=getFieldBytesLength$1(r);return n+Math.ceil(n/2)}function mapHashToField$1(r,n,s=!1){const o=r.length,u=getFieldBytesLength$1(n),c=getMinHashLength$1(n);if(o<16||o<c||o>1024)throw new Error(`expected ${c}-1024 bytes of input, got ${o}`);const h=s?bytesToNumberBE$1(r):bytesToNumberLE$1(r),p=mod$1(h,n-_1n$8)+_1n$8;return s?numberToBytesLE$1(p,u):numberToBytesBE$1(p,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$7=BigInt(0),_1n$7=BigInt(1);function wNAF$1(r,n){const s=(u,c)=>{const h=c.negate();return u?h:c},o=u=>{const c=Math.ceil(n/u)+1,h=2**(u-1);return{windows:c,windowSize:h}};return{constTimeNegate:s,unsafeLadder(u,c){let h=r.ZERO,p=u;for(;c>_0n$7;)c&_1n$7&&(h=h.add(p)),p=p.double(),c>>=_1n$7;return h},precomputeWindow(u,c){const{windows:h,windowSize:p}=o(c),g=[];let m=u,v=m;for(let b=0;b<h;b++){v=m,g.push(v);for(let _=1;_<p;_++)v=v.add(m),g.push(v);m=v.double()}return g},wNAF(u,c,h){const{windows:p,windowSize:g}=o(u);let m=r.ZERO,v=r.BASE;const b=BigInt(2**u-1),_=2**u,C=BigInt(u);for(let z=0;z<p;z++){const x=z*g;let R=Number(h&b);h>>=C,R>g&&(R-=_,h+=_1n$7);const O=x,P=x+Math.abs(R)-1,I=z%2!==0,te=R<0;R===0?v=v.add(s(I,c[O])):m=m.add(s(te,c[P]))}return{p:m,f:v}},wNAFCached(u,c,h,p){const g=u._WINDOW_SIZE||1;let m=c.get(u);return m||(m=this.precomputeWindow(u,g),g!==1&&c.set(u,p(m))),this.wNAF(g,m,h)}}}function validateBasic$1(r){return validateField$1(r.Fp),validateObject$1(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength$1(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts$1(r){const n=validateBasic$1(r);validateObject$1(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:o,a:u}=n;if(s){if(!o.eql(u,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof s!="object"||typeof s.beta!="bigint"||typeof s.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...n})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER$1={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(r){const{Err:n}=DER$1;if(r.length<2||r[0]!==2)throw new n("Invalid signature integer tag");const s=r[1],o=r.subarray(2,s+2);if(!s||o.length!==s)throw new n("Invalid signature integer: wrong length");if(o[0]&128)throw new n("Invalid signature integer: negative");if(o[0]===0&&!(o[1]&128))throw new n("Invalid signature integer: unnecessary leading zero");return{d:b2n(o),l:r.subarray(s+2)}},toSig(r){const{Err:n}=DER$1,s=typeof r=="string"?h2b(r):r;if(!(s instanceof Uint8Array))throw new Error("ui8a expected");let o=s.length;if(o<2||s[0]!=48)throw new n("Invalid signature tag");if(s[1]!==o-2)throw new n("Invalid signature: incorrect length");const{d:u,l:c}=DER$1._parseInt(s.subarray(2)),{d:h,l:p}=DER$1._parseInt(c);if(p.length)throw new n("Invalid signature: left bytes after parsing");return{r:u,s:h}},hexFromSig(r){const n=m=>Number.parseInt(m[0],16)&8?"00"+m:m,s=m=>{const v=m.toString(16);return v.length&1?`0${v}`:v},o=n(s(r.s)),u=n(s(r.r)),c=o.length/2,h=u.length/2,p=s(c),g=s(h);return`30${s(h+c+4)}02${g}${u}02${p}${o}`}},_0n$6=BigInt(0),_1n$6=BigInt(1);BigInt(2);const _3n$2=BigInt(3);BigInt(4);function weierstrassPoints$1(r){const n=validatePointOpts$1(r),{Fp:s}=n,o=n.toBytes||((z,x,R)=>{const O=x.toAffine();return concatBytes$3(Uint8Array.from([4]),s.toBytes(O.x),s.toBytes(O.y))}),u=n.fromBytes||(z=>{const x=z.subarray(1),R=s.fromBytes(x.subarray(0,s.BYTES)),O=s.fromBytes(x.subarray(s.BYTES,2*s.BYTES));return{x:R,y:O}});function c(z){const{a:x,b:R}=n,O=s.sqr(z),P=s.mul(O,z);return s.add(s.add(P,s.mul(z,x)),R)}if(!s.eql(s.sqr(n.Gy),c(n.Gx)))throw new Error("bad generator point: equation left != right");function h(z){return typeof z=="bigint"&&_0n$6<z&&z<n.n}function p(z){if(!h(z))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(z){const{allowedPrivateKeyLengths:x,nByteLength:R,wrapPrivateKey:O,n:P}=n;if(x&&typeof z!="bigint"){if(z instanceof Uint8Array&&(z=bytesToHex$3(z)),typeof z!="string"||!x.includes(z.length))throw new Error("Invalid key");z=z.padStart(R*2,"0")}let I;try{I=typeof z=="bigint"?z:bytesToNumberBE$1(ensureBytes$1("private key",z,R))}catch{throw new Error(`private key must be ${R} bytes, hex or bigint, not ${typeof z}`)}return O&&(I=mod$1(I,P)),p(I),I}const m=new Map;function v(z){if(!(z instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(x,R,O){if(this.px=x,this.py=R,this.pz=O,x==null||!s.isValid(x))throw new Error("x required");if(R==null||!s.isValid(R))throw new Error("y required");if(O==null||!s.isValid(O))throw new Error("z required")}static fromAffine(x){const{x:R,y:O}=x||{};if(!x||!s.isValid(R)||!s.isValid(O))throw new Error("invalid affine point");if(x instanceof b)throw new Error("projective point not allowed");const P=I=>s.eql(I,s.ZERO);return P(R)&&P(O)?b.ZERO:new b(R,O,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const R=s.invertBatch(x.map(O=>O.pz));return x.map((O,P)=>O.toAffine(R[P])).map(b.fromAffine)}static fromHex(x){const R=b.fromAffine(u(ensureBytes$1("pointHex",x)));return R.assertValidity(),R}static fromPrivateKey(x){return b.BASE.multiply(g(x))}_setWindowSize(x){this._WINDOW_SIZE=x,m.delete(this)}assertValidity(){if(this.is0()){if(n.allowInfinityPoint&&!s.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:R}=this.toAffine();if(!s.isValid(x)||!s.isValid(R))throw new Error("bad point: x or y not FE");const O=s.sqr(R),P=c(x);if(!s.eql(O,P))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(s.isOdd)return!s.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){v(x);const{px:R,py:O,pz:P}=this,{px:I,py:te,pz:T}=x,$=s.eql(s.mul(R,T),s.mul(I,P)),N=s.eql(s.mul(O,T),s.mul(te,P));return $&&N}negate(){return new b(this.px,s.neg(this.py),this.pz)}double(){const{a:x,b:R}=n,O=s.mul(R,_3n$2),{px:P,py:I,pz:te}=this;let T=s.ZERO,$=s.ZERO,N=s.ZERO,V=s.mul(P,P),J=s.mul(I,I),ae=s.mul(te,te),M=s.mul(P,I);return M=s.add(M,M),N=s.mul(P,te),N=s.add(N,N),T=s.mul(x,N),$=s.mul(O,ae),$=s.add(T,$),T=s.sub(J,$),$=s.add(J,$),$=s.mul(T,$),T=s.mul(M,T),N=s.mul(O,N),ae=s.mul(x,ae),M=s.sub(V,ae),M=s.mul(x,M),M=s.add(M,N),N=s.add(V,V),V=s.add(N,V),V=s.add(V,ae),V=s.mul(V,M),$=s.add($,V),ae=s.mul(I,te),ae=s.add(ae,ae),V=s.mul(ae,M),T=s.sub(T,V),N=s.mul(ae,J),N=s.add(N,N),N=s.add(N,N),new b(T,$,N)}add(x){v(x);const{px:R,py:O,pz:P}=this,{px:I,py:te,pz:T}=x;let $=s.ZERO,N=s.ZERO,V=s.ZERO;const J=n.a,ae=s.mul(n.b,_3n$2);let M=s.mul(R,I),H=s.mul(O,te),G=s.mul(P,T),Z=s.add(R,O),U=s.add(I,te);Z=s.mul(Z,U),U=s.add(M,H),Z=s.sub(Z,U),U=s.add(R,P);let S=s.add(I,T);return U=s.mul(U,S),S=s.add(M,G),U=s.sub(U,S),S=s.add(O,P),$=s.add(te,T),S=s.mul(S,$),$=s.add(H,G),S=s.sub(S,$),V=s.mul(J,U),$=s.mul(ae,G),V=s.add($,V),$=s.sub(H,V),V=s.add(H,V),N=s.mul($,V),H=s.add(M,M),H=s.add(H,M),G=s.mul(J,G),U=s.mul(ae,U),H=s.add(H,G),G=s.sub(M,G),G=s.mul(J,G),U=s.add(U,G),M=s.mul(H,U),N=s.add(N,M),M=s.mul(S,U),$=s.mul(Z,$),$=s.sub($,M),M=s.mul(Z,H),V=s.mul(S,V),V=s.add(V,M),new b($,N,V)}subtract(x){return this.add(x.negate())}is0(){return this.equals(b.ZERO)}wNAF(x){return C.wNAFCached(this,m,x,R=>{const O=s.invertBatch(R.map(P=>P.pz));return R.map((P,I)=>P.toAffine(O[I])).map(b.fromAffine)})}multiplyUnsafe(x){const R=b.ZERO;if(x===_0n$6)return R;if(p(x),x===_1n$6)return this;const{endo:O}=n;if(!O)return C.unsafeLadder(this,x);let{k1neg:P,k1:I,k2neg:te,k2:T}=O.splitScalar(x),$=R,N=R,V=this;for(;I>_0n$6||T>_0n$6;)I&_1n$6&&($=$.add(V)),T&_1n$6&&(N=N.add(V)),V=V.double(),I>>=_1n$6,T>>=_1n$6;return P&&($=$.negate()),te&&(N=N.negate()),N=new b(s.mul(N.px,O.beta),N.py,N.pz),$.add(N)}multiply(x){p(x);let R=x,O,P;const{endo:I}=n;if(I){const{k1neg:te,k1:T,k2neg:$,k2:N}=I.splitScalar(R);let{p:V,f:J}=this.wNAF(T),{p:ae,f:M}=this.wNAF(N);V=C.constTimeNegate(te,V),ae=C.constTimeNegate($,ae),ae=new b(s.mul(ae.px,I.beta),ae.py,ae.pz),O=V.add(ae),P=J.add(M)}else{const{p:te,f:T}=this.wNAF(R);O=te,P=T}return b.normalizeZ([O,P])[0]}multiplyAndAddUnsafe(x,R,O){const P=b.BASE,I=(T,$)=>$===_0n$6||$===_1n$6||!T.equals(P)?T.multiplyUnsafe($):T.multiply($),te=I(this,R).add(I(x,O));return te.is0()?void 0:te}toAffine(x){const{px:R,py:O,pz:P}=this,I=this.is0();x==null&&(x=I?s.ONE:s.inv(P));const te=s.mul(R,x),T=s.mul(O,x),$=s.mul(P,x);if(I)return{x:s.ZERO,y:s.ZERO};if(!s.eql($,s.ONE))throw new Error("invZ was invalid");return{x:te,y:T}}isTorsionFree(){const{h:x,isTorsionFree:R}=n;if(x===_1n$6)return!0;if(R)return R(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:R}=n;return x===_1n$6?this:R?R(b,this):this.multiplyUnsafe(n.h)}toRawBytes(x=!0){return this.assertValidity(),o(b,this,x)}toHex(x=!0){return bytesToHex$3(this.toRawBytes(x))}}b.BASE=new b(n.Gx,n.Gy,s.ONE),b.ZERO=new b(s.ZERO,s.ONE,s.ZERO);const _=n.nBitLength,C=wNAF$1(b,n.endo?Math.ceil(_/2):_);return{CURVE:n,ProjectivePoint:b,normPrivateKeyToScalar:g,weierstrassEquation:c,isWithinCurveOrder:h}}function validateOpts$1(r){const n=validateBasic$1(r);return validateObject$1(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}function weierstrass$1(r){const n=validateOpts$1(r),{Fp:s,n:o}=n,u=s.BYTES+1,c=2*s.BYTES+1;function h(U){return _0n$6<U&&U<s.ORDER}function p(U){return mod$1(U,o)}function g(U){return invert$1(U,o)}const{ProjectivePoint:m,normPrivateKeyToScalar:v,weierstrassEquation:b,isWithinCurveOrder:_}=weierstrassPoints$1({...n,toBytes(U,S,L){const K=S.toAffine(),se=s.toBytes(K.x),k=concatBytes$3;return L?k(Uint8Array.from([S.hasEvenY()?2:3]),se):k(Uint8Array.from([4]),se,s.toBytes(K.y))},fromBytes(U){const S=U.length,L=U[0],K=U.subarray(1);if(S===u&&(L===2||L===3)){const se=bytesToNumberBE$1(K);if(!h(se))throw new Error("Point is not on curve");const k=b(se);let D=s.sqrt(k);const W=(D&_1n$6)===_1n$6;return(L&1)===1!==W&&(D=s.neg(D)),{x:se,y:D}}else if(S===c&&L===4){const se=s.fromBytes(K.subarray(0,s.BYTES)),k=s.fromBytes(K.subarray(s.BYTES,2*s.BYTES));return{x:se,y:k}}else throw new Error(`Point of length ${S} was invalid. Expected ${u} compressed bytes or ${c} uncompressed bytes`)}}),C=U=>bytesToHex$3(numberToBytesBE$1(U,n.nByteLength));function z(U){const S=o>>_1n$6;return U>S}function x(U){return z(U)?p(-U):U}const R=(U,S,L)=>bytesToNumberBE$1(U.slice(S,L));class O{constructor(S,L,K){this.r=S,this.s=L,this.recovery=K,this.assertValidity()}static fromCompact(S){const L=n.nByteLength;return S=ensureBytes$1("compactSignature",S,L*2),new O(R(S,0,L),R(S,L,2*L))}static fromDER(S){const{r:L,s:K}=DER$1.toSig(ensureBytes$1("DER",S));return new O(L,K)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(S){return new O(this.r,this.s,S)}recoverPublicKey(S){const{r:L,s:K,recovery:se}=this,k=N(ensureBytes$1("msgHash",S));if(se==null||![0,1,2,3].includes(se))throw new Error("recovery id invalid");const D=se===2||se===3?L+n.n:L;if(D>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const W=(se&1)===0?"02":"03",ie=m.fromHex(W+C(D)),le=g(D),ce=p(-k*le),ue=p(K*le),we=m.BASE.multiplyAndAddUnsafe(ie,ce,ue);if(!we)throw new Error("point at infinify");return we.assertValidity(),we}hasHighS(){return z(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$3(this.toDERHex())}toDERHex(){return DER$1.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$3(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}const P={isValidPrivateKey(U){try{return v(U),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{const U=getMinHashLength$1(n.n);return mapHashToField$1(n.randomBytes(U),n.n)},precompute(U=8,S=m.BASE){return S._setWindowSize(U),S.multiply(BigInt(3)),S}};function I(U,S=!0){return m.fromPrivateKey(U).toRawBytes(S)}function te(U){const S=U instanceof Uint8Array,L=typeof U=="string",K=(S||L)&&U.length;return S?K===u||K===c:L?K===2*u||K===2*c:U instanceof m}function T(U,S,L=!0){if(te(U))throw new Error("first arg must be private key");if(!te(S))throw new Error("second arg must be public key");return m.fromHex(S).multiply(v(U)).toRawBytes(L)}const $=n.bits2int||function(U){const S=bytesToNumberBE$1(U),L=U.length*8-n.nBitLength;return L>0?S>>BigInt(L):S},N=n.bits2int_modN||function(U){return p($(U))},V=bitMask$1(n.nBitLength);function J(U){if(typeof U!="bigint")throw new Error("bigint expected");if(!(_0n$6<=U&&U<V))throw new Error(`bigint expected < 2^${n.nBitLength}`);return numberToBytesBE$1(U,n.nByteLength)}function ae(U,S,L=M){if(["recovered","canonical"].some($e=>$e in L))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:se}=n;let{lowS:k,prehash:D,extraEntropy:W}=L;k==null&&(k=!0),U=ensureBytes$1("msgHash",U),D&&(U=ensureBytes$1("prehashed msgHash",K(U)));const ie=N(U),le=v(S),ce=[J(le),J(ie)];if(W!=null){const $e=W===!0?se(s.BYTES):W;ce.push(ensureBytes$1("extraEntropy",$e))}const ue=concatBytes$3(...ce),we=ie;function de($e){const rt=$($e);if(!_(rt))return;const ft=g(rt),Fe=m.BASE.multiply(rt).toAffine(),ze=p(Fe.x);if(ze===_0n$6)return;const et=p(ft*p(we+ze*le));if(et===_0n$6)return;let Bt=(Fe.x===ze?0:2)|Number(Fe.y&_1n$6),Gr=et;return k&&z(et)&&(Gr=x(et),Bt^=1),new O(ze,Gr,Bt)}return{seed:ue,k2sig:de}}const M={lowS:n.lowS,prehash:!1},H={lowS:n.lowS,prehash:!1};function G(U,S,L=M){const{seed:K,k2sig:se}=ae(U,S,L),k=n;return createHmacDrbg$1(k.hash.outputLen,k.nByteLength,k.hmac)(K,se)}m.BASE._setWindowSize(8);function Z(U,S,L,K=H){var Fe;const se=U;if(S=ensureBytes$1("msgHash",S),L=ensureBytes$1("publicKey",L),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:k,prehash:D}=K;let W,ie;try{if(typeof se=="string"||se instanceof Uint8Array)try{W=O.fromDER(se)}catch(ze){if(!(ze instanceof DER$1.Err))throw ze;W=O.fromCompact(se)}else if(typeof se=="object"&&typeof se.r=="bigint"&&typeof se.s=="bigint"){const{r:ze,s:et}=se;W=new O(ze,et)}else throw new Error("PARSE");ie=m.fromHex(L)}catch(ze){if(ze.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(k&&W.hasHighS())return!1;D&&(S=n.hash(S));const{r:le,s:ce}=W,ue=N(S),we=g(ce),de=p(ue*we),$e=p(le*we),rt=(Fe=m.BASE.multiplyAndAddUnsafe(ie,de,$e))==null?void 0:Fe.toAffine();return rt?p(rt.x)===le:!1}return{CURVE:n,getPublicKey:I,getSharedSecret:T,sign:G,verify:Z,ProjectivePoint:m,Signature:O,utils:P}}let HMAC$2=class extends Hash$2{constructor(n,s){super(),this.finished=!1,this.destroyed=!1,hash$1(n);const o=toBytes$2(s);if(this.iHash=n.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,c=new Uint8Array(u);c.set(o.length>u?n.create().update(o).digest():o);for(let h=0;h<c.length;h++)c[h]^=54;this.iHash.update(c),this.oHash=n.create();for(let h=0;h<c.length;h++)c[h]^=106;this.oHash.update(c),c.fill(0)}update(n){return exists$1(this),this.iHash.update(n),this}digestInto(n){exists$1(this),bytes$2(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:u,destroyed:c,blockLen:h,outputLen:p}=this;return n=n,n.finished=u,n.destroyed=c,n.blockLen=h,n.outputLen=p,n.oHash=s._cloneInto(n.oHash),n.iHash=o._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$2=(r,n,s)=>new HMAC$2(r,n).update(s).digest();hmac$2.create=(r,n)=>new HMAC$2(r,n);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash$1(r){return{hash:r,hmac:(n,...s)=>hmac$2(r,n,concatBytes$4(...s)),randomBytes:randomBytes$2}}function createCurve$1(r,n){const s=o=>weierstrass$1({...r,...getHash$1(o)});return Object.freeze({...s(n),create:s})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P$1=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N$1=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$5=BigInt(1),_2n$2=BigInt(2),divNearest$1=(r,n)=>(r+n/_2n$2)/n;function sqrtMod$1(r){const n=secp256k1P$1,s=BigInt(3),o=BigInt(6),u=BigInt(11),c=BigInt(22),h=BigInt(23),p=BigInt(44),g=BigInt(88),m=r*r*r%n,v=m*m*r%n,b=pow2$1(v,s,n)*v%n,_=pow2$1(b,s,n)*v%n,C=pow2$1(_,_2n$2,n)*m%n,z=pow2$1(C,u,n)*C%n,x=pow2$1(z,c,n)*z%n,R=pow2$1(x,p,n)*x%n,O=pow2$1(R,g,n)*R%n,P=pow2$1(O,p,n)*x%n,I=pow2$1(P,s,n)*v%n,te=pow2$1(I,h,n)*z%n,T=pow2$1(te,o,n)*m%n,$=pow2$1(T,_2n$2,n);if(!Fp.eql(Fp.sqr($),r))throw new Error("Cannot find square root");return $}const Fp=Field$1(secp256k1P$1,void 0,void 0,{sqrt:sqrtMod$1}),secp256k1$1=createCurve$1({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N$1,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const n=secp256k1N$1,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-_1n$5*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),u=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=s,h=BigInt("0x100000000000000000000000000000000"),p=divNearest$1(c*r,n),g=divNearest$1(-o*r,n);let m=mod$1(r-p*s-g*u,n),v=mod$1(-p*o-g*c,n);const b=m>h,_=v>h;if(b&&(m=n-m),_&&(v=n-v),m>h||v>h)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:b,k1:m,k2neg:_,k2:v}}}},sha256$3),_0n$5=BigInt(0),fe=r=>typeof r=="bigint"&&_0n$5<r&&r<secp256k1P$1,ge=r=>typeof r=="bigint"&&_0n$5<r&&r<secp256k1N$1,TAGGED_HASH_PREFIXES$1={};function taggedHash$1(r,...n){let s=TAGGED_HASH_PREFIXES$1[r];if(s===void 0){const o=sha256$3(Uint8Array.from(r,u=>u.charCodeAt(0)));s=concatBytes$3(o,o),TAGGED_HASH_PREFIXES$1[r]=s}return sha256$3(concatBytes$3(s,...n))}const pointToBytes$1=r=>r.toRawBytes(!0).slice(1),numTo32b$1=r=>numberToBytesBE$1(r,32),modP$1=r=>mod$1(r,secp256k1P$1),modN$1=r=>mod$1(r,secp256k1N$1),Point$1=secp256k1$1.ProjectivePoint,GmulAdd$1=(r,n,s)=>Point$1.BASE.multiplyAndAddUnsafe(r,n,s);function schnorrGetExtPubKey$1(r){let n=secp256k1$1.utils.normPrivateKeyToScalar(r),s=Point$1.fromPrivateKey(n);return{scalar:s.hasEvenY()?n:modN$1(-n),bytes:pointToBytes$1(s)}}function lift_x$1(r){if(!fe(r))throw new Error("bad x: need 0 < x < p");const n=modP$1(r*r),s=modP$1(n*r+BigInt(7));let o=sqrtMod$1(s);o%_2n$2!==_0n$5&&(o=modP$1(-o));const u=new Point$1(r,o,_1n$5);return u.assertValidity(),u}function challenge$1(...r){return modN$1(bytesToNumberBE$1(taggedHash$1("BIP0340/challenge",...r)))}function schnorrGetPublicKey$1(r){return schnorrGetExtPubKey$1(r).bytes}function schnorrSign$1(r,n,s=randomBytes$2(32)){const o=ensureBytes$1("message",r),{bytes:u,scalar:c}=schnorrGetExtPubKey$1(n),h=ensureBytes$1("auxRand",s,32),p=numTo32b$1(c^bytesToNumberBE$1(taggedHash$1("BIP0340/aux",h))),g=taggedHash$1("BIP0340/nonce",p,u,o),m=modN$1(bytesToNumberBE$1(g));if(m===_0n$5)throw new Error("sign failed: k is zero");const{bytes:v,scalar:b}=schnorrGetExtPubKey$1(m),_=challenge$1(v,u,o),C=new Uint8Array(64);if(C.set(v,0),C.set(numTo32b$1(modN$1(b+_*c)),32),!schnorrVerify$1(C,o,u))throw new Error("sign: Invalid signature produced");return C}function schnorrVerify$1(r,n,s){const o=ensureBytes$1("signature",r,64),u=ensureBytes$1("message",n),c=ensureBytes$1("publicKey",s,32);try{const h=lift_x$1(bytesToNumberBE$1(c)),p=bytesToNumberBE$1(o.subarray(0,32));if(!fe(p))return!1;const g=bytesToNumberBE$1(o.subarray(32,64));if(!ge(g))return!1;const m=challenge$1(numTo32b$1(p),pointToBytes$1(h),u),v=GmulAdd$1(h,g,modN$1(-m));return!(!v||!v.hasEvenY()||v.toAffine().x!==p)}catch{return!1}}const schnorr$1={getPublicKey:schnorrGetPublicKey$1,sign:schnorrSign$1,verify:schnorrVerify$1,utils:{randomPrivateKey:secp256k1$1.utils.randomPrivateKey,lift_x:lift_x$1,pointToBytes:pointToBytes$1,numberToBytesBE:numberToBytesBE$1,bytesToNumberBE:bytesToNumberBE$1,taggedHash:taggedHash$1,mod:mod$1}},crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a=r=>r instanceof Uint8Array,createView$1=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),rotr$1=(r,n)=>r<<32-n|r>>>n,isLE$1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$1)throw new Error("Non little-endian hardware is not supported");const hexes$2=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));function bytesToHex$2(r){if(!u8a(r))throw new Error("Uint8Array expected");let n="";for(let s=0;s<r.length;s++)n+=hexes$2[r[s]];return n}function hexToBytes$2(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const n=r.length;if(n%2)throw new Error("padded hex string expected, got unpadded hex of length "+n);const s=new Uint8Array(n/2);for(let o=0;o<s.length;o++){const u=o*2,c=r.slice(u,u+2),h=Number.parseInt(c,16);if(Number.isNaN(h)||h<0)throw new Error("Invalid byte sequence");s[o]=h}return s}function utf8ToBytes$1(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function toBytes$1(r){if(typeof r=="string"&&(r=utf8ToBytes$1(r)),!u8a(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function concatBytes$2(...r){const n=new Uint8Array(r.reduce((o,u)=>o+u.length,0));let s=0;return r.forEach(o=>{if(!u8a(o))throw new Error("Uint8Array expected");n.set(o,s),s+=o.length}),n}let Hash$1=class{clone(){return this._cloneInto()}};function wrapConstructor(r){const n=o=>r().update(toBytes$1(o)).digest(),s=r();return n.outputLen=s.outputLen,n.blockLen=s.blockLen,n.create=()=>r(),n}function randomBytes$1(r=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function number$1(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function bool$1(r){if(typeof r!="boolean")throw new Error(`Expected boolean, not ${r}`)}function bytes$1(r,...n){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(n.length>0&&!n.includes(r.length))throw new Error(`Expected Uint8Array of length ${n}, not of length=${r.length}`)}function hash(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$1(r.outputLen),number$1(r.blockLen)}function exists(r,n=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(n&&r.finished)throw new Error("Hash#digest() has already been called")}function output(r,n){bytes$1(r);const s=n.outputLen;if(r.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const assert={number:number$1,bool:bool$1,bytes:bytes$1,hash,exists,output};function setBigUint64$1(r,n,s,o){if(typeof r.setBigUint64=="function")return r.setBigUint64(n,s,o);const u=BigInt(32),c=BigInt(4294967295),h=Number(s>>u&c),p=Number(s&c),g=o?4:0,m=o?0:4;r.setUint32(n+g,h,o),r.setUint32(n+m,p,o)}class SHA2 extends Hash$1{constructor(n,s,o,u){super(),this.blockLen=n,this.outputLen=s,this.padOffset=o,this.isLE=u,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=createView$1(this.buffer)}update(n){assert.exists(this);const{view:s,buffer:o,blockLen:u}=this;n=toBytes$1(n);const c=n.length;for(let h=0;h<c;){const p=Math.min(u-this.pos,c-h);if(p===u){const g=createView$1(n);for(;u<=c-h;h+=u)this.process(g,h);continue}o.set(n.subarray(h,h+p),this.pos),this.pos+=p,h+=p,this.pos===u&&(this.process(s,0),this.pos=0)}return this.length+=n.length,this.roundClean(),this}digestInto(n){assert.exists(this),assert.output(n,this),this.finished=!0;const{buffer:s,view:o,blockLen:u,isLE:c}=this;let{pos:h}=this;s[h++]=128,this.buffer.subarray(h).fill(0),this.padOffset>u-h&&(this.process(o,0),h=0);for(let b=h;b<u;b++)s[b]=0;setBigUint64$1(o,u-8,BigInt(this.length*8),c),this.process(o,0);const p=createView$1(n),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=g/4,v=this.get();if(m>v.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)p.setUint32(4*b,v[b],c)}digest(){const{buffer:n,outputLen:s}=this;this.digestInto(n);const o=n.slice(0,s);return this.destroy(),o}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:s,buffer:o,length:u,finished:c,destroyed:h,pos:p}=this;return n.length=u,n.pos=p,n.finished=c,n.destroyed=h,u%s&&n.buffer.set(o),n}}const Chi$1=(r,n,s)=>r&n^~r&s,Maj$1=(r,n,s)=>r&n^r&s^n&s,SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$1=class extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:n,B:s,C:o,D:u,E:c,F:h,G:p,H:g}=this;return[n,s,o,u,c,h,p,g]}set(n,s,o,u,c,h,p,g){this.A=n|0,this.B=s|0,this.C=o|0,this.D=u|0,this.E=c|0,this.F=h|0,this.G=p|0,this.H=g|0}process(n,s){for(let b=0;b<16;b++,s+=4)SHA256_W$1[b]=n.getUint32(s,!1);for(let b=16;b<64;b++){const _=SHA256_W$1[b-15],C=SHA256_W$1[b-2],z=rotr$1(_,7)^rotr$1(_,18)^_>>>3,x=rotr$1(C,17)^rotr$1(C,19)^C>>>10;SHA256_W$1[b]=x+SHA256_W$1[b-7]+z+SHA256_W$1[b-16]|0}let{A:o,B:u,C:c,D:h,E:p,F:g,G:m,H:v}=this;for(let b=0;b<64;b++){const _=rotr$1(p,6)^rotr$1(p,11)^rotr$1(p,25),C=v+_+Chi$1(p,g,m)+SHA256_K$1[b]+SHA256_W$1[b]|0,x=(rotr$1(o,2)^rotr$1(o,13)^rotr$1(o,22))+Maj$1(o,u,c)|0;v=m,m=g,g=p,p=h+C|0,h=c,c=u,u=o,o=C+x|0}o=o+this.A|0,u=u+this.B|0,c=c+this.C|0,h=h+this.D|0,p=p+this.E|0,g=g+this.F|0,m=m+this.G|0,v=v+this.H|0,this.set(o,u,c,h,p,g,m,v)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class SHA224 extends SHA256$1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const sha256$2=wrapConstructor(()=>new SHA256$1);wrapConstructor(()=>new SHA224);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function assertNumber(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}function chain(...r){const n=(u,c)=>h=>u(c(h)),s=Array.from(r).reverse().reduce((u,c)=>u?n(u,c.encode):c.encode,void 0),o=r.reduce((u,c)=>u?n(u,c.decode):c.decode,void 0);return{encode:s,decode:o}}function alphabet(r){return{encode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return n.map(s=>{if(assertNumber(s),s<0||s>=r.length)throw new Error(`Digit index outside alphabet: ${s} (alphabet: ${r.length})`);return r[s]})},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("alphabet.decode input should be array of strings");return n.map(s=>{if(typeof s!="string")throw new Error(`alphabet.decode: not string element=${s}`);const o=r.indexOf(s);if(o===-1)throw new Error(`Unknown letter: "${s}". Allowed: ${r}`);return o})}}}function join(r=""){if(typeof r!="string")throw new Error("join separator should be string");return{encode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("join.encode input should be array of strings");for(let s of n)if(typeof s!="string")throw new Error(`join.encode: non-string input=${s}`);return n.join(r)},decode:n=>{if(typeof n!="string")throw new Error("join.decode input should be string");return n.split(r)}}}function padding(r,n="="){if(assertNumber(r),typeof n!="string")throw new Error("padding chr should be string");return{encode(s){if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of s)if(typeof o!="string")throw new Error(`padding.encode: non-string input=${o}`);for(;s.length*r%8;)s.push(n);return s},decode(s){if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("padding.encode input should be array of strings");for(let u of s)if(typeof u!="string")throw new Error(`padding.decode: non-string input=${u}`);let o=s.length;if(o*r%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;o>0&&s[o-1]===n;o--)if(!((o-1)*r%8))throw new Error("Invalid padding: string has too much padding");return s.slice(0,o)}}}function normalize$1(r){if(typeof r!="function")throw new Error("normalize fn should be function");return{encode:n=>n,decode:n=>r(n)}}function convertRadix(r,n,s){if(n<2)throw new Error(`convertRadix: wrong from=${n}, base cannot be less than 2`);if(s<2)throw new Error(`convertRadix: wrong to=${s}, base cannot be less than 2`);if(!Array.isArray(r))throw new Error("convertRadix: data should be array");if(!r.length)return[];let o=0;const u=[],c=Array.from(r);for(c.forEach(h=>{if(assertNumber(h),h<0||h>=n)throw new Error(`Wrong integer: ${h}`)});;){let h=0,p=!0;for(let g=o;g<c.length;g++){const m=c[g],v=n*h+m;if(!Number.isSafeInteger(v)||n*h/n!==h||v-m!==n*h)throw new Error("convertRadix: carry overflow");if(h=v%s,c[g]=Math.floor(v/s),!Number.isSafeInteger(c[g])||c[g]*s+h!==v)throw new Error("convertRadix: carry overflow");if(p)c[g]?p=!1:o=g;else continue}if(u.push(h),p)break}for(let h=0;h<r.length-1&&r[h]===0;h++)u.push(0);return u.reverse()}const gcd=(r,n)=>n?gcd(n,r%n):r,radix2carry=(r,n)=>r+(n-gcd(r,n));function convertRadix2(r,n,s,o){if(!Array.isArray(r))throw new Error("convertRadix2: data should be array");if(n<=0||n>32)throw new Error(`convertRadix2: wrong from=${n}`);if(s<=0||s>32)throw new Error(`convertRadix2: wrong to=${s}`);if(radix2carry(n,s)>32)throw new Error(`convertRadix2: carry overflow from=${n} to=${s} carryBits=${radix2carry(n,s)}`);let u=0,c=0;const h=2**s-1,p=[];for(const g of r){if(assertNumber(g),g>=2**n)throw new Error(`convertRadix2: invalid data word=${g} from=${n}`);if(u=u<<n|g,c+n>32)throw new Error(`convertRadix2: carry overflow pos=${c} from=${n}`);for(c+=n;c>=s;c-=s)p.push((u>>c-s&h)>>>0);u&=2**c-1}if(u=u<<s-c&h,!o&&c>=n)throw new Error("Excess padding");if(!o&&u)throw new Error(`Non-zero padding: ${u}`);return o&&c>0&&p.push(u>>>0),p}function radix(r){return assertNumber(r),{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(n),2**8,r)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(n,r,2**8))}}}function radix2(r,n=!1){if(assertNumber(r),r<=0||r>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,r)>32||radix2carry(r,8)>32)throw new Error("radix2: carry overflow");return{encode:s=>{if(!(s instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(s),8,r,!n)},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(s,r,8,n))}}}function unsafeWrapper(r){if(typeof r!="function")throw new Error("unsafeWrapper fn should be function");return function(...n){try{return r.apply(null,n)}catch{}}}const base16=chain(radix2(4),alphabet("0123456789ABCDEF"),join("")),base32=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize$1(r=>r.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const base64=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join("")),base64url=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join("")),genBase58=r=>chain(radix(58),alphabet(r),join("")),base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const XMR_BLOCK_LEN=[0,2,3,5,6,7,9,10,11],base58xmr={encode(r){let n="";for(let s=0;s<r.length;s+=8){const o=r.subarray(s,s+8);n+=base58.encode(o).padStart(XMR_BLOCK_LEN[o.length],"1")}return n},decode(r){let n=[];for(let s=0;s<r.length;s+=11){const o=r.slice(s,s+11),u=XMR_BLOCK_LEN.indexOf(o.length),c=base58.decode(o);for(let h=0;h<c.length-u;h++)if(c[h]!==0)throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(c.slice(c.length-u)))}return Uint8Array.from(n)}},BECH_ALPHABET=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join("")),POLYMOD_GENERATORS=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(r){const n=r>>25;let s=(r&33554431)<<5;for(let o=0;o<POLYMOD_GENERATORS.length;o++)(n>>o&1)===1&&(s^=POLYMOD_GENERATORS[o]);return s}function bechChecksum(r,n,s=1){const o=r.length;let u=1;for(let c=0;c<o;c++){const h=r.charCodeAt(c);if(h<33||h>126)throw new Error(`Invalid prefix (${r})`);u=bech32Polymod(u)^h>>5}u=bech32Polymod(u);for(let c=0;c<o;c++)u=bech32Polymod(u)^r.charCodeAt(c)&31;for(let c of n)u=bech32Polymod(u)^c;for(let c=0;c<6;c++)u=bech32Polymod(u);return u^=s,BECH_ALPHABET.encode(convertRadix2([u%2**30],30,5,!1))}function genBech32(r){const n=r==="bech32"?1:734539939,s=radix2(5),o=s.decode,u=s.encode,c=unsafeWrapper(o);function h(v,b,_=90){if(typeof v!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof v}`);if(!Array.isArray(b)||b.length&&typeof b[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof b}`);const C=v.length+7+b.length;if(_!==!1&&C>_)throw new TypeError(`Length ${C} exceeds limit ${_}`);return v=v.toLowerCase(),`${v}1${BECH_ALPHABET.encode(b)}${bechChecksum(v,b,n)}`}function p(v,b=90){if(typeof v!="string")throw new Error(`bech32.decode input should be string, not ${typeof v}`);if(v.length<8||b!==!1&&v.length>b)throw new TypeError(`Wrong string length: ${v.length} (${v}). Expected (8..${b})`);const _=v.toLowerCase();if(v!==_&&v!==v.toUpperCase())throw new Error("String must be lowercase or uppercase");v=_;const C=v.lastIndexOf("1");if(C===0||C===-1)throw new Error('Letter "1" must be present between prefix and data only');const z=v.slice(0,C),x=v.slice(C+1);if(x.length<6)throw new Error("Data must be at least 6 characters long");const R=BECH_ALPHABET.decode(x).slice(0,-6),O=bechChecksum(z,R,n);if(!x.endsWith(O))throw new Error(`Invalid checksum in ${v}: expected "${O}"`);return{prefix:z,words:R}}const g=unsafeWrapper(p);function m(v){const{prefix:b,words:_}=p(v,!1);return{prefix:b,words:_,bytes:o(_)}}return{encode:h,decode:p,decodeToBytes:m,decodeUnsafe:g,fromWords:o,fromWordsUnsafe:c,toWords:u}}const bech32=genBech32("bech32");genBech32("bech32m");const utf8={encode:r=>new TextDecoder().decode(r),decode:r=>new TextEncoder().encode(r)},hex=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize$1(r=>{if(typeof r!="string"||r.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof r} with length ${r.length}`);return r.toLowerCase()})),CODERS={utf8,hex,base16,base32,base64,base64url,base58,base58xmr};`${Object.keys(CODERS).join(", ")}`;function number(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function bool(r){if(typeof r!="boolean")throw new Error(`boolean expected, not ${r}`)}function isBytes$2(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function bytes(r,...n){if(!isBytes$2(r))throw new Error("Uint8Array expected");if(n.length>0&&!n.includes(r.length))throw new Error(`Uint8Array expected of length ${n}, not of length=${r.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const u32=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function checkOpts(r,n){if(n==null||typeof n!="object")throw new Error("options must be defined");return Object.assign(r,n)}function equalBytes(r,n){if(r.length!==n.length)return!1;let s=0;for(let o=0;o<r.length;o++)s|=r[o]^n[o];return s===0}const wrapCipher=(r,n)=>(Object.assign(n,r),n),BLOCK_SIZE=16,POLY=283;function mul2(r){return r<<1^POLY&-(r>>7)}function mul(r,n){let s=0;for(;n>0;n>>=1)s^=r&-(n&1),r=mul2(r);return s}const sbox=(()=>{let r=new Uint8Array(256);for(let s=0,o=1;s<256;s++,o^=mul2(o))r[s]=o;const n=new Uint8Array(256);n[0]=99;for(let s=0;s<255;s++){let o=r[255-s];o|=o<<8,n[r[s]]=(o^o>>4^o>>5^o>>6^o>>7^99)&255}return n})(),invSbox=sbox.map((r,n)=>sbox.indexOf(n)),rotr32_8=r=>r<<24|r>>>8,rotl32_8=r=>r<<8|r>>>24;function genTtable(r,n){if(r.length!==256)throw new Error("Wrong sbox length");const s=new Uint32Array(256).map((m,v)=>n(r[v])),o=s.map(rotl32_8),u=o.map(rotl32_8),c=u.map(rotl32_8),h=new Uint32Array(256*256),p=new Uint32Array(256*256),g=new Uint16Array(256*256);for(let m=0;m<256;m++)for(let v=0;v<256;v++){const b=m*256+v;h[b]=s[m]^o[v],p[b]=u[m]^c[v],g[b]=r[m]<<8|r[v]}return{sbox:r,sbox2:g,T0:s,T1:o,T2:u,T3:c,T01:h,T23:p}}const tableEncoding=genTtable(sbox,r=>mul(r,3)<<24|r<<16|r<<8|mul(r,2)),tableDecoding=genTtable(invSbox,r=>mul(r,11)<<24|mul(r,13)<<16|mul(r,9)<<8|mul(r,14)),xPowers=(()=>{const r=new Uint8Array(16);for(let n=0,s=1;n<16;n++,s=mul2(s))r[n]=s;return r})();function expandKeyLE(r){bytes(r);const n=r.length;if(![16,24,32].includes(n))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${n}`);const{sbox2:s}=tableEncoding,o=u32(r),u=o.length,c=p=>applySbox(s,p,p,p,p),h=new Uint32Array(n+28);h.set(o);for(let p=u;p<h.length;p++){let g=h[p-1];p%u===0?g=c(rotr32_8(g))^xPowers[p/u-1]:u>6&&p%u===4&&(g=c(g)),h[p]=h[p-u]^g}return h}function expandKeyDecLE(r){const n=expandKeyLE(r),s=n.slice(),o=n.length,{sbox2:u}=tableEncoding,{T0:c,T1:h,T2:p,T3:g}=tableDecoding;for(let m=0;m<o;m+=4)for(let v=0;v<4;v++)s[m+v]=n[o-m-4+v];n.fill(0);for(let m=4;m<o-4;m++){const v=s[m],b=applySbox(u,v,v,v,v);s[m]=c[b&255]^h[b>>>8&255]^p[b>>>16&255]^g[b>>>24]}return s}function apply0123(r,n,s,o,u,c){return r[s<<8&65280|o>>>8&255]^n[u>>>8&65280|c>>>24&255]}function applySbox(r,n,s,o,u){return r[n&255|s&65280]|r[o>>>16&255|u>>>16&65280]<<16}function encrypt$2(r,n,s,o,u){const{sbox2:c,T01:h,T23:p}=tableEncoding;let g=0;n^=r[g++],s^=r[g++],o^=r[g++],u^=r[g++];const m=r.length/4-2;for(let z=0;z<m;z++){const x=r[g++]^apply0123(h,p,n,s,o,u),R=r[g++]^apply0123(h,p,s,o,u,n),O=r[g++]^apply0123(h,p,o,u,n,s),P=r[g++]^apply0123(h,p,u,n,s,o);n=x,s=R,o=O,u=P}const v=r[g++]^applySbox(c,n,s,o,u),b=r[g++]^applySbox(c,s,o,u,n),_=r[g++]^applySbox(c,o,u,n,s),C=r[g++]^applySbox(c,u,n,s,o);return{s0:v,s1:b,s2:_,s3:C}}function decrypt$2(r,n,s,o,u){const{sbox2:c,T01:h,T23:p}=tableDecoding;let g=0;n^=r[g++],s^=r[g++],o^=r[g++],u^=r[g++];const m=r.length/4-2;for(let z=0;z<m;z++){const x=r[g++]^apply0123(h,p,n,u,o,s),R=r[g++]^apply0123(h,p,s,n,u,o),O=r[g++]^apply0123(h,p,o,s,n,u),P=r[g++]^apply0123(h,p,u,o,s,n);n=x,s=R,o=O,u=P}const v=r[g++]^applySbox(c,n,u,o,s),b=r[g++]^applySbox(c,s,n,u,o),_=r[g++]^applySbox(c,o,s,n,u),C=r[g++]^applySbox(c,u,o,s,n);return{s0:v,s1:b,s2:_,s3:C}}function getDst(r,n){if(!n)return new Uint8Array(r);if(bytes(n),n.length<r)throw new Error(`aes: wrong destination length, expected at least ${r}, got: ${n.length}`);return n}function validateBlockDecrypt(r){if(bytes(r),r.length%BLOCK_SIZE!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${BLOCK_SIZE}`)}function validateBlockEncrypt(r,n,s){let o=r.length;const u=o%BLOCK_SIZE;if(!n&&u!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const c=u32(r);if(n){let g=BLOCK_SIZE-u;g||(g=BLOCK_SIZE),o=o+g}const h=getDst(o,s),p=u32(h);return{b:c,o:p,out:h}}function validatePCKS(r,n){if(!n)return r;const s=r.length;if(!s)throw new Error("aes/pcks5: empty ciphertext not allowed");const o=r[s-1];if(o<=0||o>16)throw new Error(`aes/pcks5: wrong padding byte: ${o}`);const u=r.subarray(0,-o);for(let c=0;c<o;c++)if(r[s-c-1]!==o)throw new Error("aes/pcks5: wrong padding");return u}function padPCKS(r){const n=new Uint8Array(16),s=u32(n);n.set(r);const o=BLOCK_SIZE-r.length;for(let u=BLOCK_SIZE-o;u<BLOCK_SIZE;u++)n[u]=o;return s}const cbc=wrapCipher({blockSize:16,nonceLength:16},function(n,s,o={}){bytes(n),bytes(s,16);const u=!o.disablePadding;return{encrypt:(c,h)=>{const p=expandKeyLE(n),{b:g,o:m,out:v}=validateBlockEncrypt(c,u,h),b=u32(s);let _=b[0],C=b[1],z=b[2],x=b[3],R=0;for(;R+4<=g.length;)_^=g[R+0],C^=g[R+1],z^=g[R+2],x^=g[R+3],{s0:_,s1:C,s2:z,s3:x}=encrypt$2(p,_,C,z,x),m[R++]=_,m[R++]=C,m[R++]=z,m[R++]=x;if(u){const O=padPCKS(c.subarray(R*4));_^=O[0],C^=O[1],z^=O[2],x^=O[3],{s0:_,s1:C,s2:z,s3:x}=encrypt$2(p,_,C,z,x),m[R++]=_,m[R++]=C,m[R++]=z,m[R++]=x}return p.fill(0),v},decrypt:(c,h)=>{validateBlockDecrypt(c);const p=expandKeyDecLE(n),g=u32(s),m=getDst(c.length,h),v=u32(c),b=u32(m);let _=g[0],C=g[1],z=g[2],x=g[3];for(let R=0;R+4<=v.length;){const O=_,P=C,I=z,te=x;_=v[R+0],C=v[R+1],z=v[R+2],x=v[R+3];const{s0:T,s1:$,s2:N,s3:V}=decrypt$2(p,_,C,z,x);b[R++]=T^O,b[R++]=$^P,b[R++]=N^I,b[R++]=V^te}return p.fill(0),validatePCKS(m,u)}}}),_utf8ToBytes=r=>Uint8Array.from(r.split("").map(n=>n.charCodeAt(0))),sigma16=_utf8ToBytes("expand 16-byte k"),sigma32=_utf8ToBytes("expand 32-byte k"),sigma16_32=u32(sigma16),sigma32_32=u32(sigma32);sigma32_32.slice();function rotl(r,n){return r<<n|r>>>32-n}function isAligned32(r){return r.byteOffset%4===0}const BLOCK_LEN=64,BLOCK_LEN32=16,MAX_COUNTER=2**32-1,U32_EMPTY=new Uint32Array;function runCipher(r,n,s,o,u,c,h,p){const g=u.length,m=new Uint8Array(BLOCK_LEN),v=u32(m),b=isAligned32(u)&&isAligned32(c),_=b?u32(u):U32_EMPTY,C=b?u32(c):U32_EMPTY;for(let z=0;z<g;h++){if(r(n,s,o,v,h,p),h>=MAX_COUNTER)throw new Error("arx: counter overflow");const x=Math.min(BLOCK_LEN,g-z);if(b&&x===BLOCK_LEN){const R=z/4;if(z%4!==0)throw new Error("arx: invalid block position");for(let O=0,P;O<BLOCK_LEN32;O++)P=R+O,C[P]=_[P]^v[O];z+=BLOCK_LEN;continue}for(let R=0,O;R<x;R++)O=z+R,c[O]=u[O]^m[R];z+=x}}function createCipher(r,n){const{allowShortKeys:s,extendNonceFn:o,counterLength:u,counterRight:c,rounds:h}=checkOpts({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},n);if(typeof r!="function")throw new Error("core must be a function");return number(u),number(h),bool(c),bool(s),(p,g,m,v,b=0)=>{bytes(p),bytes(g),bytes(m);const _=m.length;if(v||(v=new Uint8Array(_)),bytes(v),number(b),b<0||b>=MAX_COUNTER)throw new Error("arx: counter overflow");if(v.length<_)throw new Error(`arx: output (${v.length}) is shorter than data (${_})`);const C=[];let z=p.length,x,R;if(z===32)x=p.slice(),C.push(x),R=sigma32_32;else if(z===16&&s)x=new Uint8Array(32),x.set(p),x.set(p,16),R=sigma16_32,C.push(x);else throw new Error(`arx: invalid 32-byte key, got length=${z}`);isAligned32(g)||(g=g.slice(),C.push(g));const O=u32(x);if(o){if(g.length!==24)throw new Error("arx: extended nonce must be 24 bytes");o(R,O,u32(g.subarray(0,16)),O),g=g.subarray(16)}const P=16-u;if(P!==g.length)throw new Error(`arx: nonce must be ${P} or 16 bytes`);if(P!==12){const te=new Uint8Array(12);te.set(g,c?0:12-g.length),g=te,C.push(g)}const I=u32(g);for(runCipher(r,R,O,I,m,v,b,h);C.length>0;)C.pop().fill(0);return v}}function chachaCore(r,n,s,o,u,c=20){let h=r[0],p=r[1],g=r[2],m=r[3],v=n[0],b=n[1],_=n[2],C=n[3],z=n[4],x=n[5],R=n[6],O=n[7],P=u,I=s[0],te=s[1],T=s[2],$=h,N=p,V=g,J=m,ae=v,M=b,H=_,G=C,Z=z,U=x,S=R,L=O,K=P,se=I,k=te,D=T;for(let ie=0;ie<c;ie+=2)$=$+ae|0,K=rotl(K^$,16),Z=Z+K|0,ae=rotl(ae^Z,12),$=$+ae|0,K=rotl(K^$,8),Z=Z+K|0,ae=rotl(ae^Z,7),N=N+M|0,se=rotl(se^N,16),U=U+se|0,M=rotl(M^U,12),N=N+M|0,se=rotl(se^N,8),U=U+se|0,M=rotl(M^U,7),V=V+H|0,k=rotl(k^V,16),S=S+k|0,H=rotl(H^S,12),V=V+H|0,k=rotl(k^V,8),S=S+k|0,H=rotl(H^S,7),J=J+G|0,D=rotl(D^J,16),L=L+D|0,G=rotl(G^L,12),J=J+G|0,D=rotl(D^J,8),L=L+D|0,G=rotl(G^L,7),$=$+M|0,D=rotl(D^$,16),S=S+D|0,M=rotl(M^S,12),$=$+M|0,D=rotl(D^$,8),S=S+D|0,M=rotl(M^S,7),N=N+H|0,K=rotl(K^N,16),L=L+K|0,H=rotl(H^L,12),N=N+H|0,K=rotl(K^N,8),L=L+K|0,H=rotl(H^L,7),V=V+G|0,se=rotl(se^V,16),Z=Z+se|0,G=rotl(G^Z,12),V=V+G|0,se=rotl(se^V,8),Z=Z+se|0,G=rotl(G^Z,7),J=J+ae|0,k=rotl(k^J,16),U=U+k|0,ae=rotl(ae^U,12),J=J+ae|0,k=rotl(k^J,8),U=U+k|0,ae=rotl(ae^U,7);let W=0;o[W++]=h+$|0,o[W++]=p+N|0,o[W++]=g+V|0,o[W++]=m+J|0,o[W++]=v+ae|0,o[W++]=b+M|0,o[W++]=_+H|0,o[W++]=C+G|0,o[W++]=z+Z|0,o[W++]=x+U|0,o[W++]=R+S|0,o[W++]=O+L|0,o[W++]=P+K|0,o[W++]=I+se|0,o[W++]=te+k|0,o[W++]=T+D|0}const chacha20=createCipher(chachaCore,{counterRight:!1,counterLength:4,allowShortKeys:!1});let HMAC$1=class extends Hash$1{constructor(n,s){super(),this.finished=!1,this.destroyed=!1,assert.hash(n);const o=toBytes$1(s);if(this.iHash=n.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,c=new Uint8Array(u);c.set(o.length>u?n.create().update(o).digest():o);for(let h=0;h<c.length;h++)c[h]^=54;this.iHash.update(c),this.oHash=n.create();for(let h=0;h<c.length;h++)c[h]^=106;this.oHash.update(c),c.fill(0)}update(n){return assert.exists(this),this.iHash.update(n),this}digestInto(n){assert.exists(this),assert.bytes(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:u,destroyed:c,blockLen:h,outputLen:p}=this;return n=n,n.finished=u,n.destroyed=c,n.blockLen=h,n.outputLen=p,n.oHash=s._cloneInto(n.oHash),n.iHash=o._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$1=(r,n,s)=>new HMAC$1(r,n).update(s).digest();hmac$1.create=(r,n)=>new HMAC$1(r,n);function extract(r,n,s){return assert.hash(r),hmac$1(r,toBytes$1(s),toBytes$1(n))}const HKDF_COUNTER=new Uint8Array([0]),EMPTY_BUFFER=new Uint8Array;function expand(r,n,s,o=32){if(assert.hash(r),assert.number(o),o>255*r.outputLen)throw new Error("Length should be <= 255*HashLen");const u=Math.ceil(o/r.outputLen);s===void 0&&(s=EMPTY_BUFFER);const c=new Uint8Array(u*r.outputLen),h=hmac$1.create(r,n),p=h._cloneInto(),g=new Uint8Array(h.outputLen);for(let m=0;m<u;m++)HKDF_COUNTER[0]=m+1,p.update(m===0?EMPTY_BUFFER:g).update(s).update(HKDF_COUNTER).digestInto(g),c.set(g,r.outputLen*m),h._cloneInto(p);return h.destroy(),p.destroy(),g.fill(0),HKDF_COUNTER.fill(0),c.slice(0,o)}var __defProp=Object.defineProperty,__export=(r,n)=>{for(var s in n)__defProp(r,s,{get:n[s],enumerable:!0})},verifiedSymbol=Symbol("verified"),isRecord=r=>r instanceof Object;function validateEvent(r){if(!isRecord(r)||typeof r.kind!="number"||typeof r.content!="string"||typeof r.created_at!="number"||typeof r.pubkey!="string"||!r.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(r.tags))return!1;for(let n=0;n<r.tags.length;n++){let s=r.tags[n];if(!Array.isArray(s))return!1;for(let o=0;o<s.length;o++)if(typeof s[o]!="string")return!1}return!0}var utils_exports={};__export(utils_exports,{Queue:()=>Queue$1,QueueNode:()=>QueueNode,binarySearch:()=>binarySearch,insertEventIntoAscendingList:()=>insertEventIntoAscendingList,insertEventIntoDescendingList:()=>insertEventIntoDescendingList,normalizeURL:()=>normalizeURL$1,utf8Decoder:()=>utf8Decoder,utf8Encoder:()=>utf8Encoder});var utf8Decoder=new TextDecoder("utf-8"),utf8Encoder=new TextEncoder;function normalizeURL$1(r){try{r.indexOf("://")===-1&&(r="wss://"+r);let n=new URL(r);return n.pathname=n.pathname.replace(/\/+/g,"/"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),(n.port==="80"&&n.protocol==="ws:"||n.port==="443"&&n.protocol==="wss:")&&(n.port=""),n.searchParams.sort(),n.hash="",n.toString()}catch{throw new Error(`Invalid URL: ${r}`)}}function insertEventIntoDescendingList(r,n){const[s,o]=binarySearch(r,u=>n.id===u.id?0:n.created_at===u.created_at?-1:u.created_at-n.created_at);return o||r.splice(s,0,n),r}function insertEventIntoAscendingList(r,n){const[s,o]=binarySearch(r,u=>n.id===u.id?0:n.created_at===u.created_at?-1:n.created_at-u.created_at);return o||r.splice(s,0,n),r}function binarySearch(r,n){let s=0,o=r.length-1;for(;s<=o;){const u=Math.floor((s+o)/2),c=n(r[u]);if(c===0)return[u,!0];c<0?o=u-1:s=u+1}return[s,!1]}var QueueNode=class{constructor(r){A(this,"value");A(this,"next",null);A(this,"prev",null);this.value=r}},Queue$1=class{constructor(){A(this,"first");A(this,"last");this.first=null,this.last=null}enqueue(n){const s=new QueueNode(n);return this.last?this.last===this.first?(this.last=s,this.last.prev=this.first,this.first.next=s):(s.prev=this.last,this.last.next=s,this.last=s):(this.first=s,this.last=s),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const s=this.first;return this.first=null,this.last=null,s.value}const n=this.first;return this.first=n.next,this.first&&(this.first.prev=null),n.value}},JS=class{generateSecretKey(){return schnorr$1.utils.randomPrivateKey()}getPublicKey(r){return bytesToHex$2(schnorr$1.getPublicKey(r))}finalizeEvent(r,n){const s=r;return s.pubkey=bytesToHex$2(schnorr$1.getPublicKey(n)),s.id=getEventHash$1(s),s.sig=bytesToHex$2(schnorr$1.sign(getEventHash$1(s),n)),s[verifiedSymbol]=!0,s}verifyEvent(r){if(typeof r[verifiedSymbol]=="boolean")return r[verifiedSymbol];const n=getEventHash$1(r);if(n!==r.id)return r[verifiedSymbol]=!1,!1;try{const s=schnorr$1.verify(r.sig,n,r.pubkey);return r[verifiedSymbol]=s,s}catch{return r[verifiedSymbol]=!1,!1}}};function serializeEvent(r){if(!validateEvent(r))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,r.pubkey,r.created_at,r.kind,r.tags,r.content])}function getEventHash$1(r){let n=sha256$2(utf8Encoder.encode(serializeEvent(r)));return bytesToHex$2(n)}var i=new JS,generateSecretKey=i.generateSecretKey,getPublicKey=i.getPublicKey,finalizeEvent=i.finalizeEvent,verifyEvent=i.verifyEvent,kinds_exports={};__export(kinds_exports,{Application:()=>Application,BadgeAward:()=>BadgeAward,BadgeDefinition:()=>BadgeDefinition,BlockedRelaysList:()=>BlockedRelaysList,BookmarkList:()=>BookmarkList,Bookmarksets:()=>Bookmarksets,Calendar:()=>Calendar,CalendarEventRSVP:()=>CalendarEventRSVP,ChannelCreation:()=>ChannelCreation,ChannelHideMessage:()=>ChannelHideMessage,ChannelMessage:()=>ChannelMessage,ChannelMetadata:()=>ChannelMetadata,ChannelMuteUser:()=>ChannelMuteUser,ClassifiedListing:()=>ClassifiedListing,ClientAuth:()=>ClientAuth,CommunitiesList:()=>CommunitiesList,CommunityDefinition:()=>CommunityDefinition,CommunityPostApproval:()=>CommunityPostApproval,Contacts:()=>Contacts,CreateOrUpdateProduct:()=>CreateOrUpdateProduct,CreateOrUpdateStall:()=>CreateOrUpdateStall,Curationsets:()=>Curationsets,Date:()=>Date2,DirectMessageRelaysList:()=>DirectMessageRelaysList,DraftClassifiedListing:()=>DraftClassifiedListing,DraftLong:()=>DraftLong,Emojisets:()=>Emojisets,EncryptedDirectMessage:()=>EncryptedDirectMessage,EventDeletion:()=>EventDeletion,FileMetadata:()=>FileMetadata,FileServerPreference:()=>FileServerPreference,Followsets:()=>Followsets,GenericRepost:()=>GenericRepost,Genericlists:()=>Genericlists,GiftWrap:()=>GiftWrap,HTTPAuth:()=>HTTPAuth,Handlerinformation:()=>Handlerinformation,Handlerrecommendation:()=>Handlerrecommendation,Highlights:()=>Highlights,InterestsList:()=>InterestsList,Interestsets:()=>Interestsets,JobFeedback:()=>JobFeedback,JobRequest:()=>JobRequest,JobResult:()=>JobResult,Label:()=>Label,LightningPubRPC:()=>LightningPubRPC,LiveChatMessage:()=>LiveChatMessage,LiveEvent:()=>LiveEvent,LongFormArticle:()=>LongFormArticle,Metadata:()=>Metadata,Mutelist:()=>Mutelist,NWCWalletInfo:()=>NWCWalletInfo,NWCWalletRequest:()=>NWCWalletRequest,NWCWalletResponse:()=>NWCWalletResponse,NostrConnect:()=>NostrConnect,OpenTimestamps:()=>OpenTimestamps,Pinlist:()=>Pinlist,PrivateDirectMessage:()=>PrivateDirectMessage,ProblemTracker:()=>ProblemTracker,ProfileBadges:()=>ProfileBadges,PublicChatsList:()=>PublicChatsList,Reaction:()=>Reaction,RecommendRelay:()=>RecommendRelay,RelayList:()=>RelayList,Relaysets:()=>Relaysets,Report:()=>Report,Reporting:()=>Reporting,Repost:()=>Repost,Seal:()=>Seal,SearchRelaysList:()=>SearchRelaysList,ShortTextNote:()=>ShortTextNote,Time:()=>Time,UserEmojiList:()=>UserEmojiList,UserStatuses:()=>UserStatuses,Zap:()=>Zap,ZapGoal:()=>ZapGoal,ZapRequest:()=>ZapRequest,classifyKind:()=>classifyKind,isAddressableKind:()=>isAddressableKind,isEphemeralKind:()=>isEphemeralKind,isKind:()=>isKind,isParameterizedReplaceableKind:()=>isParameterizedReplaceableKind,isRegularKind:()=>isRegularKind,isReplaceableKind:()=>isReplaceableKind});function isRegularKind(r){return 1e3<=r&&r<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(r)}function isReplaceableKind(r){return[0,3].includes(r)||1e4<=r&&r<2e4}function isEphemeralKind(r){return 2e4<=r&&r<3e4}function isAddressableKind(r){return 3e4<=r&&r<4e4}var isParameterizedReplaceableKind=isAddressableKind;function classifyKind(r){return isRegularKind(r)?"regular":isReplaceableKind(r)?"replaceable":isEphemeralKind(r)?"ephemeral":isAddressableKind(r)?"parameterized":"unknown"}function isKind(r,n){const s=n instanceof Array?n:[n];return validateEvent(r)&&s.includes(r.kind)||!1}var Metadata=0,ShortTextNote=1,RecommendRelay=2,Contacts=3,EncryptedDirectMessage=4,EventDeletion=5,Repost=6,Reaction=7,BadgeAward=8,Seal=13,PrivateDirectMessage=14,GenericRepost=16,ChannelCreation=40,ChannelMetadata=41,ChannelMessage=42,ChannelHideMessage=43,ChannelMuteUser=44,OpenTimestamps=1040,GiftWrap=1059,FileMetadata=1063,LiveChatMessage=1311,ProblemTracker=1971,Report=1984,Reporting=1984,Label=1985,CommunityPostApproval=4550,JobRequest=5999,JobResult=6999,JobFeedback=7e3,ZapGoal=9041,ZapRequest=9734,Zap=9735,Highlights=9802,Mutelist=1e4,Pinlist=10001,RelayList=10002,BookmarkList=10003,CommunitiesList=10004,PublicChatsList=10005,BlockedRelaysList=10006,SearchRelaysList=10007,InterestsList=10015,UserEmojiList=10030,DirectMessageRelaysList=10050,FileServerPreference=10096,NWCWalletInfo=13194,LightningPubRPC=21e3,ClientAuth=22242,NWCWalletRequest=23194,NWCWalletResponse=23195,NostrConnect=24133,HTTPAuth=27235,Followsets=3e4,Genericlists=30001,Relaysets=30002,Bookmarksets=30003,Curationsets=30004,ProfileBadges=30008,BadgeDefinition=30009,Interestsets=30015,CreateOrUpdateStall=30017,CreateOrUpdateProduct=30018,LongFormArticle=30023,DraftLong=30024,Emojisets=30030,Application=30078,LiveEvent=30311,UserStatuses=30315,ClassifiedListing=30402,DraftClassifiedListing=30403,Date2=31922,Time=31923,Calendar=31924,CalendarEventRSVP=31925,Handlerrecommendation=31989,Handlerinformation=31990,CommunityDefinition=34550;function matchFilter(r,n){if(r.ids&&r.ids.indexOf(n.id)===-1||r.kinds&&r.kinds.indexOf(n.kind)===-1||r.authors&&r.authors.indexOf(n.pubkey)===-1)return!1;for(let s in r)if(s[0]==="#"){let o=s.slice(1),u=r[`#${o}`];if(u&&!n.tags.find(([c,h])=>c===s.slice(1)&&u.indexOf(h)!==-1))return!1}return!(r.since&&n.created_at<r.since||r.until&&n.created_at>r.until)}function matchFilters(r,n){for(let s=0;s<r.length;s++)if(matchFilter(r[s],n))return!0;return!1}var fakejson_exports={};__export(fakejson_exports,{getHex64:()=>getHex64,getInt:()=>getInt,getSubscriptionId:()=>getSubscriptionId,matchEventId:()=>matchEventId,matchEventKind:()=>matchEventKind,matchEventPubkey:()=>matchEventPubkey});function getHex64(r,n){let s=n.length+3,o=r.indexOf(`"${n}":`)+s,u=r.slice(o).indexOf('"')+o+1;return r.slice(u,u+64)}function getInt(r,n){let s=n.length,o=r.indexOf(`"${n}":`)+s+3,u=r.slice(o),c=Math.min(u.indexOf(","),u.indexOf("}"));return parseInt(u.slice(0,c),10)}function getSubscriptionId(r){let n=r.slice(0,22).indexOf('"EVENT"');if(n===-1)return null;let s=r.slice(n+7+1).indexOf('"');if(s===-1)return null;let o=n+7+1+s,u=r.slice(o+1,80).indexOf('"');if(u===-1)return null;let c=o+1+u;return r.slice(o+1,c)}function matchEventId(r,n){return n===getHex64(r,"id")}function matchEventPubkey(r,n){return n===getHex64(r,"pubkey")}function matchEventKind(r,n){return n===getInt(r,"kind")}var nip42_exports={};__export(nip42_exports,{makeAuthEvent:()=>makeAuthEvent});function makeAuthEvent(r,n){return{kind:ClientAuth,created_at:Math.floor(Date.now()/1e3),tags:[["relay",r],["challenge",n]],content:""}}var _WebSocket;try{_WebSocket=WebSocket}catch{}var _WebSocket2;try{_WebSocket2=WebSocket}catch{}var nip19_exports={};__export(nip19_exports,{BECH32_REGEX:()=>BECH32_REGEX$1,Bech32MaxSize:()=>Bech32MaxSize,NostrTypeGuard:()=>NostrTypeGuard,decode:()=>decode,decodeNostrURI:()=>decodeNostrURI,encodeBytes:()=>encodeBytes,naddrEncode:()=>naddrEncode,neventEncode:()=>neventEncode,noteEncode:()=>noteEncode,nprofileEncode:()=>nprofileEncode,npubEncode:()=>npubEncode,nsecEncode:()=>nsecEncode});var NostrTypeGuard={isNProfile:r=>/^nprofile1[a-z\d]+$/.test(r||""),isNEvent:r=>/^nevent1[a-z\d]+$/.test(r||""),isNAddr:r=>/^naddr1[a-z\d]+$/.test(r||""),isNSec:r=>/^nsec1[a-z\d]{58}$/.test(r||""),isNPub:r=>/^npub1[a-z\d]{58}$/.test(r||""),isNote:r=>/^note1[a-z\d]+$/.test(r||""),isNcryptsec:r=>/^ncryptsec1[a-z\d]+$/.test(r||"")},Bech32MaxSize=5e3,BECH32_REGEX$1=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function integerToUint8Array(r){const n=new Uint8Array(4);return n[0]=r>>24&255,n[1]=r>>16&255,n[2]=r>>8&255,n[3]=r&255,n}function decodeNostrURI(r){try{return r.startsWith("nostr:")&&(r=r.substring(6)),decode(r)}catch{return{type:"invalid",data:null}}}function decode(r){var u,c,h,p,g,m,v;let{prefix:n,words:s}=bech32.decode(r,Bech32MaxSize),o=new Uint8Array(bech32.fromWords(s));switch(n){case"nprofile":{let b=parseTLV(o);if(!((u=b[0])!=null&&u[0]))throw new Error("missing TLV 0 for nprofile");if(b[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:bytesToHex$2(b[0][0]),relays:b[1]?b[1].map(_=>utf8Decoder.decode(_)):[]}}}case"nevent":{let b=parseTLV(o);if(!((c=b[0])!=null&&c[0]))throw new Error("missing TLV 0 for nevent");if(b[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(b[2]&&b[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(b[3]&&b[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:bytesToHex$2(b[0][0]),relays:b[1]?b[1].map(_=>utf8Decoder.decode(_)):[],author:(h=b[2])!=null&&h[0]?bytesToHex$2(b[2][0]):void 0,kind:(p=b[3])!=null&&p[0]?parseInt(bytesToHex$2(b[3][0]),16):void 0}}}case"naddr":{let b=parseTLV(o);if(!((g=b[0])!=null&&g[0]))throw new Error("missing TLV 0 for naddr");if(!((m=b[2])!=null&&m[0]))throw new Error("missing TLV 2 for naddr");if(b[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((v=b[3])!=null&&v[0]))throw new Error("missing TLV 3 for naddr");if(b[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:utf8Decoder.decode(b[0][0]),pubkey:bytesToHex$2(b[2][0]),kind:parseInt(bytesToHex$2(b[3][0]),16),relays:b[1]?b[1].map(_=>utf8Decoder.decode(_)):[]}}}case"nsec":return{type:n,data:o};case"npub":case"note":return{type:n,data:bytesToHex$2(o)};default:throw new Error(`unknown prefix ${n}`)}}function parseTLV(r){let n={},s=r;for(;s.length>0;){let o=s[0],u=s[1],c=s.slice(2,2+u);if(s=s.slice(2+u),c.length<u)throw new Error(`not enough data to read on TLV ${o}`);n[o]=n[o]||[],n[o].push(c)}return n}function nsecEncode(r){return encodeBytes("nsec",r)}function npubEncode(r){return encodeBytes("npub",hexToBytes$2(r))}function noteEncode(r){return encodeBytes("note",hexToBytes$2(r))}function encodeBech32(r,n){let s=bech32.toWords(n);return bech32.encode(r,s,Bech32MaxSize)}function encodeBytes(r,n){return encodeBech32(r,n)}function nprofileEncode(r){let n=encodeTLV({0:[hexToBytes$2(r.pubkey)],1:(r.relays||[]).map(s=>utf8Encoder.encode(s))});return encodeBech32("nprofile",n)}function neventEncode(r){let n;r.kind!==void 0&&(n=integerToUint8Array(r.kind));let s=encodeTLV({0:[hexToBytes$2(r.id)],1:(r.relays||[]).map(o=>utf8Encoder.encode(o)),2:r.author?[hexToBytes$2(r.author)]:[],3:n?[new Uint8Array(n)]:[]});return encodeBech32("nevent",s)}function naddrEncode(r){let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r.kind,!1);let s=encodeTLV({0:[utf8Encoder.encode(r.identifier)],1:(r.relays||[]).map(o=>utf8Encoder.encode(o)),2:[hexToBytes$2(r.pubkey)],3:[new Uint8Array(n)]});return encodeBech32("naddr",s)}function encodeTLV(r){let n=[];return Object.entries(r).reverse().forEach(([s,o])=>{o.forEach(u=>{let c=new Uint8Array(u.length+2);c.set([parseInt(s)],0),c.set([u.length],1),c.set(u,2),n.push(c)})}),concatBytes$2(...n)}var nip04_exports={};__export(nip04_exports,{decrypt:()=>decrypt$1,encrypt:()=>encrypt$1});function encrypt$1(r,n,s){const o=r instanceof Uint8Array?bytesToHex$2(r):r,u=secp256k1$1.getSharedSecret(o,"02"+n),c=getNormalizedX(u);let h=Uint8Array.from(randomBytes$1(16)),p=utf8Encoder.encode(s),g=cbc(c,h).encrypt(p),m=base64.encode(new Uint8Array(g)),v=base64.encode(new Uint8Array(h.buffer));return`${m}?iv=${v}`}function decrypt$1(r,n,s){const o=r instanceof Uint8Array?bytesToHex$2(r):r;let[u,c]=s.split("?iv="),h=secp256k1$1.getSharedSecret(o,"02"+n),p=getNormalizedX(h),g=base64.decode(c),m=base64.decode(u),v=cbc(p,g).decrypt(m);return utf8Decoder.decode(v)}function getNormalizedX(r){return r.slice(1,33)}var nip05_exports={};__export(nip05_exports,{NIP05_REGEX:()=>NIP05_REGEX$1,isNip05:()=>isNip05,isValid:()=>isValid,queryProfile:()=>queryProfile,searchDomain:()=>searchDomain,useFetchImplementation:()=>useFetchImplementation});var NIP05_REGEX$1=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,isNip05=r=>NIP05_REGEX$1.test(r||""),_fetch;try{_fetch=fetch}catch{}function useFetchImplementation(r){_fetch=r}async function searchDomain(r,n=""){try{const s=`https://${r}/.well-known/nostr.json?name=${n}`,o=await _fetch(s,{redirect:"manual"});if(o.status!==200)throw Error("Wrong response code");return(await o.json()).names}catch{return{}}}async function queryProfile(r){var u;const n=r.match(NIP05_REGEX$1);if(!n)return null;const[,s="_",o]=n;try{const c=`https://${o}/.well-known/nostr.json?name=${s}`,h=await _fetch(c,{redirect:"manual"});if(h.status!==200)throw Error("Wrong response code");const p=await h.json(),g=p.names[s];return g?{pubkey:g,relays:(u=p.relays)==null?void 0:u[g]}:null}catch{return null}}async function isValid(r,n){const s=await queryProfile(n);return s?s.pubkey===r:!1}var nip10_exports={};__export(nip10_exports,{parse:()=>parse});function parse(r){const n={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let s,o;for(let u=r.tags.length-1;u>=0;u--){const c=r.tags[u];if(c[0]==="e"&&c[1]){const[h,p,g,m,v]=c,b={id:p,relays:g?[g]:[],author:v};if(m==="root"){n.root=b;continue}if(m==="reply"){n.reply=b;continue}if(m==="mention"){n.mentions.push(b);continue}s?o=b:s=b,n.mentions.push(b);continue}if(c[0]==="q"&&c[1]){const[h,p,g]=c;n.quotes.push({id:p,relays:g?[g]:[]})}if(c[0]==="p"&&c[1]){n.profiles.push({pubkey:c[1],relays:c[2]?[c[2]]:[]});continue}}return n.root||(n.root=o||s||n.reply),n.reply||(n.reply=s||n.root),[n.reply,n.root].forEach(u=>{if(!u)return;let c=n.mentions.indexOf(u);if(c!==-1&&n.mentions.splice(c,1),u.author){let h=n.profiles.find(p=>p.pubkey===u.author);h&&h.relays&&(u.relays||(u.relays=[]),h.relays.forEach(p=>{var g;((g=u.relays)==null?void 0:g.indexOf(p))===-1&&u.relays.push(p)}),h.relays=u.relays)}}),n.mentions.forEach(u=>{if(u.author){let c=n.profiles.find(h=>h.pubkey===u.author);c&&c.relays&&(u.relays||(u.relays=[]),c.relays.forEach(h=>{u.relays.indexOf(h)===-1&&u.relays.push(h)}),c.relays=u.relays)}}),n}var nip11_exports={};__export(nip11_exports,{fetchRelayInformation:()=>fetchRelayInformation,useFetchImplementation:()=>useFetchImplementation2});var _fetch2;try{_fetch2=fetch}catch{}function useFetchImplementation2(r){_fetch2=r}async function fetchRelayInformation(r){return await(await fetch(r.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var nip13_exports={};__export(nip13_exports,{fastEventHash:()=>fastEventHash,getPow:()=>getPow,minePow:()=>minePow});function getPow(r){let n=0;for(let s=0;s<64;s+=8){const o=parseInt(r.substring(s,s+8),16);if(o===0)n+=32;else{n+=Math.clz32(o);break}}return n}function minePow(r,n){let s=0;const o=r,u=["nonce",s.toString(),n.toString()];for(o.tags.push(u);;){const c=Math.floor(new Date().getTime()/1e3);if(c!==o.created_at&&(s=0,o.created_at=c),u[1]=(++s).toString(),o.id=fastEventHash(o),getPow(o.id)>=n)break}return o}function fastEventHash(r){return bytesToHex$2(sha256$2(utf8Encoder.encode(JSON.stringify([0,r.pubkey,r.created_at,r.kind,r.tags,r.content]))))}var nip17_exports={};__export(nip17_exports,{unwrapEvent:()=>unwrapEvent2,unwrapManyEvents:()=>unwrapManyEvents2,wrapEvent:()=>wrapEvent2,wrapManyEvents:()=>wrapManyEvents2});var nip59_exports={};__export(nip59_exports,{createRumor:()=>createRumor,createSeal:()=>createSeal,createWrap:()=>createWrap,unwrapEvent:()=>unwrapEvent,unwrapManyEvents:()=>unwrapManyEvents,wrapEvent:()=>wrapEvent$1,wrapManyEvents:()=>wrapManyEvents});var nip44_exports={};__export(nip44_exports,{decrypt:()=>decrypt2,encrypt:()=>encrypt2,getConversationKey:()=>getConversationKey,v2:()=>v2});var minPlaintextSize=1,maxPlaintextSize=65535;function getConversationKey(r,n){const s=secp256k1$1.getSharedSecret(r,"02"+n).subarray(1,33);return extract(sha256$2,s,"nip44-v2")}function getMessageKeys(r,n){const s=expand(sha256$2,r,n,76);return{chacha_key:s.subarray(0,32),chacha_nonce:s.subarray(32,44),hmac_key:s.subarray(44,76)}}function calcPaddedLen(r){if(!Number.isSafeInteger(r)||r<1)throw new Error("expected positive integer");if(r<=32)return 32;const n=1<<Math.floor(Math.log2(r-1))+1,s=n<=256?32:n/8;return s*(Math.floor((r-1)/s)+1)}function writeU16BE(r){if(!Number.isSafeInteger(r)||r<minPlaintextSize||r>maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const n=new Uint8Array(2);return new DataView(n.buffer).setUint16(0,r,!1),n}function pad(r){const n=utf8Encoder.encode(r),s=n.length,o=writeU16BE(s),u=new Uint8Array(calcPaddedLen(s)-s);return concatBytes$2(o,n,u)}function unpad(r){const n=new DataView(r.buffer).getUint16(0),s=r.subarray(2,2+n);if(n<minPlaintextSize||n>maxPlaintextSize||s.length!==n||r.length!==2+calcPaddedLen(n))throw new Error("invalid padding");return utf8Decoder.decode(s)}function hmacAad(r,n,s){if(s.length!==32)throw new Error("AAD associated data must be 32 bytes");const o=concatBytes$2(s,n);return hmac$1(sha256$2,r,o)}function decodePayload(r){if(typeof r!="string")throw new Error("payload must be a valid string");const n=r.length;if(n<132||n>87472)throw new Error("invalid payload length: "+n);if(r[0]==="#")throw new Error("unknown encryption version");let s;try{s=base64.decode(r)}catch(c){throw new Error("invalid base64: "+c.message)}const o=s.length;if(o<99||o>65603)throw new Error("invalid data length: "+o);const u=s[0];if(u!==2)throw new Error("unknown encryption version "+u);return{nonce:s.subarray(1,33),ciphertext:s.subarray(33,-32),mac:s.subarray(-32)}}function encrypt2(r,n,s=randomBytes$1(32)){const{chacha_key:o,chacha_nonce:u,hmac_key:c}=getMessageKeys(n,s),h=pad(r),p=chacha20(o,u,h),g=hmacAad(c,p,s);return base64.encode(concatBytes$2(new Uint8Array([2]),s,p,g))}function decrypt2(r,n){const{nonce:s,ciphertext:o,mac:u}=decodePayload(r),{chacha_key:c,chacha_nonce:h,hmac_key:p}=getMessageKeys(n,s),g=hmacAad(p,o,s);if(!equalBytes(g,u))throw new Error("invalid MAC");const m=chacha20(c,h,o);return unpad(m)}var v2={utils:{getConversationKey,calcPaddedLen},encrypt:encrypt2,decrypt:decrypt2},TWO_DAYS=2*24*60*60,now=()=>Math.round(Date.now()/1e3),randomNow=()=>Math.round(now()-Math.random()*TWO_DAYS),nip44ConversationKey=(r,n)=>getConversationKey(r,n),nip44Encrypt=(r,n,s)=>encrypt2(JSON.stringify(r),nip44ConversationKey(n,s)),nip44Decrypt=(r,n)=>JSON.parse(decrypt2(r.content,nip44ConversationKey(n,r.pubkey)));function createRumor(r,n){const s={created_at:now(),content:"",tags:[],...r,pubkey:getPublicKey(n)};return s.id=getEventHash$1(s),s}function createSeal(r,n,s){return finalizeEvent({kind:Seal,content:nip44Encrypt(r,n,s),created_at:randomNow(),tags:[]},n)}function createWrap(r,n){const s=generateSecretKey();return finalizeEvent({kind:GiftWrap,content:nip44Encrypt(r,s,n),created_at:randomNow(),tags:[["p",n]]},s)}function wrapEvent$1(r,n,s){const o=createRumor(r,n),u=createSeal(o,n,s);return createWrap(u,s)}function wrapManyEvents(r,n,s){if(!s||s.length===0)throw new Error("At least one recipient is required.");const o=getPublicKey(n),u=[wrapEvent$1(r,n,o)];return s.forEach(c=>{u.push(wrapEvent$1(r,n,c))}),u}function unwrapEvent(r,n){const s=nip44Decrypt(r,n);return nip44Decrypt(s,n)}function unwrapManyEvents(r,n){let s=[];return r.forEach(o=>{s.push(unwrapEvent(o,n))}),s.sort((o,u)=>o.created_at-u.created_at),s}function createEvent(r,n,s,o){const u={created_at:Math.ceil(Date.now()/1e3),kind:PrivateDirectMessage,tags:[],content:n};return(Array.isArray(r)?r:[r]).forEach(({publicKey:h,relayUrl:p})=>{u.tags.push(p?["p",h,p]:["p",h])}),o&&u.tags.push(["e",o.eventId,o.relayUrl||"","reply"]),s&&u.tags.push(["subject",s]),u}function wrapEvent2(r,n,s,o,u){const c=createEvent(n,s,o,u);return wrapEvent$1(c,r,n.publicKey)}function wrapManyEvents2(r,n,s,o,u){if(!n||n.length===0)throw new Error("At least one recipient is required.");return[{publicKey:getPublicKey(r)},...n].map(h=>wrapEvent2(r,h,s,o,u))}var unwrapEvent2=unwrapEvent,unwrapManyEvents2=unwrapManyEvents,nip18_exports={};__export(nip18_exports,{finishRepostEvent:()=>finishRepostEvent,getRepostedEvent:()=>getRepostedEvent,getRepostedEventPointer:()=>getRepostedEventPointer});function finishRepostEvent(r,n,s,o){var h;let u;const c=[...r.tags??[],["e",n.id,s],["p",n.pubkey]];return n.kind===ShortTextNote?u=Repost:(u=GenericRepost,c.push(["k",String(n.kind)])),finalizeEvent({kind:u,tags:c,content:r.content===""||(h=n.tags)!=null&&h.find(p=>p[0]==="-")?"":JSON.stringify(n),created_at:r.created_at},o)}function getRepostedEventPointer(r){if(![Repost,GenericRepost].includes(r.kind))return;let n,s;for(let o=r.tags.length-1;o>=0&&(n===void 0||s===void 0);o--){const u=r.tags[o];u.length>=2&&(u[0]==="e"&&n===void 0?n=u:u[0]==="p"&&s===void 0&&(s=u))}if(n!==void 0)return{id:n[1],relays:[n[2],s==null?void 0:s[2]].filter(o=>typeof o=="string"),author:s==null?void 0:s[1]}}function getRepostedEvent(r,{skipVerification:n}={}){const s=getRepostedEventPointer(r);if(s===void 0||r.content==="")return;let o;try{o=JSON.parse(r.content)}catch{return}if(o.id===s.id&&!(!n&&!verifyEvent(o)))return o}var nip21_exports={};__export(nip21_exports,{NOSTR_URI_REGEX:()=>NOSTR_URI_REGEX,parse:()=>parse2,test:()=>test});var NOSTR_URI_REGEX=new RegExp(`nostr:(${BECH32_REGEX$1.source})`);function test(r){return typeof r=="string"&&new RegExp(`^${NOSTR_URI_REGEX.source}$`).test(r)}function parse2(r){const n=r.match(new RegExp(`^${NOSTR_URI_REGEX.source}$`));if(!n)throw new Error(`Invalid Nostr URI: ${r}`);return{uri:n[0],value:n[1],decoded:decode(n[1])}}var nip25_exports={};__export(nip25_exports,{finishReactionEvent:()=>finishReactionEvent,getReactedEventPointer:()=>getReactedEventPointer});function finishReactionEvent(r,n,s){const o=n.tags.filter(u=>u.length>=2&&(u[0]==="e"||u[0]==="p"));return finalizeEvent({...r,kind:Reaction,tags:[...r.tags??[],...o,["e",n.id],["p",n.pubkey]],content:r.content??"+"},s)}function getReactedEventPointer(r){if(r.kind!==Reaction)return;let n,s;for(let o=r.tags.length-1;o>=0&&(n===void 0||s===void 0);o--){const u=r.tags[o];u.length>=2&&(u[0]==="e"&&n===void 0?n=u:u[0]==="p"&&s===void 0&&(s=u))}if(!(n===void 0||s===void 0))return{id:n[1],relays:[n[2],s[2]].filter(o=>o!==void 0),author:s[1]}}var nip27_exports={};__export(nip27_exports,{parse:()=>parse3});var noCharacter=/\W/m,noURLCharacter=/\W |\W$|$|,| /m;function*parse3(r){const n=r.length;let s=0,o=0;for(;o<n;){let u=r.indexOf(":",o);if(u===-1)break;if(r.substring(u-5,u)==="nostr"){const c=r.substring(u+60).match(noCharacter),h=c?u+60+c.index:n;try{let p,{data:g,type:m}=decode(r.substring(u+1,h));switch(m){case"npub":p={pubkey:g};break;case"nsec":case"note":o=h+1;continue;default:p=g}s!==u-5&&(yield{type:"text",text:r.substring(s,u-5)}),yield{type:"reference",pointer:p},o=h,s=o;continue}catch{o=u+1;continue}}else if(r.substring(u-5,u)==="https"||r.substring(u-4,u)==="http"){const c=r.substring(u+4).match(noURLCharacter),h=c?u+4+c.index:n,p=r[u-1]==="s"?5:4;try{let g=new URL(r.substring(u-p,h));if(g.hostname.indexOf(".")===-1)throw new Error("invalid url");if(s!==u-p&&(yield{type:"text",text:r.substring(s,u-p)}),g.pathname.endsWith(".png")||g.pathname.endsWith(".jpg")||g.pathname.endsWith(".jpeg")||g.pathname.endsWith(".gif")||g.pathname.endsWith(".webp")){yield{type:"image",url:g.toString()},o=h,s=o;continue}if(g.pathname.endsWith(".mp4")||g.pathname.endsWith(".avi")||g.pathname.endsWith(".webm")||g.pathname.endsWith(".mkv")){yield{type:"video",url:g.toString()},o=h,s=o;continue}if(g.pathname.endsWith(".mp3")||g.pathname.endsWith(".aac")||g.pathname.endsWith(".ogg")||g.pathname.endsWith(".opus")){yield{type:"audio",url:g.toString()},o=h,s=o;continue}yield{type:"url",url:g.toString()},o=h,s=o;continue}catch{o=h+1;continue}}else if(r.substring(u-3,u)==="wss"||r.substring(u-2,u)==="ws"){const c=r.substring(u+4).match(noURLCharacter),h=c?u+4+c.index:n,p=r[u-1]==="s"?3:2;try{let g=new URL(r.substring(u-p,h));if(g.hostname.indexOf(".")===-1)throw new Error("invalid ws url");s!==u-p&&(yield{type:"text",text:r.substring(s,u-p)}),yield{type:"relay",url:g.toString()},o=h,s=o;continue}catch{o=h+1;continue}}else{o=u+1;continue}}s!==n&&(yield{type:"text",text:r.substring(s)})}var nip28_exports={};__export(nip28_exports,{channelCreateEvent:()=>channelCreateEvent,channelHideMessageEvent:()=>channelHideMessageEvent,channelMessageEvent:()=>channelMessageEvent,channelMetadataEvent:()=>channelMetadataEvent,channelMuteUserEvent:()=>channelMuteUserEvent});var channelCreateEvent=(r,n)=>{let s;if(typeof r.content=="object")s=JSON.stringify(r.content);else if(typeof r.content=="string")s=r.content;else return;return finalizeEvent({kind:ChannelCreation,tags:[...r.tags??[]],content:s,created_at:r.created_at},n)},channelMetadataEvent=(r,n)=>{let s;if(typeof r.content=="object")s=JSON.stringify(r.content);else if(typeof r.content=="string")s=r.content;else return;return finalizeEvent({kind:ChannelMetadata,tags:[["e",r.channel_create_event_id],...r.tags??[]],content:s,created_at:r.created_at},n)},channelMessageEvent=(r,n)=>{const s=[["e",r.channel_create_event_id,r.relay_url,"root"]];return r.reply_to_channel_message_event_id&&s.push(["e",r.reply_to_channel_message_event_id,r.relay_url,"reply"]),finalizeEvent({kind:ChannelMessage,tags:[...s,...r.tags??[]],content:r.content,created_at:r.created_at},n)},channelHideMessageEvent=(r,n)=>{let s;if(typeof r.content=="object")s=JSON.stringify(r.content);else if(typeof r.content=="string")s=r.content;else return;return finalizeEvent({kind:ChannelHideMessage,tags:[["e",r.channel_message_event_id],...r.tags??[]],content:s,created_at:r.created_at},n)},channelMuteUserEvent=(r,n)=>{let s;if(typeof r.content=="object")s=JSON.stringify(r.content);else if(typeof r.content=="string")s=r.content;else return;return finalizeEvent({kind:ChannelMuteUser,tags:[["p",r.pubkey_to_mute],...r.tags??[]],content:s,created_at:r.created_at},n)},nip30_exports={};__export(nip30_exports,{EMOJI_SHORTCODE_REGEX:()=>EMOJI_SHORTCODE_REGEX,matchAll:()=>matchAll,regex:()=>regex,replaceAll:()=>replaceAll});var EMOJI_SHORTCODE_REGEX=/:(\w+):/,regex=()=>new RegExp(`\\B${EMOJI_SHORTCODE_REGEX.source}\\B`,"g");function*matchAll(r){const n=r.matchAll(regex());for(const s of n)try{const[o,u]=s;yield{shortcode:o,name:u,start:s.index,end:s.index+o.length}}catch{}}function replaceAll(r,n){return r.replaceAll(regex(),(s,o)=>n({shortcode:s,name:o}))}var nip39_exports={};__export(nip39_exports,{useFetchImplementation:()=>useFetchImplementation3,validateGithub:()=>validateGithub});var _fetch3;try{_fetch3=fetch}catch{}function useFetchImplementation3(r){_fetch3=r}async function validateGithub(r,n,s){try{return await(await _fetch3(`https://gist.github.com/${n}/${s}/raw`)).text()===`Verifying that I control the following Nostr public key: ${r}`}catch{return!1}}var nip47_exports={};__export(nip47_exports,{makeNwcRequestEvent:()=>makeNwcRequestEvent,parseConnectionString:()=>parseConnectionString});function parseConnectionString(r){const{pathname:n,searchParams:s}=new URL(r),o=n,u=s.get("relay"),c=s.get("secret");if(!o||!u||!c)throw new Error("invalid connection string");return{pubkey:o,relay:u,secret:c}}async function makeNwcRequestEvent(r,n,s){const u=await encrypt$1(n,r,JSON.stringify({method:"pay_invoice",params:{invoice:s}})),c={kind:NWCWalletRequest,created_at:Math.round(Date.now()/1e3),content:u,tags:[["p",r]]};return finalizeEvent(c,n)}var nip54_exports={};__export(nip54_exports,{normalizeIdentifier:()=>normalizeIdentifier});function normalizeIdentifier(r){return r=r.trim().toLowerCase(),r=r.normalize("NFKC"),Array.from(r).map(n=>new RegExp("\\p{Letter}","u").test(n)||new RegExp("\\p{Number}","u").test(n)?n:"-").join("")}var nip57_exports={};__export(nip57_exports,{getZapEndpoint:()=>getZapEndpoint,makeZapReceipt:()=>makeZapReceipt,makeZapRequest:()=>makeZapRequest,useFetchImplementation:()=>useFetchImplementation4,validateZapRequest:()=>validateZapRequest});var _fetch4;try{_fetch4=fetch}catch{}function useFetchImplementation4(r){_fetch4=r}async function getZapEndpoint(r){try{let n="",{lud06:s,lud16:o}=JSON.parse(r.content);if(s){let{words:h}=bech32.decode(s,1e3),p=bech32.fromWords(h);n=utf8Decoder.decode(p)}else if(o){let[h,p]=o.split("@");n=new URL(`/.well-known/lnurlp/${h}`,`https://${p}`).toString()}else return null;let c=await(await _fetch4(n)).json();if(c.allowsNostr&&c.nostrPubkey)return c.callback}catch{}return null}function makeZapRequest({profile:r,event:n,amount:s,relays:o,comment:u=""}){if(!s)throw new Error("amount not given");if(!r)throw new Error("profile not given");let c={kind:9734,created_at:Math.round(Date.now()/1e3),content:u,tags:[["p",r],["amount",s.toString()],["relays",...o]]};if(n&&typeof n=="string"&&c.tags.push(["e",n]),n&&typeof n=="object"){if(isReplaceableKind(n.kind)){const h=["a",`${n.kind}:${n.pubkey}:`];c.tags.push(h)}else if(isAddressableKind(n.kind)){let h=n.tags.find(([g,m])=>g==="d"&&m);if(!h)throw new Error("d tag not found or is empty");const p=["a",`${n.kind}:${n.pubkey}:${h[1]}`];c.tags.push(p)}}return c}function validateZapRequest(r){let n;try{n=JSON.parse(r)}catch{return"Invalid zap request JSON."}if(!validateEvent(n))return"Zap request is not a valid Nostr event.";if(!verifyEvent(n))return"Invalid signature on zap request.";let s=n.tags.find(([c,h])=>c==="p"&&h);if(!s)return"Zap request doesn't have a 'p' tag.";if(!s[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let o=n.tags.find(([c,h])=>c==="e"&&h);return o&&!o[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":n.tags.find(([c,h])=>c==="relays"&&h)?null:"Zap request doesn't have a 'relays' tag."}function makeZapReceipt({zapRequest:r,preimage:n,bolt11:s,paidAt:o}){let u=JSON.parse(r),c=u.tags.filter(([p])=>p==="e"||p==="p"||p==="a"),h={kind:9735,created_at:Math.round(o.getTime()/1e3),content:"",tags:[...c,["P",u.pubkey],["bolt11",s],["description",r]]};return n&&h.tags.push(["preimage",n]),h}var nip98_exports={};__export(nip98_exports,{getToken:()=>getToken,hashPayload:()=>hashPayload,unpackEventFromToken:()=>unpackEventFromToken,validateEvent:()=>validateEvent2,validateEventKind:()=>validateEventKind,validateEventMethodTag:()=>validateEventMethodTag,validateEventPayloadTag:()=>validateEventPayloadTag,validateEventTimestamp:()=>validateEventTimestamp,validateEventUrlTag:()=>validateEventUrlTag,validateToken:()=>validateToken});var _authorizationScheme="Nostr ";async function getToken(r,n,s,o=!1,u){const c={kind:HTTPAuth,tags:[["u",r],["method",n]],created_at:Math.round(new Date().getTime()/1e3),content:""};u&&c.tags.push(["payload",hashPayload(u)]);const h=await s(c);return(o?_authorizationScheme:"")+base64.encode(utf8Encoder.encode(JSON.stringify(h)))}async function validateToken(r,n,s){const o=await unpackEventFromToken(r).catch(c=>{throw c});return await validateEvent2(o,n,s).catch(c=>{throw c})}async function unpackEventFromToken(r){if(!r)throw new Error("Missing token");r=r.replace(_authorizationScheme,"");const n=utf8Decoder.decode(base64.decode(r));if(!n||n.length===0||!n.startsWith("{"))throw new Error("Invalid token");return JSON.parse(n)}function validateEventTimestamp(r){return r.created_at?Math.round(new Date().getTime()/1e3)-r.created_at<60:!1}function validateEventKind(r){return r.kind===HTTPAuth}function validateEventUrlTag(r,n){const s=r.tags.find(o=>o[0]==="u");return s?s.length>0&&s[1]===n:!1}function validateEventMethodTag(r,n){const s=r.tags.find(o=>o[0]==="method");return s?s.length>0&&s[1].toLowerCase()===n.toLowerCase():!1}function hashPayload(r){const n=sha256$2(utf8Encoder.encode(JSON.stringify(r)));return bytesToHex$2(n)}function validateEventPayloadTag(r,n){const s=r.tags.find(u=>u[0]==="payload");if(!s)return!1;const o=hashPayload(n);return s.length>0&&s[1]===o}async function validateEvent2(r,n,s,o){if(!verifyEvent(r))throw new Error("Invalid nostr event, signature invalid");if(!validateEventKind(r))throw new Error("Invalid nostr event, kind invalid");if(!validateEventTimestamp(r))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!validateEventUrlTag(r,n))throw new Error("Invalid nostr event, url tag invalid");if(!validateEventMethodTag(r,s))throw new Error("Invalid nostr event, method tag invalid");if(o&&typeof o=="object"&&Object.keys(o).length>0&&!validateEventPayloadTag(r,o))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}new TextDecoder("utf-8");new TextEncoder;function normalizeURL(r){try{r.indexOf("://")===-1&&(r="wss://"+r);let n=new URL(r);return n.pathname=n.pathname.replace(/\/+/g,"/"),n.pathname.endsWith("/")&&(n.pathname=n.pathname.slice(0,-1)),(n.port==="80"&&n.protocol==="ws:"||n.port==="443"&&n.protocol==="wss:")&&(n.port=""),n.searchParams.sort(),n.hash="",n.toString()}catch{throw new Error(`Invalid URL: ${r}`)}}var lib$1={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}var ee={},taskCollection$1={},taskCollection={},utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1._fast_remove_single=void 0;function r(n,s){s!==-1&&(s===0?n.shift():s===n.length-1?n.length=n.length-1:n.splice(s,1))}return utils$1._fast_remove_single=r,utils$1}var bakeCollection={},hasRequiredBakeCollection;function requireBakeCollection(){return hasRequiredBakeCollection||(hasRequiredBakeCollection=1,function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(r){var n="";if(r===0)return n;for(var s=0;s<r-1;++s)n+="arg"+String(s)+", ";return n+="arg"+String(r-1),n}function generateBodyPartsCode(r,n){for(var s="",o="",u=0;u<n;++u)s+="var f".concat(u," = collection[").concat(u,`];
`),o+="f".concat(u,"(").concat(r,`)
`);return{funcDefCode:s,funcCallCode:o}}function generateBodyPartsVariadicCode(r){for(var n="",s="",o=0;o<r;++o)n+="var f".concat(o," = collection[").concat(o,`];
`),s+="f".concat(o,`.apply(undefined, arguments)
`);return{funcDefCode:n,funcCallCode:s}}function bakeCollection(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                `).concat(funcCallCode,`
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);collection.length%10===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 10) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                        collection[i+4](`).concat(argsDefCode,`);
                        collection[i+5](`).concat(argsDefCode,`);
                        collection[i+6](`).concat(argsDefCode,`);
                        collection[i+7](`).concat(argsDefCode,`);
                        collection[i+8](`).concat(argsDefCode,`);
                        collection[i+9](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%4===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 4) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%3===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 3) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                    }
                });
            })`):funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; ++i) {
                        collection[i](`).concat(argsDefCode,`);
                    }
                });
            })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollection=bakeCollection;function bakeCollectionAwait(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                return Promise.all([ `).concat(funcCallCode,` ]);
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=`(function(collection) {
            return (function(`.concat(argsDefCode,`) {
                var promises = Array(collection.length);
                for (var i = 0; i < collection.length; ++i) {
                    promises[i] = collection[i](`).concat(argsDefCode,`);
                }
                return Promise.all(promises);
            });
        })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionAwait=bakeCollectionAwait;function bakeCollectionVariadic(collection){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function() {
                `).concat(funcCallCode,`
            });
        })`)}else funcFactoryCode=`(function(collection) {
            return (function() {
                for (var i = 0; i < collection.length; ++i) {
                    collection[i].apply(undefined, arguments);
                }
            });
        })`;{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionVariadic=bakeCollectionVariadic}(bakeCollection)),bakeCollection}var hasRequiredTaskCollection$1;function requireTaskCollection$1(){if(hasRequiredTaskCollection$1)return taskCollection;hasRequiredTaskCollection$1=1;var r=taskCollection&&taskCollection.__spreadArray||function(I,te,T){if(T||arguments.length===2)for(var $=0,N=te.length,V;$<N;$++)(V||!($ in te))&&(V||(V=Array.prototype.slice.call(te,0,$)),V[$]=te[$]);return I.concat(V||Array.prototype.slice.call(te))};Object.defineProperty(taskCollection,"__esModule",{value:!0}),taskCollection.TaskCollection=void 0;var n=requireUtils$1(),s=requireBakeCollection();function o(I,te){var T=this.length;if(T>1)if(te){var $;($=this._tasks).push.apply($,arguments),this.length+=arguments.length}else this._tasks.push(I),this.length++;else if(te){if(T===1){var N=Array(1+arguments.length);N.push(N),N.push.apply(N,arguments),this._tasks=N}else{var N=Array(arguments.length);N.push.apply(N,arguments),this._tasks=N}this.length+=arguments.length}else T===1?this._tasks=[this._tasks,I]:this._tasks=I,this.length++}function u(I,te){var T=this.length;if(T>1)if(te){var $;($=this._tasks).push.apply($,arguments),this.length+=arguments.length}else this._tasks.push(I),this.length++;else if(te){if(T===1){var N=Array(1+arguments.length);N.push(N),N.push.apply(N,arguments),this._tasks=N}else{var N=Array(arguments.length);N.push.apply(N,arguments),this._tasks=N}this.length+=arguments.length}else T===1?this._tasks=[this._tasks,I]:this._tasks=I,this.length++;this.firstEmitBuildStrategy?this.call=b:this.rebuild()}function c(I){this.length!==0&&(this.length===1?this._tasks===I&&(this.length=0):((0,n._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(I)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function h(I){if(this.length!==0){if(this.length===1)if(this._tasks===I&&(this.length=0),this.firstEmitBuildStrategy){this.call=s.BAKED_EMPTY_FUNC;return}else{this.rebuild();return}else(0,n._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(I)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length;this.firstEmitBuildStrategy?this.call=b:this.rebuild()}}function p(I){for(var te,T=[],$=1;$<arguments.length;$++)T[$-1]=arguments[$];this.length===0?(this._tasks=T,this.length=1):this.length===1?(T.unshift(this._tasks),this._tasks=T,this.length=this._tasks.length):((te=this._tasks).splice.apply(te,r([I,0],T,!1)),this.length=this._tasks.length)}function g(I){for(var te,T=[],$=1;$<arguments.length;$++)T[$-1]=arguments[$];this.length===0?(this._tasks=T,this.length=1):this.length===1?(T.unshift(this._tasks),this._tasks=T,this.length=this._tasks.length):((te=this._tasks).splice.apply(te,r([I,0],T,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=b:this.rebuild()}function m(){this.length===0?this.call=s.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,s.bakeCollection)(this._tasks,this.argsNum)}function v(){this.length===0?this.call=s.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,s.bakeCollectionAwait)(this._tasks,this.argsNum)}function b(){this.rebuild(),this.call.apply(void 0,arguments)}var _=function(){function I(te,T,$,N){T===void 0&&(T=!0),$===void 0&&($=null),N===void 0&&(N=!1),this.awaitTasks=N,this.call=s.BAKED_EMPTY_FUNC,this.argsNum=te,this.firstEmitBuildStrategy=!0,N?this.rebuild=v.bind(this):this.rebuild=m.bind(this),this.setAutoRebuild(T),$?typeof $=="function"?(this._tasks=$,this.length=1):(this._tasks=$,this.length=$.length):(this._tasks=null,this.length=0),T&&this.rebuild()}return I}();taskCollection.TaskCollection=_;function C(){this._tasks=null,this.length=0,this.call=s.BAKED_EMPTY_FUNC}function z(){this._tasks=null,this.length=0,this.call=s.BAKED_EMPTY_FUNC}function x(I){this.argsNum<I&&(this.argsNum=I,this.firstEmitBuildStrategy?this.call=b:this.rebuild())}function R(I){I?(this.push=u.bind(this),this.insert=g.bind(this),this.removeLast=h.bind(this)):(this.push=o.bind(this),this.insert=p.bind(this),this.removeLast=c.bind(this))}function O(){return this.length===0?[]:this.length===1?[this._tasks]:this._tasks}function P(I){I.length===0?(this.length=0,this.call=s.BAKED_EMPTY_FUNC):I.length===1?(this.length=1,this.call=I[0],this._tasks=I[0]):(this.length=I.length,this._tasks=I,this.firstEmitBuildStrategy?this.call=b:this.rebuild())}return _.prototype.fastClear=C,_.prototype.clear=z,_.prototype.growArgsNum=x,_.prototype.setAutoRebuild=R,_.prototype.tasksAsArray=O,_.prototype.setTasks=P,taskCollection}var hasRequiredTaskCollection;function requireTaskCollection(){return hasRequiredTaskCollection||(hasRequiredTaskCollection=1,function(r){var n=taskCollection$1&&taskCollection$1.__createBinding||(Object.create?function(o,u,c,h){h===void 0&&(h=c);var p=Object.getOwnPropertyDescriptor(u,c);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(o,h,p)}:function(o,u,c,h){h===void 0&&(h=c),o[h]=u[c]}),s=taskCollection$1&&taskCollection$1.__exportStar||function(o,u){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&n(u,o,c)};Object.defineProperty(r,"__esModule",{value:!0}),s(requireTaskCollection$1(),r)}(taskCollection$1)),taskCollection$1}var utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.nullObj=void 0;function r(){var n={};return n.__proto__=null,n}return utils.nullObj=r,utils}var hasRequiredEe;function requireEe(){if(hasRequiredEe)return ee;hasRequiredEe=1;var r=ee&&ee.__spreadArray||function(T,$,N){if(N||arguments.length===2)for(var V=0,J=$.length,ae;V<J;V++)(ae||!(V in $))&&(ae||(ae=Array.prototype.slice.call($,0,V)),ae[V]=$[V]);return T.concat(ae||Array.prototype.slice.call($))};Object.defineProperty(ee,"__esModule",{value:!0}),ee.EventEmitter=void 0;var n=requireTaskCollection(),s=requireUtils$1(),o=requireUtils();function u(T,$,N,V,J,ae){var M=this.events[T];if(M){if(M.length===0)return!1;if(M.argsNum<6)M.call($,N,V,J,ae);else{for(var H=new Array(M.argsNum),G=0,Z=H.length;G<Z;++G)H[G]=arguments[G+1];M.call.apply(void 0,H)}return!0}return!1}function c(T,$,N,V,J,ae){var M=this.events[T],H;if(M!==void 0){if(M.length===0)return!1;if(M.argsNum<6)M.call($,N,V,J,ae);else{H=new Array(M.argsNum);for(var G=0,Z=H.length;G<Z;++G)H[G]=arguments[G+1];M.call.apply(void 0,H)}}var U=this.onceEvents[T];if(U){if(typeof U=="function")if(this.onceEvents[T]=void 0,arguments.length<6)U($,N,V,J,ae);else{if(H===void 0){H=new Array(arguments.length-1);for(var G=0,Z=H.length;G<Z;++G)H[G]=arguments[G+1]}U.apply(void 0,H)}else{var S=U;if(this.onceEvents[T]=void 0,arguments.length<6)for(var G=0;G<S.length;++G)S[G]($,N,V,J,ae);else{if(H===void 0){H=new Array(arguments.length-1);for(var G=0,Z=H.length;G<Z;++G)H[G]=arguments[G+1]}for(var G=0;G<S.length;++G)S[G].apply(void 0,H)}}return!0}return M!==void 0}var h=function(){function T(){this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(T.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),T}();ee.EventEmitter=h;function p(T,$){switch(this.emit===u&&(this.emit=c),typeof this.onceEvents[T]){case"undefined":this.onceEvents[T]=$,typeof T=="symbol"&&this._symbolKeys.add(T);break;case"function":this.onceEvents[T]=[this.onceEvents[T],$];break;case"object":this.onceEvents[T].push($)}return this}function g(T,$,N){if(N===void 0&&(N=$.length),typeof $!="function")throw new TypeError("The listener must be a function");var V=this.events[T];return V?(V.push($),V.growArgsNum(N),this.maxListeners!==1/0&&this.maxListeners<=V.length&&console.warn('Maximum event listeners for "'.concat(String(T),'" event!'))):(this.events[T]=new n.TaskCollection(N,!0,$,!1),typeof T=="symbol"&&this._symbolKeys.add(T)),this}function m(T,$){var N=this.events[T];N&&N.removeLast($);var V=this.onceEvents[T];return V&&(typeof V=="function"?this.onceEvents[T]=void 0:typeof V=="object"&&(V.length===1&&V[0]===$?this.onceEvents[T]=void 0:(0,s._fast_remove_single)(V,V.lastIndexOf($)))),this}function v(T,$,N,V){N===void 0&&(N=this),V===void 0&&(V=$.length),this.boundFuncs||(this.boundFuncs=new Map);var J=$.bind(N);return this.boundFuncs.set($,J),this.addListener(T,J,V)}function b(T,$){var N,V,J=(N=this.boundFuncs)===null||N===void 0?void 0:N.get($);return(V=this.boundFuncs)===null||V===void 0||V.delete($),this.removeListener(T,J)}function _(T){return this.events[T]&&!!this.events[T].length}function C(T,$,N){if(N===void 0&&(N=$.length),typeof $!="function")throw new TypeError("The listener must be a function");var V=this.events[T];return!V||!(V instanceof n.TaskCollection)?(V=this.events[T]=new n.TaskCollection(N,!0,$,!1),typeof T=="symbol"&&this._symbolKeys.add(T)):(V.insert(0,$),V.growArgsNum(N),this.maxListeners!==1/0&&this.maxListeners<=V.length&&console.warn('Maximum event listeners for "'.concat(String(T),'" event!'))),this}function z(T,$){this.emit===u&&(this.emit=c);var N=this.onceEvents[T];return N?typeof N!="object"?(this.onceEvents[T]=[$,N],typeof T=="symbol"&&this._symbolKeys.add(T)):(N.unshift($),this.maxListeners!==1/0&&this.maxListeners<=N.length&&console.warn('Maximum event listeners for "'.concat(String(T),'" once event!'))):(this.onceEvents[T]=[$],typeof T=="symbol"&&this._symbolKeys.add(T)),this}function x(T){return T===void 0?(this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set):(this.events[T]=void 0,this.onceEvents[T]=void 0,typeof T=="symbol"&&this._symbolKeys.delete(T)),this}function R(T){return this.maxListeners=T,this}function O(){return this.maxListeners}function P(T){return this.emit===u?this.events[T]?this.events[T].tasksAsArray().slice():[]:this.events[T]&&this.onceEvents[T]?r(r([],this.events[T].tasksAsArray(),!0),typeof this.onceEvents[T]=="function"?[this.onceEvents[T]]:this.onceEvents[T],!0):this.events[T]?this.events[T].tasksAsArray():this.onceEvents[T]?typeof this.onceEvents[T]=="function"?[this.onceEvents[T]]:this.onceEvents[T]:[]}function I(){var T=this;if(this.emit===u){var $=Object.keys(this.events);return r(r([],$,!0),Array.from(this._symbolKeys),!0).filter(function(V){return V in T.events&&T.events[V]&&T.events[V].length})}else{var $=Object.keys(this.events).filter(function(J){return T.events[J]&&T.events[J].length}),N=Object.keys(this.onceEvents).filter(function(J){return T.onceEvents[J]&&T.onceEvents[J].length});return r(r(r([],$,!0),N,!0),Array.from(this._symbolKeys).filter(function(J){return J in T.events&&T.events[J]&&T.events[J].length||J in T.onceEvents&&T.onceEvents[J]&&T.onceEvents[J].length}),!0)}}function te(T){return this.emit===u?this.events[T]&&this.events[T].length||0:(this.events[T]&&this.events[T].length||0)+(this.onceEvents[T]&&this.onceEvents[T].length||0)}return h.prototype.emit=u,h.prototype.on=g,h.prototype.once=p,h.prototype.addListener=g,h.prototype.removeListener=m,h.prototype.addListenerBound=v,h.prototype.removeListenerBound=b,h.prototype.hasListeners=_,h.prototype.prependListener=C,h.prototype.prependOnceListener=z,h.prototype.off=m,h.prototype.removeAllListeners=x,h.prototype.setMaxListeners=R,h.prototype.getMaxListeners=O,h.prototype.listeners=P,h.prototype.eventNames=I,h.prototype.listenerCount=te,ee}var hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,function(r){var n=lib$1&&lib$1.__createBinding||(Object.create?function(o,u,c,h){h===void 0&&(h=c);var p=Object.getOwnPropertyDescriptor(u,c);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(o,h,p)}:function(o,u,c,h){h===void 0&&(h=c),o[h]=u[c]}),s=lib$1&&lib$1.__exportStar||function(o,u){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&n(u,o,c)};Object.defineProperty(r,"__esModule",{value:!0}),s(requireTypes(),r),s(requireEe(),r)}(lib$1)),lib$1}var libExports=requireLib$1(),browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var r=1e3,n=r*60,s=n*60,o=s*24,u=o*7,c=o*365.25;ms=function(v,b){b=b||{};var _=typeof v;if(_==="string"&&v.length>0)return h(v);if(_==="number"&&isFinite(v))return b.long?g(v):p(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function h(v){if(v=String(v),!(v.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(b){var _=parseFloat(b[1]),C=(b[2]||"ms").toLowerCase();switch(C){case"years":case"year":case"yrs":case"yr":case"y":return _*c;case"weeks":case"week":case"w":return _*u;case"days":case"day":case"d":return _*o;case"hours":case"hour":case"hrs":case"hr":case"h":return _*s;case"minutes":case"minute":case"mins":case"min":case"m":return _*n;case"seconds":case"second":case"secs":case"sec":case"s":return _*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _;default:return}}}}function p(v){var b=Math.abs(v);return b>=o?Math.round(v/o)+"d":b>=s?Math.round(v/s)+"h":b>=n?Math.round(v/n)+"m":b>=r?Math.round(v/r)+"s":v+"ms"}function g(v){var b=Math.abs(v);return b>=o?m(v,b,o,"day"):b>=s?m(v,b,s,"hour"):b>=n?m(v,b,n,"minute"):b>=r?m(v,b,r,"second"):v+" ms"}function m(v,b,_,C){var z=b>=_*1.5;return Math.round(v/_)+" "+C+(z?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function r(n){o.debug=o,o.default=o,o.coerce=m,o.disable=p,o.enable=c,o.enabled=g,o.humanize=requireMs(),o.destroy=v,Object.keys(n).forEach(b=>{o[b]=n[b]}),o.names=[],o.skips=[],o.formatters={};function s(b){let _=0;for(let C=0;C<b.length;C++)_=(_<<5)-_+b.charCodeAt(C),_|=0;return o.colors[Math.abs(_)%o.colors.length]}o.selectColor=s;function o(b){let _,C=null,z,x;function R(...O){if(!R.enabled)return;const P=R,I=Number(new Date),te=I-(_||I);P.diff=te,P.prev=_,P.curr=I,_=I,O[0]=o.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let T=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(N,V)=>{if(N==="%%")return"%";T++;const J=o.formatters[V];if(typeof J=="function"){const ae=O[T];N=J.call(P,ae),O.splice(T,1),T--}return N}),o.formatArgs.call(P,O),(P.log||o.log).apply(P,O)}return R.namespace=b,R.useColors=o.useColors(),R.color=o.selectColor(b),R.extend=u,R.destroy=o.destroy,Object.defineProperty(R,"enabled",{enumerable:!0,configurable:!1,get:()=>C!==null?C:(z!==o.namespaces&&(z=o.namespaces,x=o.enabled(b)),x),set:O=>{C=O}}),typeof o.init=="function"&&o.init(R),R}function u(b,_){const C=o(this.namespace+(typeof _>"u"?":":_)+b);return C.log=this.log,C}function c(b){o.save(b),o.namespaces=b,o.names=[],o.skips=[];const _=(typeof b=="string"?b:"").trim().replace(" ",",").split(",").filter(Boolean);for(const C of _)C[0]==="-"?o.skips.push(C.slice(1)):o.names.push(C)}function h(b,_){let C=0,z=0,x=-1,R=0;for(;C<b.length;)if(z<_.length&&(_[z]===b[C]||_[z]==="*"))_[z]==="*"?(x=z,R=C,z++):(C++,z++);else if(x!==-1)z=x+1,R++,C=R;else return!1;for(;z<_.length&&_[z]==="*";)z++;return z===_.length}function p(){const b=[...o.names,...o.skips.map(_=>"-"+_)].join(",");return o.enable(""),b}function g(b){for(const _ of o.skips)if(h(b,_))return!1;for(const _ of o.names)if(h(b,_))return!0;return!1}function m(b){return b instanceof Error?b.stack||b.message:b}function v(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}return common=r,common}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(r,n){var s={};n.formatArgs=u,n.save=c,n.load=h,n.useColors=o,n.storage=p(),n.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let m;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(m=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(m[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function u(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const v="color: "+this.color;m.splice(1,0,v,"color: inherit");let b=0,_=0;m[0].replace(/%[a-zA-Z%]/g,C=>{C!=="%%"&&(b++,C==="%c"&&(_=b))}),m.splice(_,0,v)}n.log=console.debug||console.log||(()=>{});function c(m){try{m?n.storage.setItem("debug",m):n.storage.removeItem("debug")}catch{}}function h(){let m;try{m=n.storage.getItem("debug")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=s.DEBUG),m}function p(){try{return localStorage}catch{}}r.exports=requireCommon()(n);const{formatters:g}=r.exports;g.j=function(m){try{return JSON.stringify(m)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}}}(browser,browser.exports)),browser.exports}var browserExports=requireBrowser();const createDebug5=getDefaultExportFromCjs(browserExports),crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes$1(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function anumber(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function abytes$1(r,...n){if(!isBytes$1(r))throw new Error("Uint8Array expected");if(n.length>0&&!n.includes(r.length))throw new Error("Uint8Array expected of length "+n+", got length="+r.length)}function ahash(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");anumber(r.outputLen),anumber(r.blockLen)}function aexists(r,n=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(n&&r.finished)throw new Error("Hash#digest() has already been called")}function aoutput(r,n){abytes$1(r);const s=n.outputLen;if(r.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}function clean(...r){for(let n=0;n<r.length;n++)r[n].fill(0)}function createView(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function rotr(r,n){return r<<32-n|r>>>n}const hasHexBuiltin$1=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes$1=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));function bytesToHex$1(r){if(abytes$1(r),hasHexBuiltin$1)return r.toHex();let n="";for(let s=0;s<r.length;s++)n+=hexes$1[r[s]];return n}const asciis$1={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16$1(r){if(r>=asciis$1._0&&r<=asciis$1._9)return r-asciis$1._0;if(r>=asciis$1.A&&r<=asciis$1.F)return r-(asciis$1.A-10);if(r>=asciis$1.a&&r<=asciis$1.f)return r-(asciis$1.a-10)}function hexToBytes$1(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(hasHexBuiltin$1)return Uint8Array.fromHex(r);const n=r.length,s=n/2;if(n%2)throw new Error("hex string expected, got unpadded hex of length "+n);const o=new Uint8Array(s);for(let u=0,c=0;u<s;u++,c+=2){const h=asciiToBase16$1(r.charCodeAt(c)),p=asciiToBase16$1(r.charCodeAt(c+1));if(h===void 0||p===void 0){const g=r[c]+r[c+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+c)}o[u]=h*16+p}return o}function utf8ToBytes(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function toBytes(r){return typeof r=="string"&&(r=utf8ToBytes(r)),abytes$1(r),r}function concatBytes$1(...r){let n=0;for(let o=0;o<r.length;o++){const u=r[o];abytes$1(u),n+=u.length}const s=new Uint8Array(n);for(let o=0,u=0;o<r.length;o++){const c=r[o];s.set(c,u),u+=c.length}return s}class Hash{}function createHasher(r){const n=o=>r().update(toBytes(o)).digest(),s=r();return n.outputLen=s.outputLen,n.blockLen=s.blockLen,n.create=()=>r(),n}function randomBytes(r=32){if(crypto&&typeof crypto.getRandomValues=="function")return crypto.getRandomValues(new Uint8Array(r));if(crypto&&typeof crypto.randomBytes=="function")return Uint8Array.from(crypto.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(r,n,s,o){if(typeof r.setBigUint64=="function")return r.setBigUint64(n,s,o);const u=BigInt(32),c=BigInt(4294967295),h=Number(s>>u&c),p=Number(s&c),g=o?4:0,m=o?0:4;r.setUint32(n+g,h,o),r.setUint32(n+m,p,o)}function Chi(r,n,s){return r&n^~r&s}function Maj(r,n,s){return r&n^r&s^n&s}class HashMD extends Hash{constructor(n,s,o,u){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=n,this.outputLen=s,this.padOffset=o,this.isLE=u,this.buffer=new Uint8Array(n),this.view=createView(this.buffer)}update(n){aexists(this),n=toBytes(n),abytes$1(n);const{view:s,buffer:o,blockLen:u}=this,c=n.length;for(let h=0;h<c;){const p=Math.min(u-this.pos,c-h);if(p===u){const g=createView(n);for(;u<=c-h;h+=u)this.process(g,h);continue}o.set(n.subarray(h,h+p),this.pos),this.pos+=p,h+=p,this.pos===u&&(this.process(s,0),this.pos=0)}return this.length+=n.length,this.roundClean(),this}digestInto(n){aexists(this),aoutput(n,this),this.finished=!0;const{buffer:s,view:o,blockLen:u,isLE:c}=this;let{pos:h}=this;s[h++]=128,clean(this.buffer.subarray(h)),this.padOffset>u-h&&(this.process(o,0),h=0);for(let b=h;b<u;b++)s[b]=0;setBigUint64(o,u-8,BigInt(this.length*8),c),this.process(o,0);const p=createView(n),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const m=g/4,v=this.get();if(m>v.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<m;b++)p.setUint32(4*b,v[b],c)}digest(){const{buffer:n,outputLen:s}=this;this.digestInto(n);const o=n.slice(0,s);return this.destroy(),o}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:s,buffer:o,length:u,finished:c,destroyed:h,pos:p}=this;return n.destroyed=h,n.finished=c,n.length=u,n.pos=p,u%s&&n.buffer.set(o),n}clone(){return this._cloneInto()}}const SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_K=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(n=32){super(64,n,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:n,B:s,C:o,D:u,E:c,F:h,G:p,H:g}=this;return[n,s,o,u,c,h,p,g]}set(n,s,o,u,c,h,p,g){this.A=n|0,this.B=s|0,this.C=o|0,this.D=u|0,this.E=c|0,this.F=h|0,this.G=p|0,this.H=g|0}process(n,s){for(let b=0;b<16;b++,s+=4)SHA256_W[b]=n.getUint32(s,!1);for(let b=16;b<64;b++){const _=SHA256_W[b-15],C=SHA256_W[b-2],z=rotr(_,7)^rotr(_,18)^_>>>3,x=rotr(C,17)^rotr(C,19)^C>>>10;SHA256_W[b]=x+SHA256_W[b-7]+z+SHA256_W[b-16]|0}let{A:o,B:u,C:c,D:h,E:p,F:g,G:m,H:v}=this;for(let b=0;b<64;b++){const _=rotr(p,6)^rotr(p,11)^rotr(p,25),C=v+_+Chi(p,g,m)+SHA256_K[b]+SHA256_W[b]|0,x=(rotr(o,2)^rotr(o,13)^rotr(o,22))+Maj(o,u,c)|0;v=m,m=g,g=p,p=h+C|0,h=c,c=u,u=o,o=C+x|0}o=o+this.A|0,u=u+this.B|0,c=c+this.C|0,h=h+this.D|0,p=p+this.E|0,g=g+this.F|0,m=m+this.G|0,v=v+this.H|0,this.set(o,u,c,h,p,g,m,v)}roundClean(){clean(SHA256_W)}destroy(){this.set(0,0,0,0,0,0,0,0),clean(this.buffer)}}const sha256$1=createHasher(()=>new SHA256);class HMAC extends Hash{constructor(n,s){super(),this.finished=!1,this.destroyed=!1,ahash(n);const o=toBytes(s);if(this.iHash=n.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const u=this.blockLen,c=new Uint8Array(u);c.set(o.length>u?n.create().update(o).digest():o);for(let h=0;h<c.length;h++)c[h]^=54;this.iHash.update(c),this.oHash=n.create();for(let h=0;h<c.length;h++)c[h]^=106;this.oHash.update(c),clean(c)}update(n){return aexists(this),this.iHash.update(n),this}digestInto(n){aexists(this),abytes$1(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:u,destroyed:c,blockLen:h,outputLen:p}=this;return n=n,n.finished=u,n.destroyed=c,n.blockLen=h,n.outputLen=p,n.oHash=s._cloneInto(n.oHash),n.iHash=o._cloneInto(n.iHash),n}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(r,n,s)=>new HMAC(r,n).update(s).digest();hmac.create=(r,n)=>new HMAC(r,n);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$4=BigInt(1);function isBytes(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function abytes(r){if(!isBytes(r))throw new Error("Uint8Array expected")}function abool(r,n){if(typeof n!="boolean")throw new Error(r+" boolean expected, got "+n)}function numberToHexUnpadded(r){const n=r.toString(16);return n.length&1?"0"+n:n}function hexToNumber(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?_0n$4:BigInt("0x"+r)}const hasHexBuiltin=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));function bytesToHex(r){if(abytes(r),hasHexBuiltin)return r.toHex();let n="";for(let s=0;s<r.length;s++)n+=hexes[r[s]];return n}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(r){if(r>=asciis._0&&r<=asciis._9)return r-asciis._0;if(r>=asciis.A&&r<=asciis.F)return r-(asciis.A-10);if(r>=asciis.a&&r<=asciis.f)return r-(asciis.a-10)}function hexToBytes(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(hasHexBuiltin)return Uint8Array.fromHex(r);const n=r.length,s=n/2;if(n%2)throw new Error("hex string expected, got unpadded hex of length "+n);const o=new Uint8Array(s);for(let u=0,c=0;u<s;u++,c+=2){const h=asciiToBase16(r.charCodeAt(c)),p=asciiToBase16(r.charCodeAt(c+1));if(h===void 0||p===void 0){const g=r[c]+r[c+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+c)}o[u]=h*16+p}return o}function bytesToNumberBE(r){return hexToNumber(bytesToHex(r))}function bytesToNumberLE(r){return abytes(r),hexToNumber(bytesToHex(Uint8Array.from(r).reverse()))}function numberToBytesBE(r,n){return hexToBytes(r.toString(16).padStart(n*2,"0"))}function numberToBytesLE(r,n){return numberToBytesBE(r,n).reverse()}function ensureBytes(r,n,s){let o;if(typeof n=="string")try{o=hexToBytes(n)}catch(c){throw new Error(r+" must be hex string or Uint8Array, cause: "+c)}else if(isBytes(n))o=Uint8Array.from(n);else throw new Error(r+" must be hex string or Uint8Array");const u=o.length;if(typeof s=="number"&&u!==s)throw new Error(r+" of length "+s+" expected, got "+u);return o}function concatBytes(...r){let n=0;for(let o=0;o<r.length;o++){const u=r[o];abytes(u),n+=u.length}const s=new Uint8Array(n);for(let o=0,u=0;o<r.length;o++){const c=r[o];s.set(c,u),u+=c.length}return s}const isPosBig=r=>typeof r=="bigint"&&_0n$4<=r;function inRange(r,n,s){return isPosBig(r)&&isPosBig(n)&&isPosBig(s)&&n<=r&&r<s}function aInRange(r,n,s,o){if(!inRange(n,s,o))throw new Error("expected valid "+r+": "+s+" <= n < "+o+", got "+n)}function bitLen(r){let n;for(n=0;r>_0n$4;r>>=_1n$4,n+=1);return n}const bitMask=r=>(_1n$4<<BigInt(r))-_1n$4,u8n=r=>new Uint8Array(r),u8fr=r=>Uint8Array.from(r);function createHmacDrbg(r,n,s){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");if(typeof s!="function")throw new Error("hmacFn must be a function");let o=u8n(r),u=u8n(r),c=0;const h=()=>{o.fill(1),u.fill(0),c=0},p=(...b)=>s(u,o,...b),g=(b=u8n(0))=>{u=p(u8fr([0]),b),o=p(),b.length!==0&&(u=p(u8fr([1]),b),o=p())},m=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const _=[];for(;b<n;){o=p();const C=o.slice();_.push(C),b+=o.length}return concatBytes(..._)};return(b,_)=>{h(),g(b);let C;for(;!(C=_(m()));)g();return h(),C}}const validatorFns={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||isBytes(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,n)=>n.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function validateObject(r,n,s={}){const o=(u,c,h)=>{const p=validatorFns[c];if(typeof p!="function")throw new Error("invalid validator function");const g=r[u];if(!(h&&g===void 0)&&!p(g,r))throw new Error("param "+String(u)+" is invalid. Expected "+c+", got "+g)};for(const[u,c]of Object.entries(n))o(u,c,!1);for(const[u,c]of Object.entries(s))o(u,c,!0);return r}function memoized(r){const n=new WeakMap;return(s,...o)=>{const u=n.get(s);if(u!==void 0)return u;const c=r(s,...o);return n.set(s,c),c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$3=BigInt(1),_2n$1=BigInt(2),_3n$1=BigInt(3),_4n=BigInt(4),_5n=BigInt(5),_8n=BigInt(8);function mod(r,n){const s=r%n;return s>=_0n$3?s:n+s}function pow2(r,n,s){let o=r;for(;n-- >_0n$3;)o*=o,o%=s;return o}function invert(r,n){if(r===_0n$3)throw new Error("invert: expected non-zero number");if(n<=_0n$3)throw new Error("invert: expected positive modulus, got "+n);let s=mod(r,n),o=n,u=_0n$3,c=_1n$3;for(;s!==_0n$3;){const p=o/s,g=o%s,m=u-c*p;o=s,s=g,u=c,c=m}if(o!==_1n$3)throw new Error("invert: does not exist");return mod(u,n)}function tonelliShanks(r){let n=r-_1n$3,s=0;for(;n%_2n$1===_0n$3;)n/=_2n$1,s++;let o=_2n$1;const u=Field(r);for(;o<r&&FpIsSquare(u,o);)if(o++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(s===1){const h=(r+_1n$3)/_4n;return function(g,m){const v=g.pow(m,h);if(!g.eql(g.sqr(v),m))throw new Error("Cannot find square root");return v}}const c=(n+_1n$3)/_2n$1;return function(p,g){if(!FpIsSquare(p,g))throw new Error("Cannot find square root");let m=s,v=p.pow(p.mul(p.ONE,o),n),b=p.pow(g,c),_=p.pow(g,n);for(;!p.eql(_,p.ONE);){if(p.eql(_,p.ZERO))return p.ZERO;let C=1;for(let x=p.sqr(_);C<m&&!p.eql(x,p.ONE);C++)x=p.sqr(x);const z=p.pow(v,_1n$3<<BigInt(m-C-1));v=p.sqr(z),b=p.mul(b,z),_=p.mul(_,v),m=C}return b}}function FpSqrt(r){return r%_4n===_3n$1?function(s,o){const u=(r+_1n$3)/_4n,c=s.pow(o,u);if(!s.eql(s.sqr(c),o))throw new Error("Cannot find square root");return c}:r%_8n===_5n?function(s,o){const u=s.mul(o,_2n$1),c=(r-_5n)/_8n,h=s.pow(u,c),p=s.mul(o,h),g=s.mul(s.mul(p,_2n$1),h),m=s.mul(p,s.sub(g,s.ONE));if(!s.eql(s.sqr(m),o))throw new Error("Cannot find square root");return m}:tonelliShanks(r)}const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(r){const n={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},s=FIELD_FIELDS.reduce((o,u)=>(o[u]="function",o),n);return validateObject(r,s)}function FpPow(r,n,s){if(s<_0n$3)throw new Error("invalid exponent, negatives unsupported");if(s===_0n$3)return r.ONE;if(s===_1n$3)return n;let o=r.ONE,u=n;for(;s>_0n$3;)s&_1n$3&&(o=r.mul(o,u)),u=r.sqr(u),s>>=_1n$3;return o}function FpInvertBatch(r,n,s=!1){const o=new Array(n.length).fill(s?r.ZERO:void 0),u=n.reduce((h,p,g)=>r.is0(p)?h:(o[g]=h,r.mul(h,p)),r.ONE),c=r.inv(u);return n.reduceRight((h,p,g)=>r.is0(p)?h:(o[g]=r.mul(h,o[g]),r.mul(h,p)),c),o}function FpLegendre(r,n){const s=(r.ORDER-_1n$3)/_2n$1,o=r.pow(n,s),u=r.eql(o,r.ONE),c=r.eql(o,r.ZERO),h=r.eql(o,r.neg(r.ONE));if(!u&&!c&&!h)throw new Error("Cannot find square root: probably non-prime P");return u?1:c?0:-1}function FpIsSquare(r,n){const s=FpLegendre(r,n);return s===0||s===1}function nLength(r,n){n!==void 0&&anumber(n);const s=n!==void 0?n:r.toString(2).length,o=Math.ceil(s/8);return{nBitLength:s,nByteLength:o}}function Field(r,n,s=!1,o={}){if(r<=_0n$3)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:u,nByteLength:c}=nLength(r,n);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const p=Object.freeze({ORDER:r,isLE:s,BITS:u,BYTES:c,MASK:bitMask(u),ZERO:_0n$3,ONE:_1n$3,create:g=>mod(g,r),isValid:g=>{if(typeof g!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof g);return _0n$3<=g&&g<r},is0:g=>g===_0n$3,isOdd:g=>(g&_1n$3)===_1n$3,neg:g=>mod(-g,r),eql:(g,m)=>g===m,sqr:g=>mod(g*g,r),add:(g,m)=>mod(g+m,r),sub:(g,m)=>mod(g-m,r),mul:(g,m)=>mod(g*m,r),pow:(g,m)=>FpPow(p,g,m),div:(g,m)=>mod(g*invert(m,r),r),sqrN:g=>g*g,addN:(g,m)=>g+m,subN:(g,m)=>g-m,mulN:(g,m)=>g*m,inv:g=>invert(g,r),sqrt:o.sqrt||(g=>(h||(h=FpSqrt(r)),h(p,g))),toBytes:g=>s?numberToBytesLE(g,c):numberToBytesBE(g,c),fromBytes:g=>{if(g.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+g.length);return s?bytesToNumberLE(g):bytesToNumberBE(g)},invertBatch:g=>FpInvertBatch(p,g),cmov:(g,m,v)=>v?m:g});return Object.freeze(p)}function getFieldBytesLength(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const n=r.toString(2).length;return Math.ceil(n/8)}function getMinHashLength(r){const n=getFieldBytesLength(r);return n+Math.ceil(n/2)}function mapHashToField(r,n,s=!1){const o=r.length,u=getFieldBytesLength(n),c=getMinHashLength(n);if(o<16||o<c||o>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+o);const h=s?bytesToNumberLE(r):bytesToNumberBE(r),p=mod(h,n-_1n$3)+_1n$3;return s?numberToBytesLE(p,u):numberToBytesBE(p,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$2=BigInt(1);function constTimeNegate(r,n){const s=n.negate();return r?s:n}function validateW(r,n){if(!Number.isSafeInteger(r)||r<=0||r>n)throw new Error("invalid window size, expected [1.."+n+"], got W="+r)}function calcWOpts(r,n){validateW(r,n);const s=Math.ceil(n/r)+1,o=2**(r-1),u=2**r,c=bitMask(r),h=BigInt(r);return{windows:s,windowSize:o,mask:c,maxNumber:u,shiftBy:h}}function calcOffsets(r,n,s){const{windowSize:o,mask:u,maxNumber:c,shiftBy:h}=s;let p=Number(r&u),g=r>>h;p>o&&(p-=c,g+=_1n$2);const m=n*o,v=m+Math.abs(p)-1,b=p===0,_=p<0,C=n%2!==0;return{nextN:g,offset:v,isZero:b,isNeg:_,isNegF:C,offsetF:m}}function validateMSMPoints(r,n){if(!Array.isArray(r))throw new Error("array expected");r.forEach((s,o)=>{if(!(s instanceof n))throw new Error("invalid point at index "+o)})}function validateMSMScalars(r,n){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((s,o)=>{if(!n.isValid(s))throw new Error("invalid scalar at index "+o)})}const pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(r){return pointWindowSizes.get(r)||1}function wNAF(r,n){return{constTimeNegate,hasPrecomputes(s){return getW(s)!==1},unsafeLadder(s,o,u=r.ZERO){let c=s;for(;o>_0n$2;)o&_1n$2&&(u=u.add(c)),c=c.double(),o>>=_1n$2;return u},precomputeWindow(s,o){const{windows:u,windowSize:c}=calcWOpts(o,n),h=[];let p=s,g=p;for(let m=0;m<u;m++){g=p,h.push(g);for(let v=1;v<c;v++)g=g.add(p),h.push(g);p=g.double()}return h},wNAF(s,o,u){let c=r.ZERO,h=r.BASE;const p=calcWOpts(s,n);for(let g=0;g<p.windows;g++){const{nextN:m,offset:v,isZero:b,isNeg:_,isNegF:C,offsetF:z}=calcOffsets(u,g,p);u=m,b?h=h.add(constTimeNegate(C,o[z])):c=c.add(constTimeNegate(_,o[v]))}return{p:c,f:h}},wNAFUnsafe(s,o,u,c=r.ZERO){const h=calcWOpts(s,n);for(let p=0;p<h.windows&&u!==_0n$2;p++){const{nextN:g,offset:m,isZero:v,isNeg:b}=calcOffsets(u,p,h);if(u=g,!v){const _=o[m];c=c.add(b?_.negate():_)}}return c},getPrecomputes(s,o,u){let c=pointPrecomputes.get(o);return c||(c=this.precomputeWindow(o,s),s!==1&&pointPrecomputes.set(o,u(c))),c},wNAFCached(s,o,u){const c=getW(s);return this.wNAF(c,this.getPrecomputes(c,s,u),o)},wNAFCachedUnsafe(s,o,u,c){const h=getW(s);return h===1?this.unsafeLadder(s,o,c):this.wNAFUnsafe(h,this.getPrecomputes(h,s,u),o,c)},setWindowSize(s,o){validateW(o,n),pointWindowSizes.set(s,o),pointPrecomputes.delete(s)}}}function pippenger(r,n,s,o){if(validateMSMPoints(s,r),validateMSMScalars(o,n),s.length!==o.length)throw new Error("arrays of points and scalars must have equal length");const u=r.ZERO,c=bitLen(BigInt(s.length)),h=c>12?c-3:c>4?c-2:c?2:1,p=bitMask(h),g=new Array(Number(p)+1).fill(u),m=Math.floor((n.BITS-1)/h)*h;let v=u;for(let b=m;b>=0;b-=h){g.fill(u);for(let C=0;C<o.length;C++){const z=o[C],x=Number(z>>BigInt(b)&p);g[x]=g[x].add(s[C])}let _=u;for(let C=g.length-1,z=u;C>0;C--)z=z.add(g[C]),_=_.add(z);if(v=v.add(_),b!==0)for(let C=0;C<h;C++)v=v.double()}return v}function validateBasic(r){return validateField(r.Fp),validateObject(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validateSigVerOpts(r){r.lowS!==void 0&&abool("lowS",r.lowS),r.prehash!==void 0&&abool("prehash",r.prehash)}function validatePointOpts(r){const n=validateBasic(r);validateObject(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:o,a:u}=n;if(s){if(!o.eql(u,o.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof s!="object"||typeof s.beta!="bigint"||typeof s.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...n})}class DERErr extends Error{constructor(n=""){super(n)}}const DER={Err:DERErr,_tlv:{encode:(r,n)=>{const{Err:s}=DER;if(r<0||r>256)throw new s("tlv.encode: wrong tag");if(n.length&1)throw new s("tlv.encode: unpadded data");const o=n.length/2,u=numberToHexUnpadded(o);if(u.length/2&128)throw new s("tlv.encode: long form length too big");const c=o>127?numberToHexUnpadded(u.length/2|128):"";return numberToHexUnpadded(r)+c+u+n},decode(r,n){const{Err:s}=DER;let o=0;if(r<0||r>256)throw new s("tlv.encode: wrong tag");if(n.length<2||n[o++]!==r)throw new s("tlv.decode: wrong tlv");const u=n[o++],c=!!(u&128);let h=0;if(!c)h=u;else{const g=u&127;if(!g)throw new s("tlv.decode(long): indefinite length not supported");if(g>4)throw new s("tlv.decode(long): byte length is too big");const m=n.subarray(o,o+g);if(m.length!==g)throw new s("tlv.decode: length bytes not complete");if(m[0]===0)throw new s("tlv.decode(long): zero leftmost byte");for(const v of m)h=h<<8|v;if(o+=g,h<128)throw new s("tlv.decode(long): not minimal encoding")}const p=n.subarray(o,o+h);if(p.length!==h)throw new s("tlv.decode: wrong value length");return{v:p,l:n.subarray(o+h)}}},_int:{encode(r){const{Err:n}=DER;if(r<_0n$1)throw new n("integer: negative integers are not allowed");let s=numberToHexUnpadded(r);if(Number.parseInt(s[0],16)&8&&(s="00"+s),s.length&1)throw new n("unexpected DER parsing assertion: unpadded hex");return s},decode(r){const{Err:n}=DER;if(r[0]&128)throw new n("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new n("invalid signature integer: unnecessary leading zero");return bytesToNumberBE(r)}},toSig(r){const{Err:n,_int:s,_tlv:o}=DER,u=ensureBytes("signature",r),{v:c,l:h}=o.decode(48,u);if(h.length)throw new n("invalid signature: left bytes after parsing");const{v:p,l:g}=o.decode(2,c),{v:m,l:v}=o.decode(2,g);if(v.length)throw new n("invalid signature: left bytes after parsing");return{r:s.decode(p),s:s.decode(m)}},hexFromSig(r){const{_tlv:n,_int:s}=DER,o=n.encode(2,s.encode(r.r)),u=n.encode(2,s.encode(r.s)),c=o+u;return n.encode(48,c)}},_0n$1=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(r){const n=validatePointOpts(r),{Fp:s}=n,o=Field(n.n,n.nBitLength),u=n.toBytes||((x,R,O)=>{const P=R.toAffine();return concatBytes(Uint8Array.from([4]),s.toBytes(P.x),s.toBytes(P.y))}),c=n.fromBytes||(x=>{const R=x.subarray(1),O=s.fromBytes(R.subarray(0,s.BYTES)),P=s.fromBytes(R.subarray(s.BYTES,2*s.BYTES));return{x:O,y:P}});function h(x){const{a:R,b:O}=n,P=s.sqr(x),I=s.mul(P,x);return s.add(s.add(I,s.mul(x,R)),O)}if(!s.eql(s.sqr(n.Gy),h(n.Gx)))throw new Error("bad generator point: equation left != right");function p(x){return inRange(x,_1n$1,n.n)}function g(x){const{allowedPrivateKeyLengths:R,nByteLength:O,wrapPrivateKey:P,n:I}=n;if(R&&typeof x!="bigint"){if(isBytes(x)&&(x=bytesToHex(x)),typeof x!="string"||!R.includes(x.length))throw new Error("invalid private key");x=x.padStart(O*2,"0")}let te;try{te=typeof x=="bigint"?x:bytesToNumberBE(ensureBytes("private key",x,O))}catch{throw new Error("invalid private key, expected hex or "+O+" bytes, got "+typeof x)}return P&&(te=mod(te,I)),aInRange("private key",te,_1n$1,I),te}function m(x){if(!(x instanceof _))throw new Error("ProjectivePoint expected")}const v=memoized((x,R)=>{const{px:O,py:P,pz:I}=x;if(s.eql(I,s.ONE))return{x:O,y:P};const te=x.is0();R==null&&(R=te?s.ONE:s.inv(I));const T=s.mul(O,R),$=s.mul(P,R),N=s.mul(I,R);if(te)return{x:s.ZERO,y:s.ZERO};if(!s.eql(N,s.ONE))throw new Error("invZ was invalid");return{x:T,y:$}}),b=memoized(x=>{if(x.is0()){if(n.allowInfinityPoint&&!s.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:R,y:O}=x.toAffine();if(!s.isValid(R)||!s.isValid(O))throw new Error("bad point: x or y not FE");const P=s.sqr(O),I=h(R);if(!s.eql(P,I))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class _{constructor(R,O,P){if(R==null||!s.isValid(R))throw new Error("x required");if(O==null||!s.isValid(O)||s.is0(O))throw new Error("y required");if(P==null||!s.isValid(P))throw new Error("z required");this.px=R,this.py=O,this.pz=P,Object.freeze(this)}static fromAffine(R){const{x:O,y:P}=R||{};if(!R||!s.isValid(O)||!s.isValid(P))throw new Error("invalid affine point");if(R instanceof _)throw new Error("projective point not allowed");const I=te=>s.eql(te,s.ZERO);return I(O)&&I(P)?_.ZERO:new _(O,P,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(R){const O=FpInvertBatch(s,R.map(P=>P.pz));return R.map((P,I)=>P.toAffine(O[I])).map(_.fromAffine)}static fromHex(R){const O=_.fromAffine(c(ensureBytes("pointHex",R)));return O.assertValidity(),O}static fromPrivateKey(R){return _.BASE.multiply(g(R))}static msm(R,O){return pippenger(_,o,R,O)}_setWindowSize(R){z.setWindowSize(this,R)}assertValidity(){b(this)}hasEvenY(){const{y:R}=this.toAffine();if(s.isOdd)return!s.isOdd(R);throw new Error("Field doesn't support isOdd")}equals(R){m(R);const{px:O,py:P,pz:I}=this,{px:te,py:T,pz:$}=R,N=s.eql(s.mul(O,$),s.mul(te,I)),V=s.eql(s.mul(P,$),s.mul(T,I));return N&&V}negate(){return new _(this.px,s.neg(this.py),this.pz)}double(){const{a:R,b:O}=n,P=s.mul(O,_3n),{px:I,py:te,pz:T}=this;let $=s.ZERO,N=s.ZERO,V=s.ZERO,J=s.mul(I,I),ae=s.mul(te,te),M=s.mul(T,T),H=s.mul(I,te);return H=s.add(H,H),V=s.mul(I,T),V=s.add(V,V),$=s.mul(R,V),N=s.mul(P,M),N=s.add($,N),$=s.sub(ae,N),N=s.add(ae,N),N=s.mul($,N),$=s.mul(H,$),V=s.mul(P,V),M=s.mul(R,M),H=s.sub(J,M),H=s.mul(R,H),H=s.add(H,V),V=s.add(J,J),J=s.add(V,J),J=s.add(J,M),J=s.mul(J,H),N=s.add(N,J),M=s.mul(te,T),M=s.add(M,M),J=s.mul(M,H),$=s.sub($,J),V=s.mul(M,ae),V=s.add(V,V),V=s.add(V,V),new _($,N,V)}add(R){m(R);const{px:O,py:P,pz:I}=this,{px:te,py:T,pz:$}=R;let N=s.ZERO,V=s.ZERO,J=s.ZERO;const ae=n.a,M=s.mul(n.b,_3n);let H=s.mul(O,te),G=s.mul(P,T),Z=s.mul(I,$),U=s.add(O,P),S=s.add(te,T);U=s.mul(U,S),S=s.add(H,G),U=s.sub(U,S),S=s.add(O,I);let L=s.add(te,$);return S=s.mul(S,L),L=s.add(H,Z),S=s.sub(S,L),L=s.add(P,I),N=s.add(T,$),L=s.mul(L,N),N=s.add(G,Z),L=s.sub(L,N),J=s.mul(ae,S),N=s.mul(M,Z),J=s.add(N,J),N=s.sub(G,J),J=s.add(G,J),V=s.mul(N,J),G=s.add(H,H),G=s.add(G,H),Z=s.mul(ae,Z),S=s.mul(M,S),G=s.add(G,Z),Z=s.sub(H,Z),Z=s.mul(ae,Z),S=s.add(S,Z),H=s.mul(G,S),V=s.add(V,H),H=s.mul(L,S),N=s.mul(U,N),N=s.sub(N,H),H=s.mul(U,G),J=s.mul(L,J),J=s.add(J,H),new _(N,V,J)}subtract(R){return this.add(R.negate())}is0(){return this.equals(_.ZERO)}wNAF(R){return z.wNAFCached(this,R,_.normalizeZ)}multiplyUnsafe(R){const{endo:O,n:P}=n;aInRange("scalar",R,_0n$1,P);const I=_.ZERO;if(R===_0n$1)return I;if(this.is0()||R===_1n$1)return this;if(!O||z.hasPrecomputes(this))return z.wNAFCachedUnsafe(this,R,_.normalizeZ);let{k1neg:te,k1:T,k2neg:$,k2:N}=O.splitScalar(R),V=I,J=I,ae=this;for(;T>_0n$1||N>_0n$1;)T&_1n$1&&(V=V.add(ae)),N&_1n$1&&(J=J.add(ae)),ae=ae.double(),T>>=_1n$1,N>>=_1n$1;return te&&(V=V.negate()),$&&(J=J.negate()),J=new _(s.mul(J.px,O.beta),J.py,J.pz),V.add(J)}multiply(R){const{endo:O,n:P}=n;aInRange("scalar",R,_1n$1,P);let I,te;if(O){const{k1neg:T,k1:$,k2neg:N,k2:V}=O.splitScalar(R);let{p:J,f:ae}=this.wNAF($),{p:M,f:H}=this.wNAF(V);J=z.constTimeNegate(T,J),M=z.constTimeNegate(N,M),M=new _(s.mul(M.px,O.beta),M.py,M.pz),I=J.add(M),te=ae.add(H)}else{const{p:T,f:$}=this.wNAF(R);I=T,te=$}return _.normalizeZ([I,te])[0]}multiplyAndAddUnsafe(R,O,P){const I=_.BASE,te=($,N)=>N===_0n$1||N===_1n$1||!$.equals(I)?$.multiplyUnsafe(N):$.multiply(N),T=te(this,O).add(te(R,P));return T.is0()?void 0:T}toAffine(R){return v(this,R)}isTorsionFree(){const{h:R,isTorsionFree:O}=n;if(R===_1n$1)return!0;if(O)return O(_,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:R,clearCofactor:O}=n;return R===_1n$1?this:O?O(_,this):this.multiplyUnsafe(n.h)}toRawBytes(R=!0){return abool("isCompressed",R),this.assertValidity(),u(_,this,R)}toHex(R=!0){return abool("isCompressed",R),bytesToHex(this.toRawBytes(R))}}_.BASE=new _(n.Gx,n.Gy,s.ONE),_.ZERO=new _(s.ZERO,s.ONE,s.ZERO);const C=n.nBitLength,z=wNAF(_,n.endo?Math.ceil(C/2):C);return{CURVE:n,ProjectivePoint:_,normPrivateKeyToScalar:g,weierstrassEquation:h,isWithinCurveOrder:p}}function validateOpts(r){const n=validateBasic(r);return validateObject(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...n})}function weierstrass(r){const n=validateOpts(r),{Fp:s,n:o}=n,u=s.BYTES+1,c=2*s.BYTES+1;function h(Z){return mod(Z,o)}function p(Z){return invert(Z,o)}const{ProjectivePoint:g,normPrivateKeyToScalar:m,weierstrassEquation:v,isWithinCurveOrder:b}=weierstrassPoints({...n,toBytes(Z,U,S){const L=U.toAffine(),K=s.toBytes(L.x),se=concatBytes;return abool("isCompressed",S),S?se(Uint8Array.from([U.hasEvenY()?2:3]),K):se(Uint8Array.from([4]),K,s.toBytes(L.y))},fromBytes(Z){const U=Z.length,S=Z[0],L=Z.subarray(1);if(U===u&&(S===2||S===3)){const K=bytesToNumberBE(L);if(!inRange(K,_1n$1,s.ORDER))throw new Error("Point is not on curve");const se=v(K);let k;try{k=s.sqrt(se)}catch(ie){const le=ie instanceof Error?": "+ie.message:"";throw new Error("Point is not on curve"+le)}const D=(k&_1n$1)===_1n$1;return(S&1)===1!==D&&(k=s.neg(k)),{x:K,y:k}}else if(U===c&&S===4){const K=s.fromBytes(L.subarray(0,s.BYTES)),se=s.fromBytes(L.subarray(s.BYTES,2*s.BYTES));return{x:K,y:se}}else{const K=u,se=c;throw new Error("invalid Point, expected length of "+K+", or uncompressed "+se+", got "+U)}}}),_=Z=>bytesToHex(numberToBytesBE(Z,n.nByteLength));function C(Z){const U=o>>_1n$1;return Z>U}function z(Z){return C(Z)?h(-Z):Z}const x=(Z,U,S)=>bytesToNumberBE(Z.slice(U,S));class R{constructor(U,S,L){aInRange("r",U,_1n$1,o),aInRange("s",S,_1n$1,o),this.r=U,this.s=S,L!=null&&(this.recovery=L),Object.freeze(this)}static fromCompact(U){const S=n.nByteLength;return U=ensureBytes("compactSignature",U,S*2),new R(x(U,0,S),x(U,S,2*S))}static fromDER(U){const{r:S,s:L}=DER.toSig(ensureBytes("DER",U));return new R(S,L)}assertValidity(){}addRecoveryBit(U){return new R(this.r,this.s,U)}recoverPublicKey(U){const{r:S,s:L,recovery:K}=this,se=$(ensureBytes("msgHash",U));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const k=K===2||K===3?S+n.n:S;if(k>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const D=(K&1)===0?"02":"03",W=g.fromHex(D+_(k)),ie=p(k),le=h(-se*ie),ce=h(L*ie),ue=g.BASE.multiplyAndAddUnsafe(W,le,ce);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig(this)}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}const O={isValidPrivateKey(Z){try{return m(Z),!0}catch{return!1}},normPrivateKeyToScalar:m,randomPrivateKey:()=>{const Z=getMinHashLength(n.n);return mapHashToField(n.randomBytes(Z),n.n)},precompute(Z=8,U=g.BASE){return U._setWindowSize(Z),U.multiply(BigInt(3)),U}};function P(Z,U=!0){return g.fromPrivateKey(Z).toRawBytes(U)}function I(Z){const U=isBytes(Z),S=typeof Z=="string",L=(U||S)&&Z.length;return U?L===u||L===c:S?L===2*u||L===2*c:Z instanceof g}function te(Z,U,S=!0){if(I(Z))throw new Error("first arg must be private key");if(!I(U))throw new Error("second arg must be public key");return g.fromHex(U).multiply(m(Z)).toRawBytes(S)}const T=n.bits2int||function(Z){if(Z.length>8192)throw new Error("input is too large");const U=bytesToNumberBE(Z),S=Z.length*8-n.nBitLength;return S>0?U>>BigInt(S):U},$=n.bits2int_modN||function(Z){return h(T(Z))},N=bitMask(n.nBitLength);function V(Z){return aInRange("num < 2^"+n.nBitLength,Z,_0n$1,N),numberToBytesBE(Z,n.nByteLength)}function J(Z,U,S=ae){if(["recovered","canonical"].some(de=>de in S))throw new Error("sign() legacy options not supported");const{hash:L,randomBytes:K}=n;let{lowS:se,prehash:k,extraEntropy:D}=S;se==null&&(se=!0),Z=ensureBytes("msgHash",Z),validateSigVerOpts(S),k&&(Z=ensureBytes("prehashed msgHash",L(Z)));const W=$(Z),ie=m(U),le=[V(ie),V(W)];if(D!=null&&D!==!1){const de=D===!0?K(s.BYTES):D;le.push(ensureBytes("extraEntropy",de))}const ce=concatBytes(...le),ue=W;function we(de){const $e=T(de);if(!b($e))return;const rt=p($e),ft=g.BASE.multiply($e).toAffine(),Fe=h(ft.x);if(Fe===_0n$1)return;const ze=h(rt*h(ue+Fe*ie));if(ze===_0n$1)return;let et=(ft.x===Fe?0:2)|Number(ft.y&_1n$1),Bt=ze;return se&&C(ze)&&(Bt=z(ze),et^=1),new R(Fe,Bt,et)}return{seed:ce,k2sig:we}}const ae={lowS:n.lowS,prehash:!1},M={lowS:n.lowS,prehash:!1};function H(Z,U,S=ae){const{seed:L,k2sig:K}=J(Z,U,S),se=n;return createHmacDrbg(se.hash.outputLen,se.nByteLength,se.hmac)(L,K)}g.BASE._setWindowSize(8);function G(Z,U,S,L=M){var et;const K=Z;U=ensureBytes("msgHash",U),S=ensureBytes("publicKey",S);const{lowS:se,prehash:k,format:D}=L;if(validateSigVerOpts(L),"strict"in L)throw new Error("options.strict was renamed to lowS");if(D!==void 0&&D!=="compact"&&D!=="der")throw new Error("format must be compact or der");const W=typeof K=="string"||isBytes(K),ie=!W&&!D&&typeof K=="object"&&K!==null&&typeof K.r=="bigint"&&typeof K.s=="bigint";if(!W&&!ie)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let le,ce;try{if(ie&&(le=new R(K.r,K.s)),W){try{D!=="compact"&&(le=R.fromDER(K))}catch(Bt){if(!(Bt instanceof DER.Err))throw Bt}!le&&D!=="der"&&(le=R.fromCompact(K))}ce=g.fromHex(S)}catch{return!1}if(!le||se&&le.hasHighS())return!1;k&&(U=n.hash(U));const{r:ue,s:we}=le,de=$(U),$e=p(we),rt=h(de*$e),ft=h(ue*$e),Fe=(et=g.BASE.multiplyAndAddUnsafe(ce,rt,ft))==null?void 0:et.toAffine();return Fe?h(Fe.x)===ue:!1}return{CURVE:n,getPublicKey:P,getSharedSecret:te,sign:H,verify:G,ProjectivePoint:g,Signature:R,utils:O}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(r){return{hash:r,hmac:(n,...s)=>hmac(r,n,concatBytes$1(...s)),randomBytes}}function createCurve(r,n){const s=o=>weierstrass({...r,...getHash(o)});return{...s(n),create:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(r,n)=>(r+n/_2n)/n;function sqrtMod(r){const n=secp256k1P,s=BigInt(3),o=BigInt(6),u=BigInt(11),c=BigInt(22),h=BigInt(23),p=BigInt(44),g=BigInt(88),m=r*r*r%n,v=m*m*r%n,b=pow2(v,s,n)*v%n,_=pow2(b,s,n)*v%n,C=pow2(_,_2n,n)*m%n,z=pow2(C,u,n)*C%n,x=pow2(z,c,n)*z%n,R=pow2(x,p,n)*x%n,O=pow2(R,g,n)*R%n,P=pow2(O,p,n)*x%n,I=pow2(P,s,n)*v%n,te=pow2(I,h,n)*z%n,T=pow2(te,o,n)*m%n,$=pow2(T,_2n,n);if(!Fpk1.eql(Fpk1.sqr($),r))throw new Error("Cannot find square root");return $}const Fpk1=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({a:BigInt(0),b:BigInt(7),Fp:Fpk1,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const n=secp256k1N,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),u=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=s,h=BigInt("0x100000000000000000000000000000000"),p=divNearest(c*r,n),g=divNearest(-o*r,n);let m=mod(r-p*s-g*u,n),v=mod(-p*o-g*c,n);const b=m>h,_=v>h;if(b&&(m=n-m),_&&(v=n-v),m>h||v>h)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:b,k1:m,k2neg:_,k2:v}}}},sha256$1),_0n=BigInt(0),TAGGED_HASH_PREFIXES={};function taggedHash(r,...n){let s=TAGGED_HASH_PREFIXES[r];if(s===void 0){const o=sha256$1(Uint8Array.from(r,u=>u.charCodeAt(0)));s=concatBytes(o,o),TAGGED_HASH_PREFIXES[r]=s}return sha256$1(concatBytes(s,...n))}const pointToBytes=r=>r.toRawBytes(!0).slice(1),numTo32b=r=>numberToBytesBE(r,32),modP=r=>mod(r,secp256k1P),modN=r=>mod(r,secp256k1N),Point=secp256k1.ProjectivePoint,GmulAdd=(r,n,s)=>Point.BASE.multiplyAndAddUnsafe(r,n,s);function schnorrGetExtPubKey(r){let n=secp256k1.utils.normPrivateKeyToScalar(r),s=Point.fromPrivateKey(n);return{scalar:s.hasEvenY()?n:modN(-n),bytes:pointToBytes(s)}}function lift_x(r){aInRange("x",r,_1n,secp256k1P);const n=modP(r*r),s=modP(n*r+BigInt(7));let o=sqrtMod(s);o%_2n!==_0n&&(o=modP(-o));const u=new Point(r,o,_1n);return u.assertValidity(),u}const num=bytesToNumberBE;function challenge(...r){return modN(num(taggedHash("BIP0340/challenge",...r)))}function schnorrGetPublicKey(r){return schnorrGetExtPubKey(r).bytes}function schnorrSign(r,n,s=randomBytes(32)){const o=ensureBytes("message",r),{bytes:u,scalar:c}=schnorrGetExtPubKey(n),h=ensureBytes("auxRand",s,32),p=numTo32b(c^num(taggedHash("BIP0340/aux",h))),g=taggedHash("BIP0340/nonce",p,u,o),m=modN(num(g));if(m===_0n)throw new Error("sign failed: k is zero");const{bytes:v,scalar:b}=schnorrGetExtPubKey(m),_=challenge(v,u,o),C=new Uint8Array(64);if(C.set(v,0),C.set(numTo32b(modN(b+_*c)),32),!schnorrVerify(C,o,u))throw new Error("sign: Invalid signature produced");return C}function schnorrVerify(r,n,s){const o=ensureBytes("signature",r,64),u=ensureBytes("message",n),c=ensureBytes("publicKey",s,32);try{const h=lift_x(num(c)),p=num(o.subarray(0,32));if(!inRange(p,_1n,secp256k1P))return!1;const g=num(o.subarray(32,64));if(!inRange(g,_1n,secp256k1N))return!1;const m=challenge(numTo32b(p),pointToBytes(h),u),v=GmulAdd(h,g,modN(-m));return!(!v||!v.hasEvenY()||v.toAffine().x!==p)}catch{return!1}}const schnorr={getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,utils:{randomPrivateKey:secp256k1.utils.randomPrivateKey,lift_x,pointToBytes,numberToBytesBE,bytesToNumberBE,taggedHash,mod}},sha256=sha256$1;var dist={},LRUCache={},LRUCacheNode={},hasRequiredLRUCacheNode;function requireLRUCacheNode(){if(hasRequiredLRUCacheNode)return LRUCacheNode;hasRequiredLRUCacheNode=1,Object.defineProperty(LRUCacheNode,"__esModule",{value:!0}),LRUCacheNode.LRUCacheNode=void 0;let r=class{constructor(s,o,u){const{entryExpirationTimeInMS:c=null,next:h=null,prev:p=null,onEntryEvicted:g,onEntryMarkedAsMostRecentlyUsed:m,clone:v,cloneFn:b}=u??{};if(typeof c=="number"&&(c<=0||Number.isNaN(c)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=v??!1,this.cloneFn=b??this.defaultClone,this.key=s,this.internalValue=this.clone?this.cloneFn(o):o,this.created=Date.now(),this.entryExpirationTimeInMS=c,this.next=h,this.prev=p,this.onEntryEvicted=g,this.onEntryMarkedAsMostRecentlyUsed=m}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return typeof this.entryExpirationTimeInMS=="number"&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:s,value:o,isExpired:u}=this;this.onEntryEvicted({key:s,value:o,isExpired:u})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:s,value:o}=this;this.onEntryMarkedAsMostRecentlyUsed({key:s,value:o})}}defaultClone(s){return typeof s=="boolean"||typeof s=="string"||typeof s=="number"?s:JSON.parse(JSON.stringify(s))}};return LRUCacheNode.LRUCacheNode=r,LRUCacheNode}var hasRequiredLRUCache;function requireLRUCache(){if(hasRequiredLRUCache)return LRUCache;hasRequiredLRUCache=1,Object.defineProperty(LRUCache,"__esModule",{value:!0}),LRUCache.LRUCache=void 0;const r=requireLRUCacheNode();let n=class{constructor(o){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:u=25,entryExpirationTimeInMS:c=null,onEntryEvicted:h,onEntryMarkedAsMostRecentlyUsed:p,cloneFn:g,clone:m}=o??{};if(Number.isNaN(u)||u<=0)throw new Error("maxSize must be greater than 0.");if(typeof c=="number"&&(c<=0||Number.isNaN(c)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=u,this.entryExpirationTimeInMS=c,this.onEntryEvicted=h,this.onEntryMarkedAsMostRecentlyUsed=p,this.clone=m,this.cloneFn=g}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(o){if(Number.isNaN(o)||o<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=o,this.enforceSizeLimit()}set(o,u,c){const h=this.lookupTable.get(o);h&&this.removeNodeFromListAndLookupTable(h);const p=new r.LRUCacheNode(o,u,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...c});return this.setNodeAsHead(p),this.lookupTable.set(o,p),this.enforceSizeLimit(),this}get(o){const u=this.lookupTable.get(o);return u?u.isExpired?(this.removeNodeFromListAndLookupTable(u),null):(this.setNodeAsHead(u),u.value):null}peek(o){const u=this.lookupTable.get(o);return u?u.isExpired?(this.removeNodeFromListAndLookupTable(u),null):u.value:null}delete(o){const u=this.lookupTable.get(o);return u?this.removeNodeFromListAndLookupTable(u):!1}has(o){const u=this.lookupTable.get(o);return u?u.isExpired?(this.removeNodeFromListAndLookupTable(u),!1):!0:!1}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(o){let u=this.head;for(;u;){if(u.isExpired){const h=u.next;this.removeNodeFromListAndLookupTable(u),u=h;continue}const c=this.mapNodeToEntry(u);if(o(c))return this.setNodeAsHead(u),c;u=u.next}return null}forEach(o){let u=this.head,c=0;for(;u;){if(u.isExpired){const h=u.next;this.removeNodeFromListAndLookupTable(u),u=h;continue}o(u.value,u.key,c),u=u.next,c++}}*values(){let o=this.head;for(;o;){if(o.isExpired){const u=o.next;this.removeNodeFromListAndLookupTable(o),o=u;continue}yield o.value,o=o.next}}*keys(){let o=this.head;for(;o;){if(o.isExpired){const u=o.next;this.removeNodeFromListAndLookupTable(o),o=u;continue}yield o.key,o=o.next}}*entries(){let o=this.head;for(;o;){if(o.isExpired){const u=o.next;this.removeNodeFromListAndLookupTable(o),o=u;continue}yield this.mapNodeToEntry(o),o=o.next}}*[Symbol.iterator](){let o=this.head;for(;o;){if(o.isExpired){const u=o.next;this.removeNodeFromListAndLookupTable(o),o=u;continue}yield this.mapNodeToEntry(o),o=o.next}}enforceSizeLimit(){let o=this.tail;for(;o!==null&&this.size>this.maxSizeInternal;){const u=o.prev;this.removeNodeFromListAndLookupTable(o),o=u}}mapNodeToEntry({key:o,value:u}){return{key:o,value:u}}setNodeAsHead(o){this.removeNodeFromList(o),this.head?(o.next=this.head,this.head.prev=o,this.head=o):(this.head=o,this.tail=o),o.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(o){o.prev!==null&&(o.prev.next=o.next),o.next!==null&&(o.next.prev=o.prev),this.head===o&&(this.head=o.next),this.tail===o&&(this.tail=o.prev),o.next=null,o.prev=null}removeNodeFromListAndLookupTable(o){return o.invokeOnEvicted(),this.removeNodeFromList(o),this.lookupTable.delete(o.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const o=[];for(const u of this.lookupTable.values())u.isExpired&&o.push(u);o.forEach(u=>this.removeNodeFromListAndLookupTable(u))}};return LRUCache.LRUCache=n,LRUCache}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(r){var n=dist&&dist.__createBinding||(Object.create?function(o,u,c,h){h===void 0&&(h=c);var p=Object.getOwnPropertyDescriptor(u,c);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(o,h,p)}:function(o,u,c,h){h===void 0&&(h=c),o[h]=u[c]}),s=dist&&dist.__exportStar||function(o,u){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&n(u,o,c)};Object.defineProperty(r,"__esModule",{value:!0}),s(requireLRUCache(),r)}(dist)),dist}var distExports=requireDist(),lib={},hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(r){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64url=r.base64=r.base32crockford=r.base32hex=r.base32=r.base16=r.utils=r.assertNumber=void 0;function n(M){if(!Number.isSafeInteger(M))throw new Error(`Wrong integer: ${M}`)}r.assertNumber=n;function s(...M){const H=(U,S)=>L=>U(S(L)),G=Array.from(M).reverse().reduce((U,S)=>U?H(U,S.encode):S.encode,void 0),Z=M.reduce((U,S)=>U?H(U,S.decode):S.decode,void 0);return{encode:G,decode:Z}}function o(M){return{encode:H=>{if(!Array.isArray(H)||H.length&&typeof H[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return H.map(G=>{if(n(G),G<0||G>=M.length)throw new Error(`Digit index outside alphabet: ${G} (alphabet: ${M.length})`);return M[G]})},decode:H=>{if(!Array.isArray(H)||H.length&&typeof H[0]!="string")throw new Error("alphabet.decode input should be array of strings");return H.map(G=>{if(typeof G!="string")throw new Error(`alphabet.decode: not string element=${G}`);const Z=M.indexOf(G);if(Z===-1)throw new Error(`Unknown letter: "${G}". Allowed: ${M}`);return Z})}}}function u(M=""){if(typeof M!="string")throw new Error("join separator should be string");return{encode:H=>{if(!Array.isArray(H)||H.length&&typeof H[0]!="string")throw new Error("join.encode input should be array of strings");for(let G of H)if(typeof G!="string")throw new Error(`join.encode: non-string input=${G}`);return H.join(M)},decode:H=>{if(typeof H!="string")throw new Error("join.decode input should be string");return H.split(M)}}}function c(M,H="="){if(n(M),typeof H!="string")throw new Error("padding chr should be string");return{encode(G){if(!Array.isArray(G)||G.length&&typeof G[0]!="string")throw new Error("padding.encode input should be array of strings");for(let Z of G)if(typeof Z!="string")throw new Error(`padding.encode: non-string input=${Z}`);for(;G.length*M%8;)G.push(H);return G},decode(G){if(!Array.isArray(G)||G.length&&typeof G[0]!="string")throw new Error("padding.encode input should be array of strings");for(let U of G)if(typeof U!="string")throw new Error(`padding.decode: non-string input=${U}`);let Z=G.length;if(Z*M%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;Z>0&&G[Z-1]===H;Z--)if(!((Z-1)*M%8))throw new Error("Invalid padding: string has too much padding");return G.slice(0,Z)}}}function h(M){if(typeof M!="function")throw new Error("normalize fn should be function");return{encode:H=>H,decode:H=>M(H)}}function p(M,H,G){if(H<2)throw new Error(`convertRadix: wrong from=${H}, base cannot be less than 2`);if(G<2)throw new Error(`convertRadix: wrong to=${G}, base cannot be less than 2`);if(!Array.isArray(M))throw new Error("convertRadix: data should be array");if(!M.length)return[];let Z=0;const U=[],S=Array.from(M);for(S.forEach(L=>{if(n(L),L<0||L>=H)throw new Error(`Wrong integer: ${L}`)});;){let L=0,K=!0;for(let se=Z;se<S.length;se++){const k=S[se],D=H*L+k;if(!Number.isSafeInteger(D)||H*L/H!==L||D-k!==H*L)throw new Error("convertRadix: carry overflow");if(L=D%G,S[se]=Math.floor(D/G),!Number.isSafeInteger(S[se])||S[se]*G+L!==D)throw new Error("convertRadix: carry overflow");if(K)S[se]?K=!1:Z=se;else continue}if(U.push(L),K)break}for(let L=0;L<M.length-1&&M[L]===0;L++)U.push(0);return U.reverse()}const g=(M,H)=>H?g(H,M%H):M,m=(M,H)=>M+(H-g(M,H));function v(M,H,G,Z){if(!Array.isArray(M))throw new Error("convertRadix2: data should be array");if(H<=0||H>32)throw new Error(`convertRadix2: wrong from=${H}`);if(G<=0||G>32)throw new Error(`convertRadix2: wrong to=${G}`);if(m(H,G)>32)throw new Error(`convertRadix2: carry overflow from=${H} to=${G} carryBits=${m(H,G)}`);let U=0,S=0;const L=2**G-1,K=[];for(const se of M){if(n(se),se>=2**H)throw new Error(`convertRadix2: invalid data word=${se} from=${H}`);if(U=U<<H|se,S+H>32)throw new Error(`convertRadix2: carry overflow pos=${S} from=${H}`);for(S+=H;S>=G;S-=G)K.push((U>>S-G&L)>>>0);U&=2**S-1}if(U=U<<G-S&L,!Z&&S>=H)throw new Error("Excess padding");if(!Z&&U)throw new Error(`Non-zero padding: ${U}`);return Z&&S>0&&K.push(U>>>0),K}function b(M){return n(M),{encode:H=>{if(!(H instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return p(Array.from(H),2**8,M)},decode:H=>{if(!Array.isArray(H)||H.length&&typeof H[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(p(H,M,2**8))}}}function _(M,H=!1){if(n(M),M<=0||M>32)throw new Error("radix2: bits should be in (0..32]");if(m(8,M)>32||m(M,8)>32)throw new Error("radix2: carry overflow");return{encode:G=>{if(!(G instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return v(Array.from(G),8,M,!H)},decode:G=>{if(!Array.isArray(G)||G.length&&typeof G[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(v(G,M,8,H))}}}function C(M){if(typeof M!="function")throw new Error("unsafeWrapper fn should be function");return function(...H){try{return M.apply(null,H)}catch{}}}function z(M,H){if(n(M),typeof H!="function")throw new Error("checksum fn should be function");return{encode(G){if(!(G instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const Z=H(G).slice(0,M),U=new Uint8Array(G.length+M);return U.set(G),U.set(Z,G.length),U},decode(G){if(!(G instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const Z=G.slice(0,-M),U=H(Z).slice(0,M),S=G.slice(-M);for(let L=0;L<M;L++)if(U[L]!==S[L])throw new Error("Invalid checksum");return Z}}}r.utils={alphabet:o,chain:s,checksum:z,radix:b,radix2:_,join:u,padding:c},r.base16=s(_(4),o("0123456789ABCDEF"),u("")),r.base32=s(_(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),c(5),u("")),r.base32hex=s(_(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),c(5),u("")),r.base32crockford=s(_(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),u(""),h(M=>M.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),r.base64=s(_(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),c(6),u("")),r.base64url=s(_(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),c(6),u(""));const x=M=>s(b(58),o(M),u(""));r.base58=x("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=x("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=x("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const R=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(M){let H="";for(let G=0;G<M.length;G+=8){const Z=M.subarray(G,G+8);H+=r.base58.encode(Z).padStart(R[Z.length],"1")}return H},decode(M){let H=[];for(let G=0;G<M.length;G+=11){const Z=M.slice(G,G+11),U=R.indexOf(Z.length),S=r.base58.decode(Z);for(let L=0;L<S.length-U;L++)if(S[L]!==0)throw new Error("base58xmr: wrong padding");H=H.concat(Array.from(S.slice(S.length-U)))}return Uint8Array.from(H)}};const O=M=>s(z(4,H=>M(M(H))),r.base58);r.base58check=O;const P=s(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),u("")),I=[996825010,642813549,513874426,1027748829,705979059];function te(M){const H=M>>25;let G=(M&33554431)<<5;for(let Z=0;Z<I.length;Z++)(H>>Z&1)===1&&(G^=I[Z]);return G}function T(M,H,G=1){const Z=M.length;let U=1;for(let S=0;S<Z;S++){const L=M.charCodeAt(S);if(L<33||L>126)throw new Error(`Invalid prefix (${M})`);U=te(U)^L>>5}U=te(U);for(let S=0;S<Z;S++)U=te(U)^M.charCodeAt(S)&31;for(let S of H)U=te(U)^S;for(let S=0;S<6;S++)U=te(U);return U^=G,P.encode(v([U%2**30],30,5,!1))}function $(M){const H=M==="bech32"?1:734539939,G=_(5),Z=G.decode,U=G.encode,S=C(Z);function L(D,W,ie=90){if(typeof D!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof D}`);if(!Array.isArray(W)||W.length&&typeof W[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof W}`);const le=D.length+7+W.length;if(ie!==!1&&le>ie)throw new TypeError(`Length ${le} exceeds limit ${ie}`);return D=D.toLowerCase(),`${D}1${P.encode(W)}${T(D,W,H)}`}function K(D,W=90){if(typeof D!="string")throw new Error(`bech32.decode input should be string, not ${typeof D}`);if(D.length<8||W!==!1&&D.length>W)throw new TypeError(`Wrong string length: ${D.length} (${D}). Expected (8..${W})`);const ie=D.toLowerCase();if(D!==ie&&D!==D.toUpperCase())throw new Error("String must be lowercase or uppercase");D=ie;const le=D.lastIndexOf("1");if(le===0||le===-1)throw new Error('Letter "1" must be present between prefix and data only');const ce=D.slice(0,le),ue=D.slice(le+1);if(ue.length<6)throw new Error("Data must be at least 6 characters long");const we=P.decode(ue).slice(0,-6),de=T(ce,we,H);if(!ue.endsWith(de))throw new Error(`Invalid checksum in ${D}: expected "${de}"`);return{prefix:ce,words:we}}const se=C(K);function k(D){const{prefix:W,words:ie}=K(D,!1);return{prefix:W,words:ie,bytes:Z(ie)}}return{encode:L,decode:K,decodeToBytes:k,decodeUnsafe:se,fromWords:Z,fromWordsUnsafe:S,toWords:U}}r.bech32=$("bech32"),r.bech32m=$("bech32m"),r.utf8={encode:M=>new TextDecoder().decode(M),decode:M=>new TextEncoder().encode(M)},r.hex=s(_(4),o("0123456789abcdef"),u(""),h(M=>{if(typeof M!="string"||M.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof M} with length ${M.length}`);return M.toLowerCase()}));const N={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},V=`Invalid encoding type. Available types: ${Object.keys(N).join(", ")}`,J=(M,H)=>{if(typeof M!="string"||!N.hasOwnProperty(M))throw new TypeError(V);if(!(H instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return N[M].encode(H)};r.bytesToString=J,r.str=r.bytesToString;const ae=(M,H)=>{if(!N.hasOwnProperty(M))throw new TypeError(V);if(typeof H!="string")throw new TypeError("stringToBytes() expects string");return N[M].decode(H)};r.stringToBytes=ae,r.bytes=r.stringToBytes}(lib)),lib}var bolt11,hasRequiredBolt11;function requireBolt11(){if(hasRequiredBolt11)return bolt11;hasRequiredBolt11=1;const{bech32:r,hex:n,utf8:s}=requireLib(),o={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},u={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},h={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},p={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},g=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],m={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},v=BigInt("2100000000000000000"),b=BigInt(1e11),_={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},C={};for(let T=0,$=Object.keys(_);T<$.length;T++){const N=$[T],V=_[$[T]].toString();C[V]=N}const z={1:T=>n.encode(r.fromWordsUnsafe(T)),16:T=>n.encode(r.fromWordsUnsafe(T)),13:T=>s.encode(r.fromWordsUnsafe(T)),19:T=>n.encode(r.fromWordsUnsafe(T)),23:T=>n.encode(r.fromWordsUnsafe(T)),27:T=>n.encode(r.fromWordsUnsafe(T)),6:R,24:R,3:O,5:P};function x(T){return $=>({tagCode:parseInt(T),words:r.encode("unknown",$,Number.MAX_SAFE_INTEGER)})}function R(T){return T.reverse().reduce(($,N,V)=>$+N*Math.pow(32,V),0)}function O(T){const $=[];let N,V,J,ae,M,H=r.fromWordsUnsafe(T);for(;H.length>0;)N=n.encode(H.slice(0,33)),V=n.encode(H.slice(33,41)),J=parseInt(n.encode(H.slice(41,45)),16),ae=parseInt(n.encode(H.slice(45,49)),16),M=parseInt(n.encode(H.slice(49,51)),16),H=H.slice(51),$.push({pubkey:N,short_channel_id:V,fee_base_msat:J,fee_proportional_millionths:ae,cltv_expiry_delta:M});return $}function P(T){const $=T.slice().reverse().map(J=>[!!(J&1),!!(J&2),!!(J&4),!!(J&8),!!(J&16)]).reduce((J,ae)=>J.concat(ae),[]);for(;$.length<g.length*2;)$.push(!1);const N={};g.forEach((J,ae)=>{let M;$[ae*2]?M="required":$[ae*2+1]?M="supported":M="unsupported",N[J]=M});const V=$.slice(g.length*2);return N.extra_bits={start_bit:g.length*2,bits:V,has_required:V.reduce((J,ae,M)=>M%2!==0?J||!1:J||ae,!1)},N}function I(T,$){let N,V;if(T.slice(-1).match(/^[munp]$/))N=T.slice(-1),V=T.slice(0,-1);else{if(T.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");V=T}if(!V.match(/^\d+$/))throw new Error("Not a valid human readable amount");const J=BigInt(V),ae=N?J*b/m[N]:J*b;if(N==="p"&&J%BigInt(10)!==BigInt(0)||ae>v)throw new Error("Amount is outside of valid range");return $?ae.toString():ae}function te(T,$){if(typeof T!="string")throw new Error("Lightning Payment Request must be string");if(T.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const N=[],V=r.decode(T,Number.MAX_SAFE_INTEGER);T=T.toLowerCase();const J=V.prefix;let ae=V.words,M=T.slice(J.length+1),H=ae.slice(-104);ae=ae.slice(0,-104);let G=J.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(G&&!G[2]&&(G=J.match(/^ln(\S+)$/)),!G)throw new Error("Not a proper lightning payment request");N.push({name:"lightning_network",letters:"ln"});const Z=G[1];let U;if($){if($.bech32===void 0||$.pubKeyHash===void 0||$.scriptHash===void 0||!Array.isArray($.validWitnessVersions))throw new Error("Invalid network");U=$}else switch(Z){case o.bech32:U=o;break;case u.bech32:U=u;break;case c.bech32:U=c;break;case h.bech32:U=h;break;case p.bech32:U=p;break}if(!U||U.bech32!==Z)throw new Error("Unknown coin bech32 prefix");N.push({name:"coin_network",letters:Z,value:U});const S=G[2];let L;if(S){const ce=G[3];L=I(S+ce,!0),N.push({name:"amount",letters:G[2]+G[3],value:L})}else L=null;N.push({name:"separator",letters:"1"});const K=R(ae.slice(0,7));ae=ae.slice(7),N.push({name:"timestamp",letters:M.slice(0,7),value:K}),M=M.slice(7);let se,k,D,W;for(;ae.length>0;){const ce=ae[0].toString();se=C[ce]||"unknown_tag",k=z[ce]||x(ce),ae=ae.slice(1),D=R(ae.slice(0,2)),ae=ae.slice(2),W=ae.slice(0,D),ae=ae.slice(D),N.push({name:se,tag:M[0],letters:M.slice(0,3+D),value:k(W)}),M=M.slice(3+D)}N.push({name:"signature",letters:M.slice(0,104),value:n.encode(r.fromWordsUnsafe(H))}),M=M.slice(104),N.push({name:"checksum",letters:M});let ie={paymentRequest:T,sections:N,get expiry(){let ce=N.find(ue=>ue.name==="expiry");if(ce)return le("timestamp")+ce.value},get route_hints(){return N.filter(ce=>ce.name==="route_hint").map(ce=>ce.value)}};for(let ce in _)ce!=="route_hint"&&Object.defineProperty(ie,ce,{get(){return le(ce)}});return ie;function le(ce){let ue=N.find(we=>we.name===ce);return ue?ue.value:void 0}}return bolt11={decode:te,hrpToMillisat:I},bolt11}requireBolt11();var NDKKind=(r=>(r[r.Metadata=0]="Metadata",r[r.Text=1]="Text",r[r.RecommendRelay=2]="RecommendRelay",r[r.Contacts=3]="Contacts",r[r.EncryptedDirectMessage=4]="EncryptedDirectMessage",r[r.EventDeletion=5]="EventDeletion",r[r.Repost=6]="Repost",r[r.Reaction=7]="Reaction",r[r.BadgeAward=8]="BadgeAward",r[r.GroupChat=9]="GroupChat",r[r.GroupNote=11]="GroupNote",r[r.GroupReply=12]="GroupReply",r[r.GiftWrapSeal=13]="GiftWrapSeal",r[r.PrivateDirectMessage=14]="PrivateDirectMessage",r[r.Image=20]="Image",r[r.Video=21]="Video",r[r.ShortVideo=22]="ShortVideo",r[r.Story=23]="Story",r[r.Vanish=62]="Vanish",r[r.CashuWalletBackup=375]="CashuWalletBackup",r[r.GiftWrap=1059]="GiftWrap",r[r.GenericRepost=16]="GenericRepost",r[r.ChannelCreation=40]="ChannelCreation",r[r.ChannelMetadata=41]="ChannelMetadata",r[r.ChannelMessage=42]="ChannelMessage",r[r.ChannelHideMessage=43]="ChannelHideMessage",r[r.ChannelMuteUser=44]="ChannelMuteUser",r[r.WikiMergeRequest=818]="WikiMergeRequest",r[r.GenericReply=1111]="GenericReply",r[r.Media=1063]="Media",r[r.Report=1984]="Report",r[r.Label=1985]="Label",r[r.DVMReqTextExtraction=5e3]="DVMReqTextExtraction",r[r.DVMReqTextSummarization=5001]="DVMReqTextSummarization",r[r.DVMReqTextTranslation=5002]="DVMReqTextTranslation",r[r.DVMReqTextGeneration=5050]="DVMReqTextGeneration",r[r.DVMReqImageGeneration=5100]="DVMReqImageGeneration",r[r.DVMReqTextToSpeech=5250]="DVMReqTextToSpeech",r[r.DVMReqDiscoveryNostrContent=5300]="DVMReqDiscoveryNostrContent",r[r.DVMReqDiscoveryNostrPeople=5301]="DVMReqDiscoveryNostrPeople",r[r.DVMReqTimestamping=5900]="DVMReqTimestamping",r[r.DVMEventSchedule=5905]="DVMEventSchedule",r[r.DVMJobFeedback=7e3]="DVMJobFeedback",r[r.Subscribe=7001]="Subscribe",r[r.Unsubscribe=7002]="Unsubscribe",r[r.SubscriptionReceipt=7003]="SubscriptionReceipt",r[r.CashuReserve=7373]="CashuReserve",r[r.CashuQuote=7374]="CashuQuote",r[r.CashuToken=7375]="CashuToken",r[r.CashuWalletTx=7376]="CashuWalletTx",r[r.GroupAdminAddUser=9e3]="GroupAdminAddUser",r[r.GroupAdminRemoveUser=9001]="GroupAdminRemoveUser",r[r.GroupAdminEditMetadata=9002]="GroupAdminEditMetadata",r[r.GroupAdminEditStatus=9006]="GroupAdminEditStatus",r[r.GroupAdminCreateGroup=9007]="GroupAdminCreateGroup",r[r.GroupAdminRequestJoin=9021]="GroupAdminRequestJoin",r[r.MuteList=1e4]="MuteList",r[r.PinList=10001]="PinList",r[r.RelayList=10002]="RelayList",r[r.BookmarkList=10003]="BookmarkList",r[r.CommunityList=10004]="CommunityList",r[r.PublicChatList=10005]="PublicChatList",r[r.BlockRelayList=10006]="BlockRelayList",r[r.SearchRelayList=10007]="SearchRelayList",r[r.SimpleGroupList=10009]="SimpleGroupList",r[r.InterestList=10015]="InterestList",r[r.CashuMintList=10019]="CashuMintList",r[r.EmojiList=10030]="EmojiList",r[r.DirectMessageReceiveRelayList=10050]="DirectMessageReceiveRelayList",r[r.BlossomList=10063]="BlossomList",r[r.NostrWaletConnectInfo=13194]="NostrWaletConnectInfo",r[r.TierList=17e3]="TierList",r[r.CashuWallet=17375]="CashuWallet",r[r.FollowSet=3e4]="FollowSet",r[r.CategorizedPeopleList=3e4]="CategorizedPeopleList",r[r.CategorizedBookmarkList=30001]="CategorizedBookmarkList",r[r.RelaySet=30002]="RelaySet",r[r.CategorizedRelayList=30002]="CategorizedRelayList",r[r.BookmarkSet=30003]="BookmarkSet",r[r.CurationSet=30004]="CurationSet",r[r.ArticleCurationSet=30004]="ArticleCurationSet",r[r.VideoCurationSet=30005]="VideoCurationSet",r[r.ImageCurationSet=30006]="ImageCurationSet",r[r.InterestSet=30015]="InterestSet",r[r.InterestsList=30015]="InterestsList",r[r.EmojiSet=30030]="EmojiSet",r[r.ModularArticle=30040]="ModularArticle",r[r.ModularArticleItem=30041]="ModularArticleItem",r[r.Wiki=30818]="Wiki",r[r.Draft=31234]="Draft",r[r.SubscriptionTier=37001]="SubscriptionTier",r[r.EcashMintRecommendation=38e3]="EcashMintRecommendation",r[r.HighlightSet=39802]="HighlightSet",r[r.CategorizedHighlightList=39802]="CategorizedHighlightList",r[r.Nutzap=9321]="Nutzap",r[r.ZapRequest=9734]="ZapRequest",r[r.Zap=9735]="Zap",r[r.Highlight=9802]="Highlight",r[r.ClientAuth=22242]="ClientAuth",r[r.NostrWalletConnectReq=23194]="NostrWalletConnectReq",r[r.NostrWalletConnectRes=23195]="NostrWalletConnectRes",r[r.NostrConnect=24133]="NostrConnect",r[r.BlossomUpload=24242]="BlossomUpload",r[r.HttpAuth=27235]="HttpAuth",r[r.ProfileBadge=30008]="ProfileBadge",r[r.BadgeDefinition=30009]="BadgeDefinition",r[r.MarketStall=30017]="MarketStall",r[r.MarketProduct=30018]="MarketProduct",r[r.Article=30023]="Article",r[r.AppSpecificData=30078]="AppSpecificData",r[r.Classified=30402]="Classified",r[r.HorizontalVideo=34235]="HorizontalVideo",r[r.VerticalVideo=34236]="VerticalVideo",r[r.LegacyCashuWallet=37375]="LegacyCashuWallet",r[r.GroupMetadata=39e3]="GroupMetadata",r[r.GroupAdmins=39001]="GroupAdmins",r[r.GroupMembers=39002]="GroupMembers",r[r.AppRecommendation=31989]="AppRecommendation",r[r.AppHandler=31990]="AppHandler",r))(NDKKind||{});function getRelaysForSync(r,n,s="write"){if(!r.outboxTracker)return;const o=r.outboxTracker.data.get(n);if(o)return s==="write"?o.writeRelays:o.readRelays}async function getWriteRelaysFor(r,n,s="write"){if(r.outboxTracker)return r.outboxTracker.data.has(n)||await r.outboxTracker.trackUsers([n]),getRelaysForSync(r,n,s)}function getTopRelaysForAuthors(r,n){const s=new Map;return n.forEach(u=>{const c=getRelaysForSync(r,u);c&&c.forEach(h=>{const p=s.get(h)||0;s.set(h,p+1)})}),Array.from(s.entries()).sort((u,c)=>c[1]-u[1]).map(u=>u[0])}function getAllRelaysForAllPubkeys(r,n,s="read"){const o=new Map,u=new Set;return n.forEach(c=>{const h=getRelaysForSync(r,c,s);h&&h.size>0?(h.forEach(p=>{(o.get(p)||new Set).add(c)}),o.set(c,h)):u.add(c)}),{pubkeysToRelays:o,authorsMissingRelays:u}}function chooseRelayCombinationForPubkeys(r,n,s,{count:o,preferredRelays:u}={}){o??(o=2),u??(u=new Set);const c=r.pool,h=c.connectedRelays();h.forEach(_=>{u==null||u.add(_.url)});const p=new Map,{pubkeysToRelays:g,authorsMissingRelays:m}=getAllRelaysForAllPubkeys(r,n,s),v=getTopRelaysForAuthors(r,n),b=(_,C)=>{const z=p.get(C)||[];z.push(_),p.set(C,z)};for(const[_,C]of g.entries()){let z=o;for(const x of h)C.has(x.url)&&(b(_,x.url),z--);for(const x of C)p.has(x)&&(b(_,x),z--);if(!(z<=0))for(const x of v){if(z<=0)break;C.has(x)&&(b(_,x),z--)}}for(const _ of m)c.permanentAndConnectedRelays().forEach(C=>{const z=p.get(C.url)||[];z.push(_),p.set(C.url,z)});return p}function getRelaysForFilterWithAuthors(r,n,s=2){return chooseRelayCombinationForPubkeys(r,n,"write",{count:s})}function tryNormalizeRelayUrl(r){try{return normalizeRelayUrl(r)}catch{return}}function normalizeRelayUrl(r){let n=normalizeUrl(r,{stripAuthentication:!1,stripWWW:!1,stripHash:!0});return n.endsWith("/")||(n+="/"),n}function normalize(r){const n=new Set;for(const s of r)try{n.add(normalizeRelayUrl(s))}catch{}return Array.from(n)}var DATA_URL_DEFAULT_MIME_TYPE="text/plain",DATA_URL_DEFAULT_CHARSET="us-ascii",testParameter=(r,n)=>n.some(s=>s instanceof RegExp?s.test(r):s===r),supportedProtocols=new Set(["https:","http:","file:"]),hasCustomProtocol=r=>{try{const{protocol:n}=new URL(r);return n.endsWith(":")&&!n.includes(".")&&!supportedProtocols.has(n)}catch{return!1}},normalizeDataURL=(r,{stripHash:n})=>{var b,_,C,z;const s=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(r);if(!s)throw new Error(`Invalid URL: ${r}`);const o=((b=s.groups)==null?void 0:b.type)??"",u=((_=s.groups)==null?void 0:_.data)??"";let c=((C=s.groups)==null?void 0:C.hash)??"";const h=o.split(";");c=n?"":c;let p=!1;h[h.length-1]==="base64"&&(h.pop(),p=!0);const g=((z=h.shift())==null?void 0:z.toLowerCase())??"",v=[...h.map(x=>{let[R,O=""]=x.split("=").map(P=>P.trim());return R==="charset"&&(O=O.toLowerCase(),O===DATA_URL_DEFAULT_CHARSET)?"":`${R}${O?`=${O}`:""}`}).filter(Boolean)];return p&&v.push("base64"),(v.length>0||g&&g!==DATA_URL_DEFAULT_MIME_TYPE)&&v.unshift(g),`data:${v.join(";")},${p?u.trim():u}${c?`#${c}`:""}`};function normalizeUrl(r,n={}){if(n={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...n},typeof n.defaultProtocol=="string"&&!n.defaultProtocol.endsWith(":")&&(n.defaultProtocol=`${n.defaultProtocol}:`),r=r.trim(),/^data:/i.test(r))return normalizeDataURL(r,n);if(hasCustomProtocol(r))return r;const s=r.startsWith("//");!s&&/^\.*\//.test(r)||(r=r.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,n.defaultProtocol));const u=new URL(r);if(u.hostname=u.hostname.toLowerCase(),n.forceHttp&&n.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(n.forceHttp&&u.protocol==="https:"&&(u.protocol="http:"),n.forceHttps&&u.protocol==="http:"&&(u.protocol="https:"),n.stripAuthentication&&(u.username="",u.password=""),n.stripHash?u.hash="":n.stripTextFragment&&(u.hash=u.hash.replace(/#?:~:text.*?$/i,"")),u.pathname){const h=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let p=0,g="";for(;;){const v=h.exec(u.pathname);if(!v)break;const b=v[0],_=v.index,C=u.pathname.slice(p,_);g+=C.replace(/\/{2,}/g,"/"),g+=b,p=_+b.length}const m=u.pathname.slice(p,u.pathname.length);g+=m.replace(/\/{2,}/g,"/"),u.pathname=g}if(u.pathname)try{u.pathname=decodeURI(u.pathname)}catch{}if(n.removeDirectoryIndex===!0&&(n.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(n.removeDirectoryIndex)&&n.removeDirectoryIndex.length>0){let h=u.pathname.split("/");const p=h[h.length-1];testParameter(p,n.removeDirectoryIndex)&&(h=h.slice(0,-1),u.pathname=`${h.slice(1).join("/")}/`)}if(u.hostname&&(u.hostname=u.hostname.replace(/\.$/,""),n.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(u.hostname)&&(u.hostname=u.hostname.replace(/^www\./,""))),Array.isArray(n.removeQueryParameters))for(const h of[...u.searchParams.keys()])testParameter(h,n.removeQueryParameters)&&u.searchParams.delete(h);if(!Array.isArray(n.keepQueryParameters)&&n.removeQueryParameters===!0&&(u.search=""),Array.isArray(n.keepQueryParameters)&&n.keepQueryParameters.length>0)for(const h of[...u.searchParams.keys()])testParameter(h,n.keepQueryParameters)||u.searchParams.delete(h);if(n.sortQueryParameters){u.searchParams.sort();try{u.search=decodeURIComponent(u.search)}catch{}}n.removeTrailingSlash&&(u.pathname=u.pathname.replace(/\/$/,"")),n.removeExplicitPort&&u.port&&(u.port="");const c=r;return r=u.toString(),!n.removeSingleSlash&&u.pathname==="/"&&!c.endsWith("/")&&u.hash===""&&(r=r.replace(/\/$/,"")),(n.removeTrailingSlash||u.pathname==="/")&&u.hash===""&&n.removeSingleSlash&&(r=r.replace(/\/$/,"")),s&&!n.normalizeProtocol&&(r=r.replace(/^http:\/\//,"//")),n.stripProtocol&&(r=r.replace(/^(?:https?:)?\/\//,"")),r}var MAX_RECONNECT_ATTEMPTS=5,FLAPPING_THRESHOLD_MS=1e3,NDKRelayConnectivity=class{constructor(r,n){A(this,"ndkRelay");A(this,"ws");A(this,"_status");A(this,"timeoutMs");A(this,"connectedAt");A(this,"_connectionStats",{attempts:0,success:0,durations:[]});A(this,"debug");A(this,"netDebug");A(this,"connectTimeout");A(this,"reconnectTimeout");A(this,"ndk");A(this,"openSubs",new Map);A(this,"openCountRequests",new Map);A(this,"openEventPublishes",new Map);A(this,"serial",0);A(this,"baseEoseTimeout",4400);A(this,"updateConnectionStats",{connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++,this._connectionStats.connectedAt=Date.now()}});this.ndkRelay=r,this._status=1;const s=Math.floor(Math.random()*1e3);this.debug=this.ndkRelay.debug.extend(`connectivity${s}`),this.ndk=n}async connect(r,n=!0){if(this._status!==2&&this._status!==1||this.reconnectTimeout){this.debug("Relay requested to be connected but was in state %s or it had a reconnect timeout",this._status);return}this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),r??(r=this.timeoutMs),!this.timeoutMs&&r&&(this.timeoutMs=r),this.timeoutMs&&(this.connectTimeout=setTimeout(()=>this.onConnectionError(n),this.timeoutMs));try{this.updateConnectionStats.attempt(),this._status===1?this._status=4:this._status=2,this.ws=new WebSocket(this.ndkRelay.url),this.ws.onopen=this.onConnect.bind(this),this.ws.onclose=this.onDisconnect.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=this.onError.bind(this)}catch(s){throw this.debug(`Failed to connect to ${this.ndkRelay.url}`,s),this._status=1,n?this.handleReconnection():this.ndkRelay.emit("delayed-connect",2*24*60*60*1e3),s}}disconnect(){var r;this._status=0;try{(r=this.ws)==null||r.close()}catch(n){this.debug("Failed to disconnect",n),this._status=1}}onConnectionError(r){this.debug(`Error connecting to ${this.ndkRelay.url}`,this.timeoutMs),r&&!this.reconnectTimeout&&this.handleReconnection()}onConnect(){var r;(r=this.netDebug)==null||r.call(this,"connected",this.ndkRelay),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.updateConnectionStats.connected(),this._status=5,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready")}onDisconnect(){var r;(r=this.netDebug)==null||r.call(this,"disconnected",this.ndkRelay),this.updateConnectionStats.disconnected(),this._status===5&&this.handleReconnection(),this._status=1,this.ndkRelay.emit("disconnect")}onMessage(r){var n;(n=this.netDebug)==null||n.call(this,r.data,this.ndkRelay,"recv");try{const s=JSON.parse(r.data),[o,u,...c]=s;switch(o){case"EVENT":{const h=this.openSubs.get(u),p=s[2];if(!h){this.debug(`Received event for unknown subscription ${u}`);return}h.onevent(p);return}case"COUNT":{const h=s[2],p=this.openCountRequests.get(u);p&&(p.resolve(h.count),this.openCountRequests.delete(u));return}case"EOSE":{const h=this.openSubs.get(u);if(!h)return;h.oneose(u);return}case"OK":{const h=s[2],p=s[3],g=this.openEventPublishes.get(u),m=g==null?void 0:g.pop();if(!g||!m){this.debug("Received OK for unknown event publish",u);return}h?m.resolve(p):m.reject(new Error(p)),g.length===0?this.openEventPublishes.delete(u):this.openEventPublishes.set(u,g);return}case"CLOSED":{const h=this.openSubs.get(u);if(!h)return;h.onclosed(s[2]);return}case"NOTICE":this.onNotice(s[1]);return;case"AUTH":{this.onAuthRequested(s[1]);return}}}catch(s){this.debug(`Error parsing message from ${this.ndkRelay.url}: ${s.message}`,s==null?void 0:s.stack);return}}async onAuthRequested(r){var s,o,u;const n=this.ndkRelay.authPolicy??((s=this.ndk)==null?void 0:s.relayAuthDefaultPolicy);if(this.debug("Relay requested authentication",{havePolicy:!!n}),this._status===7){this.debug("Already authenticating, ignoring");return}if(this._status=6,n){if(this._status>=5){this._status=7;let c;try{c=await n(this.ndkRelay,r)}catch(h){this.debug("Authentication policy threw an error",h),c=!1}if(this.debug("Authentication policy returned",!!c),c instanceof NDKEvent||c===!0){c instanceof NDKEvent&&await this.auth(c);const h=async()=>{if(this._status>=5&&this._status<8){const p=new NDKEvent(this.ndk);p.kind=22242,p.tags=[["relay",this.ndkRelay.url],["challenge",r]],await p.sign(),this.auth(p).then(()=>{this._status=8,this.ndkRelay.emit("authed"),this.debug("Authentication successful")}).catch(g=>{this._status=6,this.ndkRelay.emit("auth:failed",g),this.debug("Authentication failed",g)})}else this.debug("Authentication failed, it changed status, status is %d",this._status)};c===!0&&((o=this.ndk)!=null&&o.signer?h().catch(p=>{console.error("Error authenticating",p)}):(this.debug("No signer available for authentication localhost"),(u=this.ndk)==null||u.once("signer:ready",h))),this._status=5,this.ndkRelay.emit("authed")}}}else this.ndkRelay.emit("auth",r)}onError(r){this.debug(`WebSocket error on ${this.ndkRelay.url}:`,r)}get status(){return this._status}isAvailable(){return this._status===5}isFlapping(){const r=this._connectionStats.durations;if(r.length%3!==0)return!1;const s=r.reduce((h,p)=>h+p,0)/r.length,o=r.map(h=>(h-s)**2).reduce((h,p)=>h+p,0)/r.length;return Math.sqrt(o)<FLAPPING_THRESHOLD_MS}async onNotice(r){this.ndkRelay.emit("notice",r)}handleReconnection(r=0){if(this.reconnectTimeout)return;if(this.isFlapping()){this.ndkRelay.emit("flapping",this._connectionStats),this._status=3;return}const n=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):5e3*(this._connectionStats.attempts+1);this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=void 0,this._status=2,this.connect().catch(s=>{r<MAX_RECONNECT_ATTEMPTS?setTimeout(()=>{this.handleReconnection(r+1)},1e3*(r+1)^4):this.debug("Reconnect failed")})},n),this.ndkRelay.emit("delayed-connect",n),this.debug("Reconnecting in",n),this._connectionStats.nextReconnectAt=Date.now()+n}async send(r){var n,s,o;this._status>=5&&((n=this.ws)==null?void 0:n.readyState)===WebSocket.OPEN?((s=this.ws)==null||s.send(r),(o=this.netDebug)==null||o.call(this,r,this.ndkRelay,"send")):this.debug(`Not connected to ${this.ndkRelay.url} (%d), not sending message ${r}`,this._status)}async auth(r){const n=new Promise((s,o)=>{const u=this.openEventPublishes.get(r.id)??[];u.push({resolve:s,reject:o}),this.openEventPublishes.set(r.id,u)});return this.send(`["AUTH",${JSON.stringify(r.rawEvent())}]`),n}async publish(r){const n=new Promise((s,o)=>{const u=this.openEventPublishes.get(r.id)??[];u.length>0&&console.warn(`Duplicate event publishing detected, you are publishing event ${r.id} twice`),u.push({resolve:s,reject:o}),this.openEventPublishes.set(r.id,u)});return this.send(`["EVENT",${JSON.stringify(r)}]`),n}async count(r,n){this.serial++;const s=(n==null?void 0:n.id)||`count:${this.serial}`,o=new Promise((u,c)=>{this.openCountRequests.set(s,{resolve:u,reject:c})});return this.send(`["COUNT","${s}",${JSON.stringify(r).substring(1)}`),o}close(r,n){this.send(`["CLOSE","${r}"]`);const s=this.openSubs.get(r);this.openSubs.delete(r),s&&s.onclose(n)}req(r){`${this.send(`["REQ","${r.subId}",${JSON.stringify(r.executeFilters).substring(1)}`)}`,this.openSubs.set(r.subId,r)}get connectionStats(){return this._connectionStats}get url(){return this.ndkRelay.url}get connected(){var r;return this._status>=5&&((r=this.ws)==null?void 0:r.readyState)===WebSocket.OPEN}},NDKRelayPublisher=class{constructor(r){A(this,"ndkRelay");A(this,"debug");this.ndkRelay=r,this.debug=r.debug.extend("publisher")}async publish(r,n=2500){let s;const o=()=>new Promise((v,b)=>{try{this.publishEvent(r).then(_=>{this.ndkRelay.emit("published",r),r.emit("relay:published",this.ndkRelay),v(!0)}).catch(b)}catch(_){b(_)}}),u=new Promise((v,b)=>{s=setTimeout(()=>{s=void 0,b(new Error(`Timeout: ${n}ms`))},n)}),c=()=>{o().then(v=>h(v)).catch(v=>p(v))};let h,p;const g=v=>{throw this.ndkRelay.debug("Publish failed",v,r.id),this.ndkRelay.emit("publish:failed",r,v),r.emit("relay:publish:failed",this.ndkRelay,v),v},m=()=>{s&&clearTimeout(s),this.ndkRelay.removeListener("connect",c)};return this.ndkRelay.status>=5?Promise.race([o(),u]).catch(g).finally(m):(this.ndkRelay.status<=1?(console.warn("Relay is disconnected, trying to connect to publish an event",this.ndkRelay.url),this.ndkRelay.connect()):console.warn("Relay not connected, waiting for connection to publish an event",this.ndkRelay.url),Promise.race([new Promise((v,b)=>{h=v,p=b,this.ndkRelay.on("connect",c)}),u]).catch(g).finally(m))}async publishEvent(r){return this.ndkRelay.connectivity.publish(r.rawEvent())}};function filterFingerprint(r,n){const s=[];for(const u of r){const c=Object.entries(u||{}).map(([h,p])=>["since","until"].includes(h)?`${h}:${p}`:h).sort().join("-");s.push(c)}let o=n?"+":"";return o+=s.join("|"),o}function mergeFilters(r){const n=[],s={};return r.filter(o=>!!o.limit).forEach(o=>n.push(o)),r=r.filter(o=>!o.limit),r.length===0?n:(r.forEach(o=>{Object.entries(o).forEach(([u,c])=>{Array.isArray(c)?s[u]===void 0?s[u]=[...c]:s[u]=Array.from(new Set([...s[u],...c])):s[u]=c})}),[...n,s])}var NDKRelaySubscription=class{constructor(r,n,s){A(this,"fingerprint");A(this,"items",new Map);A(this,"topSubManager");A(this,"debug");A(this,"status",0);A(this,"onClose");A(this,"relay");A(this,"eosed",!1);A(this,"executionTimer");A(this,"fireTime");A(this,"delayType");A(this,"executeFilters");A(this,"id",Math.random().toString(36).substring(7));A(this,"_subId");A(this,"subIdParts",new Set);A(this,"executeOnRelayReady",()=>{if(this.status===2){if(this.items.size===0){this.debug("No items to execute; this relay was probably too slow to respond and the caller gave up",{status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size,id:this.id,subId:this.subId}),this.cleanup();return}this.debug("Executing on relay ready",{status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.status=1,this.execute()}});A(this,"reExecuteAfterAuth",(()=>{const r=this.subId;this.debug("Re-executing after auth",this.items.size),this.eosed?this.relay.close(this.subId):this.debug("We are abandoning an opened subscription, once it EOSE's, the handler will close it",{oldSubId:r}),this._subId=void 0,this.status=1,this.execute(),this.debug("Re-executed after auth %s 👉 %s",r,this.subId)}).bind(this));this.relay=r,this.topSubManager=s,this.debug=r.debug.extend(`sub[${this.id}]`),this.fingerprint=n||Math.random().toString(36).substring(7)}get subId(){return this._subId?this._subId:(this._subId=this.fingerprint.slice(0,15),this._subId)}addSubIdPart(r){this.subIdParts.add(r)}addItem(r,n){if(this.debug("Adding item",{filters:n,internalId:r.internalId,status:this.status,fingerprint:this.fingerprint,id:this.subId,items:this.items,itemsSize:this.items.size}),!this.items.has(r.internalId))switch(r.on("close",this.removeItem.bind(this,r)),this.items.set(r.internalId,{subscription:r,filters:n}),this.status!==3&&r.subId&&(!this._subId||this._subId.length<48)&&(this.status===0||this.status===1)&&this.addSubIdPart(r.subId),this.status){case 0:this.evaluateExecutionPlan(r);break;case 3:break;case 1:this.evaluateExecutionPlan(r);break;case 4:throw this.debug("Subscription is closed, cannot add new items %o (%o)",r,n),new Error("Cannot add new items to a closed subscription")}}removeItem(r){if(this.items.delete(r.internalId),this.items.size===0){if(!this.eosed)return;this.close(),this.cleanup()}}close(){if(this.status===4)return;const r=this.status;if(this.status=4,r===3)try{this.relay.close(this.subId)}catch(n){this.debug("Error closing subscription",n,this)}else this.debug("Subscription wanted to close but it wasn't running, this is probably ok",{subId:this.subId,prevStatus:r,sub:this});this.cleanup()}cleanup(){this.executionTimer&&clearTimeout(this.executionTimer),this.relay.off("ready",this.executeOnRelayReady),this.relay.off("authed",this.reExecuteAfterAuth),this.onClose&&this.onClose(this)}evaluateExecutionPlan(r){if(!r.isGroupable()){this.status=1,this.execute();return}if(r.filters.find(o=>!!o.limit)&&(this.executeFilters=this.compileFilters(),this.executeFilters.length>=10)){this.status=1,this.execute();return}const n=r.groupableDelay,s=r.groupableDelayType;if(!n)throw new Error("Cannot group a subscription without a delay");if(this.status===0)this.schedule(n,s);else{const o=this.delayType,u=this.fireTime-Date.now();if(o==="at-least"&&s==="at-least")u<n&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(n,s));else if(o==="at-least"&&s==="at-most")u>n&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(n,s));else if(o==="at-most"&&s==="at-most")u>n&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(n,s));else if(o==="at-most"&&s==="at-least")u>n&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(n,s));else throw new Error(`Unknown delay type combination ${o} ${s}`)}}schedule(r,n){this.status=1;const s=Date.now();this.fireTime=s+r,this.delayType=n;const o=setTimeout(this.execute.bind(this),r);n==="at-least"&&(this.executionTimer=o)}finalizeSubId(){this.subIdParts.size>0?this._subId=Array.from(this.subIdParts).join("-"):this._subId=this.fingerprint.slice(0,15),this._subId+=`-${Math.random().toString(36).substring(2,7)}`}execute(){if(this.status===1){if(!this.relay.connected){this.status=2,this.debug("Waiting for relay to be ready",{status:this.status,id:this.subId,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.relay.once("ready",this.executeOnRelayReady);return}this.relay.status<8&&this.relay.once("authed",this.reExecuteAfterAuth),this.status=3,this.finalizeSubId(),this.executeFilters=this.compileFilters(),this.relay.req(this)}}onstart(){}onevent(r){this.topSubManager.dispatchEvent(r,this.relay)}oneose(r){if(this.eosed=!0,r!==this.subId){this.debug("Received EOSE for an abandoned subscription",r,this.subId),this.relay.close(r);return}this.items.size===0&&this.close();for(const{subscription:n}of this.items.values())n.eoseReceived(this.relay),n.closeOnEose&&(this.debug("Removing item because of EOSE",{filters:n.filters,internalId:n.internalId,status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.removeItem(n))}onclose(r){this.status=4}onclosed(r){if(r)for(const{subscription:n}of this.items.values())n.closedReceived(this.relay,r)}compileFilters(){const r=[],n=Array.from(this.items.values()).map(o=>o.filters);if(!n[0])return this.debug("👀 No filters to merge",this.items),console.error("BUG: No filters to merge!",this.items),[];const s=n[0].length;for(let o=0;o<s;o++){const u=n.map(c=>c[o]);r.push(...mergeFilters(u))}return r}},NDKRelaySubscriptionManager=class{constructor(r,n){A(this,"relay");A(this,"subscriptions");A(this,"generalSubManager");this.relay=r,this.subscriptions=new Map,this.generalSubManager=n}addSubscription(r,n){let s;if(!r.isGroupable())s=this.createSubscription(r,n);else{const o=filterFingerprint(n,r.closeOnEose);o&&(s=(this.subscriptions.get(o)||[]).find(c=>c.status<3)),s??(s=this.createSubscription(r,n,o))}s.addItem(r,n)}createSubscription(r,n,s){const o=new NDKRelaySubscription(this.relay,s||null,this.generalSubManager);o.onClose=this.onRelaySubscriptionClose.bind(this);const u=this.subscriptions.get(o.fingerprint)??[];return this.subscriptions.set(o.fingerprint,[...u,o]),o}onRelaySubscriptionClose(r){let n=this.subscriptions.get(r.fingerprint)??[];n?n.length===1?this.subscriptions.delete(r.fingerprint):(n=n.filter(s=>s.id!==r.id),this.subscriptions.set(r.fingerprint,n)):console.warn("Unexpectedly did not find a subscription with fingerprint",r.fingerprint)}},ri,NDKRelay=(ri=class extends libExports.EventEmitter{constructor(s,o,u){super();A(this,"url");A(this,"scores");A(this,"connectivity");A(this,"subs");A(this,"publisher");A(this,"authPolicy");A(this,"lowestValidationRatio");A(this,"targetValidationRatio");A(this,"validationRatioFn");A(this,"validatedEventCount",0);A(this,"nonValidatedEventCount",0);A(this,"trusted",!1);A(this,"complaining",!1);A(this,"debug");A(this,"req");A(this,"close");this.url=normalizeRelayUrl(s),this.scores=new Map,this.debug=createDebug5(`ndk:relay:${s}`),this.connectivity=new NDKRelayConnectivity(this,u),this.connectivity.netDebug=u==null?void 0:u.netDebug,this.req=this.connectivity.req.bind(this.connectivity),this.close=this.connectivity.close.bind(this.connectivity),this.subs=new NDKRelaySubscriptionManager(this,u.subManager),this.publisher=new NDKRelayPublisher(this),this.authPolicy=o,this.targetValidationRatio=u==null?void 0:u.initialValidationRatio,this.lowestValidationRatio=u==null?void 0:u.lowestValidationRatio,this.validationRatioFn=((u==null?void 0:u.validationRatioFn)??ri.defaultValidationRatioUpdateFn).bind(this),this.updateValidationRatio(),u||console.trace("relay created without ndk")}updateValidationRatio(){if(this.validationRatioFn&&this.validatedEventCount>0){const s=this.validationRatioFn(this,this.validatedEventCount,this.nonValidatedEventCount);this.targetValidationRatio=s}setTimeout(()=>{this.updateValidationRatio()},3e4)}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(s,o=!0){return this.connectivity.connect(s,o)}disconnect(){this.status!==1&&this.connectivity.disconnect()}subscribe(s,o){this.subs.addSubscription(s,o)}async publish(s,o=2500){return this.publisher.publish(s,o)}referenceTags(){return[["r",this.url]]}addValidatedEvent(){this.validatedEventCount++}addNonValidatedEvent(){this.nonValidatedEventCount++}get validationRatio(){return this.nonValidatedEventCount===0?1:this.validatedEventCount/(this.validatedEventCount+this.nonValidatedEventCount)}shouldValidateEvent(){return this.trusted?!1:this.targetValidationRatio===void 0||this.targetValidationRatio>=1?!0:Math.random()<this.targetValidationRatio}get connected(){return this.connectivity.connected}},A(ri,"defaultValidationRatioUpdateFn",(s,o,u)=>{if(s.lowestValidationRatio===void 0||s.targetValidationRatio===void 0)return 1;let c=s.validationRatio;if(s.validationRatio>s.targetValidationRatio){const h=o/100;c=Math.max(s.lowestValidationRatio,s.validationRatio-h)}return c<s.validationRatio?c:s.validationRatio}),ri),NDKPublishError=class extends Error{constructor(n,s,o,u){super(n);A(this,"errors");A(this,"publishedToRelays");A(this,"intendedRelaySet");this.errors=s,this.publishedToRelays=o,this.intendedRelaySet=u}get relayErrors(){const n=[];for(const[s,o]of this.errors)n.push(`${s.url}: ${o}`);return n.join(`
`)}},NDKRelaySet=class dh{constructor(n,s,o){A(this,"relays");A(this,"debug");A(this,"ndk");A(this,"pool");this.relays=n,this.ndk=s,this.pool=o??s.pool,this.debug=s.debug.extend("relayset")}addRelay(n){this.relays.add(n)}get relayUrls(){return Array.from(this.relays).map(n=>n.url)}static fromRelayUrls(n,s,o=!0,u){if(u=u??s.pool,!u)throw new Error("No pool provided");const c=new Set;for(const h of n){const p=u.relays.get(normalizeRelayUrl(h));if(p)p.status<5&&o&&p.connect(),c.add(p);else{const g=new NDKRelay(normalizeRelayUrl(h),s==null?void 0:s.relayAuthDefaultPolicy,s);u.useTemporaryRelay(g,void 0,`requested from fromRelayUrls ${n}`),c.add(g)}}return new dh(new Set(c),s,u)}async publish(n,s,o=1){var g;const u=new Set,c=new Map,h=n.isEphemeral();n.publishStatus="pending";const p=m=>{u.add(m)};n.on("relay:published",p);try{const m=Array.from(this.relays).map(v=>new Promise(b=>{const _=s?setTimeout(()=>{u.has(v)||(c.set(v,new Error(`Publish timeout after ${s}ms`)),b(!1))},s):null;v.publish(n,s).then(C=>{_&&clearTimeout(_),C?(u.add(v),b(!0)):b(!1)}).catch(C=>{_&&clearTimeout(_),h||c.set(v,C),b(!1)})}));if(await Promise.all(m),u.size<o){if(!h){const v=new NDKPublishError("Not enough relays received the event ("+u.size+" published, "+o+" required)",c,u,this);throw n.publishStatus="error",n.publishError=v,(g=this.ndk)==null||g.emit("event:publish-failed",n,v,this.relayUrls),v}}else n.publishStatus="success",n.emit("published",{relaySet:this,publishedToRelays:u});return u}finally{n.off("relay:published",p)}}get size(){return this.relays.size}},d=createDebug5("ndk:outbox:calculate");async function calculateRelaySetFromEvent(r,n,s){var p,g;const o=new Set,u=await getWriteRelaysFor(r,n.pubkey);u&&u.forEach(m=>{var b;const v=(b=r.pool)==null?void 0:b.getRelay(m);v&&o.add(v)});let c=n.tags.filter(m=>["a","e"].includes(m[0])).map(m=>m[2]).filter(m=>m==null?void 0:m.startsWith("wss://")).filter(m=>{try{return new URL(m),!0}catch{return!1}}).map(m=>normalizeRelayUrl(m));c=Array.from(new Set(c)).slice(0,5),c.forEach(m=>{var b;const v=(b=r.pool)==null?void 0:b.getRelay(m,!0,!0);v&&(d("Adding relay hint %s",m),o.add(v))});const h=n.getMatchingTags("p").map(m=>m[1]);if(h.length<5?Array.from(chooseRelayCombinationForPubkeys(r,h,"read",{preferredRelays:new Set(u)}).keys()).forEach(v=>{var _;const b=(_=r.pool)==null?void 0:_.getRelay(v,!1,!0);b&&(d("Adding p-tagged relay %s",v),o.add(b))}):d("Too many p-tags to consider %d",h.length),(p=r.pool)==null||p.permanentAndConnectedRelays().forEach(m=>o.add(m)),s&&o.size<s){const m=(g=r.explicitRelayUrls)==null?void 0:g.filter(v=>!Array.from(o).some(b=>b.url===v)).slice(0,s-o.size);m==null||m.forEach(v=>{var _;const b=(_=r.pool)==null?void 0:_.getRelay(v,!1,!0);b&&(d("Adding explicit relay %s",v),o.add(b))})}return new NDKRelaySet(o,r)}function calculateRelaySetsFromFilter(r,n,s){const o=new Map,u=new Set;if(n.forEach(c=>{c.authors&&c.authors.forEach(h=>u.add(h))}),u.size>0){const c=getRelaysForFilterWithAuthors(r,Array.from(u));for(const h of c.keys())o.set(h,[]);for(const h of n)if(h.authors)for(const[p,g]of c.entries()){const m=h.authors.filter(v=>g.includes(v));o.set(p,[...o.get(p),{...h,authors:m}])}else for(const p of c.keys())o.set(p,[...o.get(p),h])}else r.explicitRelayUrls&&r.explicitRelayUrls.forEach(c=>{o.set(c,n)});return o.size===0&&s.permanentAndConnectedRelays().slice(0,5).forEach(c=>{o.set(c.url,n)}),o}function calculateRelaySetsFromFilters(r,n,s){return calculateRelaySetsFromFilter(r,n,s)}function mergeTags(r,n){const s=new Map,o=h=>h.join(","),u=(h,p)=>h.every((g,m)=>g===p[m]),c=h=>{for(const[p,g]of s)if(u(g,h)||u(h,g)){h.length>=g.length&&s.set(p,h);return}s.set(o(h),h)};return r.concat(n).forEach(c),Array.from(s.values())}var hashtagRegex=new RegExp(`(?<=\\s|^)(#[^\\s!@#$%^&*()=+./,[{\\]};:'"?><]+)`,"g");function generateHashtags(r){const n=r.match(hashtagRegex),s=new Set,o=new Set;if(n)for(const u of n)s.has(u.slice(1))||(o.add(u.slice(1)),s.add(u.slice(1)));return Array.from(o)}async function generateContentTags(r,n=[]){const s=/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,o=[],u=h=>{n.find(p=>["q",h[0]].includes(p[0])&&p[1]===h[1])||n.push(h)};r=r.replace(s,h=>{try{const p=h.split(/(@|nostr:)/)[2],{type:g,data:m}=nip19_exports.decode(p);let v;switch(g){case"npub":v=["p",m];break;case"nprofile":v=["p",m.pubkey];break;case"note":o.push(new Promise(async b=>{u(["q",m,await maybeGetEventRelayUrl(p)]),b()}));break;case"nevent":o.push(new Promise(async b=>{const{id:_,author:C}=m;let{relays:z}=m;(!z||z.length===0)&&(z=[await maybeGetEventRelayUrl(p)]),u(["q",_,z[0]]),C&&u(["p",C]),b()}));break;case"naddr":o.push(new Promise(async b=>{const _=[m.kind,m.pubkey,m.identifier].join(":");let C=m.relays??[];C.length===0&&(C=[await maybeGetEventRelayUrl(p)]),u(["q",_,C[0]]),u(["p",m.pubkey]),b()}));break;default:return h}return v&&u(v),`nostr:${p}`}catch{return h}}),await Promise.all(o);const c=generateHashtags(r).map(h=>["t",h]);return n=mergeTags(n,c),{content:r,tags:n}}async function maybeGetEventRelayUrl(r){return""}async function encrypt(r,n,s="nip44"){let o;if(!this.ndk)throw new Error("No NDK instance found!");let u=n;if(u||(this.ndk.assertSigner(),u=this.ndk.signer),!u)throw new Error("no NDK signer");const c=r||(()=>{const h=this.getMatchingTags("p");if(h.length!==1)throw new Error("No recipient could be determined and no explicit recipient was provided");return this.ndk.getUser({pubkey:h[0][1]})})();if(s==="nip44"&&await isEncryptionEnabled(u,"nip44")&&(o=await u.encrypt(c,this.content,"nip44")),(!o||s==="nip04")&&await isEncryptionEnabled(u,"nip04")&&(o=await u.encrypt(c,this.content,"nip04")),!o)throw new Error("Failed to encrypt event.");this.content=o}async function decrypt(r,n,s){var p,g,m,v;if((g=(p=this.ndk)==null?void 0:p.cacheAdapter)!=null&&g.getDecryptedEvent){let b=null;if(typeof this.ndk.cacheAdapter.getDecryptedEvent=="function"&&(b=this.ndk.cacheAdapter.getDecryptedEvent(this.id)),b){this.content=b.content;return}}let o;if(!this.ndk)throw new Error("No NDK instance found!");let u=n;if(u||(this.ndk.assertSigner(),u=this.ndk.signer),!u)throw new Error("no NDK signer");const c=r||this.author;if(!c)throw new Error("No sender provided and no author available");const h=s||(this.content.match(/\\?iv=/)?"nip04":"nip44");if((h==="nip04"||this.kind===4)&&await isEncryptionEnabled(u,"nip04")&&this.content.search("\\?iv=")&&(o=await u.decrypt(c,this.content,"nip04")),!o&&h==="nip44"&&await isEncryptionEnabled(u,"nip44")&&(o=await u.decrypt(c,this.content,"nip44")),!o)throw new Error("Failed to decrypt event.");this.content=o,(v=(m=this.ndk)==null?void 0:m.cacheAdapter)!=null&&v.addDecryptedEvent&&this.ndk.cacheAdapter.addDecryptedEvent(this)}async function isEncryptionEnabled(r,n){return r.encryptionEnabled?n?!!await r.encryptionEnabled(n):!0:!1}function eventHasETagMarkers(r){for(const n of r.tags)if(n[0]==="e"&&(n[3]??"").length>0)return!0;return!1}function getRootTag(r,n){n??(n=r.tagType());const s=r.tags.find(isTagRootTag);if(!s){if(eventHasETagMarkers(r))return;const o=r.getMatchingTags(n);if(o.length<3)return o[0]}return s}var nip22RootTags=new Set(["A","E","I"]),nip22ReplyTags=new Set(["a","e","i"]);function getReplyTag(r,n){if(r.kind===1111){let u;for(const c of r.tags)if(nip22RootTags.has(c[0]))u=c;else if(nip22ReplyTags.has(c[0])){u=c;break}return u}n??(n=r.tagType());let s=!1,o;for(const u of r.tags)if(u[0]===n){if((u[3]??"").length>0&&(s=!0),s&&u[3]==="reply")return u;s&&u[3]==="root"&&(o=u),s||(o=u)}return o}function isTagRootTag(r){return r[0]==="E"||r[3]==="root"}async function fetchTaggedEvent(r,n){if(!this.ndk)throw new Error("NDK instance not found");const s=this.getMatchingTags(r,n);if(s.length===0)return;const[o,u,c]=s[0];let h=c!==""?this.ndk.pool.getRelay(c):void 0;return await this.ndk.fetchEvent(u,{},h)}async function fetchRootEvent(r){if(!this.ndk)throw new Error("NDK instance not found");const n=getRootTag(this);if(n)return this.ndk.fetchEventFromTag(n,this,r)}async function fetchReplyEvent(r){if(!this.ndk)throw new Error("NDK instance not found");const n=getReplyTag(this);if(n)return this.ndk.fetchEventFromTag(n,this,r)}function isReplaceable(){if(this.kind===void 0)throw new Error("Kind not set");return[0,3].includes(this.kind)||this.kind>=1e4&&this.kind<2e4||this.kind>=3e4&&this.kind<4e4}function isEphemeral(){if(this.kind===void 0)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function isParamReplaceable(){if(this.kind===void 0)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}var DEFAULT_RELAY_COUNT=2;function encode(r=DEFAULT_RELAY_COUNT){let n=[];return this.onRelays.length>0?n=this.onRelays.map(s=>s.url):this.relay&&(n=[this.relay.url]),n.length>r&&(n=n.slice(0,r)),this.isParamReplaceable()?nip19_exports.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:n}):n.length>0?nip19_exports.neventEncode({id:this.tagId(),relays:n,author:this.pubkey}):nip19_exports.noteEncode(this.tagId())}async function repost(r=!0,n){if(!n&&r){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),n=this.ndk.signer}const s=new NDKEvent(this.ndk,{kind:getKind(this)});return this.isProtected||(s.content=JSON.stringify(this.rawEvent())),s.tag(this),this.kind!==1&&s.tags.push(["k",`${this.kind}`]),n&&await s.sign(n),r&&await s.publish(),s}function getKind(r){return r.kind===1?6:16}function serialize(r=!1,n=!1){const s=[0,this.pubkey,this.created_at,this.kind,this.tags,this.content];return r&&s.push(this.sig),n&&s.push(this.id),JSON.stringify(s)}function deserialize(r){const n=JSON.parse(r),s={pubkey:n[1],created_at:n[2],kind:n[3],tags:n[4],content:n[5]};if(n.length>=7){const o=n[6],u=n[7];o&&o.length===128?(s.sig=o,u&&u.length===64&&(s.id=u)):o&&o.length===64&&(s.id=o,u&&u.length===128&&(s.sig=u))}return s}var worker,processingQueue={};function signatureVerificationInit(r){worker=r,worker.onmessage=n=>{const[s,o]=n.data,u=processingQueue[s];if(!u){console.error("No record found for event",s);return}delete processingQueue[s];for(const c of u.resolves)c(o)}}async function verifySignatureAsync(r,n,s){const o=r.ndk,u=Date.now();let c;return o.signatureVerificationFunction?(console.log("[NDK-CORE] Using custom signature verification function async"),c=await o.signatureVerificationFunction(r),console.log("Custom signature verification result",r.id,{result:c})):(console.log("Using worker-based signature verification async"),c=await new Promise(h=>{const p=r.serialize();let g=!1;processingQueue[r.id]||(processingQueue[r.id]={event:r,resolves:[],relay:s},g=!0),processingQueue[r.id].resolves.push(h),g&&(worker==null||worker.postMessage({serialized:p,id:r.id,sig:r.sig,pubkey:r.pubkey}))})),o.signatureVerificationTimeMs+=Date.now()-u,c}var PUBKEY_REGEX=/^[a-f0-9]{64}$/;function validate(){if(typeof this.kind!="number"||typeof this.content!="string"||typeof this.created_at!="number"||typeof this.pubkey!="string"||!this.pubkey.match(PUBKEY_REGEX)||!Array.isArray(this.tags))return!1;for(let r=0;r<this.tags.length;r++){const n=this.tags[r];if(!Array.isArray(n))return!1;for(let s=0;s<n.length;s++)if(typeof n[s]=="object")return!1}return!0}var verifiedSignatures=new distExports.LRUCache({maxSize:1e3,entryExpirationTimeInMS:6e4});function verifySignature(r){var s;if(typeof this.signatureVerified=="boolean")return this.signatureVerified;const n=verifiedSignatures.get(this.id);if(n!==null)return this.signatureVerified=!!n,this.signatureVerified;try{if((s=this.ndk)!=null&&s.asyncSigVerification)verifySignatureAsync(this,r,this.relay).then(o=>{var u,c;r&&(this.signatureVerified=o,o&&verifiedSignatures.set(this.id,this.sig)),o||(this.relay?(u=this.ndk)==null||u.reportInvalidSignature(this,this.relay):(c=this.ndk)==null||c.reportInvalidSignature(this),verifiedSignatures.set(this.id,!1))}).catch(o=>{console.error("signature verification error",this.id,o)});else{const o=sha256(new TextEncoder().encode(this.serialize())),u=schnorr.verify(this.sig,o,this.pubkey);return u?verifiedSignatures.set(this.id,this.sig):verifiedSignatures.set(this.id,!1),this.signatureVerified=u,u}}catch{return this.signatureVerified=!1,!1}}function getEventHash(){return getEventHashFromSerializedEvent(this.serialize())}function getEventHashFromSerializedEvent(r){const n=sha256(new TextEncoder().encode(r));return bytesToHex$1(n)}var skipClientTagOnKinds=new Set([0,4,1059,13,3,9734,5]),NDKEvent=class ii extends libExports.EventEmitter{constructor(s,o){var u;super();A(this,"ndk");A(this,"created_at");A(this,"content","");A(this,"tags",[]);A(this,"kind");A(this,"id","");A(this,"sig");A(this,"pubkey","");A(this,"signatureVerified");A(this,"_author");A(this,"relay");A(this,"publishStatus","success");A(this,"publishError");A(this,"serialize",serialize.bind(this));A(this,"getEventHash",getEventHash.bind(this));A(this,"validate",validate.bind(this));A(this,"verifySignature",verifySignature.bind(this));A(this,"isReplaceable",isReplaceable.bind(this));A(this,"isEphemeral",isEphemeral.bind(this));A(this,"isDvm",()=>this.kind&&this.kind>=5e3&&this.kind<=7e3);A(this,"isParamReplaceable",isParamReplaceable.bind(this));A(this,"encode",encode.bind(this));A(this,"encrypt",encrypt.bind(this));A(this,"decrypt",decrypt.bind(this));A(this,"fetchTaggedEvent",fetchTaggedEvent.bind(this));A(this,"fetchRootEvent",fetchRootEvent.bind(this));A(this,"fetchReplyEvent",fetchReplyEvent.bind(this));A(this,"repost",repost.bind(this));this.ndk=s,this.created_at=o==null?void 0:o.created_at,this.content=(o==null?void 0:o.content)||"",this.tags=(o==null?void 0:o.tags)||[],this.id=(o==null?void 0:o.id)||"",this.sig=o==null?void 0:o.sig,this.pubkey=(o==null?void 0:o.pubkey)||"",this.kind=o==null?void 0:o.kind,o instanceof ii&&(this.relay&&(this.relay=o.relay,(u=this.ndk)==null||u.subManager.seenEvent(o.id,this.relay)),this.publishStatus=o.publishStatus,this.publishError=o.publishError)}get onRelays(){let s=[];return this.ndk?s=this.ndk.subManager.seenEvents.get(this.id)||[]:this.relay&&s.push(this.relay),s}static deserialize(s,o){return new ii(s,deserialize(o))}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(s){var o;this.pubkey=s.pubkey,this._author=s,(o=this._author).ndk??(o.ndk=this.ndk)}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const s=this.ndk.getUser({pubkey:this.pubkey});return this._author=s,s}tagExternal(s,o,u){const c=["i"],h=["k"];switch(o){case"url":{const p=new URL(s);p.hash="",c.push(p.toString()),h.push(`${p.protocol}//${p.host}`);break}case"hashtag":c.push(`#${s.toLowerCase()}`),h.push("#");break;case"geohash":c.push(`geo:${s.toLowerCase()}`),h.push("geo");break;case"isbn":c.push(`isbn:${s.replace(/-/g,"")}`),h.push("isbn");break;case"podcast:guid":c.push(`podcast:guid:${s}`),h.push("podcast:guid");break;case"podcast:item:guid":c.push(`podcast:item:guid:${s}`),h.push("podcast:item:guid");break;case"podcast:publisher:guid":c.push(`podcast:publisher:guid:${s}`),h.push("podcast:publisher:guid");break;case"isan":c.push(`isan:${s.split("-").slice(0,4).join("-")}`),h.push("isan");break;case"doi":c.push(`doi:${s.toLowerCase()}`),h.push("doi");break;default:throw new Error(`Unsupported NIP-73 entity type: ${o}`)}u&&c.push(u),this.tags.push(c),this.tags.push(h)}tag(s,o,u,c){let h=[];if(s.fetchProfile!==void 0){c??(c="p");const g=[c,s.pubkey];o&&g.push("",o),h.push(g)}else if(s instanceof ii){const g=s;u??(u=(g==null?void 0:g.pubkey)===this.pubkey),h=g.referenceTags(o,u,c);for(const m of g.getMatchingTags("p"))m[1]!==this.pubkey&&(this.tags.find(v=>v[0]==="p"&&v[1]===m[1])||this.tags.push(["p",m[1]]))}else if(Array.isArray(s))h=[s];else throw new Error("Invalid argument",s);this.tags=mergeTags(this.tags,h)}async toNostrEvent(s){var c,h;if(!s&&this.pubkey===""){const p=await((h=(c=this.ndk)==null?void 0:c.signer)==null?void 0:h.user());this.pubkey=(p==null?void 0:p.pubkey)||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const{content:o,tags:u}=await this.generateTags();this.content=o||"",this.tags=u;try{this.id=this.getEventHash()}catch{}return this.rawEvent()}getMatchingTags(s,o){const u=this.tags.filter(c=>c[0]===s);return o===void 0?u:u.filter(c=>c[3]===o)}hasTag(s,o){return this.tags.some(u=>u[0]===s&&(!o||u[3]===o))}tagValue(s,o){const u=this.getMatchingTags(s,o);if(u.length!==0)return u[0][1]}get alt(){return this.tagValue("alt")}set alt(s){this.removeTag("alt"),s&&this.tags.push(["alt",s])}get dTag(){return this.tagValue("d")}set dTag(s){this.removeTag("d"),s&&this.tags.push(["d",s])}removeTag(s,o){const u=Array.isArray(s)?s:[s];this.tags=this.tags.filter(c=>{const h=u.includes(c[0]),p=o?c[3]===o:!0;return!(h&&p)})}replaceTag(s){this.removeTag(s[0]),this.tags.push(s)}async sign(s){var u,c;s?this.author=await s.user():((u=this.ndk)==null||u.assertSigner(),s=(c=this.ndk)==null?void 0:c.signer);const o=await this.toNostrEvent();return this.sig=await s.sign(o),this.sig}async publishReplaceable(s,o,u){return this.id="",this.created_at=Math.floor(Date.now()/1e3),this.sig="",this.publish(s,o,u)}async publish(s,o,u){var p,g,m;if(u||(u=1),this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");if((!s||s.size===0)&&(s=this.ndk.devWriteRelaySet||await calculateRelaySetFromEvent(this.ndk,this,u)),this.kind===5&&((p=this.ndk.cacheAdapter)!=null&&p.deleteEventIds)){const v=this.getMatchingTags("e").map(b=>b[1]);this.ndk.cacheAdapter.deleteEventIds(v)}const c=this.rawEvent();if((g=this.ndk.cacheAdapter)!=null&&g.addUnpublishedEvent&&shouldTrackUnpublishedEvent(this))try{this.ndk.cacheAdapter.addUnpublishedEvent(this,s.relayUrls)}catch(v){console.error("Error adding unpublished event to cache",v)}this.kind===5&&((m=this.ndk.cacheAdapter)!=null&&m.deleteEventIds)&&this.ndk.cacheAdapter.deleteEventIds(this.getMatchingTags("e").map(v=>v[1])),this.ndk.subManager.dispatchEvent(c,void 0,!0);const h=await s.publish(this,o,u);return h.forEach(v=>{var b;return(b=this.ndk)==null?void 0:b.subManager.seenEvent(this.id,v)}),h}async generateTags(){var c,h,p;let s=[];const o=await generateContentTags(this.content,this.tags),u=o.content;if(s=o.tags,this.kind&&this.isParamReplaceable()&&!this.getMatchingTags("d")[0]){const m=this.tagValue("title");let b=[...Array(m?6:16)].map(()=>Math.random().toString(36)[2]).join("");m&&m.length>0&&(b=`${m.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")}-${b}`),s.push(["d",b])}if(this.shouldAddClientTag){const g=["client",((c=this.ndk)==null?void 0:c.clientName)??""];(h=this.ndk)!=null&&h.clientNip89&&g.push((p=this.ndk)==null?void 0:p.clientNip89),s.push(g)}else this.shouldStripClientTag&&(s=s.filter(g=>g[0]!=="client"));return{content:u||"",tags:s}}get shouldAddClientTag(){var s,o;return!(!((s=this.ndk)!=null&&s.clientName)&&!((o=this.ndk)!=null&&o.clientNip89)||skipClientTagOnKinds.has(this.kind)||this.isEphemeral()||this.isReplaceable()&&!this.isParamReplaceable()||this.isDvm()||this.hasTag("client"))}get shouldStripClientTag(){return skipClientTagOnKinds.has(this.kind)}muted(){var c,h;const s=(c=this.ndk)==null?void 0:c.mutedIds.get(this.pubkey);if(s&&s==="p")return"author";const o=this.tagReference(),u=(h=this.ndk)==null?void 0:h.mutedIds.get(o[1]);return u&&u===o[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const s=this.getMatchingTags("d")[0];return s?s[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return this.kind===0||this.kind===3||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(this.isParamReplaceable()){const s=this.dTag??"";return`${this.kind}:${this.pubkey}:${s}`}if(this.isReplaceable())return`${this.kind}:${this.pubkey}:`;throw new Error("Event is not a replaceable event")}tagType(){return this.isParamReplaceable()?"a":"e"}tagReference(s){let o;return this.isParamReplaceable()?o=["a",this.tagAddress()]:o=["e",this.tagId()],this.relay?o.push(this.relay.url):o.push(""),o.push(s??""),this.isParamReplaceable()||o.push(this.pubkey),o}referenceTags(s,o,u){let c=[];return this.isParamReplaceable()?c=[[u??"a",this.tagAddress()],[u??"e",this.id]]:c=[[u??"e",this.id]],c=c.map(h=>{var p,g,m;return h[0]==="e"||s?h.push(((p=this.relay)==null?void 0:p.url)??""):(g=this.relay)!=null&&g.url&&h.push((m=this.relay)==null?void 0:m.url),h}),c.forEach(h=>{h[0]==="e"?(h.push(s??""),h.push(this.pubkey)):s&&h.push(s)}),c=[...c,...this.getMatchingTags("h")],o||c.push(...this.author.referenceTags()),c}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}nip22Filter(){return this.isParamReplaceable()?{"#A":[this.tagId()]}:{"#E":[this.tagId()]}}async delete(s,o=!0){var c;if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const u=new ii(this.ndk,{kind:5,content:s||""});return u.tag(this,void 0,!0),u.tags.push(["k",(c=this.kind)==null?void 0:c.toString()]),o&&(this.emit("deleted"),await u.publish()),u}set isProtected(s){this.removeTag("-"),s&&this.tags.push(["-"])}get isProtected(){return this.hasTag("-")}async react(s,o=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const u=new ii(this.ndk,{kind:7,content:s});return u.tag(this),o&&await u.publish(),u}get isValid(){return this.validate()}get inspect(){return JSON.stringify(this.rawEvent(),null,4)}dump(){console.debug(JSON.stringify(this.rawEvent(),null,4)),console.debug("Event on relays:",this.onRelays.map(s=>s.url).join(", "))}reply(){var o,u;const s=new ii(this.ndk);if(this.kind===1)s.kind=1,this.hasTag("e")?s.tags=[...s.tags,...this.getMatchingTags("e"),...this.getMatchingTags("p"),...this.getMatchingTags("a"),...this.referenceTags("reply")]:s.tag(this,"root");else{s.kind=1111;const c=["A","E","I","P"],h=this.tags.filter(p=>c.includes(p[0]));if(h.length>0){const p=this.tagValue("K");s.tags.push(...h),p&&s.tags.push(["K",p]);const[g,m,v,...b]=this.tagReference(),_=[g,m,...b];s.tags.push(_)}else{const[p,g,m,v]=this.tagReference(),b=[p,g,v??""];p==="e"&&b.push(this.pubkey),s.tags.push(b);const _=[...b];_[0]=_[0].toUpperCase(),s.tags.push(_),s.tags.push(["K",(o=this.kind)==null?void 0:o.toString()]),s.tags.push(["P",this.pubkey])}s.tags.push(["k",(u=this.kind)==null?void 0:u.toString()]),s.tags.push(...this.getMatchingTags("p")),s.tags.push(["p",this.pubkey])}return s}},untrackedUnpublishedEvents=new Set([24133,13194,23194,23195]);function shouldTrackUnpublishedEvent(r){return!untrackedUnpublishedEvents.has(r.kind)}var NDKPool=class extends libExports.EventEmitter{constructor(n,s,o,{debug:u,name:c}={}){super();A(this,"_relays",new Map);A(this,"status","idle");A(this,"autoConnectRelays",new Set);A(this,"poolBlacklistRelayUrls",new Set);A(this,"debug");A(this,"temporaryRelayTimers",new Map);A(this,"flappingRelays",new Set);A(this,"backoffTimes",new Map);A(this,"ndk");A(this,"_name","unnamed");this.debug=u??o.debug.extend("pool"),c&&(this._name=c),this.ndk=o,this.relayUrls=n,this.poolBlacklistRelayUrls=new Set(s),this.ndk.pools.push(this)}get blacklistRelayUrls(){const n=new Set(this.ndk.blacklistRelayUrls);return this.poolBlacklistRelayUrls.forEach(s=>n.add(s)),n}get relays(){return this._relays}set relayUrls(n){this._relays.clear();for(const s of n){const o=new NDKRelay(s,void 0,this.ndk);o.connectivity.netDebug=this.ndk.netDebug,this.addRelay(o)}}get name(){return this._name}set name(n){this._name=n,this.debug=this.debug.extend(n)}useTemporaryRelay(n,s=3e4,o){const u=this.relays.has(n.url);u||(this.addRelay(n),this.debug("Adding temporary relay %s for filters %o",n.url,o));const c=this.temporaryRelayTimers.get(n.url);if(c&&clearTimeout(c),!u||c){const h=setTimeout(()=>{var p;(p=this.ndk.explicitRelayUrls)!=null&&p.includes(n.url)||this.removeRelay(n.url)},s);this.temporaryRelayTimers.set(n.url,h)}}addRelay(n,s=!0){var x,R;const o=this.relays.has(n.url),u=(x=this.blacklistRelayUrls)==null?void 0:x.has(n.url),c=n.url.includes("/npub1");let h=!0;const p=n.url;if(o)return;if(u){this.debug(`Refusing to add relay ${p}: blacklisted`);return}if(c){this.debug(`Refusing to add relay ${p}: is a filter relay`);return}if((R=this.ndk.cacheAdapter)!=null&&R.getRelayStatus){const O=this.ndk.cacheAdapter.getRelayStatus(p);if(O!=null&&O.dontConnectBefore){if(O.dontConnectBefore>Date.now()){const P=O.dontConnectBefore-Date.now();this.debug(`Refusing to add relay ${p}: delayed connect for ${P}ms`),setTimeout(()=>{this.addRelay(n,s)},P);return}h=!1}}const g=O=>this.emit("notice",n,O),m=()=>this.handleRelayConnect(p),v=()=>this.handleRelayReady(n),b=()=>this.emit("relay:disconnect",n),_=()=>this.handleFlapping(n),C=O=>this.emit("relay:auth",n,O),z=()=>this.emit("relay:authed",n);n.off("notice",g),n.off("connect",m),n.off("ready",v),n.off("disconnect",b),n.off("flapping",_),n.off("auth",C),n.off("authed",z),n.on("notice",g),n.on("connect",m),n.on("ready",v),n.on("disconnect",b),n.on("flapping",_),n.on("auth",C),n.on("authed",z),n.on("delayed-connect",O=>{var P;(P=this.ndk.cacheAdapter)!=null&&P.updateRelayStatus&&this.ndk.cacheAdapter.updateRelayStatus(n.url,{dontConnectBefore:Date.now()+O})}),this._relays.set(p,n),s&&this.autoConnectRelays.add(p),s&&this.status==="active"&&(this.emit("relay:connecting",n),n.connect(void 0,h).catch(O=>{this.debug(`Failed to connect to relay ${p}`,O)}))}removeRelay(n){const s=this.relays.get(n);if(s)return s.disconnect(),this.relays.delete(n),this.autoConnectRelays.delete(n),this.emit("relay:disconnect",s),!0;const o=this.temporaryRelayTimers.get(n);return o&&(clearTimeout(o),this.temporaryRelayTimers.delete(n)),!1}isRelayConnected(n){const s=normalizeRelayUrl(n),o=this.relays.get(s);return o?o.status===5:!1}getRelay(n,s=!0,o=!1,u){let c=this.relays.get(normalizeRelayUrl(n));return c||(c=new NDKRelay(n,void 0,this.ndk),c.connectivity.netDebug=this.ndk.netDebug,o?this.useTemporaryRelay(c,3e4,u):this.addRelay(c,s)),c}handleRelayConnect(n){const s=this.relays.get(n);if(!s){console.error("NDK BUG: relay not found in pool",{relayUrl:n});return}this.emit("relay:connect",s),this.stats().connected===this.relays.size&&this.emit("connect")}handleRelayReady(n){this.emit("relay:ready",n)}async connect(n){this.status="active",this.debug(`Connecting to ${this.relays.size} relays${n?`, timeout ${n}ms`:""}...`);const s=Array.from(this.autoConnectRelays.keys()).map(h=>this.relays.get(h)).filter(h=>!!h);for(const h of s)h.status!==5&&h.status!==4&&(this.emit("relay:connecting",h),h.connect().catch(p=>{this.debug(`Failed to connect to relay ${h.url}: ${p??"No reason specified"}`)}));const o=()=>s.every(h=>h.status===5),u=new Promise(h=>{if(o()){h();return}const p=[];for(const g of s){const m=()=>{if(o()){for(let v=0;v<s.length;v++)s[v].off("connect",p[v]);h()}};p.push(m),g.on("connect",m)}}),c=typeof n=="number"?new Promise(h=>setTimeout(h,n)):new Promise(()=>{});await Promise.race([u,c])}checkOnFlappingRelays(){const n=this.flappingRelays.size,s=this.relays.size;if(n/s>=.8)for(const o of this.flappingRelays)this.backoffTimes.set(o,0)}handleFlapping(n){this.debug(`Relay ${n.url} is flapping`);let s=this.backoffTimes.get(n.url)||5e3;s=s*2,this.backoffTimes.set(n.url,s),this.debug(`Backoff time for ${n.url} is ${s}ms`),setTimeout(()=>{this.debug(`Attempting to reconnect to ${n.url}`),this.emit("relay:connecting",n),n.connect(),this.checkOnFlappingRelays()},s),n.disconnect(),this.emit("flapping",n)}size(){return this.relays.size}stats(){const n={total:0,connected:0,disconnected:0,connecting:0};for(const s of this.relays.values())n.total++,s.status===5?n.connected++:s.status===1?n.disconnected++:s.status===4&&n.connecting++;return n}connectedRelays(){return Array.from(this.relays.values()).filter(n=>n.status>=5)}permanentAndConnectedRelays(){return Array.from(this.relays.values()).filter(n=>n.status>=5&&!this.temporaryRelayTimers.has(n.url))}urls(){return Array.from(this.relays.keys())}},kn,NDKCashuMintList=(kn=class extends NDKEvent{constructor(s,o){super(s,o);A(this,"_p2pk");this.kind??(this.kind=10019)}static from(s){return new kn(s.ndk,s)}set relays(s){this.tags=this.tags.filter(o=>o[0]!=="relay");for(const o of s)this.tags.push(["relay",o])}get relays(){const s=[];for(const o of this.tags)o[0]==="relay"&&s.push(o[1]);return s}set mints(s){this.tags=this.tags.filter(o=>o[0]!=="mint");for(const o of s)this.tags.push(["mint",o])}get mints(){const s=[];for(const o of this.tags)o[0]==="mint"&&s.push(o[1]);return Array.from(new Set(s))}get p2pk(){return this._p2pk?this._p2pk:(this._p2pk=this.tagValue("pubkey")??this.pubkey,this._p2pk)}set p2pk(s){this._p2pk=s,this.removeTag("pubkey"),s&&this.tags.push(["pubkey",s])}get relaySet(){return NDKRelaySet.fromRelayUrls(this.relays,this.ndk)}},A(kn,"kind",10019),A(kn,"kinds",[10019]),kn),Cn,NDKArticle=(Cn=class extends NDKEvent{constructor(n,s){super(n,s),this.kind??(this.kind=30023)}static from(n){return new Cn(n.ndk,n)}get title(){return this.tagValue("title")}set title(n){this.removeTag("title"),n&&this.tags.push(["title",n])}get image(){return this.tagValue("image")}set image(n){this.removeTag("image"),n&&this.tags.push(["image",n])}get summary(){return this.tagValue("summary")}set summary(n){this.removeTag("summary"),n&&this.tags.push(["summary",n])}get published_at(){const n=this.tagValue("published_at");if(n){let s=Number.parseInt(n);return s>1e12&&(s=Math.floor(s/1e3)),s}}set published_at(n){this.removeTag("published_at"),n!==void 0&&this.tags.push(["published_at",n.toString()])}async generateTags(){return super.generateTags(),this.published_at||(this.published_at=this.created_at),super.generateTags()}get url(){return this.tagValue("url")}set url(n){n?this.tags.push(["url",n]):this.removeTag("url")}},A(Cn,"kind",30023),A(Cn,"kinds",[30023]),Cn);function proofsTotalBalance(r){return r.reduce((n,s)=>{if(s.amount<0)throw new Error("proof amount is negative");return n+s.amount},0)}var Bn,NDKCashuToken=(Bn=class extends NDKEvent{constructor(s,o){super(s,o);A(this,"_proofs",[]);A(this,"_mint");A(this,"_deletes",[]);A(this,"original");this.kind??(this.kind=7375)}static async from(s){const o=new Bn(s.ndk,s);o.original=s;try{await o.decrypt()}catch{o.content=o.original.content}try{const u=JSON.parse(o.content);if(o.proofs=u.proofs,o.mint=u.mint??o.tagValue("mint"),o.deletedTokens=u.del??[],!Array.isArray(o.proofs))return}catch{return}return o}get proofs(){return this._proofs}set proofs(s){const o=new Set;this._proofs=s.filter(u=>o.has(u.C)?(console.warn("Passed in proofs had duplicates, ignoring",u.C),!1):u.amount<0?(console.warn("Invalid proof with negative amount",u),!1):(o.add(u.C),!0)).map(this.cleanProof)}cleanProof(s){return{id:s.id,amount:s.amount,C:s.C,secret:s.secret}}async toNostrEvent(s){if(!this.ndk)throw new Error("no ndk");if(!this.ndk.signer)throw new Error("no signer");const o={proofs:this.proofs.map(this.cleanProof),mint:this.mint,del:this.deletedTokens??[]};this.content=JSON.stringify(o);const u=await this.ndk.signer.user();return await this.encrypt(u,void 0,"nip44"),super.toNostrEvent(s)}set mint(s){this._mint=s}get mint(){return this._mint}get deletedTokens(){return this._deletes}set deletedTokens(s){this._deletes=s}get amount(){return proofsTotalBalance(this.proofs)}async publish(s,o,u){return this.original?this.original.publish(s,o,u):super.publish(s,o,u)}},A(Bn,"kind",7375),A(Bn,"kinds",[7375]),Bn),Un,NDKHighlight=(Un=class extends NDKEvent{constructor(s,o){super(s,o);A(this,"_article");this.kind??(this.kind=9802)}static from(s){return new Un(s.ndk,s)}get url(){return this.tagValue("r")}set context(s){s===void 0?this.tags=this.tags.filter(([o,u])=>o!=="context"):(this.tags=this.tags.filter(([o,u])=>o!=="context"),this.tags.push(["context",s]))}get context(){var s;return((s=this.tags.find(([o,u])=>o==="context"))==null?void 0:s[1])??void 0}get article(){return this._article}set article(s){this._article=s,typeof s=="string"?this.tags.push(["r",s]):this.tag(s)}getArticleTag(){return this.getMatchingTags("a")[0]||this.getMatchingTags("e")[0]||this.getMatchingTags("r")[0]}async getArticle(){var u;if(this._article!==void 0)return this._article;let s;const o=this.getArticleTag();if(o){switch(o[0]){case"a":{const[c,h,p]=o[1].split(":");s=nip19_exports.naddrEncode({kind:Number.parseInt(c),pubkey:h,identifier:p});break}case"e":s=nip19_exports.noteEncode(o[1]);break;case"r":this._article=o[1];break}if(s){let c=await((u=this.ndk)==null?void 0:u.fetchEvent(s));c&&(c.kind===30023&&(c=NDKArticle.from(c)),this._article=c)}return this._article}}},A(Un,"kind",9802),A(Un,"kinds",[9802]),Un);function mapImetaTag(r){const n={};if(r.length===2){const o=r[1].split(" ");for(let u=0;u<o.length;u+=2){const c=o[u],h=o[u+1];c==="fallback"?(n.fallback||(n.fallback=[]),n.fallback.push(h)):n[c]=h}return n}const s=r.slice(1);for(const o of s){const u=o.split(" "),c=u[0],h=u.slice(1).join(" ");c==="fallback"?(n.fallback||(n.fallback=[]),n.fallback.push(h)):n[c]=h}return n}function imetaTagToTag(r){const n=["imeta"];for(const[s,o]of Object.entries(r))if(Array.isArray(o))for(const u of o)n.push(`${s} ${u}`);else o&&n.push(`${s} ${o}`);return n}var $n,NDKImage=($n=class extends NDKEvent{constructor(s,o){super(s,o);A(this,"_imetas");this.kind??(this.kind=20)}static from(s){return new $n(s.ndk,s.rawEvent())}get isValid(){return this.imetas.length>0}get imetas(){return this._imetas?this._imetas:(this._imetas=this.tags.filter(s=>s[0]==="imeta").map(mapImetaTag).filter(s=>!!s.url),this._imetas)}set imetas(s){this._imetas=s,this.tags=this.tags.filter(o=>o[0]!=="imeta"),this.tags.push(...s.map(imetaTagToTag))}},A($n,"kind",20),A($n,"kinds",[20]),$n),si,NDKList=(si=class extends NDKEvent{constructor(s,o){super(s,o);A(this,"_encryptedTags");A(this,"encryptedTagsLength");this.kind??(this.kind=30001)}static from(s){return new si(s.ndk,s)}get title(){const s=this.tagValue("title")||this.tagValue("name");return s||(this.kind===3?"Contacts":this.kind===1e4?"Mute":this.kind===10001?"Pinned Notes":this.kind===10002?"Relay Metadata":this.kind===10003?"Bookmarks":this.kind===10004?"Communities":this.kind===10005?"Public Chats":this.kind===10006?"Blocked Relays":this.kind===10007?"Search Relays":this.kind===10050?"Direct Message Receive Relays":this.kind===10015?"Interests":this.kind===10030?"Emojis":this.tagValue("d"))}set title(s){this.removeTag(["title","name"]),s&&this.tags.push(["title",s])}get name(){return this.title}set name(s){this.title=s}get description(){return this.tagValue("description")}set description(s){this.removeTag("description"),s&&this.tags.push(["description",s])}get image(){return this.tagValue("image")}set image(s){this.removeTag("image"),s&&this.tags.push(["image",s])}isEncryptedTagsCacheValid(){return!!(this._encryptedTags&&this.encryptedTagsLength===this.content.length)}async encryptedTags(s=!0){if(s&&this.isEncryptedTagsCacheValid())return this._encryptedTags;if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const o=await this.ndk.signer.user();try{if(this.content.length>0)try{const u=await this.ndk.signer.decrypt(o,this.content),c=JSON.parse(u);return c!=null&&c[0]?(this.encryptedTagsLength=this.content.length,this._encryptedTags=c):(this.encryptedTagsLength=this.content.length,this._encryptedTags=[])}catch{}}catch{}return[]}validateTag(s){return!0}getItems(s){return this.tags.filter(o=>o[0]===s)}get items(){return this.tags.filter(s=>!["d","L","l","title","name","description","published_at","summary","image","thumb","alt","expiration","subject","client"].includes(s[0]))}async addItem(s,o=void 0,u=!1,c="bottom"){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");let h;if(s instanceof NDKEvent)h=[s.tagReference(o)];else if(s instanceof NDKUser)h=s.referenceTags();else if(s instanceof NDKRelay)h=s.referenceTags();else if(Array.isArray(s))h=[s];else throw new Error("Invalid object type");if(o&&h[0].push(o),u){const p=await this.ndk.signer.user(),g=await this.encryptedTags();c==="top"?g.unshift(...h):g.push(...h),this._encryptedTags=g,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(g),await this.encrypt(p)}else c==="top"?this.tags.unshift(...h):this.tags.push(...h);this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItemByValue(s,o=!0){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const u=this.tags.findIndex(g=>g[1]===s);u>=0&&this.tags.splice(u,1);const c=await this.ndk.signer.user(),h=await this.encryptedTags(),p=h.findIndex(g=>g[1]===s);if(p>=0&&(h.splice(p,1),this._encryptedTags=h,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(h),await this.encrypt(c)),o)return this.publishReplaceable();this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItem(s,o){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(o){const u=await this.ndk.signer.user(),c=await this.encryptedTags();c.splice(s,1),this._encryptedTags=c,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(c),await this.encrypt(u)}else this.tags.splice(s,1);return this.created_at=Math.floor(Date.now()/1e3),this.emit("change"),this}has(s){return this.items.some(o=>o[1]===s)}filterForItems(){const s=new Set,o=new Map,u=[];for(const c of this.items)if(c[0]==="e"&&c[1])s.add(c[1]);else if(c[0]==="a"&&c[1]){const[h,p,g]=c[1].split(":");if(!h||!p)continue;const m=`${h}:${p}`,v=o.get(m)||[];v.push(g||""),o.set(m,v)}if(s.size>0&&u.push({ids:Array.from(s)}),o.size>0)for(const[c,h]of o.entries()){const[p,g]=c.split(":");u.push({kinds:[Number.parseInt(p)],authors:[g],"#d":h})}return u}},A(si,"kinds",[10063,30001,10004,10050,10030,10015,10001,10002,10007,10006,10003]),si),lists_default=NDKList,nn,NDKNutzap=(nn=class extends NDKEvent{constructor(s,o){super(s,o);A(this,"debug");A(this,"_proofs",[]);A(this,"sender",this.author);this.kind??(this.kind=9321),this.debug=(s==null?void 0:s.debug.extend("nutzap"))??createDebug5("ndk:nutzap"),this.alt||(this.alt="This is a nutzap");try{const u=this.getMatchingTags("proof");u.length?this._proofs=u.map(c=>JSON.parse(c[1])):this._proofs=JSON.parse(this.content)}catch{return}}static from(s){const o=new nn(s.ndk,s);if(!(!o._proofs||!o._proofs.length))return o}set comment(s){this.content=s??""}get comment(){const s=this.tagValue("comment");return s||this.content}set proofs(s){this._proofs=s,this.tags=this.tags.filter(o=>o[0]!=="proof");for(const o of s)this.tags.push(["proof",JSON.stringify(o)])}get proofs(){return this._proofs}get rawP2pk(){var o;const s=this.proofs[0];try{const u=JSON.parse(s.secret);let c;if(typeof u=="string"?(c=JSON.parse(u),this.debug("stringified payload",s.secret)):typeof u=="object"&&(c=u),Array.isArray(c)&&c[0]==="P2PK"&&c.length>1&&typeof c[1]=="object"&&c[1]!==null||typeof c=="object"&&c!==null&&typeof((o=c[1])==null?void 0:o.data)=="string")return c[1].data}catch(u){this.debug("error parsing p2pk pubkey",u,this.proofs[0])}}get p2pk(){const s=this.rawP2pk;if(s)return s.startsWith("02")?s.slice(2):s}get mint(){return this.tagValue("u")}set mint(s){this.replaceTag(["u",s])}get unit(){let s=this.tagValue("unit")??"sat";return s!=null&&s.startsWith("msat")&&(s="sat"),s}set unit(s){if(this.removeTag("unit"),s!=null&&s.startsWith("msat"))throw new Error("msat is not allowed, use sat denomination instead");s&&this.tag(["unit",s])}get amount(){return this.proofs.reduce((o,u)=>o+u.amount,0)}set target(s){this.tags=this.tags.filter(o=>o[0]!=="p"),s instanceof NDKEvent&&this.tags.push(s.tagReference())}set recipientPubkey(s){this.removeTag("p"),this.tag(["p",s])}get recipientPubkey(){return this.tagValue("p")}get recipient(){const s=this.recipientPubkey;return this.ndk?this.ndk.getUser({pubkey:s}):new NDKUser({pubkey:s})}async toNostrEvent(){this.unit==="msat"&&(this.unit="sat"),this.removeTag("amount"),this.tags.push(["amount",this.amount.toString()]);const s=await super.toNostrEvent();return s.content=this.comment,s}get isValid(){let s=0,o=0,u=0;for(const c of this.tags)c[0]==="e"&&s++,c[0]==="p"&&o++,c[0]==="u"&&u++;return o===1&&u===1&&s<=1&&this.proofs.length>0}},A(nn,"kind",9321),A(nn,"kinds",[nn.kind]),nn),Nn,NDKSimpleGroupMemberList=(Nn=class extends NDKEvent{constructor(s,o){super(s,o);A(this,"relaySet");A(this,"memberSet",new Set);this.kind??(this.kind=39002),this.memberSet=new Set(this.members)}static from(s){return new Nn(s.ndk,s)}get members(){return this.getMatchingTags("p").map(s=>s[1])}hasMember(s){return this.memberSet.has(s)}async publish(s,o,u){return s??(s=this.relaySet),super.publishReplaceable(s,o,u)}},A(Nn,"kind",39002),A(Nn,"kinds",[39002]),Nn),Mn,NDKSimpleGroupMetadata=(Mn=class extends NDKEvent{constructor(n,s){super(n,s),this.kind??(this.kind=39e3)}static from(n){return new Mn(n.ndk,n)}get name(){return this.tagValue("name")}get picture(){return this.tagValue("picture")}get about(){return this.tagValue("about")}get scope(){if(this.getMatchingTags("public").length>0)return"public";if(this.getMatchingTags("public").length>0)return"private"}set scope(n){this.removeTag("public"),this.removeTag("private"),n==="public"?this.tags.push(["public",""]):n==="private"&&this.tags.push(["private",""])}get access(){if(this.getMatchingTags("open").length>0)return"open";if(this.getMatchingTags("closed").length>0)return"closed"}set access(n){this.removeTag("open"),this.removeTag("closed"),n==="open"?this.tags.push(["open",""]):n==="closed"&&this.tags.push(["closed",""])}},A(Mn,"kind",39e3),A(Mn,"kinds",[39e3]),Mn);function strToPosition(r){const[n,s]=r.split(",").map(Number);return{x:n,y:s}}function strToDimension(r){const[n,s]=r.split("x").map(Number);return{width:n,height:s}}var Mt,NDKStorySticker=(Mt=class{constructor(n){A(this,"type");A(this,"value");A(this,"position");A(this,"dimension");A(this,"properties");A(this,"hasValidDimensions",()=>typeof this.dimension.width=="number"&&typeof this.dimension.height=="number"&&!Number.isNaN(this.dimension.width)&&!Number.isNaN(this.dimension.height));A(this,"hasValidPosition",()=>typeof this.position.x=="number"&&typeof this.position.y=="number"&&!Number.isNaN(this.position.x)&&!Number.isNaN(this.position.y));if(Array.isArray(n)){const s=n;if(s[0]!=="sticker"||s.length<5)throw new Error("Invalid sticker tag");this.type=s[1],this.value=s[2],this.position=strToPosition(s[3]),this.dimension=strToDimension(s[4]);const o={};for(let u=5;u<s.length;u++){const[c,...h]=s[u].split(" ");o[c]=h.join(" ")}Object.keys(o).length>0&&(this.properties=o)}else this.type=n,this.value=void 0,this.position={x:0,y:0},this.dimension={width:0,height:0}}static fromTag(n){try{return new Mt(n)}catch{return null}}get style(){var n;return(n=this.properties)==null?void 0:n.style}set style(n){var s;n?this.properties={...this.properties,style:n}:(s=this.properties)==null||delete s.style}get rotation(){var n;return(n=this.properties)!=null&&n.rot?Number.parseFloat(this.properties.rot):void 0}set rotation(n){var s;n!==void 0?this.properties={...this.properties,rot:n.toString()}:(s=this.properties)==null||delete s.rot}get isValid(){return this.hasValidDimensions()&&this.hasValidPosition()}toTag(){if(!this.isValid){const o=[this.hasValidDimensions()?void 0:"dimensions is invalid",this.hasValidPosition()?void 0:"position is invalid"].filter(Boolean);throw new Error(`Invalid sticker: ${o.join(", ")}`)}let n;switch(this.type){case"event":n=this.value.tagId();break;case"pubkey":n=this.value.pubkey;break;default:n=this.value}const s=["sticker",this.type,n,coordinates(this.position),dimension(this.dimension)];if(this.properties)for(const[o,u]of Object.entries(this.properties))s.push(`${o} ${u}`);return s}},A(Mt,"Text","text"),A(Mt,"Pubkey","pubkey"),A(Mt,"Event","event"),A(Mt,"Prompt","prompt"),A(Mt,"Countdown","countdown"),Mt),On,NDKStory=(On=class extends NDKEvent{constructor(s,o){super(s,o);A(this,"_imeta");A(this,"_dimensions");if(this.kind??(this.kind=23),o)for(const u of o.tags)switch(u[0]){case"imeta":this._imeta=mapImetaTag(u);break;case"dim":this.dimensions=strToDimension(u[1]);break}}static from(s){return new On(s.ndk,s)}get isValid(){return!!this.imeta}get imeta(){return this._imeta}set imeta(s){this._imeta=s,this.tags=this.tags.filter(o=>o[0]!=="imeta"),s&&this.tags.push(imetaTagToTag(s))}get dimensions(){const s=this.tagValue("dim");if(s)return strToDimension(s)}set dimensions(s){this.removeTag("dim"),s&&this.tags.push(["dim",`${s.width}x${s.height}`])}get duration(){const s=this.tagValue("dur");if(s)return Number.parseInt(s)}set duration(s){this.removeTag("dur"),s!==void 0&&this.tags.push(["dur",s.toString()])}get stickers(){const s=[];for(const o of this.tags){if(o[0]!=="sticker"||o.length<5)continue;const u=NDKStorySticker.fromTag(o);u&&s.push(u)}return s}addSticker(s){let o;if(s instanceof NDKStorySticker)o=s;else{const u=["sticker",s.type,typeof s.value=="string"?s.value:"",coordinates(s.position),dimension(s.dimension)];if(s.properties)for(const[c,h]of Object.entries(s.properties))u.push(`${c} ${h}`);o=new NDKStorySticker(u),o.value=s.value}o.type==="pubkey"?this.tag(o.value):o.type==="event"&&this.tag(o.value),this.tags.push(o.toTag())}removeSticker(s){const o=this.stickers;if(s<0||s>=o.length)return;let u=0;for(let c=0;c<this.tags.length;c++)if(this.tags[c][0]==="sticker"){if(u===s){this.tags.splice(c,1);break}u++}}},A(On,"kind",23),A(On,"kinds",[23]),On),coordinates=r=>`${r.x},${r.y}`,dimension=r=>`${r.width}x${r.height}`,possibleIntervalFrequencies=["daily","weekly","monthly","quarterly","yearly"];function newAmount(r,n,s){return["amount",r.toString(),n,s]}function parseTagToSubscriptionAmount(r){const n=Number.parseInt(r[1]);if(Number.isNaN(n)||n===void 0||n===null||n<=0)return;const s=r[2];if(s===void 0||s==="")return;const o=r[3];if(o!==void 0&&possibleIntervalFrequencies.includes(o))return{amount:n,currency:s,term:o}}var Dn,NDKSubscriptionTier=(Dn=class extends NDKArticle{constructor(n,s){const o=(s==null?void 0:s.kind)??37001;super(n,s),this.kind=o}static from(n){return new Dn(n.ndk,n)}get perks(){return this.getMatchingTags("perk").map(n=>n[1]).filter(n=>n!==void 0)}addPerk(n){this.tags.push(["perk",n])}get amounts(){return this.getMatchingTags("amount").map(n=>parseTagToSubscriptionAmount(n)).filter(n=>n!==void 0)}addAmount(n,s,o){this.tags.push(newAmount(n,s,o))}set relayUrl(n){this.tags.push(["r",n])}get relayUrls(){return this.getMatchingTags("r").map(n=>n[1]).filter(n=>n!==void 0)}get verifierPubkey(){return this.tagValue("p")}set verifierPubkey(n){this.removeTag("p"),n&&this.tags.push(["p",n])}get isValid(){return this.title!==void 0&&this.amounts.length>0}},A(Dn,"kind",37001),A(Dn,"kinds",[37001]),Dn),Ln,NDKVideo=(Ln=class extends NDKEvent{constructor(){super(...arguments);A(this,"_imetas")}static from(s){return new Ln(s.ndk,s.rawEvent())}get title(){return this.tagValue("title")}set title(s){this.removeTag("title"),s&&this.tags.push(["title",s])}get thumbnail(){var o;let s;return this.imetas&&this.imetas.length>0&&(s=(o=this.imetas[0].image)==null?void 0:o[0]),s??this.tagValue("thumb")}get imetas(){return this._imetas?this._imetas:(this._imetas=this.tags.filter(s=>s[0]==="imeta").map(mapImetaTag),this._imetas)}set imetas(s){this._imetas=s,this.tags=this.tags.filter(o=>o[0]!=="imeta"),this.tags.push(...s.map(imetaTagToTag))}get url(){return this.imetas&&this.imetas.length>0?this.imetas[0].url:this.tagValue("url")}get published_at(){const s=this.tagValue("published_at");if(s)return Number.parseInt(s)}async generateTags(){var s,o;if(super.generateTags(),!this.kind&&(o=(s=this.imetas)==null?void 0:s[0])!=null&&o.dim){const[u,c]=this.imetas[0].dim.split("x"),h=u&&c&&Number.parseInt(u)<Number.parseInt(c);this.duration&&this.duration<120&&h?this.kind=22:this.kind=21}return super.generateTags()}get duration(){const s=this.tagValue("duration");if(s)return Number.parseInt(s)}set duration(s){this.removeTag("duration"),s!==void 0&&this.tags.push(["duration",Math.floor(s).toString()])}},A(Ln,"kind",21),A(Ln,"kinds",[34235,34236,22,21]),Ln),Hn,NDKWiki=(Hn=class extends NDKArticle{static from(n){return new Hn(n.ndk,n.rawEvent())}get isDefered(){return this.hasTag("a","defer")}get deferedId(){return this.tagValue("a","defer")}set defer(n){this.removeTag("a","defer"),this.tag(n,"defer")}},A(Hn,"kind",30818),A(Hn,"kinds",[30818]),Hn),ai,NDKBlossomList=(ai=class extends NDKEvent{constructor(n,s){super(n,s),this.kind??(this.kind=10063)}static from(n){return new ai(n.ndk,n.rawEvent())}get servers(){return this.tags.filter(n=>n[0]==="server").map(n=>n[1])}set servers(n){this.tags=this.tags.filter(s=>s[0]!=="server");for(const s of n)this.tags.push(["server",s])}get default(){const n=this.servers;return n.length>0?n[0]:void 0}set default(n){if(!n)return;const o=this.servers.filter(u=>u!==n);this.servers=[n,...o]}addServer(n){if(!n)return;const s=this.servers;s.includes(n)||(this.servers=[...s,n])}removeServer(n){if(!n)return;const s=this.servers;this.servers=s.filter(o=>o!==n)}},A(ai,"kinds",[10063]),ai);function wrapEvent(r){const n=new Map;for(const o of[NDKImage,NDKVideo,NDKCashuMintList,NDKArticle,NDKHighlight,NDKWiki,NDKNutzap,NDKSimpleGroupMemberList,NDKSimpleGroupMetadata,NDKSubscriptionTier,NDKCashuToken,NDKList,NDKStory,NDKBlossomList])for(const u of o.kinds)n.set(u,o);const s=n.get(r.kind);return s?s.from(r):r}function queryFullyFilled(r){return!!(filterIncludesIds(r.filter)&&resultHasAllRequestedIds(r))}function filterIncludesIds(r){return!!r.ids}function resultHasAllRequestedIds(r){const n=r.filter.ids;return!!n&&n.length===r.eventFirstSeen.size}function filterFromId(r){let n;if(r.match(NIP33_A_REGEX)){const[s,o,u]=r.split(":"),c={authors:[o],kinds:[Number.parseInt(s)]};return u&&(c["#d"]=[u]),c}if(r.match(BECH32_REGEX))try{switch(n=nip19_exports.decode(r),n.type){case"nevent":{const s={ids:[n.data.id]};return n.data.author&&(s.authors=[n.data.author]),n.data.kind&&(s.kinds=[n.data.kind]),s}case"note":return{ids:[n.data]};case"naddr":{const s={authors:[n.data.pubkey],kinds:[n.data.kind]};return n.data.identifier&&(s["#d"]=[n.data.identifier]),s}}}catch(s){console.error("Error decoding",r,s)}return{ids:[r]}}function isNip33AValue(r){return r.match(NIP33_A_REGEX)!==null}var NIP33_A_REGEX=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,BECH32_REGEX=/^n(event|ote|profile|pub|addr)1[\d\w]+$/;function relaysFromBech32(r,n){try{const s=nip19_exports.decode(r);if(["naddr","nevent"].includes(s==null?void 0:s.type)){const o=s.data;if(o!=null&&o.relays)return o.relays.map(u=>new NDKRelay(u,n.relayAuthDefaultPolicy,n))}}catch{}return[]}var defaultOpts={closeOnEose:!1,cacheUsage:"CACHE_FIRST",dontSaveToCache:!1,groupable:!0,groupableDelay:100,groupableDelayType:"at-most",cacheUnconstrainFilter:["limit","since","until"]},NDKSubscription=class extends libExports.EventEmitter{constructor(n,s,o,u){super();A(this,"subId");A(this,"filters");A(this,"opts");A(this,"pool");A(this,"skipVerification",!1);A(this,"skipValidation",!1);A(this,"relayFilters");A(this,"relaySet");A(this,"ndk");A(this,"debug");A(this,"eventFirstSeen",new Map);A(this,"eosesSeen",new Set);A(this,"lastEventReceivedAt");A(this,"mostRecentCacheEventTimestamp");A(this,"internalId");A(this,"closeOnEose");A(this,"poolMonitor");A(this,"skipOptimisticPublishEvent",!1);A(this,"cacheUnconstrainFilter");A(this,"onStopped");A(this,"eoseTimeout");A(this,"eosed",!1);this.ndk=n,this.opts={...defaultOpts,...o||{}},this.pool=this.opts.pool||n.pool,this.filters=Array.isArray(s)?s:[s],this.subId=u||this.opts.subId,this.internalId=Math.random().toString(36).substring(7),this.debug=n.debug.extend(`subscription[${this.opts.subId??this.internalId}]`),this.opts.relaySet?this.relaySet=this.opts.relaySet:this.opts.relayUrls&&(this.relaySet=NDKRelaySet.fromRelayUrls(this.opts.relayUrls,this.ndk)),this.skipVerification=this.opts.skipVerification||!1,this.skipValidation=this.opts.skipValidation||!1,this.closeOnEose=this.opts.closeOnEose||!1,this.skipOptimisticPublishEvent=this.opts.skipOptimisticPublishEvent||!1,this.cacheUnconstrainFilter=this.opts.cacheUnconstrainFilter}relaysMissingEose(){var s;return this.relayFilters?Array.from((s=this.relayFilters)==null?void 0:s.keys()).filter(o=>!this.eosesSeen.has(this.pool.getRelay(o,!1,!1))):[]}get filter(){return this.filters[0]}get groupableDelay(){var n;if(this.isGroupable())return(n=this.opts)==null?void 0:n.groupableDelay}get groupableDelayType(){var n;return((n=this.opts)==null?void 0:n.groupableDelayType)||"at-most"}isGroupable(){var n;return((n=this.opts)==null?void 0:n.groupable)||!1}shouldQueryCache(){var s;return this.opts.addSinceFromCache?!0:((s=this.opts)==null?void 0:s.cacheUsage)==="ONLY_RELAY"?!1:(this.filters.some(o=>{var u;return(u=o.kinds)==null?void 0:u.some(c=>kindIsEphemeral(c))}),!0)}shouldQueryRelays(){var n;return((n=this.opts)==null?void 0:n.cacheUsage)!=="ONLY_CACHE"}shouldWaitForCache(){var n;return this.opts.addSinceFromCache?!0:!!this.opts.closeOnEose&&!!((n=this.ndk.cacheAdapter)!=null&&n.locking)&&this.opts.cacheUsage!=="PARALLEL"}start(n=!0){let s;const o=c=>{if(n)for(const h of c)(!this.mostRecentCacheEventTimestamp||h.created_at>this.mostRecentCacheEventTimestamp)&&(this.mostRecentCacheEventTimestamp=h.created_at),this.eventReceived(h,void 0,!0,!1);else{s=[];for(const h of c){(!this.mostRecentCacheEventTimestamp||h.created_at>this.mostRecentCacheEventTimestamp)&&(this.mostRecentCacheEventTimestamp=h.created_at),h.ndk=this.ndk;const p=this.opts.wrap?wrapEvent(h):h;if(!p)break;if(p instanceof Promise){p.then(g=>{this.emitEvent(!1,g,void 0,!0,!1)});break}this.eventFirstSeen.set(p.id,Date.now()),s.push(p)}}},u=()=>{this.shouldQueryRelays()?(this.startWithRelays(),this.startPoolMonitor()):this.emit("eose",this)};return this.shouldQueryCache()?(s=this.startWithCache(),s instanceof Promise?this.shouldWaitForCache()?(s.then(c=>{if(o(c),queryFullyFilled(this)){this.emit("eose",this);return}u()}),null):(s.then(c=>{o(c)}),u(),null):(o(s),queryFullyFilled(this)?this.emit("eose",this):u(),s)):(u(),null)}startPoolMonitor(){this.debug.extend("pool-monitor"),this.poolMonitor=n=>{var o,u;if((o=this.relayFilters)!=null&&o.has(n.url))return;calculateRelaySetsFromFilters(this.ndk,this.filters,this.pool).get(n.url)&&((u=this.relayFilters)==null||u.set(n.url,this.filters),n.subscribe(this,this.filters))},this.pool.on("relay:connect",this.poolMonitor)}stop(){var n;this.emit("close",this),this.poolMonitor&&this.pool.off("relay:connect",this.poolMonitor),(n=this.onStopped)==null||n.call(this)}hasAuthorsFilter(){return this.filters.some(n=>{var s;return(s=n.authors)==null?void 0:s.length})}startWithCache(){var n;return(n=this.ndk.cacheAdapter)!=null&&n.query?this.ndk.cacheAdapter.query(this):[]}startWithRelays(){let n=this.filters;if(this.opts.addSinceFromCache&&this.mostRecentCacheEventTimestamp){const s=this.mostRecentCacheEventTimestamp+1;n=n.map(o=>({...o,since:Math.max(o.since||0,s)}))}if(!this.relaySet||this.relaySet.relays.size===0)this.relayFilters=calculateRelaySetsFromFilters(this.ndk,n,this.pool);else{this.relayFilters=new Map;for(const s of this.relaySet.relays)this.relayFilters.set(s.url,n)}for(const[s,o]of this.relayFilters)this.pool.getRelay(s,!0,!0,o).subscribe(this,o)}eventReceived(n,s,o=!1,u=!1){var g;const c=n.id,h=this.eventFirstSeen.has(c);let p;if(n instanceof NDKEvent&&(p=n),h){const m=Date.now()-(this.eventFirstSeen.get(c)||0);if(this.emit("event:dup",n,s,m,this,o,u),s){const v=verifiedSignatures.get(c);if(v&&typeof v=="string")if(n.sig===v)s.addValidatedEvent();else{const b=n instanceof NDKEvent?n:new NDKEvent(this.ndk,n);this.ndk.reportInvalidSignature(b,s)}}}else{if(p??(p=new NDKEvent(this.ndk,n)),p.ndk=this.ndk,p.relay=s,!o&&!u){if(!this.skipValidation&&!p.isValid){this.debug("Event failed validation %s from relay %s",c,s==null?void 0:s.url);return}if(s)if(s.shouldValidateEvent()&&!this.skipVerification){if(p.relay=s,!this.ndk.asyncSigVerification){if(!p.verifySignature(!0)){this.debug("Event failed signature validation",n),this.ndk.reportInvalidSignature(p,s);return}s.addValidatedEvent()}}else s.addNonValidatedEvent();this.ndk.cacheAdapter&&!this.opts.dontSaveToCache&&this.ndk.cacheAdapter.setEvent(p,this.filters,s)}(!u||this.skipOptimisticPublishEvent!==!0)&&(this.emitEvent(((g=this.opts)==null?void 0:g.wrap)??!1,p,s,o,u),this.eventFirstSeen.set(c,Date.now()))}this.lastEventReceivedAt=Date.now()}emitEvent(n,s,o,u,c){const h=n?wrapEvent(s):s;h instanceof Promise?h.then(p=>this.emitEvent(!1,p,o,u,c)):h&&this.emit("event",h,o,this,u,c)}closedReceived(n,s){this.emit("closed",n,s)}eoseReceived(n){var h;this.debug("EOSE received from %s",n.url),this.eosesSeen.add(n);let s=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const o=this.eosesSeen.size===((h=this.relayFilters)==null?void 0:h.size),u=queryFullyFilled(this),c=p=>{var g;this.debug("Performing EOSE: %s %d",p,this.eosed),!this.eosed&&(this.eoseTimeout&&clearTimeout(this.eoseTimeout),this.emit("eose",this),this.eosed=!0,(g=this.opts)!=null&&g.closeOnEose&&this.stop())};if(u||o)c("query filled or seen all");else if(this.relayFilters){let p=1e3;const g=new Set(this.pool.connectedRelays().map(b=>b.url)),m=Array.from(this.relayFilters.keys()).filter(b=>g.has(b));if(m.length===0){this.debug("No connected relays, waiting for all relays to connect",Array.from(this.relayFilters.keys()).join(", "));return}const v=this.eosesSeen.size/m.length;if(this.debug("Percentage of relays that have sent EOSE",{subId:this.subId,percentageOfRelaysThatHaveSentEose:v,seen:this.eosesSeen.size,total:m.length}),this.eosesSeen.size>=2&&v>=.5){if(p=p*(1-v),p===0){c("time to wait was 0");return}this.eoseTimeout&&clearTimeout(this.eoseTimeout);const b=()=>{s=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,s!==void 0&&s<20?this.eoseTimeout=setTimeout(b,p):c(`send eose timeout: ${p}`)};this.eoseTimeout=setTimeout(b,p)}}}},kindIsEphemeral=r=>r>=2e4&&r<3e4;async function follows(r,n,s=3){var u,c;if(!this.ndk)throw new Error("NDK not set");const o=await this.ndk.fetchEvent({kinds:[s],authors:[this.pubkey]},r||{groupable:!1});if(o){const h=new Set;return o.tags.forEach(p=>{p[0]==="p"&&h.add(p[1])}),n&&((c=(u=this.ndk)==null?void 0:u.outboxTracker)==null||c.trackUsers(Array.from(h))),[...h].reduce((p,g)=>{const m=new NDKUser({pubkey:g});return m.ndk=this.ndk,p.add(m),p},new Set)}return new Set}var NIP05_REGEX=/^(?:([\w.+-]+)@)?([\w.-]+)$/;async function getNip05For(r,n,s=fetch,o={}){return await r.queuesNip05.add({id:n,func:async()=>{var g,m,v;if((g=r.cacheAdapter)!=null&&g.loadNip05){const b=await r.cacheAdapter.loadNip05(n);if(b!=="missing"){if(b){const _=new NDKUser({pubkey:b.pubkey,relayUrls:b.relays,nip46Urls:b.nip46});return _.ndk=r,_}if(o.cache!=="no-cache")return null}}const u=n.match(NIP05_REGEX);if(!u)return null;const[c,h="_",p]=u;try{const b=await s(`https://${p}/.well-known/nostr.json?name=${h}`,o),{names:_,relays:C,nip46:z}=parseNIP05Result(await b.json()),x=_[h.toLowerCase()];let R=null;return x&&(R={pubkey:x,relays:C==null?void 0:C[x],nip46:z==null?void 0:z[x]}),(m=r==null?void 0:r.cacheAdapter)!=null&&m.saveNip05&&r.cacheAdapter.saveNip05(n,R),R}catch(b){return(v=r==null?void 0:r.cacheAdapter)!=null&&v.saveNip05&&(r==null||r.cacheAdapter.saveNip05(n,null)),console.error("Failed to fetch NIP05 for",n,b),null}}})}function parseNIP05Result(r){const n={names:{}};for(const[s,o]of Object.entries(r.names))typeof s=="string"&&typeof o=="string"&&(n.names[s.toLowerCase()]=o);if(r.relays){n.relays={};for(const[s,o]of Object.entries(r.relays))typeof s=="string"&&Array.isArray(o)&&(n.relays[s]=o.filter(u=>typeof u=="string"))}if(r.nip46){n.nip46={};for(const[s,o]of Object.entries(r.nip46))typeof s=="string"&&Array.isArray(o)&&(n.nip46[s]=o.filter(u=>typeof u=="string"))}return n}function profileFromEvent(r){const n={};let s;try{s=JSON.parse(r.content)}catch(o){throw new Error(`Failed to parse profile event: ${o}`)}n.profileEvent=JSON.stringify(r.rawEvent());for(const o of Object.keys(s))switch(o){case"name":n.name=s.name;break;case"display_name":n.displayName=s.display_name;break;case"image":case"picture":n.picture=s.picture||s.image,n.image=n.picture;break;case"banner":n.banner=s.banner;break;case"bio":n.bio=s.bio;break;case"nip05":n.nip05=s.nip05;break;case"lud06":n.lud06=s.lud06;break;case"lud16":n.lud16=s.lud16;break;case"about":n.about=s.about;break;case"website":n.website=s.website;break;default:n[o]=s[o];break}return n.created_at=r.created_at,n}function serializeProfile(r){const n={};for(const[s,o]of Object.entries(r))switch(s){case"username":case"name":n.name=o;break;case"displayName":n.display_name=o;break;case"image":case"picture":n.picture=o;break;case"bio":case"about":n.about=o;break;default:n[s]=o;break}return JSON.stringify(n)}var NDKUser=class yh{constructor(n){A(this,"ndk");A(this,"profile");A(this,"profileEvent");A(this,"_npub");A(this,"_pubkey");A(this,"relayUrls",[]);A(this,"nip46Urls",[]);A(this,"follows",follows.bind(this));if(n.npub&&(this._npub=n.npub),n.hexpubkey&&(this._pubkey=n.hexpubkey),n.pubkey&&(this._pubkey=n.pubkey),n.relayUrls&&(this.relayUrls=n.relayUrls),n.nip46Urls&&(this.nip46Urls=n.nip46Urls),n.nprofile)try{const s=nip19_exports.decode(n.nprofile);s.type==="nprofile"&&(this._pubkey=s.data.pubkey,s.data.relays&&s.data.relays.length>0&&this.relayUrls.push(...s.data.relays))}catch(s){console.error("Failed to decode nprofile",s)}}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("pubkey not set");this._npub=nip19_exports.npubEncode(this.pubkey)}return this._npub}get nprofile(){var s,o;const n=(o=(s=this.profileEvent)==null?void 0:s.onRelays)==null?void 0:o.map(u=>u.url);return nip19_exports.nprofileEncode({pubkey:this.pubkey,relays:n})}set npub(n){this._npub=n}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=nip19_exports.decode(this.npub).data}return this._pubkey}set pubkey(n){this._pubkey=n}filter(){return{"#p":[this.pubkey]}}async getZapInfo(n){if(!this.ndk)throw new Error("No NDK instance found");const s=async h=>{if(!n)return h;let p;const g=new Promise((m,v)=>{p=setTimeout(()=>v(new Error("Timeout")),n)});try{const m=await Promise.race([h,g]);return p&&clearTimeout(p),m}catch(m){if(m instanceof Error&&m.message==="Timeout")try{return await h}catch{return}return}},[o,u]=await Promise.all([s(this.fetchProfile()),s(this.ndk.fetchEvent({kinds:[10019],authors:[this.pubkey]}))]),c=new Map;if(u){const h=NDKCashuMintList.from(u);h.mints.length>0&&c.set("nip61",{mints:h.mints,relays:h.relays,p2pk:h.p2pk})}if(o){const{lud06:h,lud16:p}=o;c.set("nip57",{lud06:h,lud16:p})}return c}static async fromNip05(n,s,o=!1){if(!s)throw new Error("No NDK instance found");const u={};o&&(u.cache="no-cache");const c=await getNip05For(s,n,s==null?void 0:s.httpFetch,u);if(c){const h=new yh({pubkey:c.pubkey,relayUrls:c.relays,nip46Urls:c.nip46});return h.ndk=s,h}}async fetchProfile(n,s=!1){if(!this.ndk)throw new Error("NDK not set");let o=null;if(this.ndk.cacheAdapter&&(this.ndk.cacheAdapter.fetchProfile||this.ndk.cacheAdapter.fetchProfileSync)&&(n==null?void 0:n.cacheUsage)!=="ONLY_RELAY"){let u=null;if(this.ndk.cacheAdapter.fetchProfileSync?u=this.ndk.cacheAdapter.fetchProfileSync(this.pubkey):this.ndk.cacheAdapter.fetchProfile&&(u=await this.ndk.cacheAdapter.fetchProfile(this.pubkey)),u)return this.profile=u,u}return n??(n={}),n.cacheUsage??(n.cacheUsage="ONLY_RELAY"),n.closeOnEose??(n.closeOnEose=!0),n.groupable??(n.groupable=!0),n.groupableDelay??(n.groupableDelay=250),o||(o=await this.ndk.fetchEvent({kinds:[0],authors:[this.pubkey]},n)),o?(this.profile=profileFromEvent(o),s&&this.profile&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.saveProfile&&this.ndk.cacheAdapter.saveProfile(this.pubkey,this.profile),this.profile):null}async followSet(n,s,o=3){const u=await this.follows(n,s,o);return new Set(Array.from(u).map(c=>c.pubkey))}tagReference(){return["p",this.pubkey]}referenceTags(n){const s=[["p",this.pubkey]];return n&&s[0].push("",n),s}async publish(){if(!this.ndk)throw new Error("No NDK instance found");if(!this.profile)throw new Error("No profile available");this.ndk.assertSigner(),await new NDKEvent(this.ndk,{kind:0,content:serializeProfile(this.profile)}).publish()}async follow(n,s,o=3){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),s||(s=await this.follows(void 0,void 0,o)),s.has(n))return!1;s.add(n);const u=new NDKEvent(this.ndk,{kind:o});for(const c of s)u.tag(c);return await u.publish(),!0}async unfollow(n,s,o=3){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),s||(s=await this.follows(void 0,void 0,o));const u=new Set;let c=!1;for(const p of s)p.pubkey!==n.pubkey?u.add(p):c=!0;if(!c)return!1;const h=new NDKEvent(this.ndk,{kind:o});for(const p of u)h.tag(p);return await h.publish()}async validateNip05(n){if(!this.ndk)throw new Error("No NDK instance found");const s=await getNip05For(this.ndk,n);return s===null?null:s.pubkey===this.pubkey}},READ_MARKER="read",WRITE_MARKER="write",NDKRelayList=class ph extends NDKEvent{constructor(n,s){super(n,s),this.kind??(this.kind=10002)}static from(n){return new ph(n.ndk,n.rawEvent())}get readRelayUrls(){return this.tags.filter(n=>n[0]==="r"||n[0]==="relay").filter(n=>!n[2]||n[2]&&n[2]===READ_MARKER).map(n=>tryNormalizeRelayUrl(n[1])).filter(n=>!!n)}set readRelayUrls(n){for(const s of n)this.tags.push(["r",s,READ_MARKER])}get writeRelayUrls(){return this.tags.filter(n=>n[0]==="r"||n[0]==="relay").filter(n=>!n[2]||n[2]&&n[2]===WRITE_MARKER).map(n=>tryNormalizeRelayUrl(n[1])).filter(n=>!!n)}set writeRelayUrls(n){for(const s of n)this.tags.push(["r",s,WRITE_MARKER])}get bothRelayUrls(){return this.tags.filter(n=>n[0]==="r"||n[0]==="relay").filter(n=>!n[2]).map(n=>n[1])}set bothRelayUrls(n){for(const s of n)this.tags.push(["r",s])}get relays(){return this.tags.filter(n=>n[0]==="r"||n[0]==="relay").map(n=>n[1])}get relaySet(){if(!this.ndk)throw new Error("NDKRelayList has no NDK instance");return new NDKRelaySet(new Set(this.relays.map(n=>{var s;return(s=this.ndk)==null?void 0:s.pool.getRelay(n)}).filter(n=>!!n)),this.ndk)}};function relayListFromKind3(r,n){try{const s=JSON.parse(n.content),o=new NDKRelayList(r),u=new Set,c=new Set;for(let[h,p]of Object.entries(s)){try{h=normalizeRelayUrl(h)}catch{continue}if(!p)u.add(h),c.add(h);else{const g=p;g.write&&c.add(h),g.read&&u.add(h)}}return o.readRelayUrls=Array.from(u),o.writeRelayUrls=Array.from(c),o}catch{}}var signerRegistry=new Map;function registerSigner(r,n){signerRegistry.set(r,n)}var NDKPrivateKeySigner=class vl{constructor(n,s){A(this,"_user");A(this,"_privateKey");A(this,"_pubkey");if(typeof n=="string")if(n.startsWith("nsec1")){const{type:o,data:u}=nip19_exports.decode(n);if(o==="nsec")this._privateKey=u;else throw new Error("Invalid private key provided.")}else if(n.length===64)this._privateKey=hexToBytes$1(n);else throw new Error("Invalid private key provided.");else this._privateKey=n;this._pubkey=getPublicKey(this._privateKey),s&&(this._user=s.getUser({pubkey:this._pubkey})),this._user??(this._user=new NDKUser({pubkey:this._pubkey}))}get privateKey(){if(!this._privateKey)throw new Error("Not ready");return bytesToHex$1(this._privateKey)}get pubkey(){if(!this._pubkey)throw new Error("Not ready");return this._pubkey}get nsec(){if(!this._privateKey)throw new Error("Not ready");return nip19_exports.nsecEncode(this._privateKey)}get npub(){if(!this._pubkey)throw new Error("Not ready");return nip19_exports.npubEncode(this._pubkey)}static generate(){const n=generateSecretKey();return new vl(n)}async blockUntilReady(){return this._user}async user(){return this._user}get userSync(){return this._user}async sign(n){if(!this._privateKey)throw Error("Attempted to sign without a private key");return finalizeEvent(n,this._privateKey).sig}async encryptionEnabled(n){const s=[];return(!n||n==="nip04")&&s.push("nip04"),(!n||n==="nip44")&&s.push("nip44"),s}async encrypt(n,s,o){if(!this._privateKey||!this.privateKey)throw Error("Attempted to encrypt without a private key");const u=n.pubkey;if(o==="nip44"){const c=nip44_exports.v2.utils.getConversationKey(this._privateKey,u);return await nip44_exports.v2.encrypt(s,c)}return await nip04_exports.encrypt(this._privateKey,u,s)}async decrypt(n,s,o){if(!this._privateKey||!this.privateKey)throw Error("Attempted to decrypt without a private key");const u=n.pubkey;if(o==="nip44"){const c=nip44_exports.v2.utils.getConversationKey(this._privateKey,u);return await nip44_exports.v2.decrypt(s,c)}return await nip04_exports.decrypt(this._privateKey,u,s)}toPayload(){if(!this._privateKey)throw new Error("Private key not available");const n={type:"private-key",payload:this.privateKey};return JSON.stringify(n)}static async fromPayload(n,s){const o=JSON.parse(n);if(o.type!=="private-key")throw new Error(`Invalid payload type: expected 'private-key', got ${o.type}`);if(!o.payload||typeof o.payload!="string")throw new Error("Invalid payload content for private-key signer");return new vl(o.payload,s)}};registerSigner("private-key",NDKPrivateKeySigner);function disconnect(r,n){return n??(n=createDebug5("ndk:relay:auth-policies:disconnect")),async s=>{n==null||n(`Relay ${s.url} requested authentication, disconnecting`),r.removeRelay(s.url)}}async function signAndAuth(r,n,s,o,u,c){try{await r.sign(s),u(r)}catch(h){o==null||o(`Failed to publish auth event to relay ${n.url}`,h),c(r)}}function signIn({ndk:r,signer:n,debug:s}={}){return s??(s=createDebug5("ndk:auth-policies:signIn")),async(o,u)=>{s==null||s(`Relay ${o.url} requested authentication, signing in`);const c=new NDKEvent(r);return c.kind=22242,c.tags=[["relay",o.url],["challenge",u]],n??(n=r==null?void 0:r.signer),new Promise(async(h,p)=>{n?await signAndAuth(c,o,n,s,h,p):r==null||r.once("signer:ready",async g=>{await signAndAuth(c,o,g,s,h,p)})})}}var NDKRelayAuthPolicies={disconnect,signIn},NDKNip07Signer=class gh{constructor(n=1e3,s){A(this,"_userPromise");A(this,"encryptionQueue",[]);A(this,"encryptionProcessing",!1);A(this,"debug");A(this,"waitTimeout");A(this,"_pubkey");A(this,"ndk");A(this,"_user");this.debug=createDebug5("ndk:nip07"),this.waitTimeout=n,this.ndk=s}get pubkey(){if(!this._pubkey)throw new Error("Not ready");return this._pubkey}async blockUntilReady(){var o;await this.waitForExtension();const n=await((o=window.nostr)==null?void 0:o.getPublicKey());if(!n)throw new Error("User rejected access");this._pubkey=n;let s;return this.ndk?s=this.ndk.getUser({pubkey:n}):s=new NDKUser({pubkey:n}),this._user=s,s}async user(){return this._userPromise||(this._userPromise=this.blockUntilReady()),this._userPromise}get userSync(){if(!this._user)throw new Error("User not ready");return this._user}async sign(n){var o;await this.waitForExtension();const s=await((o=window.nostr)==null?void 0:o.signEvent(n));if(!s)throw new Error("Failed to sign event");return s.sig}async relays(n){var u,c;await this.waitForExtension();const s=await((c=(u=window.nostr)==null?void 0:u.getRelays)==null?void 0:c.call(u))||{},o=[];for(const h of Object.keys(s))s[h].read&&s[h].write&&o.push(h);return o.map(h=>new NDKRelay(h,n==null?void 0:n.relayAuthDefaultPolicy,n))}async encryptionEnabled(n){var o,u;const s=[];return(!n||n==="nip04")&&((o=window.nostr)!=null&&o.nip04)&&s.push("nip04"),(!n||n==="nip44")&&((u=window.nostr)!=null&&u.nip44)&&s.push("nip44"),s}async encrypt(n,s,o="nip04"){if(!await this.encryptionEnabled(o))throw new Error(`${o}encryption is not available from your browser extension`);await this.waitForExtension();const u=n.pubkey;return this.queueEncryption(o,"encrypt",u,s)}async decrypt(n,s,o="nip04"){if(!await this.encryptionEnabled(o))throw new Error(`${o}encryption is not available from your browser extension`);await this.waitForExtension();const u=n.pubkey;return this.queueEncryption(o,"decrypt",u,s)}async queueEncryption(n,s,o,u){return new Promise((c,h)=>{this.encryptionQueue.push({scheme:n,method:s,counterpartyHexpubkey:o,value:u,resolve:c,reject:h}),this.encryptionProcessing||this.processEncryptionQueue()})}async processEncryptionQueue(n,s=0){var v,b;if(!n&&this.encryptionQueue.length===0){this.encryptionProcessing=!1;return}this.encryptionProcessing=!0;const o=n||this.encryptionQueue.shift();if(!o){this.encryptionProcessing=!1;return}const{scheme:u,method:c,counterpartyHexpubkey:h,value:p,resolve:g,reject:m}=o;this.debug("Processing encryption queue item",{method:c,counterpartyHexpubkey:h,value:p});try{const _=await((b=(v=window.nostr)==null?void 0:v[u])==null?void 0:b[c](h,p));if(!_)throw new Error("Failed to encrypt/decrypt");g(_)}catch(_){const C=_ instanceof Error?_.message:String(_);if(C.includes("call already executing")&&s<5){this.debug("Retrying encryption queue item",{method:c,counterpartyHexpubkey:h,value:p,retries:s}),setTimeout(()=>{this.processEncryptionQueue(o,s+1)},50*s);return}m(_ instanceof Error?_:new Error(C))}this.processEncryptionQueue()}waitForExtension(){return new Promise((n,s)=>{if(window.nostr){n();return}let o;const u=setInterval(()=>{window.nostr&&(clearTimeout(o),clearInterval(u),n())},100);o=setTimeout(()=>{clearInterval(u),s(new Error("NIP-07 extension not available"))},this.waitTimeout)})}toPayload(){return JSON.stringify({type:"nip07",payload:""})}static async fromPayload(n,s){const o=JSON.parse(n);if(o.type!=="nip07")throw new Error(`Invalid payload type: expected 'nip07', got ${o.type}`);return new gh(void 0,s)}};registerSigner("nip07",NDKNip07Signer);var NDKNostrRpc=class extends libExports.EventEmitter{constructor(n,s,o,u){super();A(this,"ndk");A(this,"signer");A(this,"relaySet");A(this,"debug");A(this,"encryptionType","nip04");A(this,"pool");if(this.ndk=n,this.signer=s,u){this.pool=new NDKPool(u,[],n,{debug:o.extend("rpc-pool"),name:"Nostr RPC"}),this.relaySet=new NDKRelaySet(new Set,n,this.pool);for(const c of u){const h=this.pool.getRelay(c,!1,!1);h.authPolicy=NDKRelayAuthPolicies.signIn({ndk:n,signer:s,debug:o}),this.relaySet.addRelay(h),h.connect()}}this.debug=o.extend("rpc")}subscribe(n){const s=this.ndk.subscribe(n,{closeOnEose:!1,groupable:!1,cacheUsage:"ONLY_RELAY",pool:this.pool,relaySet:this.relaySet},!1);return s.on("event",async o=>{console.log("Received event",o.rawEvent());try{const u=await this.parseEvent(o);u.method?(console.log("Received request",u),this.emit("request",u)):(console.log("Received response",u),this.emit(`response-${u.id}`,u),this.emit("response",u))}catch(u){this.debug("error parsing event",u,o.rawEvent())}}),new Promise(o=>{s.on("eose",()=>{this.debug("eosed"),o(s)}),s.start()})}async parseEvent(n){this.encryptionType==="nip44"&&n.content.includes("?iv=")?this.encryptionType="nip04":this.encryptionType==="nip04"&&!n.content.includes("?iv=")&&(this.encryptionType="nip44");const s=this.ndk.getUser({pubkey:n.pubkey});s.ndk=this.ndk;let o;try{o=await this.signer.decrypt(s,n.content,this.encryptionType)}catch{const b=this.encryptionType==="nip04"?"nip44":"nip04";o=await this.signer.decrypt(s,n.content,b),this.encryptionType=b}const u=JSON.parse(o),{id:c,method:h,params:p,result:g,error:m}=u;return h?{id:c,pubkey:n.pubkey,method:h,params:p,event:n}:{id:c,result:g,error:m,event:n}}async sendResponse(n,s,o,u=24133,c){const h={id:n,result:o};c&&(h.error=c);const p=await this.signer.user(),g=this.ndk.getUser({pubkey:s}),m=new NDKEvent(this.ndk,{kind:u,content:JSON.stringify(h),tags:[["p",s]],pubkey:p.pubkey});m.content=await this.signer.encrypt(g,m.content,this.encryptionType),await m.sign(this.signer),await m.publish(this.relaySet)}async sendRequest(n,s,o=[],u=24133,c){console.log("Sending request",s,o);const h=Math.random().toString(36).substring(7),p=await this.signer.user(),g=this.ndk.getUser({pubkey:n}),m={id:h,method:s,params:o},v=new Promise(()=>{const _=C=>{C.result==="auth_url"?(this.once(`response-${h}`,_),this.emit("authUrl",C.error)):c&&c(C)};this.once(`response-${h}`,_)});console.log("Sending request",m);const b=new NDKEvent(this.ndk,{kind:u,content:JSON.stringify(m),tags:[["p",n]],pubkey:p.pubkey});return b.content=await this.signer.encrypt(g,b.content,this.encryptionType),await b.sign(this.signer),await b.publish(this.relaySet),v}};async function ndkSignerFromPayload(r,n){let s;try{s=JSON.parse(r)}catch(u){console.error("Failed to parse signer payload string",r,u);return}if(!s||typeof s.type!="string"){console.error("Failed to parse signer payload string",r,new Error("Missing type field"));return}const o=signerRegistry.get(s.type);if(!o)throw new Error(`Unknown signer type: ${s.type}`);try{return await o.fromPayload(r,n)}catch(u){const c=u instanceof Error?u.message:String(u);throw new Error(`Failed to deserialize signer type ${s.type}: ${c}`)}}function nostrConnectGenerateSecret(){return Math.random().toString(36).substring(2,15)}function generateNostrConnectUri(r,n,s,o){const u={name:o!=null&&o.name?encodeURIComponent(o.name):"",url:o!=null&&o.url?encodeURIComponent(o.url):"",image:o!=null&&o.image?encodeURIComponent(o.image):"",perms:o!=null&&o.perms?encodeURIComponent(o.perms):""};let c=`nostrconnect://${r}?image=${u.image}&url=${u.url}&name=${u.name}&perms=${u.perms}&secret=${encodeURIComponent(n)}`;return s&&(c+=`&relay=${encodeURIComponent(s)}`),c}var NDKNip46Signer=class sa extends libExports.EventEmitter{constructor(s,o,u,c,h){super();A(this,"ndk");A(this,"_user");A(this,"bunkerPubkey");A(this,"userPubkey");A(this,"secret");A(this,"localSigner");A(this,"nip05");A(this,"rpc");A(this,"debug");A(this,"relayUrls");A(this,"subscription");A(this,"nostrConnectUri");A(this,"nostrConnectSecret");this.ndk=s,this.debug=s.debug.extend("nip46:signer"),this.relayUrls=c,u?typeof u=="string"?this.localSigner=new NDKPrivateKeySigner(u):this.localSigner=u:this.localSigner=NDKPrivateKeySigner.generate(),o===!1||(o?o.startsWith("bunker://")?this.bunkerFlowInit(o):this.nip05Init(o):this.nostrconnectFlowInit(h)),this.rpc=new NDKNostrRpc(this.ndk,this.localSigner,this.debug,this.relayUrls)}get pubkey(){if(!this.userPubkey)throw new Error("Not ready");return this.userPubkey}static bunker(s,o,u){return new sa(s,o,u)}static nostrconnect(s,o,u,c){return new sa(s,void 0,u,[o],c)}nostrconnectFlowInit(s){var u;this.nostrConnectSecret=nostrConnectGenerateSecret();const o=this.localSigner.pubkey;this.nostrConnectUri=generateNostrConnectUri(o,this.nostrConnectSecret,(u=this.relayUrls)==null?void 0:u[0],s)}bunkerFlowInit(s){const o=new URL(s),u=o.hostname||o.pathname.replace(/^\/\//,""),c=o.searchParams.get("pubkey"),h=o.searchParams.getAll("relay"),p=o.searchParams.get("secret");this.bunkerPubkey=u,this.userPubkey=c,this.relayUrls=h,this.secret=p}nip05Init(s){this.nip05=s}async startListening(){if(this.subscription)return;const s=await this.localSigner.user();if(!s)throw new Error("Local signer not ready");this.subscription=await this.rpc.subscribe({kinds:[24133],"#p":[s.pubkey]})}async user(){return this._user?this._user:this.blockUntilReady()}get userSync(){if(!this._user)throw new Error("Remote user not ready synchronously");return this._user}async blockUntilReadyNostrConnect(){return new Promise((s,o)=>{const u=c=>{c.result===this.nostrConnectSecret&&(this._user=c.event.author,this.userPubkey=c.event.pubkey,this.bunkerPubkey=c.event.pubkey,this.rpc.off("response",u),s(this._user))};this.startListening(),this.rpc.on("response",u)})}async blockUntilReady(){if(!this.bunkerPubkey&&!this.nostrConnectSecret&&!this.nip05)throw new Error("Bunker pubkey not set");if(this.nostrConnectSecret)return this.blockUntilReadyNostrConnect();if(this.nip05&&!this.userPubkey){const s=await NDKUser.fromNip05(this.nip05,this.ndk);s&&(this._user=s,this.userPubkey=s.pubkey,this.relayUrls=s.nip46Urls,this.rpc=new NDKNostrRpc(this.ndk,this.localSigner,this.debug,this.relayUrls))}if(!this.bunkerPubkey&&this.userPubkey)this.bunkerPubkey=this.userPubkey;else if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");return await this.startListening(),this.rpc.on("authUrl",(...s)=>{this.emit("authUrl",...s)}),new Promise((s,o)=>{const u=[this.userPubkey??""];if(this.secret&&u.push(this.secret),!this.bunkerPubkey)throw new Error("Bunker pubkey not set");console.log("sending connect"),this.rpc.sendRequest(this.bunkerPubkey,"connect",u,24133,c=>{c.result==="ack"?this.getPublicKey().then(h=>{this.userPubkey=h,this._user=this.ndk.getUser({pubkey:h}),s(this._user)}):o(c.error)})})}stop(){var s;(s=this.subscription)==null||s.stop(),this.subscription=void 0}async getPublicKey(){return this.userPubkey?this.userPubkey:new Promise((s,o)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"get_public_key",[],24133,u=>{s(u.result)})})}async encryptionEnabled(s){return s?[s]:Promise.resolve(["nip04","nip44"])}async encrypt(s,o,u="nip04"){return this.encryption(s,o,u,"encrypt")}async decrypt(s,o,u="nip04"){return this.encryption(s,o,u,"decrypt")}async encryption(s,o,u,c){return new Promise((p,g)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,`${u}_${c}`,[s.pubkey,o],24133,m=>{m.error?g(m.error):p(m.result)})})}async sign(s){return new Promise((u,c)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"sign_event",[JSON.stringify(s)],24133,h=>{if(h.error)c(h.error);else{const p=JSON.parse(h.result);u(p.sig)}})})}async createAccount(s,o,u){await this.startListening();const c=[];return s&&c.push(s),o&&c.push(o),u&&c.push(u),new Promise((h,p)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"create_account",c,24133,g=>{if(g.error)p(g.error);else{const m=g.result;h(m)}})})}toPayload(){if(!this.bunkerPubkey||!this.userPubkey)throw new Error("NIP-46 signer is not fully initialized for serialization");const s={type:"nip46",payload:{bunkerPubkey:this.bunkerPubkey,userPubkey:this.userPubkey,relayUrls:this.relayUrls,secret:this.secret,localSignerPayload:this.localSigner.toPayload(),nip05:this.nip05||null}};return JSON.stringify(s)}static async fromPayload(s,o){if(console.log("from payload",s),!o)throw new Error("NDK instance is required to deserialize NIP-46 signer");const u=JSON.parse(s);if(u.type!=="nip46")throw new Error(`Invalid payload type: expected 'nip46', got ${u.type}`);const c=u.payload;if(!c||typeof c!="object"||!c.localSignerPayload)throw new Error("Invalid payload content for nip46 signer");const h=await ndkSignerFromPayload(c.localSignerPayload,o);if(!h)throw new Error("Failed to deserialize local signer for NIP-46");if(!(h instanceof NDKPrivateKeySigner))throw new Error("Local signer must be an instance of NDKPrivateKeySigner");let p;return console.log("restore payload",c),p=new sa(o,!1,h,c.relayUrls),p.userPubkey=c.userPubkey,p.bunkerPubkey=c.bunkerPubkey,p.relayUrls=c.relayUrls,p.secret=c.secret,c.userPubkey&&(p._user=new NDKUser({pubkey:c.userPubkey}),p._user&&(p._user.ndk=o)),p}};registerSigner("nip46",NDKNip46Signer);function dedup(r,n){return r.created_at>n.created_at?r:n}async function getRelayListForUser(r,n){return(await getRelayListForUsers([r],n)).get(r)}async function getRelayListForUsers(r,n,s=!1,o=1e3){var b;const u=n.outboxPool||n.pool,c=new Set;for(const _ of u.relays.values())c.add(_);const h=new Map,p=new Map,g=new NDKRelaySet(c,n);if((b=n.cacheAdapter)!=null&&b.locking&&!s){const _=await n.fetchEvents({kinds:[3,10002],authors:Array.from(new Set(r))},{cacheUsage:"ONLY_CACHE",subId:"ndk-relay-list-fetch"});for(const C of _)C.kind===10002&&h.set(C.pubkey,NDKRelayList.from(C));for(const C of _)if(C.kind===3){if(h.has(C.pubkey))continue;const z=relayListFromKind3(n,C);z&&p.set(C.pubkey,z)}r=r.filter(C=>!h.has(C)&&!p.has(C))}if(r.length===0)return h;const m=new Map,v=new Map;return new Promise(_=>{(async()=>{const z={closeOnEose:!0,pool:u,groupable:!0,subId:"ndk-relay-list-fetch",addSinceFromCache:!0,relaySet:g};g&&(z.relaySet=g),n.subscribe({kinds:[3,10002],authors:r},z,{onEvent:x=>{if(x.kind===10002){const R=m.get(x.pubkey);if(R&&R.created_at>x.created_at)return;m.set(x.pubkey,x)}else if(x.kind===3){const R=v.get(x.pubkey);if(R&&R.created_at>x.created_at)return;v.set(x.pubkey,x)}},onEose:()=>{for(const x of m.values())h.set(x.pubkey,NDKRelayList.from(x));for(const x of r){if(h.has(x))continue;const R=v.get(x);if(!R)continue;const O=relayListFromKind3(n,R);O&&h.set(x,O)}_(h)}}),setTimeout(()=>{_(h)},o)})()})}var OutboxItem=class{constructor(r){A(this,"type");A(this,"relayUrlScores");A(this,"readRelays");A(this,"writeRelays");this.type=r,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}},OutboxTracker=class extends libExports.EventEmitter{constructor(n){super();A(this,"data");A(this,"ndk");A(this,"debug");this.ndk=n,this.debug=n.debug.extend("outbox-tracker"),this.data=new distExports.LRUCache({maxSize:1e5,entryExpirationTimeInMS:2*60*1e3})}async trackUsers(n,s=!1){const o=[];for(let u=0;u<n.length;u+=400){const h=n.slice(u,u+400).map(p=>getKeyFromItem(p)).filter(p=>!this.data.has(p));if(h.length!==0){for(const p of h)this.data.set(p,new OutboxItem("user"));o.push(new Promise(p=>{getRelayListForUsers(h,this.ndk,s).then(g=>{for(const[m,v]of g){let b=this.data.get(m);if(b??(b=new OutboxItem("user")),v){b.readRelays=new Set(normalize(v.readRelayUrls)),b.writeRelays=new Set(normalize(v.writeRelayUrls));for(const _ of b.readRelays)this.ndk.pool.blacklistRelayUrls.has(_)&&b.readRelays.delete(_);for(const _ of b.writeRelays)this.ndk.pool.blacklistRelayUrls.has(_)&&b.writeRelays.delete(_);this.data.set(m,b)}}}).finally(p)}))}}return Promise.all(o)}track(n,s,o=!0){const u=getKeyFromItem(n);s??(s=getTypeFromItem(n));let c=this.data.get(u);return c||(c=new OutboxItem(s),n instanceof NDKUser&&this.trackUsers([n])),c}};function getKeyFromItem(r){return r instanceof NDKUser?r.pubkey:r}function getTypeFromItem(r){return r instanceof NDKUser?"user":"kind"}function correctRelaySet(r,n){const s=n.connectedRelays();if(!Array.from(r.relays).some(u=>s.map(c=>c.url).includes(u.url)))for(const u of s)r.addRelay(u);if(s.length===0)for(const u of n.relays.values())r.addRelay(u);return r}var NDKSubscriptionManager=class{constructor(){A(this,"subscriptions");A(this,"seenEvents",new Map);this.subscriptions=new Map}add(r){this.subscriptions.set(r.internalId,r),r.onStopped,r.onStopped=()=>{this.subscriptions.delete(r.internalId)},r.on("close",()=>{this.subscriptions.delete(r.internalId)})}seenEvent(r,n){const s=this.seenEvents.get(r)||[];s.push(n),this.seenEvents.set(r,s)}dispatchEvent(r,n,s=!1){n&&this.seenEvent(r.id,n);const o=this.subscriptions.values(),u=[];for(const c of o)matchFilters(c.filters,r)&&u.push(c);for(const c of u)c.eventReceived(r,n,!1,s)}},debug7=createDebug5("ndk:active-user");async function getUserRelayList(r){if(!this.autoConnectUserRelays)return;const n=await getRelayListForUser(r.pubkey,this);if(n){for(const s of n.relays){let o=this.pool.relays.get(s);o||(o=new NDKRelay(s,this.relayAuthDefaultPolicy,this),this.pool.addRelay(o))}return n}}async function setActiveUser(r){const n=this.outboxPool||this.pool;n.connectedRelays.length>0?setActiveUserConnected.call(this,r):n.once("connect",()=>{setActiveUserConnected.call(this,r)})}async function setActiveUserConnected(r){var c;const n=await getUserRelayList.call(this,r),s=[{kinds:[10006],authors:[r.pubkey]}];this.autoFetchUserMutelist&&((c=s[0].kinds)==null||c.push(1e4));const o=new Map,u=n?n.relaySet:void 0;this.subscribe(s,{subId:"active-user-settings",closeOnEose:!0,relaySet:u},{onEvent:h=>{const p=o.get(h.kind);p&&p.created_at>=h.created_at||o.set(h.kind,h)},onEose:()=>{for(const h of o.values())processEvent.call(this,h)}})}async function processEvent(r){r.kind===10006?processBlockRelayList.call(this,r):r.kind===1e4&&processMuteList.call(this,r)}function processBlockRelayList(r){const n=lists_default.from(r);for(const s of n.items)this.pool.blacklistRelayUrls.add(s[0]);debug7("Added %d relays to relay blacklist",n.items.length)}function processMuteList(r){const n=lists_default.from(r);for(const s of n.items)this.mutedIds.set(s[1],s[0]);debug7("Added %d users to mute list",n.items.length)}function getEntity(r){try{const n=nip19_exports.decode(r);return n.type==="npub"?npub(this,n.data):n.type==="nprofile"?nprofile(this,n.data):n}catch{return null}}function npub(r,n){return r.getUser({pubkey:n})}function nprofile(r,n){const s=r.getUser({pubkey:n.pubkey});return n.relays&&(s.relayUrls=n.relays),s}function isValidHint(r){if(!r||r==="")return!1;try{return new URL(r),!0}catch{return!1}}async function fetchEventFromTag(r,n,s,o={type:"timeout"}){const u=this.debug.extend("fetch-event-from-tag"),[c,h,p]=r;s={},u("fetching event from tag",r,s,o);const g=getRelaysForSync(this,n.pubkey);if(g&&g.size>0){u("fetching event from author relays %o",Array.from(g));const x=NDKRelaySet.fromRelayUrls(Array.from(g),this),R=await this.fetchEvent(h,s,x);if(R)return R}else u("no author relays found for %s",n.pubkey,n);const m=calculateRelaySetsFromFilters(this,[{ids:[h]}],this.pool);u("fetching event without relay hint",m);const v=await this.fetchEvent(h,s);if(v)return v;if(p&&p!==""){const x=await this.fetchEvent(h,s,this.pool.getRelay(p,!0,!0,[{ids:[h]}]));if(x)return x}let b;const _=isValidHint(p)?this.pool.getRelay(p,!1,!0,[{ids:[h]}]):void 0,C=new Promise(x=>{this.fetchEvent(h,s,_).then(x)});if(!isValidHint(p)||o.type==="none")return C;const z=new Promise(async x=>{const R=o.relaySet,O=o.timeout??1500,P=new Promise(I=>setTimeout(I,O));if(o.type==="timeout"&&await P,b)x(b);else{u("fallback fetch triggered");const I=await this.fetchEvent(h,s,R);x(I)}});switch(o.type){case"timeout":return Promise.race([C,z]);case"eose":return b=await C,b||z}}var Queue=class{constructor(r,n){A(this,"queue",[]);A(this,"maxConcurrency");A(this,"processing",new Set);A(this,"promises",new Map);this.maxConcurrency=n}add(r){if(this.promises.has(r.id))return this.promises.get(r.id);const n=new Promise((s,o)=>{this.queue.push({...r,func:()=>r.func().then(u=>(s(u),u),u=>{throw o(u),u})}),this.process()});return this.promises.set(r.id,n),n.finally(()=>{this.promises.delete(r.id),this.processing.delete(r.id),this.process()}),n}process(){if(this.processing.size>=this.maxConcurrency||this.queue.length===0)return;const r=this.queue.shift();!r||this.processing.has(r.id)||(this.processing.add(r.id),r.func())}clear(){this.queue=[]}clearProcessing(){this.processing.clear()}clearAll(){this.clear(),this.clearProcessing()}length(){return this.queue.length}},DEFAULT_OUTBOX_RELAYS=["wss://purplepag.es/","wss://nos.lol/"],DEFAULT_BLACKLISTED_RELAYS=["wss://brb.io/","wss://nostr.mutinywallet.com/"],NDK=class extends libExports.EventEmitter{constructor(n={}){super();A(this,"_explicitRelayUrls");A(this,"blacklistRelayUrls");A(this,"pool");A(this,"outboxPool");A(this,"_signer");A(this,"_activeUser");A(this,"cacheAdapter");A(this,"debug");A(this,"devWriteRelaySet");A(this,"outboxTracker");A(this,"mutedIds");A(this,"clientName");A(this,"clientNip89");A(this,"queuesZapConfig");A(this,"queuesNip05");A(this,"asyncSigVerification",!1);A(this,"initialValidationRatio",1);A(this,"lowestValidationRatio",.1);A(this,"validationRatioFn");A(this,"autoBlacklistInvalidRelays",!1);A(this,"subManager");A(this,"_signatureVerificationFunction");A(this,"_signatureVerificationWorker");A(this,"signatureVerificationTimeMs",0);A(this,"publishingFailureHandled",!1);A(this,"pools",[]);A(this,"relayAuthDefaultPolicy");A(this,"httpFetch");A(this,"netDebug");A(this,"autoConnectUserRelays",!0);A(this,"autoFetchUserMutelist",!0);A(this,"walletConfig");A(this,"fetchEventFromTag",fetchEventFromTag.bind(this));A(this,"getEntity",getEntity.bind(this));this.debug=n.debug||createDebug5("ndk"),this.netDebug=n.netDebug,this._explicitRelayUrls=n.explicitRelayUrls||[],this.blacklistRelayUrls=n.blacklistRelayUrls||DEFAULT_BLACKLISTED_RELAYS,this.subManager=new NDKSubscriptionManager,this.pool=new NDKPool(n.explicitRelayUrls||[],[],this),this.pool.name="Main",this.pool.on("relay:auth",async(s,o)=>{this.relayAuthDefaultPolicy&&await this.relayAuthDefaultPolicy(s,o)}),this.autoConnectUserRelays=n.autoConnectUserRelays??!0,this.autoFetchUserMutelist=n.autoFetchUserMutelist??!0,this.clientName=n.clientName,this.clientNip89=n.clientNip89,this.relayAuthDefaultPolicy=n.relayAuthDefaultPolicy,n.enableOutboxModel&&(this.outboxPool=new NDKPool(n.outboxRelayUrls||DEFAULT_OUTBOX_RELAYS,[],this,{debug:this.debug.extend("outbox-pool"),name:"Outbox Pool"}),this.outboxTracker=new OutboxTracker(this)),this.signer=n.signer,this.cacheAdapter=n.cacheAdapter,this.mutedIds=n.mutedIds||new Map,n.devWriteRelayUrls&&(this.devWriteRelaySet=NDKRelaySet.fromRelayUrls(n.devWriteRelayUrls,this)),this.queuesZapConfig=new Queue("zaps",3),this.queuesNip05=new Queue("nip05",10),n.signatureVerificationWorker&&(this.signatureVerificationWorker=n.signatureVerificationWorker),n.signatureVerificationFunction&&(this.signatureVerificationFunction=n.signatureVerificationFunction),this.initialValidationRatio=n.initialValidationRatio||1,this.lowestValidationRatio=n.lowestValidationRatio||.1,this.autoBlacklistInvalidRelays=n.autoBlacklistInvalidRelays||!1,this.validationRatioFn=n.validationRatioFn||this.defaultValidationRatioFn;try{this.httpFetch=fetch}catch{}}set explicitRelayUrls(n){this._explicitRelayUrls=n.map(normalizeRelayUrl),this.pool.relayUrls=n}get explicitRelayUrls(){return this._explicitRelayUrls||[]}set signatureVerificationWorker(n){this._signatureVerificationWorker=n,n?(signatureVerificationInit(n),this.asyncSigVerification=!0):this.asyncSigVerification=!1}set signatureVerificationFunction(n){this._signatureVerificationFunction=n,this.asyncSigVerification=!!n}get signatureVerificationFunction(){return this._signatureVerificationFunction}addExplicitRelay(n,s,o=!0){var c;let u;return typeof n=="string"?u=new NDKRelay(n,s,this):u=n,this.pool.addRelay(u,o),(c=this.explicitRelayUrls)==null||c.push(u.url),u}toJSON(){return{relayCount:this.pool.relays.size}.toString()}get activeUser(){return this._activeUser}set activeUser(n){var o;const s=((o=this._activeUser)==null?void 0:o.pubkey)!==(n==null?void 0:n.pubkey);this._activeUser=n,n&&s?setActiveUser.call(this,n):n||(this.mutedIds=new Map)}get signer(){return this._signer}set signer(n){this._signer=n,n&&this.emit("signer:ready",n),n==null||n.user().then(s=>{s.ndk=this,this.activeUser=s})}async connect(n){var o,u;this._signer&&this.autoConnectUserRelays&&(this.debug("Attempting to connect to user relays specified by signer %o",await((u=(o=this._signer).relays)==null?void 0:u.call(o,this))),this._signer.relays&&(await this._signer.relays(this)).forEach(h=>this.pool.addRelay(h)));const s=[this.pool.connect(n)];return this.outboxPool&&s.push(this.outboxPool.connect(n)),Promise.allSettled(s).then(()=>{})}reportInvalidSignature(n,s){this.debug(`Invalid signature detected for event ${n.id}${s?` from relay ${s.url}`:""}`),this.emit("event:invalid-sig",n,s),this.autoBlacklistInvalidRelays&&s&&this.blacklistRelay(s.url)}blacklistRelay(n){if(this.blacklistRelayUrls||(this.blacklistRelayUrls=[]),!this.blacklistRelayUrls.includes(n)){this.blacklistRelayUrls.push(n),this.debug(`Added relay to blacklist: ${n}`);const s=this.pool.getRelay(n,!1,!1);s&&(s.disconnect(),this.debug(`Disconnected from blacklisted relay: ${n}`))}}defaultValidationRatioFn(n,s,o){if(s<10)return this.initialValidationRatio;const u=Math.min(s/100,1),c=this.initialValidationRatio*(1-u)+this.lowestValidationRatio*u;return Math.max(c,this.lowestValidationRatio)}getUser(n){const s=new NDKUser(n);return s.ndk=this,s}async getUserFromNip05(n,s=!1){return NDKUser.fromNip05(n,this,s)}subscribe(n,s,o=!0,u=!0){var m;let c=s==null?void 0:s.relaySet,h=u;o instanceof NDKRelaySet?(console.warn("relaySet is deprecated, use opts.relaySet instead. This will be removed in version v2.14.0"),c=o,h=u):(typeof o=="boolean"||typeof o=="object")&&(h=o);const p=new NDKSubscription(this,n,{relaySet:c,...s});this.subManager.add(p);const g=p.pool;if(p.relaySet)for(const v of p.relaySet.relays)g.useTemporaryRelay(v,void 0,p.filters);if(this.outboxPool&&p.hasAuthorsFilter()){const v=p.filters.filter(b=>{var _;return b.authors&&((_=b.authors)==null?void 0:_.length)>0}).flatMap(b=>b.authors);(m=this.outboxTracker)==null||m.trackUsers(v)}if(h){let v;typeof h=="object"&&(h.onEvent&&p.on("event",h.onEvent),h.onEose&&p.on("eose",h.onEose),h.onEvents&&(v=h.onEvents)),setTimeout(()=>{const b=p.start(!v);b&&b.length>0&&v&&v(b)},0)}return p}fetchEventSync(n){if(!this.cacheAdapter)throw new Error("Cache adapter not set");let s;typeof n=="string"?s=[filterFromId(n)]:s=n;const o=new NDKSubscription(this,s),u=this.cacheAdapter.query(o);if(u instanceof Promise)throw new Error("Cache adapter is async");return u.map(c=>(c.ndk=this,c))}async fetchEvent(n,s,o){let u,c;if(o instanceof NDKRelay?c=new NDKRelaySet(new Set([o]),this):o instanceof NDKRelaySet&&(c=o),!o&&typeof n=="string"&&!isNip33AValue(n)){const h=relaysFromBech32(n,this);h.length>0&&(c=new NDKRelaySet(new Set(h),this),c=correctRelaySet(c,this.pool))}if(typeof n=="string"?u=[filterFromId(n)]:Array.isArray(n)?u=n:u=[n],u.length===0)throw new Error(`Invalid filter: ${JSON.stringify(n)}`);return new Promise(h=>{let p=null;const g={...s||{},closeOnEose:!0};c&&(g.relaySet=c);const m=this.subscribe(u,g,!1),v=setTimeout(()=>{m.stop(),h(p)},1e4);m.on("event",b=>{b.ndk=this,b.isReplaceable()?(!p||p.created_at<b.created_at)&&(p=b):(clearTimeout(v),h(b))}),m.on("eose",()=>{clearTimeout(v),h(p)}),m.start()})}async fetchEvents(n,s,o){return new Promise(u=>{const c=new Map,h={...s||{},closeOnEose:!0};o&&(h.relaySet=o);const p=this.subscribe(n,h,!1),g=m=>{let v;m instanceof NDKEvent?v=m:v=new NDKEvent(void 0,m);const b=v.deduplicationKey(),_=c.get(b);_&&(v=dedup(_,v)),v.ndk=this,c.set(b,v)};p.on("event",g),p.on("eose",()=>{u(new Set(c.values()))}),p.start()})}assertSigner(){if(!this.signer)throw this.emit("signer:required"),new Error("Signer required")}set wallet(n){var s,o;if(!n){this.walletConfig=void 0;return}this.walletConfig??(this.walletConfig={}),this.walletConfig.lnPay=(s=n==null?void 0:n.lnPay)==null?void 0:s.bind(n),this.walletConfig.cashuPay=(o=n==null?void 0:n.cashuPay)==null?void 0:o.bind(n)}};createDebug5("ndk:zapper:ln");createDebug5("ndk:zapper");const isWriteRelay=r=>r.type.includes("Write"),isReadRelay=r=>r.type.includes("Read"),formatDateForInput=r=>{const n=r.getFullYear(),s=(r.getMonth()+1).toString().padStart(2,"0"),o=r.getDate().toString().padStart(2,"0"),u=r.getHours().toString().padStart(2,"0"),c=r.getMinutes().toString().padStart(2,"0");return`${n}-${s}-${o}T${u}:${c}`};async function fetchOutboxRelays(r,n,s){try{const o={kinds:[NDKKind.RelayList],authors:[n]};let u=null;if(s){const c=NDKRelaySet.fromRelayUrls(s,r);u=await r.fetchEvent(o,{},c)}else u=await r.fetchEvent(o);if(u&&u.tags){const c=u.tags.filter(h=>h[0]==="r"&&typeof h[1]=="string").map(h=>({url:normalizeURL(h[1]),type:h[2]?h[2]==="read"?"📖 Read":"✍️ Write":"📖✍️ Read/Write"}));return c.length>0?c:null}return console.log(`NIP-65 (Kind ${NDKKind.RelayList}) event not found for pubkey: ${n}`),null}catch(o){return console.error("NDK Outbox relay fetch error:",o),null}}async function syncEvents(r,n,s,o,u,c){if(n.length===0)return c({status:"error",message:"Error: No relays found in NIP-65 list."}),!1;const h=NDKRelaySet.fromRelayUrls(n,r);let p=o;const g=20;s.limit=g;let m=!0,v=0;c({status:"fetching_batch",message:`Identified ${n.length} target relays. Starting sync...`,syncedUntilTimestamp:p,stopAtTimestamp:u}),console.log("Starting sync for filter:",s,"on relays:",n);try{for(;;){c({status:"fetching_batch",message:`Fetching max ${g} notes before ${new Date(p*1e3).toLocaleString()}... (Total synced: ${v})`,syncedUntilTimestamp:p,stopAtTimestamp:u}),s.until=p;const b=[];try{await new Promise(x=>{r.subscribe(s,{groupable:!0,groupableDelay:1e3,closeOnEose:!0,relaySet:h},{onEvent:R=>{b.push(R)},onEose:()=>{x(b)}})}),console.log(`Fetched ${b.length} events for batch before ${p}`)}catch(x){return console.error("Error fetching event batch with querySync:",x),c({status:"error",message:"Error fetching event batch.",syncedUntilTimestamp:p,stopAtTimestamp:u,errorDetails:x instanceof Error?x.message:String(x)}),!1}if(b.length===0)return c({status:"complete",message:`Sync complete! No more older events found${u?" within range":""}. Total synced: ${v}`,syncedUntilTimestamp:p,stopAtTimestamp:u}),!0;b.sort((x,R)=>R.created_at-x.created_at);const _=b.slice(0,g),C=_[_.length-1].created_at;for(const[,x]of r.pool.relays)if(h.relays.has(x)&&!x.connected)return console.warn("disconnected relay: ",x),c({status:"error",message:"stop",errorDetails:`Unable to connect ${x.url}`,syncedUntilTimestamp:p}),!1;for(const x of _){if(u&&x.created_at<u){console.log(`Event ${x.id.substring(0,8)} (${x.created_at}) is older than stopAt timestamp (${u}). Stopping processing this batch.`);break}c({status:"syncing_event",message:`Syncing event ${x.id.substring(0,8)}... (created: ${new Date(x.created_at*1e3).toLocaleString()})`,currentEventId:x.id,syncedUntilTimestamp:p}),console.log(`Attempting to sync event ${x.id} to ${n.length} target relays.`);const R=r.subManager.seenEvents.get(x.id),O=R?R.map(te=>te.url):[],P=n.filter(te=>!O.includes(te)),I=NDKRelaySet.fromRelayUrls(P,r);if(I.size===0){console.log(`Event ${x.id.substring(0,8)} already exists on all target relays according to seenOn.`),v++;continue}console.log(`Publishing event ${x.id.substring(0,8)} to ${I.size} relays: ${P.join(", ")}`);try{await x.publish(I,5e3,I.size),v++}catch(te){let T="Unknown failure reason";if(te instanceof NDKPublishError){const $=Array.from(te.errors.entries()).map(([N,V])=>`${N.url}: ${V.message}`).join("; ");T=`Failed relays (${te.errors.size}): ${$}`,console.warn("Publish failed. Errors per relay:",te.errors.entries())}else te instanceof Error?T=te.message:T=String(te);if(T.includes("deletion"))console.log(`user requested deletion: ${x.id}`);else{const $=`Error publishing event ${x.id}. Stopping sync.`;return c({status:"error",message:$,currentEventId:x.id,syncedUntilTimestamp:p,errorDetails:T}),!1}}await new Promise(te=>setTimeout(te,1e4))}if(p=C-1,u&&C<=u)return c({status:"complete",message:`Sync complete! Reached the specified oldest date. Total synced: ${v}`,syncedUntilTimestamp:p,stopAtTimestamp:u}),!0;c({status:"batch_complete",message:`Batch synced. Continuing before ${new Date(p*1e3).toLocaleString()} (Total synced: ${v})`,syncedUntilTimestamp:p}),await new Promise(x=>setTimeout(x,1e4))}}catch(b){c({status:"error",message:"Unhandled sync error.",syncedUntilTimestamp:p,errorDetails:b instanceof Error?b.message:String(b)}),console.error("Unhandled sync error:",b),m=!1}return m}function InputSection({input:r,setInput:n,handleDecode:s,isDecoding:o,isWriteSyncing:u,isReadSyncing:c,decodeError:h}){const p=u||c;return jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1rem"},children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"npub1... or nprofile1...",value:r,onChange:g=>n(g.target.value),disabled:o||p,style:{width:"calc(100% - 110px)",padding:"0.5rem",fontSize:"1rem",marginRight:"10px"}}),jsxRuntimeExports.jsx("button",{onClick:s,disabled:o||p,style:{padding:"0.5rem 1rem"},children:o?"Decoding...":"Decode"}),h&&jsxRuntimeExports.jsxs("div",{style:{marginTop:"0.5rem",color:"red"},children:["Error: ",h]})]})}function DecodedInfoSection({decodedHex:r,profileRelays:n}){return r?jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1rem"},children:[jsxRuntimeExports.jsx("strong",{children:"🔓 HEX pubkey:"}),jsxRuntimeExports.jsx("pre",{style:{background:"#f0f0f0",padding:"0.5rem",overflowX:"auto",marginBottom:"0.5rem"},children:r}),n&&n.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"ℹ️ Relays from nprofile:"}),jsxRuntimeExports.jsx("ul",{style:{background:"#f8f8f8",padding:"0.5rem 1rem",listStyle:"none",margin:"0.5rem 0",maxHeight:"60px",overflowY:"auto"},children:n.map((s,o)=>jsxRuntimeExports.jsx("li",{style:{wordBreak:"break-all"},children:s},o))})]})]}):null}const DEFAULT_RELAYS=["wss://hbr.coracle.social/","wss://nos.lol/","wss://purplepag.es/","wss://relay.nostr.band/"],MAX_WRITE_RELAYS=5,MAX_READ_RELAYS=5,DEFAULT_OLDEST_DATE_STR="1970-01-01T00:00",getDefaultStartDateStr=()=>formatDateForInput(new Date);function SyncSection({title:r,targetRelayUrls:n,canStartSync:s,pubkey:o,syncProgress:u,isSyncing:c,onStartSync:h,isDisabledByLimit:p,startDate:g,endDate:m,onStartDateChange:v,onEndDateChange:b,updateSyncProgress:_}){const C=()=>{h()},z=R=>{v(R.target.value),_({status:"idle",message:"start date changed"})},x=R=>{b(R.target.value)};return jsxRuntimeExports.jsxs("div",{style:{flex:1,border:"1px solid #ccc",padding:"1rem",margin:"0.5rem",display:"flex",flexDirection:"column"},children:[jsxRuntimeExports.jsxs("h3",{children:[r," (",n.length," Relays)"]}),n.length>0&&jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1rem"},children:[jsxRuntimeExports.jsx("strong",{children:"Target Relays:"}),jsxRuntimeExports.jsx("ul",{style:{background:"#f9f9f9",padding:"0.5rem 1rem",listStyle:"none",margin:"0.5rem 0",fontSize:"0.9em",border:"1px solid #eee"},children:n.map((R,O)=>jsxRuntimeExports.jsx("li",{style:{wordBreak:"break-all"},children:R},O))})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:"1rem",display:"flex",gap:"1rem",alignItems:"center",flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs("label",{style:{fontSize:"0.9em",display:"flex",flexDirection:"column"},children:["Sync From (Newest):",jsxRuntimeExports.jsx("input",{type:"datetime-local",value:g,onChange:z,disabled:c,style:{marginLeft:"5px"}})]}),jsxRuntimeExports.jsxs("label",{style:{fontSize:"0.9em",display:"flex",flexDirection:"column"},children:["Sync Until (Oldest):",jsxRuntimeExports.jsx("input",{type:"datetime-local",value:m,onChange:x,disabled:c,style:{marginLeft:"5px"}})]})]}),jsxRuntimeExports.jsx("button",{onClick:C,disabled:c||n.length===0||!s||!o||p||u.status==="fetching_batch"||u.status==="syncing_event",style:{padding:"0.5rem 1rem",marginBottom:"1rem",alignSelf:"flex-start"},children:p?"Too Many Relays":c?"Syncing...":`Start ${r}`}),jsxRuntimeExports.jsxs("div",{style:{minHeight:"6em",marginTop:"auto"},children:[" ",jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Status:"})," ",u.message]}),u.syncedUntilTimestamp&&jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Processed events before:"," ",new Date(u.syncedUntilTimestamp*1e3).toLocaleString()]}),c&&u.currentEventId&&jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.9em",color:"#555"},children:["Current Event: ",u.currentEventId.substring(0,10),"..."]}),u.status==="error"&&u.errorDetails&&jsxRuntimeExports.jsxs("div",{style:{fontSize:"0.9em",color:"red",marginTop:"0.5em",wordBreak:"break-word"},children:[jsxRuntimeExports.jsx("strong",{children:"Details:"})," ",u.errorDetails]}),u.status==="complete"&&jsxRuntimeExports.jsx("div",{style:{color:"green",fontWeight:"bold",marginTop:"0.5em"},children:"Synchronization finished!"})]})]})}const ndk=new NDK({explicitRelayUrls:DEFAULT_RELAYS,enableOutboxModel:!0,autoFetchUserMutelist:!1,autoConnectUserRelays:!0}),autoAuthPolicy=async(r,n)=>(console.log(`AUTH challenge received from ${r.url}:`,n),!ndk.signer?(console.log(`Policy decides *not* to authenticate with ${r.url}.`),!1):(console.log(`Policy decides to authenticate with ${r.url}. NDK will use the signer.`),!0));ndk.relayAuthDefaultPolicy=autoAuthPolicy;function App(){const[r,n]=reactExports.useState(""),[s,o]=reactExports.useState(null),[u,c]=reactExports.useState(null),[h,p]=reactExports.useState(null),[g,m]=reactExports.useState(null),[v,b]=reactExports.useState(!1),[_,C]=reactExports.useState(!1),[z,x]=reactExports.useState({status:"idle",message:"Ready."}),[R,O]=reactExports.useState(!1),[P,I]=reactExports.useState({status:"idle",message:"Ready."}),te=getDefaultStartDateStr(),[T,$]=reactExports.useState(te),[N,V]=reactExports.useState(DEFAULT_OLDEST_DATE_STR),[J,ae]=reactExports.useState(te),[M,H]=reactExports.useState(DEFAULT_OLDEST_DATE_STR),[G,Z]=reactExports.useState(null);reactExports.useEffect(()=>{ndk.connect().then(()=>console.log("NDK Connected!")).catch(D=>console.error("NDK Connection Error:",D))},[]);const U=reactExports.useCallback(async()=>{b(!0),m(null),o(null),c(null),p(null),x({status:"idle",message:"Ready."}),I({status:"idle",message:"Ready."});try{const{type:D,data:W}=nip19_exports.decode(r.trim());let ie,le=null;if(D==="npub")ie=W;else if(D==="nprofile")ie=W.pubkey,le=W.relays||null;else throw new Error("Unsupported NIP-19 format. (Only npub or nprofile supported)");o(ie),c(le),x(ue=>({...ue,status:"fetching_relays",message:"Fetching NIP-65..."})),I(ue=>({...ue,status:"fetching_relays",message:"Fetching NIP-65..."}));const ce=await fetchOutboxRelays(ndk,ie,le);if(ce){p(ce);const ue=ce.filter(isWriteRelay).length,we=ce.filter(isReadRelay).length,de=`Found ${ce.length} NIP-65 relays (${ue} write, ${we} read). Ready.`;x({status:"idle",message:de}),I({status:"idle",message:de})}else{const ue="Could not find NIP-65 list. Sync disabled.";x({status:"idle",message:ue}),I({status:"idle",message:ue}),m("Could not find or fetch NIP-65 relay list (kind:10002).")}}catch(D){D instanceof Error?m(`Decoding failed: ${D.message||"Invalid NIP-19 string?"}`):m("Decoding failed: Unknown error"),x({status:"idle",message:"Decode failed."}),I({status:"idle",message:"Decode failed."})}finally{b(!1)}},[r]),S=reactExports.useCallback(async()=>{if(!s||!h||_||R)return;const D=h.filter(isWriteRelay).map(de=>de.url);if(D.length===0){x({status:"error",message:"No write relays to sync."});return}C(!0);let W;const ie=Math.floor(new Date(N).getTime()/1e3);z.syncedUntilTimestamp&&z.status==="error"?(W=z.syncedUntilTimestamp,console.log(`Resuming write sync from timestamp: ${new Date(W*1e3).toLocaleString()}`)):(W=Math.floor(new Date(T).getTime()/1e3),x(de=>({...de,syncedUntilTimestamp:void 0})));const we=await syncEvents(ndk,D,{kinds:[1,6,30023],authors:[s]},W,ie,de=>{x($e=>({...$e,...de,stopAtTimestamp:ie}))});C(!1),we&&x(de=>({...de,status:"complete",message:"Write sync finished!",syncedUntilTimestamp:void 0,stopAtTimestamp:void 0}))},[s,h,_,R,z,T,N]),L=reactExports.useCallback(async()=>{if(!s||!h||_||R)return;const D=h.filter(isReadRelay).map(de=>de.url);if(D.length===0){I({status:"error",message:"No read relays to sync."});return}O(!0);let W;const ie=Math.floor(new Date(M).getTime()/1e3);P.syncedUntilTimestamp&&P.status!=="error"?(W=P.syncedUntilTimestamp,console.log(`Resuming read sync from timestamp: ${new Date(W*1e3).toLocaleString()}`)):(W=Math.floor(new Date(J).getTime()/1e3),I(de=>({...de,syncedUntilTimestamp:void 0})));const we=await syncEvents(ndk,D,{"#p":[s],kinds:[1,6,7,9735]},W,ie,de=>{I($e=>({...$e,...de,stopAtTimestamp:ie}))});O(!1),we&&I(de=>({...de,status:"complete",message:"Read sync finished!",syncedUntilTimestamp:void 0,stopAtTimestamp:void 0}))},[s,h,_,R,P,J,M]),K=reactExports.useCallback(async()=>{if(!window.nostr){console.error("NIP-07 Extension not found on login attempt."),alert("NIP-07 compatible extension (like Alby, nos2x) not found. Please install one and refresh the page.");return}try{const D=new NDKNip07Signer;ndk.signer=D;const W=await D.user();n(W.nprofile),Z(W),W.ndk=ndk}catch(D){console.error("NIP-07 Login failed:",D),alert(`Login failed: ${D instanceof Error?D.message:String(D)}`),ndk.signer=void 0,Z(null)}},[]),se=(h==null?void 0:h.filter(isWriteRelay))||[],k=(h==null?void 0:h.filter(isReadRelay))||[];return jsxRuntimeExports.jsxs("div",{style:{padding:"2rem",fontFamily:"sans-serif",maxWidth:"800px",margin:"auto"},children:[jsxRuntimeExports.jsx("h1",{children:"Nostr Event Synchronizer"}),jsxRuntimeExports.jsx("div",{style:{marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #eee"},children:G?jsxRuntimeExports.jsxs("div",{children:["Logged in as:"," ",jsxRuntimeExports.jsx("strong",{children:nip19_exports.npubEncode(G.pubkey)})]}):jsxRuntimeExports.jsx("button",{onClick:K,children:"Login with Extension (NIP-07)"})}),jsxRuntimeExports.jsx("p",{children:"Syncs past events to your designated write and read relays based on NIP-65."}),jsxRuntimeExports.jsx(InputSection,{input:r,setInput:n,handleDecode:U,isDecoding:v,isWriteSyncing:_,isReadSyncing:R,decodeError:g}),jsxRuntimeExports.jsx(DecodedInfoSection,{decodedHex:s,profileRelays:u}),h&&s&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"📤 NIP-65 Relays Found:"}),jsxRuntimeExports.jsxs("div",{style:{display:"flex",marginTop:"1rem",gap:"1rem"},children:[jsxRuntimeExports.jsx(SyncSection,{title:"Write Relay Sync",targetRelayUrls:se.map(D=>D.url),canStartSync:!!s&&se.length>0,pubkey:s,syncProgress:z,isSyncing:_||R,onStartSync:S,isDisabledByLimit:se.length>MAX_WRITE_RELAYS,startDate:T,endDate:N,onStartDateChange:$,onEndDateChange:V,updateSyncProgress:x}),jsxRuntimeExports.jsx(SyncSection,{title:"Read Relay Sync",targetRelayUrls:k.map(D=>D.url),canStartSync:!!s&&k.length>0,pubkey:s,syncProgress:P,isSyncing:_||R,onStartSync:L,isDisabledByLimit:k.length>MAX_READ_RELAYS,startDate:J,endDate:M,onStartDateChange:ae,onEndDateChange:H,updateSyncProgress:I})]})]}),!h&&s&&!v&&!g&&jsxRuntimeExports.jsx("div",{style:{marginTop:"1rem",color:"orange"},children:"Could not find or fetch NIP-65 relay list (kind:10002). Sync is not possible."})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
